{
  "../chapter11.md": {
    "hash": "75149ce81ad942014853cc6dcf473805",
    "content": "<h1 id=\"11\">\u7b2c11\u7ae0\uff1a\u52a8\u753b\u4e0e\u7269\u7406\u6a21\u62df</h1>\n<p>\u5728\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\uff0c\u9759\u6001\u7684\u7f8e\u4e3d\u56fa\u7136\u91cd\u8981\uff0c\u4f46\u8d4b\u4e88\u573a\u666f\u4ee5\u751f\u547d\u7684\u52a8\u753b\u624d\u662f\u771f\u6b63\u8ba9\u865a\u62df\u4e16\u754c\u6d3b\u8d77\u6765\u7684\u5173\u952e\u3002\u672c\u7ae0\u5c06\u6df1\u5165\u63a2\u8ba8\u52a8\u753b\u7684\u6570\u5b66\u57fa\u7840\uff0c\u4ece\u7b80\u5355\u7684\u5173\u952e\u5e27\u63d2\u503c\u5230\u590d\u6742\u7684\u7269\u7406\u6a21\u62df\uff0c\u6db5\u76d6\u8d28\u70b9\u7cfb\u7edf\u3001\u521a\u4f53\u52a8\u529b\u5b66\u4ee5\u53ca\u6d41\u4f53\u6a21\u62df\u7684\u6838\u5fc3\u6982\u5ff5\u3002\u6211\u4eec\u5c06\u7279\u522b\u5173\u6ce8\u6570\u503c\u65b9\u6cd5\u7684\u7a33\u5b9a\u6027\u548c\u51c6\u786e\u6027\uff0c\u8fd9\u5bf9\u4e8e\u521b\u5efa\u53ef\u4fe1\u7684\u52a8\u753b\u6548\u679c\u81f3\u5173\u91cd\u8981\u3002</p>\n<h2 id=\"111\">11.1 \u52a8\u753b\u57fa\u672c\u6982\u5ff5</h2>\n<h3 id=\"1111\">11.1.1 \u65f6\u95f4\u4e0e\u8fd0\u52a8\u7684\u6570\u5b66\u8868\u793a</h3>\n<p>\u52a8\u753b\u7684\u672c\u8d28\u662f\u7269\u4f53\u5c5e\u6027\u968f\u65f6\u95f4\u7684\u8fde\u7eed\u53d8\u5316\u3002\u5728\u6570\u5b66\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u4efb\u4f55\u53ef\u52a8\u753b\u7684\u5c5e\u6027\u8868\u793a\u4e3a\u65f6\u95f4\u7684\u51fd\u6570\uff1a</p>\n<p>$$\\mathbf{p}(t) = f(t)$$\n\u5176\u4e2d $\\mathbf{p}$ \u53ef\u4ee5\u662f\u4f4d\u7f6e\u3001\u65cb\u8f6c\u3001\u989c\u8272\u6216\u4efb\u4f55\u5176\u4ed6\u5c5e\u6027\u3002\u5bf9\u4e8e\u4f4d\u7f6e\u52a8\u753b\uff0c\u6211\u4eec\u6709\uff1a\n$$\\mathbf{x}(t) = [x(t), y(t), z(t)]^T$$\n\u901f\u5ea6\u548c\u52a0\u901f\u5ea6\u901a\u8fc7\u5fae\u5206\u83b7\u5f97\uff1a\n$$\\mathbf{v}(t) = \\frac{d\\mathbf{x}}{dt}, \\quad \\mathbf{a}(t) = \\frac{d^2\\mathbf{x}}{dt^2}$$</p>\n<h4 id=\"_1\">\u53c2\u6570\u5316\u66f2\u7ebf\u4e0e\u5f27\u957f\u53c2\u6570\u5316</h4>\n<p>\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u6211\u4eec\u7ecf\u5e38\u9700\u8981\u63a7\u5236\u7269\u4f53\u6cbf\u66f2\u7ebf\u7684\u8fd0\u52a8\u901f\u5ea6\u3002\u8003\u8651\u53c2\u6570\u66f2\u7ebf $\\mathbf{r}(u)$\uff0c\u5176\u4e2d $u \\in [0,1]$\u3002\u5f27\u957f\u5b9a\u4e49\u4e3a\uff1a\n$$s(u) = \\int_0^u |\\mathbf{r}'(\\tau)| d\\tau$$\n\u7406\u60f3\u7684\u5f27\u957f\u53c2\u6570\u5316\u6ee1\u8db3 $|\\mathbf{r}'(s)| = 1$\uff0c\u8fd9\u4fdd\u8bc1\u4e86\u5300\u901f\u8fd0\u52a8\u3002\u7136\u800c\uff0c\u5bf9\u4e8e\u5927\u591a\u6570\u66f2\u7ebf\uff0c\u5f27\u957f\u79ef\u5206\u6ca1\u6709\u89e3\u6790\u89e3\u3002\u5b9e\u8df5\u4e2d\u4f7f\u7528\u6570\u503c\u65b9\u6cd5\uff1a</p>\n<ol>\n<li><strong>\u67e5\u627e\u8868\u65b9\u6cd5</strong>\uff1a\u9884\u8ba1\u7b97 $(u_i, s_i)$ \u5bf9\uff0c\u4f7f\u7528\u63d2\u503c</li>\n<li><strong>Newton-Raphson\u8fed\u4ee3</strong>\uff1a\u6c42\u89e3 $s(u) - s_{target} = 0$</li>\n</ol>\n<h4 id=\"_2\">\u65f6\u95f4\u626d\u66f2\u4e0e\u7f13\u52a8\u51fd\u6570</h4>\n<p>\u4e3a\u4e86\u521b\u5efa\u66f4\u81ea\u7136\u7684\u52a8\u753b\uff0c\u6211\u4eec\u4f7f\u7528\u65f6\u95f4\u626d\u66f2\u51fd\u6570 $\\tau = w(t)$\uff1a\n$$\\mathbf{p}(t) = \\mathbf{q}(w(t))$$\n\u5e38\u7528\u7684\u7f13\u52a8\u51fd\u6570\u5305\u62ec\uff1a</p>\n<p><strong>\u7f13\u5165\uff08Ease-in\uff09</strong>\uff1a$w(t) = t^n$\uff0c$n &gt; 1$</p>\n<p><strong>\u7f13\u51fa\uff08Ease-out\uff09</strong>\uff1a$w(t) = 1 - (1-t)^n$</p>\n<p><strong>\u7f13\u5165\u7f13\u51fa\uff08Ease-in-out\uff09</strong>\uff1a\n$$w(t) = \\begin{cases}\n\\frac{1}{2}(2t)^n &amp; t &lt; 0.5 \\\n1 - \\frac{1}{2}(2(1-t))^n &amp; t \\geq 0.5\n\\end{cases}$$\n<strong>Hermite\u57fa\u7f13\u52a8</strong>\uff1a\u4f7f\u7528\u4e09\u6b21Hermite\u66f2\u7ebf\uff0c\u63a7\u5236\u7aef\u70b9\u5bfc\u6570\uff1a\n$$w(t) = h_{00}(t) + h_{10}(t)v_0 + h_{01}(t) + h_{11}(t)v_1$$\n\u5176\u4e2dHermite\u57fa\u51fd\u6570\uff1a\n$$h_{00}(t) = 2t^3 - 3t^2 + 1, \\quad h_{10}(t) = t^3 - 2t^2 + t$$\n$$h_{01}(t) = -2t^3 + 3t^2, \\quad h_{11}(t) = t^3 - t^2$$</p>\n<h4 id=\"_3\">\u9ad8\u9636\u8fd0\u52a8\u5206\u6790</h4>\n<p>\u9664\u4e86\u4f4d\u7f6e\u3001\u901f\u5ea6\u548c\u52a0\u901f\u5ea6\uff0c\u9ad8\u9636\u5bfc\u6570\u4e5f\u6709\u7269\u7406\u610f\u4e49\uff1a</p>\n<p><strong>\u6025\u52a8\u5ea6\uff08Jerk\uff09</strong>\uff1a$\\mathbf{j}(t) = \\frac{d^3\\mathbf{x}}{dt^3}$</p>\n<p><strong>\u6025\u52a8\u5ea6\u53d8\u5316\u7387\uff08Snap\uff09</strong>\uff1a$\\mathbf{s}(t) = \\frac{d^4\\mathbf{x}}{dt^4}$</p>\n<p>\u5728\u8fd0\u52a8\u89c4\u5212\u4e2d\uff0c\u6700\u5c0f\u5316\u6025\u52a8\u5ea6\u53ef\u4ee5\u4ea7\u751f\u66f4\u5e73\u6ed1\u7684\u8f68\u8ff9\uff1a\n$$\\min \\int_0^T |\\mathbf{j}(t)|^2 dt$$\n\u8fd9\u5bfc\u81f4\u4e03\u6b21\u591a\u9879\u5f0f\u8f68\u8ff9\uff0c\u6ee1\u8db3\u4f4d\u7f6e\u3001\u901f\u5ea6\u3001\u52a0\u901f\u5ea6\u548c\u6025\u52a8\u5ea6\u7684\u8fb9\u754c\u6761\u4ef6\u3002</p>\n<h3 id=\"1112\">11.1.2 \u5173\u952e\u5e27\u52a8\u753b\u4e0e\u63d2\u503c</h3>\n<p>\u5173\u952e\u5e27\u52a8\u753b\u662f\u6700\u57fa\u7840\u4e5f\u662f\u6700\u5e38\u7528\u7684\u52a8\u753b\u6280\u672f\u3002\u7ed9\u5b9a\u4e00\u7cfb\u5217\u5173\u952e\u5e27 ${(\\mathbf{p}_i, t_i)}_{i=0}^n$\uff0c\u6211\u4eec\u9700\u8981\u5728\u8fd9\u4e9b\u5173\u952e\u5e27\u4e4b\u95f4\u8fdb\u884c\u63d2\u503c\u3002</p>\n<p><strong>\u7ebf\u6027\u63d2\u503c</strong>\uff1a\n$$\\mathbf{p}(t) = \\mathbf{p}_i + \\frac{t - t_i}{t_{i+1} - t_i}(\\mathbf{p}_{i+1} - \\mathbf{p}_i), \\quad t \\in [t_i, t_{i+1}]$$\n\u7ebf\u6027\u63d2\u503c\u867d\u7136\u7b80\u5355\uff0c\u4f46\u4f1a\u5728\u5173\u952e\u5e27\u5904\u4ea7\u751f\u901f\u5ea6\u4e0d\u8fde\u7eed\u3002\u53c2\u6570 $s = \\frac{t - t_i}{t_{i+1} - t_i}$ \u79f0\u4e3a\u63d2\u503c\u53c2\u6570\u3002</p>\n<h4 id=\"_4\">\u65cb\u8f6c\u63d2\u503c\u7684\u6df1\u5165\u5206\u6790</h4>\n<p><strong>\u7403\u9762\u7ebf\u6027\u63d2\u503c\uff08SLERP\uff09</strong>\uff1a\n\u5bf9\u4e8e\u56db\u5143\u6570 $\\mathbf{q}_i$ \u548c $\\mathbf{q}_{i+1}$\uff1a\n$$\\text{slerp}(\\mathbf{q}_i, \\mathbf{q}_{i+1}, s) = \\frac{\\sin((1-s)\\theta)}{\\sin\\theta}\\mathbf{q}_i + \\frac{\\sin(s\\theta)}{\\sin\\theta}\\mathbf{q}_{i+1}$$\n\u5176\u4e2d $\\cos\\theta = \\mathbf{q}_i \\cdot \\mathbf{q}_{i+1}$\uff0c$s = \\frac{t - t_i}{t_{i+1} - t_i}$\u3002</p>\n<p><strong>\u6570\u503c\u7a33\u5b9a\u6027\u8003\u8651</strong>\uff1a\n\u5f53 $\\theta \\approx 0$ \u65f6\uff0c$\\sin\\theta \\approx 0$\uff0c\u5bfc\u81f4\u6570\u503c\u4e0d\u7a33\u5b9a\u3002\u6b64\u65f6\u4f7f\u7528\u7ebf\u6027\u63d2\u503c\u8fd1\u4f3c\uff1a\n$$\\text{slerp}(\\mathbf{q}_i, \\mathbf{q}_{i+1}, s) \\approx (1-s)\\mathbf{q}_i + s\\mathbf{q}_{i+1}, \\quad \\text{\u5f53} \\theta &lt; \\epsilon$$\n<strong>\u6700\u77ed\u8def\u5f84\u95ee\u9898</strong>\uff1a\n\u56db\u5143\u6570 $\\mathbf{q}$ \u548c $-\\mathbf{q}$ \u8868\u793a\u76f8\u540c\u65cb\u8f6c\u3002\u4e3a\u786e\u4fdd\u6700\u77ed\u8def\u5f84\u63d2\u503c\uff1a\n$$\\text{\u5982\u679c} \\quad \\mathbf{q}_i \\cdot \\mathbf{q}_{i+1} &lt; 0, \\quad \\text{\u5219} \\quad \\mathbf{q}_{i+1} \\leftarrow -\\mathbf{q}_{i+1}$$</p>\n<h4 id=\"_5\">\u9ad8\u9636\u63d2\u503c\u65b9\u6cd5</h4>\n<p><strong>\u7acb\u65b9Hermite\u63d2\u503c</strong>\uff1a\n\u7ed9\u5b9a\u7aef\u70b9\u503c\u548c\u5bfc\u6570\uff1a\n$$\\mathbf{p}(t) = h_{00}(s)\\mathbf{p}_i + h_{10}(s)(t_{i+1}-t_i)\\mathbf{m}_i + h_{01}(s)\\mathbf{p}_{i+1} + h_{11}(s)(t_{i+1}-t_i)\\mathbf{m}_{i+1}$$\n\u5176\u4e2d $\\mathbf{m}_i$ \u662f\u70b9 $i$ \u5904\u7684\u5207\u5411\u91cf\uff08\u901f\u5ea6\uff09\u3002</p>\n<p><strong>\u5bfc\u6570\u4f30\u8ba1\u65b9\u6cd5</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u6709\u9650\u5dee\u5206</strong>\uff1a\n$$\\mathbf{m}_i = \\frac{\\mathbf{p}_{i+1} - \\mathbf{p}_{i-1}}{t_{i+1} - t_{i-1}}$$</p>\n</li>\n<li>\n<p><strong>Catmull-Rom\u5207\u7ebf</strong>\uff1a\n$$\\mathbf{m}_i = \\frac{1}{2}\\left(\\frac{\\mathbf{p}_{i+1} - \\mathbf{p}_i}{t_{i+1} - t_i} + \\frac{\\mathbf{p}_i - \\mathbf{p}_{i-1}}{t_i - t_{i-1}}\\right)$$</p>\n</li>\n<li>\n<p><strong>Cardinal\u6837\u6761\u5207\u7ebf</strong>\uff1a\n$$\\mathbf{m}_i = (1-c)\\frac{\\mathbf{p}_{i+1} - \\mathbf{p}_{i-1}}{t_{i+1} - t_{i-1}}$$\n\u5176\u4e2d $c \\in [0,1]$ \u662f\u5f20\u529b\u53c2\u6570\u3002</p>\n</li>\n</ol>\n<h4 id=\"_6\">\u56db\u5143\u6570\u6837\u6761</h4>\n<p><strong>Squad\uff08\u7403\u9762\u56db\u6b21\u63d2\u503c\uff09</strong>\uff1a\n$$\\text{squad}(\\mathbf{q}_i, \\mathbf{q}_{i+1}, \\mathbf{s}_i, \\mathbf{s}_{i+1}, t) = \\text{slerp}(\\text{slerp}(\\mathbf{q}_i, \\mathbf{q}_{i+1}, t), \\text{slerp}(\\mathbf{s}_i, \\mathbf{s}_{i+1}, t), 2t(1-t))$$\n\u5176\u4e2d\u8f85\u52a9\u56db\u5143\u6570\uff1a\n$$\\mathbf{s}_i = \\mathbf{q}_i \\exp\\left(-\\frac{\\log(\\mathbf{q}_i^{-1}\\mathbf{q}_{i-1}) + \\log(\\mathbf{q}_i^{-1}\\mathbf{q}_{i+1})}{4}\\right)$$\n<strong>Bezier\u56db\u5143\u6570\u66f2\u7ebf</strong>\uff1a\n$$\\mathbf{q}(t) = \\text{slerp}(\\text{slerp}(\\text{slerp}(\\mathbf{q}_0, \\mathbf{q}_1, t), \\text{slerp}(\\mathbf{q}_1, \\mathbf{q}_2, t), t), \\text{slerp}(\\text{slerp}(\\mathbf{q}_1, \\mathbf{q}_2, t), \\text{slerp}(\\mathbf{q}_2, \\mathbf{q}_3, t), t), t)$$</p>\n<h4 id=\"_7\">\u591a\u7ef4\u63d2\u503c\u7684\u8026\u5408\u95ee\u9898</h4>\n<p>\u5f53\u540c\u65f6\u63d2\u503c\u4f4d\u7f6e\u548c\u65cb\u8f6c\u65f6\uff0c\u9700\u8981\u8003\u8651\u5b83\u4eec\u7684\u8026\u5408\u5173\u7cfb\uff1a</p>\n<p><strong>\u87ba\u65cb\u8fd0\u52a8\uff08Screw Motion\uff09</strong>\uff1a\n\u7ed3\u5408\u5e73\u79fb\u548c\u65cb\u8f6c\u7684\u6700\u81ea\u7136\u65b9\u5f0f\uff1a\n$$\\mathbf{T}(t) = \\begin{bmatrix}\n\\mathbf{R}(t) &amp; \\mathbf{d}(t) \\\n\\mathbf{0} &amp; 1\n\\end{bmatrix}$$\n\u5176\u4e2d $\\mathbf{R}(t)$ \u662f\u65cb\u8f6c\u77e9\u9635\uff0c$\\mathbf{d}(t)$ \u662f\u4f4d\u79fb\u5411\u91cf\u3002</p>\n<p><strong>\u5bf9\u5076\u56db\u5143\u6570\u63d2\u503c</strong>\uff1a\n\u4f7f\u7528\u5bf9\u5076\u56db\u5143\u6570 $\\hat{\\mathbf{q}} = \\mathbf{q}_r + \\epsilon\\mathbf{q}_d$ \u7edf\u4e00\u8868\u793a\u65cb\u8f6c\u548c\u5e73\u79fb\uff1a\n$$\\hat{\\mathbf{q}}(t) = \\text{DLB}(\\hat{\\mathbf{q}}_0, \\hat{\\mathbf{q}}_1, t)$$\n\u5176\u4e2dDLB\u662f\u5bf9\u5076\u56db\u5143\u6570\u7ebf\u6027\u6df7\u5408\u3002</p>\n<h3 id=\"1113\">11.1.3 \u6837\u6761\u66f2\u7ebf\u5728\u52a8\u753b\u4e2d\u7684\u5e94\u7528</h3>\n<p>\u4e3a\u4e86\u83b7\u5f97\u66f4\u5e73\u6ed1\u7684\u52a8\u753b\uff0c\u6211\u4eec\u5e38\u4f7f\u7528\u6837\u6761\u66f2\u7ebf\u3002Catmull-Rom\u6837\u6761\u662f\u52a8\u753b\u4e2d\u7684\u5e38\u7528\u9009\u62e9\uff0c\u56e0\u4e3a\u5b83\u901a\u8fc7\u6240\u6709\u63a7\u5236\u70b9\uff1a\n$$\\mathbf{p}(t) = \\mathbf{T}(t) \\mathbf{M}_{CR} \\mathbf{G}$$\n\u5176\u4e2d\uff1a\n$$\\mathbf{T}(t) = [1, t, t^2, t^3]$$</p>\n<p>$$\\mathbf{M}_{CR} = \\frac{1}{2}\\begin{bmatrix}\n0 &amp; 2 &amp; 0 &amp; 0 \\\n-1 &amp; 0 &amp; 1 &amp; 0 \\\n2 &amp; -5 &amp; 4 &amp; -1 \\\n-1 &amp; 3 &amp; -3 &amp; 1\n\\end{bmatrix}$$</p>\n<p>$$\\mathbf{G} = [\\mathbf{p}_{i-1}, \\mathbf{p}_i, \\mathbf{p}_{i+1}, \\mathbf{p}_{i+2}]^T$$</p>\n<h4 id=\"_8\">\u975e\u5747\u5300\u53c2\u6570\u5316</h4>\n<p>\u6807\u51c6Catmull-Rom\u5047\u8bbe\u5747\u5300\u53c2\u6570\u5316\uff0c\u4f46\u5b9e\u9645\u5173\u952e\u5e27\u65f6\u95f4\u53ef\u80fd\u4e0d\u5747\u5300\u3002\u975e\u5747\u5300Catmull-Rom\u4f7f\u7528\u5f26\u957f\u6216\u5411\u5fc3\u53c2\u6570\u5316\uff1a</p>\n<p><strong>\u5f26\u957f\u53c2\u6570\u5316</strong>\uff1a\n$$t_{i+1} - t_i = |\\mathbf{p}_{i+1} - \\mathbf{p}_i|$$\n<strong>\u5411\u5fc3\u53c2\u6570\u5316</strong>\uff1a\n$$t_{i+1} - t_i = |\\mathbf{p}_{i+1} - \\mathbf{p}_i|^{0.5}$$\n\u5411\u5fc3\u53c2\u6570\u5316\u907f\u514d\u4e86\u5c16\u70b9\u548c\u81ea\u4ea4\uff0c\u4ea7\u751f\u66f4\u81ea\u7136\u7684\u66f2\u7ebf\u3002</p>\n<h4 id=\"b\">B\u6837\u6761\u5728\u52a8\u753b\u4e2d\u7684\u5e94\u7528</h4>\n<p>B\u6837\u6761\u63d0\u4f9b\u5c40\u90e8\u63a7\u5236\u548c\u66f4\u9ad8\u7684\u8fde\u7eed\u6027\uff1a</p>\n<p><strong>\u5747\u5300\u4e09\u6b21B\u6837\u6761</strong>\uff1a\n$$\\mathbf{p}(t) = \\sum_{i} N_{i,3}(t)\\mathbf{p}_i$$\n\u57fa\u51fd\u6570\uff1a\n$$N_{i,3}(t) = \\frac{1}{6}\\begin{cases}\n(1-t)^3 &amp; t \\in [0,1] \\\n3t^3 - 12t^2 + 12t - 3 &amp; t \\in [1,2] \\\n-3t^3 + 12t^2 - 12t + 1 &amp; t \\in [2,3] \\\nt^3 &amp; t \\in [3,4]\n\\end{cases}$$\n<strong>NURBS\uff08\u975e\u5747\u5300\u6709\u7406B\u6837\u6761\uff09</strong>\uff1a\n$$\\mathbf{p}(t) = \\frac{\\sum_{i} w_i N_{i,k}(t)\\mathbf{p}_i}{\\sum_{i} w_i N_{i,k}(t)}$$\n\u6743\u91cd$w_i$\u63d0\u4f9b\u989d\u5916\u7684\u5f62\u72b6\u63a7\u5236\uff0c\u7279\u522b\u9002\u5408\u8868\u793a\u5706\u9525\u66f2\u7ebf\u3002</p>\n<h4 id=\"_9\">\u6837\u6761\u7684\u8fde\u7eed\u6027\u5206\u6790</h4>\n<p><strong>\u53c2\u6570\u8fde\u7eed\u6027</strong>\uff1a</p>\n<ul>\n<li>$C^0$\uff1a\u4f4d\u7f6e\u8fde\u7eed</li>\n<li>$C^1$\uff1a\u5207\u5411\u91cf\u8fde\u7eed</li>\n<li>$C^2$\uff1a\u66f2\u7387\u8fde\u7eed</li>\n</ul>\n<p><strong>\u51e0\u4f55\u8fde\u7eed\u6027</strong>\uff1a</p>\n<ul>\n<li>$G^0$\uff1a\u4f4d\u7f6e\u8fde\u7eed</li>\n<li>$G^1$\uff1a\u5207\u5411\u8fde\u7eed\uff08\u65b9\u5411\u76f8\u540c\uff0c\u5927\u5c0f\u53ef\u4e0d\u540c\uff09</li>\n<li>$G^2$\uff1a\u66f2\u7387\u8fde\u7eed</li>\n</ul>\n<p>\u5bf9\u4e8e\u52a8\u753b\uff0c$G^1$\u8fde\u7eed\u901a\u5e38\u8db3\u591f\uff0c\u4f46\u76f8\u673a\u8def\u5f84\u53ef\u80fd\u9700\u8981$G^2$\u4ee5\u907f\u514d\u89c6\u89c9\u8df3\u52a8\u3002</p>\n<h4 id=\"-tcb\">\u5f20\u529b-\u8fde\u7eed\u6027-\u504f\u7f6e\uff08TCB\uff09\u6837\u6761</h4>\n<p>Kochanek-Bartels\u6837\u6761\u63d0\u4f9b\u4e09\u4e2a\u53c2\u6570\u63a7\u5236\uff1a\n$$\\mathbf{m}_i^{in} = \\frac{(1-t)(1+c)(1+b)}{2}(\\mathbf{p}_i - \\mathbf{p}_{i-1}) + \\frac{(1-t)(1-c)(1-b)}{2}(\\mathbf{p}_{i+1} - \\mathbf{p}_i)$$</p>\n<p>$$\\mathbf{m}_i^{out} = \\frac{(1-t)(1-c)(1+b)}{2}(\\mathbf{p}_i - \\mathbf{p}_{i-1}) + \\frac{(1-t)(1+c)(1-b)}{2}(\\mathbf{p}_{i+1} - \\mathbf{p}_i)$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$t$\uff1a\u5f20\u529b\uff08tension\uff09\uff0c\u63a7\u5236\u66f2\u7ebf\u7684\"\u7d27\u5ea6\"</li>\n<li>$c$\uff1a\u8fde\u7eed\u6027\uff08continuity\uff09\uff0c\u63a7\u5236\u62d0\u89d2\u7684\u5c16\u9510\u5ea6</li>\n<li>$b$\uff1a\u504f\u7f6e\uff08bias\uff09\uff0c\u63a7\u5236\u66f2\u7ebf\u504f\u5411\u524d\u540e\u63a7\u5236\u70b9\u7684\u7a0b\u5ea6</li>\n</ul>\n<h4 id=\"_10\">\u6837\u6761\u66f2\u7ebf\u7684\u5b9e\u65f6\u8bc4\u4f30\u4f18\u5316</h4>\n<p><strong>\u524d\u5411\u5dee\u5206\u6cd5</strong>\uff1a\n\u5bf9\u4e8e\u5747\u5300\u53c2\u6570\u7684\u4e09\u6b21\u66f2\u7ebf\uff0c\u4f7f\u7528\u524d\u5411\u5dee\u5206\u907f\u514d\u91cd\u590d\u8ba1\u7b97\uff1a\n$$\\Delta^0 \\mathbf{p} = \\mathbf{p}(0)$$\n$$\\Delta^1 \\mathbf{p} = a\\mathbf{v}_0 + b\\mathbf{v}_1 + c\\mathbf{p}_0 + d\\mathbf{p}_1$$\n$$\\Delta^2 \\mathbf{p} = 6ah^2\\mathbf{v}_0 + 6bh^2\\mathbf{v}_1$$\n$$\\Delta^3 \\mathbf{p} = 6h^3(\\mathbf{v}_0 + \\mathbf{v}_1)$$\n\u9012\u63a8\u5173\u7cfb\uff1a\n$$\\mathbf{p}_{i+1} = \\mathbf{p}_i + \\Delta^1\\mathbf{p}_i$$\n$$\\Delta^1\\mathbf{p}_{i+1} = \\Delta^1\\mathbf{p}_i + \\Delta^2\\mathbf{p}_i$$\n$$\\Delta^2\\mathbf{p}_{i+1} = \\Delta^2\\mathbf{p}_i + \\Delta^3\\mathbf{p}_i$$\n<strong>de Casteljau\u7b97\u6cd5\u7684\u5e76\u884c\u5316</strong>\uff1a\n\u8d1d\u585e\u5c14\u66f2\u7ebf\u7684de Casteljau\u7b97\u6cd5\u5929\u7136\u9002\u5408SIMD\u5e76\u884c\uff1a\n$$\\mathbf{b}_i^{(k)} = (1-t)\\mathbf{b}_i^{(k-1)} + t\\mathbf{b}_{i+1}^{(k-1)}$$\n\u53ef\u4ee5\u540c\u65f6\u8ba1\u7b97\u591a\u4e2a$t$\u503c\u6216\u591a\u6761\u66f2\u7ebf\u3002</p>\n<h3 id=\"1114\">11.1.4 \u52a8\u753b\u538b\u7f29\u4e0e\u4f18\u5316</h3>\n<p>\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u52a8\u753b\u6570\u636e\u53ef\u80fd\u975e\u5e38\u5e9e\u5927\u3002\u8003\u8651\u4e00\u4e2a30fps\u7684\u52a8\u753b\uff0c\u6bcf\u79d2\u9700\u8981\u5b58\u50a830\u5e27\u6570\u636e\uff0c\u4e00\u5206\u949f\u7684\u52a8\u753b\u5c31\u9700\u89811800\u5e27\u3002\u5bf9\u4e8e\u590d\u6742\u7684\u89d2\u8272\u52a8\u753b\uff0c\u6bcf\u5e27\u53ef\u80fd\u5305\u542b\u6570\u767e\u4e2a\u9aa8\u9abc\u7684\u53d8\u6362\u77e9\u9635\u3002</p>\n<h4 id=\"_11\">\u5b58\u50a8\u9700\u6c42\u5206\u6790</h4>\n<p>\u8003\u8651\u4e00\u4e2a\u5178\u578b\u7684\u4eba\u5f62\u89d2\u8272\uff1a</p>\n<ul>\n<li>\u9aa8\u9abc\u6570\u91cf\uff1a$n = 60$</li>\n<li>\u6bcf\u9aa8\u9abc\u5b58\u50a8\uff1a\u4f4d\u7f6e(3) + \u56db\u5143\u6570(4) + \u7f29\u653e(3) = 10\u4e2a\u6d6e\u70b9\u6570</li>\n<li>\u6bcf\u5e27\u6570\u636e\uff1a$60 \\times 10 \\times 4 = 2400$ \u5b57\u8282</li>\n<li>30fps\u52a8\u753b\u6bcf\u79d2\uff1a$2400 \\times 30 = 72$ KB</li>\n<li>\u4e00\u5206\u949f\u52a8\u753b\uff1a$72 \\times 60 = 4.32$ MB</li>\n</ul>\n<p>\u8fd9\u8fd8\u4e0d\u5305\u62ec\u9762\u90e8\u52a8\u753b\u3001\u624b\u6307\u7ec6\u8282\u7b49\u3002</p>\n<h4 id=\"_12\">\u5173\u952e\u5e27\u7ea6\u7b80</h4>\n<p><strong>Douglas-Peucker\u7b97\u6cd5</strong>\u7528\u4e8e\u79fb\u9664\u5197\u4f59\u5173\u952e\u5e27\uff1a</p>\n<ol>\n<li>\u8fde\u63a5\u9996\u5c3e\u5173\u952e\u5e27\u5f62\u6210\u76f4\u7ebf</li>\n<li>\u627e\u5230\u79bb\u76f4\u7ebf\u6700\u8fdc\u7684\u4e2d\u95f4\u5e27</li>\n<li>\u5982\u679c\u8ddd\u79bb\u8d85\u8fc7\u9608\u503c$\\epsilon$\uff0c\u4fdd\u7559\u8be5\u5e27\u5e76\u9012\u5f52\u5904\u7406\u4e24\u6bb5</li>\n<li>\u5426\u5219\u79fb\u9664\u6240\u6709\u4e2d\u95f4\u5e27</li>\n</ol>\n<p>\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(n\\log n)$\uff08\u5e73\u5747\u60c5\u51b5\uff09</p>\n<p><strong>\u81ea\u9002\u5e94\u8bef\u5dee\u5ea6\u91cf</strong>\uff1a\n\u4e0d\u540c\u5c5e\u6027\u4f7f\u7528\u4e0d\u540c\u9608\u503c\uff1a</p>\n<ul>\n<li>\u4f4d\u7f6e\uff1a$\\epsilon_{pos} = 0.001$ \u5355\u4f4d</li>\n<li>\u65cb\u8f6c\uff1a$\\epsilon_{rot} = 0.5\u00b0$</li>\n<li>\u7f29\u653e\uff1a$\\epsilon_{scale} = 0.01$</li>\n</ul>\n<p><strong>\u611f\u77e5\u91cd\u8981\u6027\u52a0\u6743</strong>\uff1a\n$$d_{weighted} = w_{bone} \\cdot w_{velocity} \\cdot d_{geometric}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$w_{bone}$\uff1a\u9aa8\u9abc\u91cd\u8981\u6027\uff08\u810a\u690e &gt; \u56db\u80a2\u672b\u7aef\uff09</li>\n<li>$w_{velocity}$\uff1a\u901f\u5ea6\u6743\u91cd\uff08\u5feb\u901f\u8fd0\u52a8\u5141\u8bb8\u66f4\u5927\u8bef\u5dee\uff09</li>\n</ul>\n<h4 id=\"_13\">\u66f2\u7ebf\u62df\u5408\u538b\u7f29</h4>\n<p>\u4f7f\u7528<strong>\u6700\u5c0f\u4e8c\u4e58\u6cd5</strong>\u62df\u5408\u52a8\u753b\u66f2\u7ebf\uff1a</p>\n<p>\u5bf9\u4e8e$n$\u6b21\u591a\u9879\u5f0f$p(t) = \\sum_{i=0}^n a_i t^i$\uff0c\u6c42\u89e3\uff1a\n$$\\min_{{a_i}} \\sum_{j} |\\mathbf{p}(t_j) - \\mathbf{p}_{data}(t_j)|^2$$\n\u8fd9\u5bfc\u81f4\u6cd5\u65b9\u7a0b\uff1a\n$$\\mathbf{A}^T\\mathbf{A}\\mathbf{x} = \\mathbf{A}^T\\mathbf{b}$$\n\u5176\u4e2d$\\mathbf{A}_{ji} = t_j^i$\u3002</p>\n<p><strong>\u5206\u6bb5\u62df\u5408\u7b56\u7565</strong>\uff1a</p>\n<ol>\n<li>\u81ea\u52a8\u68c0\u6d4b\u65ad\u70b9\uff08\u901f\u5ea6/\u52a0\u901f\u5ea6\u7a81\u53d8\uff09</li>\n<li>\u6bcf\u6bb5\u72ec\u7acb\u62df\u5408</li>\n<li>\u786e\u4fdd\u6bb5\u95f4\u8fde\u7eed\u6027</li>\n</ol>\n<p><strong>\u8d1d\u585e\u5c14\u66f2\u7ebf\u538b\u7f29</strong>\uff1a\n\u4f7f\u7528\u4e09\u6b21\u8d1d\u585e\u5c14\u66f2\u7ebf\uff0c\u4ec5\u5b58\u50a84\u4e2a\u63a7\u5236\u70b9\uff1a\n$$\\mathbf{p}(t) = (1-t)^3\\mathbf{P}_0 + 3(1-t)^2t\\mathbf{P}_1 + 3(1-t)t^2\\mathbf{P}_2 + t^3\\mathbf{P}_3$$\n\u63a7\u5236\u70b9\u4f18\u5316\uff1a\n$$\\min_{{\\mathbf{P}_i}} \\sum_{j} |\\mathbf{p}(t_j) - \\mathbf{p}_{data}(t_j)|^2$$\n\u53d7\u7ea6\u675f\u4e8e\uff1a$\\mathbf{P}_0 = \\mathbf{p}_{data}(0)$\uff0c$\\mathbf{P}_3 = \\mathbf{p}_{data}(1)$</p>\n<h4 id=\"pca\">\u4e3b\u6210\u5206\u5206\u6790\uff08PCA\uff09\u538b\u7f29</h4>\n<p>\u5bf9\u4e8e$m$\u4e2a\u76f8\u5173\u7684\u52a8\u753b\u901a\u9053\uff08\u5982\u591a\u4e2a\u89d2\u8272\u6267\u884c\u76f8\u4f3c\u52a8\u4f5c\uff09\uff1a</p>\n<ol>\n<li>\u6784\u5efa\u6570\u636e\u77e9\u9635$\\mathbf{X} \\in \\mathbb{R}^{m \\times n}$</li>\n<li>\u8ba1\u7b97\u534f\u65b9\u5dee\u77e9\u9635$\\mathbf{C} = \\frac{1}{n-1}\\mathbf{X}\\mathbf{X}^T$</li>\n<li>\u7279\u5f81\u503c\u5206\u89e3$\\mathbf{C} = \\mathbf{U}\\mathbf{\\Lambda}\\mathbf{U}^T$</li>\n<li>\u4fdd\u7559\u524d$k$\u4e2a\u4e3b\u6210\u5206\uff1a$\\mathbf{X}_{compressed} = \\mathbf{U}_k^T\\mathbf{X}$</li>\n</ol>\n<p>\u538b\u7f29\u7387\uff1a$\\frac{k(m+n)}{mn}$</p>\n<p><strong>\u589e\u91cfPCA\u66f4\u65b0</strong>\uff1a\n\u65b0\u589e\u52a8\u753b\u65f6\u65e0\u9700\u91cd\u65b0\u8ba1\u7b97\u6574\u4e2aPCA\uff1a\n$$\\mathbf{C}_{new} = \\frac{n-1}{n}\\mathbf{C}_{old} + \\frac{1}{n}\\mathbf{x}_{new}\\mathbf{x}_{new}^T$$\n<strong>\u5c40\u90e8PCA\u5206\u89e3</strong>\uff1a</p>\n<ol>\n<li>\u65f6\u95f4\u5206\u6bb5\uff1a\u5c06\u957f\u52a8\u753b\u5206\u6210\u77ed\u7247\u6bb5</li>\n<li>\u7a7a\u95f4\u5206\u7ec4\uff1a\u5c06\u9aa8\u9abc\u6309\u8fd0\u52a8\u76f8\u5173\u6027\u5206\u7ec4</li>\n<li>\u6bcf\u7ec4\u72ec\u7acbPCA</li>\n</ol>\n<h4 id=\"_14\">\u5c0f\u6ce2\u538b\u7f29</h4>\n<p>\u4f7f\u7528\u591a\u5206\u8fa8\u7387\u5206\u6790\uff1a\n$$\\mathbf{x}(t) = \\sum_{k} c_{j_0,k}\\phi_{j_0,k}(t) + \\sum_{j=j_0}^{J} \\sum_{k} d_{j,k}\\psi_{j,k}(t)$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$\\phi$\uff1a\u5c3a\u5ea6\u51fd\u6570</li>\n<li>$\\psi$\uff1a\u5c0f\u6ce2\u51fd\u6570</li>\n<li>$c_{j,k}$\uff1a\u5c3a\u5ea6\u7cfb\u6570</li>\n<li>$d_{j,k}$\uff1a\u5c0f\u6ce2\u7cfb\u6570</li>\n</ul>\n<p><strong>\u9608\u503c\u5904\u7406</strong>\uff1a\n$$\\tilde{d}_{j,k} = \\begin{cases}\nd_{j,k} &amp; |d_{j,k}| &gt; \\epsilon_j \\\n0 &amp; \\text{otherwise}\n\\end{cases}$$\n\u81ea\u9002\u5e94\u9608\u503c\uff1a$\\epsilon_j = \\sigma\\sqrt{2\\log n}/2^j$</p>\n<h4 id=\"_15\">\u56db\u5143\u6570\u538b\u7f29</h4>\n<p><strong>\u6700\u5c0f\u4e09\u53c2\u6570\u8868\u793a</strong>\uff1a\n\u5229\u7528\u5355\u4f4d\u56db\u5143\u6570\u7ea6\u675f$|\\mathbf{q}| = 1$\uff1a</p>\n<ol>\n<li>\u627e\u5230\u6700\u5927\u5206\u91cf\u7d22\u5f15</li>\n<li>\u5b58\u50a8\u5176\u4ed6\u4e09\u4e2a\u5206\u91cf</li>\n<li>\u91cd\u5efa\u65f6\uff1a$q_{max} = \\sqrt{1 - q_x^2 - q_y^2 - q_z^2}$</li>\n</ol>\n<p><strong>\u5bf9\u6570\u6620\u5c04\u538b\u7f29</strong>\uff1a\n$$\\mathbf{v} = \\log(\\mathbf{q}) = \\begin{cases}\n\\mathbf{0} &amp; \\theta = 0 \\\n\\frac{\\theta}{\\sin\\theta}[q_x, q_y, q_z]^T &amp; \\text{otherwise}\n\\end{cases}$$\n\u4f18\u52bf\uff1a\u7ebf\u6027\u7a7a\u95f4\uff0c\u9002\u5408PCA</p>\n<h4 id=\"_16\">\u8bef\u5dee\u5ea6\u91cf\u4e0e\u8d28\u91cf\u63a7\u5236</h4>\n<p>\u9664\u4e86\u7b80\u5355\u7684L2\u8bef\u5dee\uff0c\u8fd8\u5e94\u8003\u8651\uff1a</p>\n<p><strong>\u611f\u77e5\u8bef\u5dee</strong>\uff1a\n$$E_{perceptual} = \\sum_t w(t)|\\mathbf{p}_{original}(t) - \\mathbf{p}_{compressed}(t)|^2$$\n\u5176\u4e2d$w(t)$\u662f\u57fa\u4e8e\u8fd0\u52a8\u901f\u5ea6\u7684\u6743\u91cd\u51fd\u6570\uff1a\n$$w(t) = 1 + \\alpha|\\mathbf{v}(t)|$$\n<strong>\u5173\u8282\u89d2\u5ea6\u8bef\u5dee</strong>\uff08\u5bf9\u4e8e\u9aa8\u9abc\u52a8\u753b\uff09\uff1a\n$$E_{angle} = \\sum_{joint} \\sum_t |\\boldsymbol{\\theta}_{original}(t) - \\boldsymbol{\\theta}_{compressed}(t)|^2$$\n<strong>\u7aef\u70b9\u8bef\u5dee</strong>\uff08IK\u94fe\uff09\uff1a\n$$E_{endpoint} = \\sum_t |FK(\\boldsymbol{\\theta}_{original}(t)) - FK(\\boldsymbol{\\theta}_{compressed}(t))|^2$$</p>\n<h4 id=\"_17\">\u8fd0\u884c\u65f6\u89e3\u538b\u4f18\u5316</h4>\n<p><strong>\u5c42\u6b21\u7ec6\u8282\uff08LOD\uff09</strong>\uff1a</p>\n<ul>\n<li>\u8fdc\u8ddd\u79bb\uff1a\u4ec5\u4e3b\u8981\u9aa8\u9abc</li>\n<li>\u4e2d\u8ddd\u79bb\uff1a\u6dfb\u52a0\u6b21\u8981\u9aa8\u9abc</li>\n<li>\u8fd1\u8ddd\u79bb\uff1a\u5b8c\u6574\u9aa8\u9abc+\u9762\u90e8</li>\n</ul>\n<p><strong>\u9884\u6d4b\u89e3\u7801</strong>\uff1a\n$$\\mathbf{x}(t) = \\mathbf{x}_{base}(t) + \\sum_{i=1}^{k} \\alpha_i(t)\\mathbf{e}_i$$\n\u5176\u4e2d$\\mathbf{e}_i$\u662f\u9884\u8ba1\u7b97\u7684\u8bef\u5dee\u6a21\u5f0f\u3002</p>\n<p><strong>GPU\u53cb\u597d\u683c\u5f0f</strong>\uff1a</p>\n<ul>\n<li>\u7eb9\u7406\u5b58\u50a8\uff1a\u52a8\u753b\u6570\u636e\u4f5c\u4e3a\u7eb9\u7406</li>\n<li>\u9876\u70b9\u7eb9\u7406\u83b7\u53d6\uff08VTF\uff09</li>\n<li>\u8ba1\u7b97\u7740\u8272\u5668\u89e3\u538b</li>\n</ul>\n<h3 id=\"1115\">11.1.5 \u7a0b\u5e8f\u5316\u52a8\u753b\u4e0e\u566a\u58f0\u51fd\u6570</h3>\n<p>\u7a0b\u5e8f\u5316\u52a8\u753b\u901a\u8fc7\u6570\u5b66\u51fd\u6570\u751f\u6210\u52a8\u753b\uff0c\u65e0\u9700\u5b58\u50a8\u5173\u952e\u5e27\u6570\u636e\u3002</p>\n<h4 id=\"perlin\">Perlin\u566a\u58f0</h4>\n<p>\u7528\u4e8e\u751f\u6210\u81ea\u7136\u7684\u968f\u673a\u8fd0\u52a8\uff1a\n$$noise(\\mathbf{x}) = \\sum_{i} fade(f_i) \\cdot lerp(w_i, grad_i \\cdot \\mathbf{x}_i, grad_{i+1} \\cdot \\mathbf{x}_{i+1})$$\n\u5176\u4e2d$fade(t) = 6t^5 - 15t^4 + 10t^3$\u4fdd\u8bc1C2\u8fde\u7eed\u6027\u3002</p>\n<p><strong>\u68af\u5ea6\u751f\u6210</strong>\uff1a\n\u4f7f\u7528\u4f2a\u968f\u673a\u6570\u751f\u6210\u5668\uff0c\u4fdd\u8bc1\u53ef\u91cd\u590d\u6027\uff1a\n$$grad(\\mathbf{i}) = normalize(hash(\\mathbf{i}) \\mod \\mathbf{g}[hash(\\mathbf{i}) \\mod |\\mathbf{g}|])$$\n\u5176\u4e2d$\\mathbf{g}$\u662f\u9884\u5b9a\u4e49\u7684\u68af\u5ea6\u8868\u3002</p>\n<p><strong>\u6539\u8fdbPerlin\u566a\u58f0</strong>\uff1a\n$$fade_{improved}(t) = t^3(t(t \\cdot 6 - 15) + 10)$$\n\u8fd9\u4fdd\u8bc1\u4e86$fade'(0) = fade'(1) = 0$\u548c$fade''(0) = fade''(1) = 0$\u3002</p>\n<h4 id=\"simplex\">Simplex\u566a\u58f0</h4>\n<p>Perlin\u7684\u6539\u8fdb\u7248\u672c\uff0c\u8ba1\u7b97\u6548\u7387\u66f4\u9ad8\uff1a</p>\n<p><strong>2D Simplex</strong>\uff1a\n$$F = \\frac{\\sqrt{3} - 1}{2}, \\quad G = \\frac{3 - \\sqrt{3}}{6}$$\n\u5750\u6807\u53d8\u6362\uff1a\n$$s = (x + y) \\cdot F$$\n$$i = \\lfloor x + s \\rfloor, \\quad j = \\lfloor y + s \\rfloor$$\n<strong>\u4f18\u52bf</strong>\uff1a</p>\n<ul>\n<li>\u66f4\u5c11\u7684\u8ba1\u7b97\u91cf\uff08$2^n$\u9876\u70b9 vs $n!$\u9876\u70b9\uff09</li>\n<li>\u66f4\u597d\u7684\u5404\u5411\u540c\u6027</li>\n<li>\u65e0\u65b9\u5411\u4f2a\u5f71</li>\n</ul>\n<h4 id=\"fbm\">\u5206\u5f62\u5e03\u6717\u8fd0\u52a8\uff08fBm\uff09</h4>\n<p>\u901a\u8fc7\u53e0\u52a0\u4e0d\u540c\u9891\u7387\u7684\u566a\u58f0\uff1a\n$$fBm(\\mathbf{x}) = \\sum_{i=0}^{n} \\frac{noise(2^i \\mathbf{x})}{2^{iH}}$$\n\u5176\u4e2d$H$\u662fHurst\u6307\u6570\uff0c\u63a7\u5236\u7c97\u7cd9\u5ea6\u3002</p>\n<p><strong>\u53d8\u4f53</strong>\uff1a</p>\n<ul>\n<li><strong>Turbulence</strong>\uff1a$turbulence(\\mathbf{x}) = \\sum_{i=0}^{n} \\frac{|noise(2^i \\mathbf{x})|}{2^i}$</li>\n<li><strong>Ridged noise</strong>\uff1a$ridge(\\mathbf{x}) = \\sum_{i=0}^{n} \\frac{(1-|noise(2^i \\mathbf{x})|)^2}{2^i}$</li>\n</ul>\n<h4 id=\"_18\">\u8c10\u6ce2\u53e0\u52a0</h4>\n<p>\u7528\u4e8e\u5468\u671f\u6027\u8fd0\u52a8\uff08\u5982\u547c\u5438\u3001\u6446\u52a8\uff09\uff1a\n$$\\mathbf{p}(t) = \\mathbf{p}_0 + \\sum_{i=1}^n A_i \\sin(\\omega_i t + \\phi_i)\\mathbf{d}_i$$\n\u901a\u8fc7\u8c03\u6574\u632f\u5e45$A_i$\u3001\u9891\u7387$\\omega_i$\u548c\u76f8\u4f4d$\\phi_i$\u53ef\u4ee5\u521b\u5efa\u590d\u6742\u7684\u5468\u671f\u8fd0\u52a8\u3002</p>\n<p><strong>\u4ece\u53c2\u8003\u8fd0\u52a8\u63d0\u53d6\u53c2\u6570</strong>\uff1a\n\u4f7f\u7528FFT\u5206\u6790\uff1a\n$$A_k = \\frac{2}{N}\\left|\\sum_{n=0}^{N-1} \\mathbf{p}(t_n)e^{-2\\pi ikn/N}\\right|$$\n$$\\phi_k = \\arg\\left(\\sum_{n=0}^{N-1} \\mathbf{p}(t_n)e^{-2\\pi ikn/N}\\right)$$</p>\n<h4 id=\"gabor\">Gabor\u566a\u58f0</h4>\n<p>\u7ed3\u5408\u9891\u57df\u548c\u7a7a\u57df\u7279\u6027\uff1a\n$$gabor(\\mathbf{x}) = \\sum_{i=1}^{n} w_i \\cdot g(\\mathbf{x} - \\mathbf{x}_i) \\cdot \\cos(2\\pi\\mathbf{k}_i \\cdot (\\mathbf{x} - \\mathbf{x}_i) + \\phi_i)$$\n\u5176\u4e2d$g$\u662f\u9ad8\u65af\u6838\uff1a\n$$g(\\mathbf{x}) = K \\exp\\left(-\\pi|\\mathbf{x}|^2/a^2\\right)$$\n<strong>\u53c2\u6570\u63a7\u5236</strong>\uff1a</p>\n<ul>\n<li>$\\mathbf{k}_i$\uff1a\u9891\u7387\u5411\u91cf</li>\n<li>$a$\uff1a\u5e26\u5bbd</li>\n<li>$\\phi_i$\uff1a\u76f8\u4f4d</li>\n</ul>\n<h4 id=\"_19\">\u6d41\u4f53\u566a\u58f0</h4>\n<p>\u65f6\u95f4\u76f8\u5173\u7684\u566a\u58f0\uff0c\u4fdd\u6301\u65f6\u95f4\u8fde\u7eed\u6027\uff1a\n$$flow(\\mathbf{x}, t) = \\sum_{i} \\alpha_i(t) \\cdot noise(\\mathbf{x} + \\mathbf{v}_i t)$$\n\u5176\u4e2d\uff1a\n$$\\alpha_i(t) = \\max(0, 1 - |t - t_i|/T)$$\n\u8fd9\u786e\u4fdd\u4e86\u5e73\u6ed1\u7684\u65f6\u95f4\u8fc7\u6e21\u3002</p>\n<h4 id=\"_20\">\u5411\u91cf\u573a\u52a8\u753b</h4>\n<p>\u4f7f\u7528\u5411\u91cf\u573a\u9a71\u52a8\u7c92\u5b50\u8fd0\u52a8\uff1a\n$$\\frac{d\\mathbf{x}}{dt} = \\mathbf{v}(\\mathbf{x}, t)$$\n<strong>\u65e0\u6563\u5ea6\u5411\u91cf\u573a</strong>\uff1a\n$$\\mathbf{v} = \\nabla \\times \\boldsymbol{\\psi}$$\n\u5176\u4e2d$\\boldsymbol{\\psi}$\u662f\u6d41\u51fd\u6570\u3002</p>\n<p><strong>\u6d41\u573a\u7684\u7a0b\u5e8f\u5316\u751f\u6210</strong>\uff1a</p>\n<ul>\n<li>\u6e29\u6d41\uff1a$\\mathbf{v} = \\nabla \\times (noise(\\mathbf{x})\\hat{\\mathbf{z}})$</li>\n<li>\u6f29\u6d41\uff1a$\\mathbf{v} = \\omega \\times (\\mathbf{x} - \\mathbf{c})$</li>\n<li>\u6c47/\u6e90\uff1a$\\mathbf{v} = \\pm\\frac{\\mathbf{x} - \\mathbf{c}}{|\\mathbf{x} - \\mathbf{c}|^2}$</li>\n</ul>\n<h4 id=\"_21\">\u7fa4\u4f53\u884c\u4e3a\u6a21\u62df</h4>\n<p><strong>Boids\u6a21\u578b</strong>\uff1a</p>\n<ol>\n<li><strong>\u5206\u79bb</strong>\uff1a$\\mathbf{f}_{sep} = -\\sum_{j \\in neighbors} \\frac{\\mathbf{x}_j - \\mathbf{x}_i}{|\\mathbf{x}_j - \\mathbf{x}_i|^2}$</li>\n<li><strong>\u5bf9\u9f50</strong>\uff1a$\\mathbf{f}_{align} = \\frac{1}{|neighbors|}\\sum_{j \\in neighbors} \\mathbf{v}_j - \\mathbf{v}_i$</li>\n<li><strong>\u805a\u96c6</strong>\uff1a$\\mathbf{f}_{cohesion} = \\frac{1}{|neighbors|}\\sum_{j \\in neighbors} \\mathbf{x}_j - \\mathbf{x}_i$</li>\n</ol>\n<p><strong>\u52bf\u573a\u65b9\u6cd5</strong>\uff1a\n$$\\mathbf{a}_i = -\\nabla U(\\mathbf{x}_i) + \\sum_j \\mathbf{f}_{interaction}(\\mathbf{x}_i, \\mathbf{x}_j)$$\n\u5176\u4e2d$U$\u662f\u73af\u5883\u52bf\u573a\u3002</p>\n<h2 id=\"112\">11.2 \u8d28\u70b9\u5f39\u7c27\u7cfb\u7edf\u4e0e\u8fd0\u52a8\u5b66</h2>\n<h3 id=\"1121\">11.2.1 \u8d28\u70b9\u7cfb\u7edf\u7684\u7269\u7406\u6a21\u578b</h3>\n<p>\u8d28\u70b9\u7cfb\u7edf\u662f\u7269\u7406\u6a21\u62df\u7684\u57fa\u7840\u3002\u6bcf\u4e2a\u8d28\u70b9 $i$ \u5177\u6709\uff1a</p>\n<ul>\n<li>\u8d28\u91cf $m_i$</li>\n<li>\u4f4d\u7f6e $\\mathbf{x}_i$</li>\n<li>\u901f\u5ea6 $\\mathbf{v}_i$</li>\n</ul>\n<p>\u7cfb\u7edf\u7684\u8fd0\u52a8\u7531\u725b\u987f\u7b2c\u4e8c\u5b9a\u5f8b\u63a7\u5236\uff1a\n$$m_i \\mathbf{a}_i = \\mathbf{f}_i = \\sum_j \\mathbf{f}_{ij} + \\mathbf{f}_{ext,i}$$</p>\n<h3 id=\"1122-\">11.2.2 \u5f39\u7c27-\u963b\u5c3c\u5668\u6a21\u578b</h3>\n<p>\u5f39\u7c27\u529b\u7684\u8ba1\u7b97\u9075\u5faa\u80e1\u514b\u5b9a\u5f8b\uff1a\n$$\\mathbf{f}_{spring} = -k_s (|\\mathbf{x}_i - \\mathbf{x}_j| - l_0) \\frac{\\mathbf{x}_i - \\mathbf{x}_j}{|\\mathbf{x}_i - \\mathbf{x}_j|}$$\n\u963b\u5c3c\u529b\u7528\u4e8e\u80fd\u91cf\u8017\u6563\uff1a\n$$\\mathbf{f}_{damping} = -k_d (\\mathbf{v}_i - \\mathbf{v}_j) \\cdot \\frac{\\mathbf{x}_i - \\mathbf{x}_j}{|\\mathbf{x}_i - \\mathbf{x}_j|} \\frac{\\mathbf{x}_i - \\mathbf{x}_j}{|\\mathbf{x}_i - \\mathbf{x}_j|}$$\n\u7ec4\u5408\u540e\u7684\u603b\u529b\uff1a\n$$\\mathbf{f}_{total} = \\mathbf{f}_{spring} + \\mathbf{f}_{damping}$$</p>\n<h3 id=\"1123\">11.2.3 \u7ea6\u675f\u4e0e\u6c42\u89e3\u5668</h3>\n<p>\u7ea6\u675f\u53ef\u4ee5\u8868\u793a\u4e3a\uff1a\n$$C(\\mathbf{x}) = 0$$\n\u5bf9\u4e8e\u8ddd\u79bb\u7ea6\u675f\uff1a\n$$C_{ij} = |\\mathbf{x}_i - \\mathbf{x}_j| - d_{ij} = 0$$\n\u4f7f\u7528\u62c9\u683c\u6717\u65e5\u4e58\u6570\u6cd5\uff0c\u8fd0\u52a8\u65b9\u7a0b\u53d8\u4e3a\uff1a\n$$\\mathbf{M}\\ddot{\\mathbf{x}} = \\mathbf{f} + \\mathbf{J}^T \\boldsymbol{\\lambda}$$\n$$\\mathbf{J}\\ddot{\\mathbf{x}} = -\\dot{\\mathbf{J}}\\dot{\\mathbf{x}}$$\n\u5176\u4e2d $\\mathbf{J} = \\frac{\\partial C}{\\partial \\mathbf{x}}$ \u662f\u7ea6\u675f\u7684\u96c5\u53ef\u6bd4\u77e9\u9635\u3002</p>\n<h3 id=\"1124-ikfk\">11.2.4 \u9006\u8fd0\u52a8\u5b66(IK)\u4e0e\u6b63\u8fd0\u52a8\u5b66(FK)</h3>\n<p><strong>\u6b63\u8fd0\u52a8\u5b66</strong>\uff1a\u7ed9\u5b9a\u5173\u8282\u89d2\u5ea6 $\\boldsymbol{\\theta}$\uff0c\u8ba1\u7b97\u672b\u7aef\u6267\u884c\u5668\u4f4d\u7f6e\uff1a\n$$\\mathbf{x}_{end} = f_{FK}(\\boldsymbol{\\theta})$$\n<strong>\u9006\u8fd0\u52a8\u5b66</strong>\uff1a\u7ed9\u5b9a\u76ee\u6807\u4f4d\u7f6e $\\mathbf{x}_{target}$\uff0c\u6c42\u89e3\u5173\u8282\u89d2\u5ea6\uff1a\n$$\\boldsymbol{\\theta} = f_{IK}^{-1}(\\mathbf{x}_{target})$$\nIK\u901a\u5e38\u6ca1\u6709\u89e3\u6790\u89e3\uff0c\u9700\u8981\u8fed\u4ee3\u6c42\u89e3\u3002\u4f7f\u7528\u96c5\u53ef\u6bd4\u8f6c\u7f6e\u6cd5\uff1a\n$$\\Delta\\boldsymbol{\\theta} = \\alpha \\mathbf{J}^T (\\mathbf{x}_{target} - \\mathbf{x}_{current})$$\n\u6216\u4f2a\u9006\u6cd5\uff1a\n$$\\Delta\\boldsymbol{\\theta} = \\mathbf{J}^+ (\\mathbf{x}_{target} - \\mathbf{x}_{current})$$\n\u5176\u4e2d $\\mathbf{J}^+ = \\mathbf{J}^T(\\mathbf{J}\\mathbf{J}^T)^{-1}$ \u662f\u96c5\u53ef\u6bd4\u77e9\u9635\u7684\u4f2a\u9006\u3002</p>\n<h3 id=\"1125\">11.2.5 \u96c5\u53ef\u6bd4\u77e9\u9635\u4e0e\u5947\u5f02\u6027</h3>\n<h4 id=\"_22\">\u96c5\u53ef\u6bd4\u77e9\u9635\u7684\u51e0\u4f55\u610f\u4e49</h4>\n<p>\u96c5\u53ef\u6bd4\u77e9\u9635\u63cf\u8ff0\u4e86\u5173\u8282\u7a7a\u95f4\u901f\u5ea6\u5230\u7b1b\u5361\u5c14\u7a7a\u95f4\u901f\u5ea6\u7684\u7ebf\u6027\u6620\u5c04\uff1a\n$$\\dot{\\mathbf{x}} = \\mathbf{J}(\\boldsymbol{\\theta})\\dot{\\boldsymbol{\\theta}}$$\n\u5bf9\u4e8e\u65cb\u8f6c\u5173\u8282$i$\uff0c\u5176\u5bf9\u672b\u7aef\u6267\u884c\u5668\u7684\u8d21\u732e\uff1a\n$$\\mathbf{J}_i = \\begin{cases}\n[\\mathbf{z}_i \\times (\\mathbf{p}_{end} - \\mathbf{p}_i)]^T &amp; \\text{\u4f4d\u7f6e\u90e8\u5206} \\\n\\mathbf{z}_i^T &amp; \\text{\u65b9\u5411\u90e8\u5206}\n\\end{cases}$$\n\u5176\u4e2d$\\mathbf{z}_i$\u662f\u5173\u8282$i$\u7684\u65cb\u8f6c\u8f74\uff0c$\\mathbf{p}_i$\u662f\u5173\u8282\u4f4d\u7f6e\u3002</p>\n<h4 id=\"_23\">\u5947\u5f02\u6027\u5206\u6790</h4>\n<p><strong>\u5947\u5f02\u914d\u7f6e</strong>\u53d1\u751f\u5728\uff1a</p>\n<ol>\n<li><strong>\u8fb9\u754c\u5947\u5f02\u6027</strong>\uff1a\u673a\u68b0\u81c2\u5b8c\u5168\u4f38\u5c55\u6216\u6536\u7f29</li>\n<li><strong>\u5185\u90e8\u5947\u5f02\u6027</strong>\uff1a\u4e24\u4e2a\u6216\u591a\u4e2a\u5173\u8282\u8f74\u5bf9\u9f50</li>\n</ol>\n<p>\u5947\u5f02\u6027\u7684\u6570\u5b66\u7279\u5f81\uff1a</p>\n<ul>\n<li>$\\det(\\mathbf{J}\\mathbf{J}^T) = 0$</li>\n<li>\u96c5\u53ef\u6bd4\u77e9\u9635\u964d\u79e9</li>\n<li>\u67d0\u4e9b\u65b9\u5411\u4e0a\u5931\u53bb\u81ea\u7531\u5ea6</li>\n</ul>\n<p><strong>\u53ef\u64cd\u4f5c\u6027\u692d\u7403</strong>\uff1a\n$$\\mathcal{E} = {\\mathbf{v} : \\mathbf{v}^T(\\mathbf{J}\\mathbf{J}^T)^{-1}\\mathbf{v} \\leq 1}$$\n\u692d\u7403\u7684\u4e3b\u8f74\u7531$\\mathbf{J}\\mathbf{J}^T$\u7684\u7279\u5f81\u5411\u91cf\u7ed9\u51fa\uff0c\u8f74\u957f\u4e3a\u7279\u5f81\u503c\u7684\u5e73\u65b9\u6839\u3002</p>\n<h4 id=\"_24\">\u5904\u7406\u5947\u5f02\u6027\u7684\u9ad8\u7ea7\u65b9\u6cd5</h4>\n<ol>\n<li>\n<p><strong>\u963b\u5c3c\u6700\u5c0f\u4e8c\u4e58\uff08DLS\uff09</strong>\uff1a\n$$\\Delta\\boldsymbol{\\theta} = \\mathbf{J}^T(\\mathbf{J}\\mathbf{J}^T + \\lambda^2\\mathbf{I})^{-1}\\Delta\\mathbf{x}$$\n\u81ea\u9002\u5e94\u963b\u5c3c\u56e0\u5b50\uff1a\n$$\\lambda = \\begin{cases}\n0 &amp; \\text{if } \\sigma_{min} \\geq \\epsilon \\\n\\sqrt{\\epsilon^2 - \\sigma_{min}^2} &amp; \\text{otherwise}\n\\end{cases}$$</p>\n</li>\n<li>\n<p><strong>\u5947\u5f02\u503c\u5206\u89e3\uff08SVD\uff09\u8fc7\u6ee4</strong>\uff1a\n$$\\mathbf{J} = \\mathbf{U}\\boldsymbol{\\Sigma}\\mathbf{V}^T = \\sum_{i=1}^r \\sigma_i \\mathbf{u}_i \\mathbf{v}_i^T$$\n\u8fc7\u6ee4\u4f2a\u9006\uff1a\n$$\\mathbf{J}^+ = \\sum_{i=1}^r \\frac{1}{\\sigma_i} \\mathbf{v}_i \\mathbf{u}_i^T, \\quad \\text{\u4ec5\u5f53} \\sigma_i &gt; \\epsilon$$</p>\n</li>\n<li>\n<p><strong>\u68af\u5ea6\u6295\u5f71\u6cd5</strong>\uff1a</p>\n</li>\n</ol>\n<p>\u5728\u96f6\u7a7a\u95f4\u4e2d\u4f18\u5316\u6b21\u8981\u76ee\u6807\uff1a\n$$\\Delta\\boldsymbol{\\theta} = \\mathbf{J}^+\\Delta\\mathbf{x} + (\\mathbf{I} - \\mathbf{J}^+\\mathbf{J})\\nabla h(\\boldsymbol{\\theta})$$\n\u5176\u4e2d$h(\\boldsymbol{\\theta})$\u662f\u6b21\u8981\u76ee\u6807\u51fd\u6570\uff08\u5982\u907f\u514d\u5173\u8282\u9650\u4f4d\uff09\u3002</p>\n<h4 id=\"_25\">\u4efb\u52a1\u4f18\u5148\u7ea7\u65b9\u6cd5</h4>\n<p>\u5904\u7406\u591a\u4e2a\u4efb\u52a1\u65f6\uff0c\u4f7f\u7528\u4f18\u5148\u7ea7\uff1a</p>\n<p>\u4e3b\u4efb\u52a1\uff1a$\\mathbf{J}_1\\dot{\\boldsymbol{\\theta}} = \\dot{\\mathbf{x}}_1$</p>\n<p>\u6b21\u4efb\u52a1\u5728\u4e3b\u4efb\u52a1\u96f6\u7a7a\u95f4\u4e2d\uff1a\n$$\\dot{\\boldsymbol{\\theta}} = \\mathbf{J}_1^+\\dot{\\mathbf{x}}_1 + (\\mathbf{I} - \\mathbf{J}_1^+\\mathbf{J}_1)\\mathbf{J}_2^+\\dot{\\mathbf{x}}_2$$</p>\n<h3 id=\"1126\">11.2.6 \u9ad8\u7ea7\u7ea6\u675f\u5904\u7406</h3>\n<h4 id=\"pbd\">\u4f4d\u7f6e\u57fa\u7ea6\u675f\uff08PBD\uff09</h4>\n<p>\u76f4\u63a5\u5728\u4f4d\u7f6e\u7ea7\u522b\u6ee1\u8db3\u7ea6\u675f\uff1a</p>\n<ol>\n<li>\u9884\u6d4b\u4f4d\u7f6e\uff1a$\\mathbf{p}_i^* = \\mathbf{x}_i + \\Delta t \\mathbf{v}_i$</li>\n<li>\n<p>\u6c42\u89e3\u7ea6\u675f\uff1a\n$$\\Delta\\mathbf{p}_i = -\\frac{C(\\mathbf{p}^*)}{\\sum_j w_j|\\nabla_{\\mathbf{p}_j}C|^2}w_i\\nabla_{\\mathbf{p}_i}C$$</p>\n</li>\n<li>\n<p>\u66f4\u65b0\u4f4d\u7f6e\uff1a$\\mathbf{p}_i = \\mathbf{p}_i^* + \\Delta\\mathbf{p}_i$</p>\n</li>\n<li>\u66f4\u65b0\u901f\u5ea6\uff1a$\\mathbf{v}_i = (\\mathbf{p}_i - \\mathbf{x}_i)/\\Delta t$</li>\n</ol>\n<p>\u5176\u4e2d$w_i = 1/m_i$\u662f\u9006\u8d28\u91cf\u3002</p>\n<h4 id=\"xpbdpbd\">XPBD\uff08\u6269\u5c55PBD\uff09</h4>\n<p>\u5f15\u5165\u62c9\u683c\u6717\u65e5\u4e58\u6570\u4f7f\u7ea6\u675f\u66f4\u7269\u7406\uff1a\n$$\\Delta\\lambda = \\frac{-C - \\tilde{\\alpha}\\lambda}{\\sum_j w_j|\\nabla_{\\mathbf{p}_j}C|^2 + \\tilde{\\alpha}}$$\n\u5176\u4e2d$\\tilde{\\alpha} = \\alpha/(\\Delta t)^2$\u662f\u65f6\u95f4\u6b65\u957f\u76f8\u5173\u7684\u67d4\u5ea6\u3002</p>\n<h4 id=\"_26\">\u5206\u5c42\u6c42\u89e3\u5668</h4>\n<p>\u5bf9\u4e8e\u590d\u6742\u7cfb\u7edf\uff0c\u4f7f\u7528\u591a\u7ea7\u6c42\u89e3\uff1a</p>\n<ol>\n<li><strong>\u7c97\u7c92\u5ea6</strong>\uff1a\u89e3\u51b3\u5168\u5c40\u7ea6\u675f\uff08\u5982\u6574\u4f53\u5f62\u72b6\u4fdd\u6301\uff09</li>\n<li><strong>\u4e2d\u7c92\u5ea6</strong>\uff1a\u89e3\u51b3\u5c40\u90e8\u7ea6\u675f\uff08\u5982\u5c40\u90e8\u78b0\u649e\uff09  </li>\n<li><strong>\u7ec6\u7c92\u5ea6</strong>\uff1a\u89e3\u51b3\u7ec6\u8282\u7ea6\u675f\uff08\u5982\u8936\u76b1\u7ec6\u8282\uff09</li>\n</ol>\n<p>\u6bcf\u7ea7\u4f7f\u7528\u4e0d\u540c\u7684\u8fed\u4ee3\u6b21\u6570\u548c\u7cbe\u5ea6\u8981\u6c42\u3002</p>\n<h2 id=\"113\">11.3 \u5e38\u5fae\u5206\u65b9\u7a0b\u6c42\u89e3</h2>\n<h3 id=\"1131-ode\">11.3.1 \u7269\u7406\u6a21\u62df\u4e2d\u7684ODE\u95ee\u9898</h3>\n<p>\u7269\u7406\u6a21\u62df\u901a\u5e38\u5f52\u7ed3\u4e3a\u6c42\u89e3\u4ee5\u4e0b\u5f62\u5f0f\u7684ODE\u7cfb\u7edf\uff1a\n$$\\frac{d\\mathbf{y}}{dt} = \\mathbf{f}(t, \\mathbf{y})$$\n\u5176\u4e2d\u72b6\u6001\u5411\u91cf $\\mathbf{y} = [\\mathbf{x}, \\mathbf{v}]^T$\uff0c\u5bfc\u6570\u4e3a\uff1a\n$$\\frac{d\\mathbf{y}}{dt} = \\begin{bmatrix} \\mathbf{v} \\ \\mathbf{M}^{-1}\\mathbf{f} \\end{bmatrix}$$</p>\n<h3 id=\"1132\">11.3.2 \u663e\u5f0f\u4e0e\u9690\u5f0f\u79ef\u5206\u65b9\u6cd5</h3>\n<p><strong>\u663e\u5f0f\u6b27\u62c9\u6cd5</strong>\uff1a\n$$\\mathbf{y}_{n+1} = \\mathbf{y}_n + h\\mathbf{f}(t_n, \\mathbf{y}_n)$$\n\u4f18\u70b9\uff1a\u7b80\u5355\u5feb\u901f\n\u7f3a\u70b9\uff1a\u6761\u4ef6\u7a33\u5b9a\uff0c\u9700\u8981\u5c0f\u65f6\u95f4\u6b65\u957f</p>\n<p><strong>\u9690\u5f0f\u6b27\u62c9\u6cd5</strong>\uff1a\n$$\\mathbf{y}_{n+1} = \\mathbf{y}_n + h\\mathbf{f}(t_{n+1}, \\mathbf{y}_{n+1})$$\n\u9700\u8981\u6c42\u89e3\u975e\u7ebf\u6027\u65b9\u7a0b\uff0c\u901a\u5e38\u4f7f\u7528\u725b\u987f\u8fed\u4ee3\uff1a\n$$(\\mathbf{I} - h\\frac{\\partial \\mathbf{f}}{\\partial \\mathbf{y}})\\Delta\\mathbf{y} = h\\mathbf{f}(t_{n+1}, \\mathbf{y}_n)$$\n<strong>\u4e2d\u70b9\u6cd5\uff08RK2\uff09</strong>\uff1a\n$$\\mathbf{k}_1 = h\\mathbf{f}(t_n, \\mathbf{y}_n)$$\n$$\\mathbf{k}_2 = h\\mathbf{f}(t_n + \\frac{h}{2}, \\mathbf{y}_n + \\frac{\\mathbf{k}_1}{2})$$\n$$\\mathbf{y}_{n+1} = \\mathbf{y}_n + \\mathbf{k}_2$$\n<strong>RK4\uff08\u56db\u9636Runge-Kutta\uff09</strong>\uff1a\n$$\\mathbf{k}_1 = h\\mathbf{f}(t_n, \\mathbf{y}_n)$$\n$$\\mathbf{k}_2 = h\\mathbf{f}(t_n + \\frac{h}{2}, \\mathbf{y}_n + \\frac{\\mathbf{k}_1}{2})$$\n$$\\mathbf{k}_3 = h\\mathbf{f}(t_n + \\frac{h}{2}, \\mathbf{y}_n + \\frac{\\mathbf{k}_2}{2})$$\n$$\\mathbf{k}_4 = h\\mathbf{f}(t_n + h, \\mathbf{y}_n + \\mathbf{k}_3)$$\n$$\\mathbf{y}_{n+1} = \\mathbf{y}_n + \\frac{1}{6}(\\mathbf{k}_1 + 2\\mathbf{k}_2 + 2\\mathbf{k}_3 + \\mathbf{k}_4)$$</p>\n<h3 id=\"1133\">11.3.3 \u7a33\u5b9a\u6027\u5206\u6790</h3>\n<p>\u8003\u8651\u6d4b\u8bd5\u65b9\u7a0b $\\dot{y} = \\lambda y$\uff0c\u5176\u4e2d $\\lambda &lt; 0$\u3002</p>\n<p>\u663e\u5f0f\u6b27\u62c9\u7684\u7a33\u5b9a\u6761\u4ef6\uff1a\n$$|1 + h\\lambda| &lt; 1$$\n$$h &lt; \\frac{2}{|\\lambda|}$$\n\u5bf9\u4e8e\u5f39\u7c27\u7cfb\u7edf\uff0c$\\lambda \\approx -\\sqrt{k/m}$\uff0c\u56e0\u6b64\uff1a\n$$h &lt; 2\\sqrt{\\frac{m}{k}}$$\n\u9690\u5f0f\u6b27\u62c9\u603b\u662f\u7a33\u5b9a\u7684\uff08A-\u7a33\u5b9a\uff09\uff0c\u4f46\u53ef\u80fd\u8fc7\u5ea6\u963b\u5c3c\u3002</p>\n<h3 id=\"1134\">11.3.4 \u81ea\u9002\u5e94\u65f6\u95f4\u6b65\u957f</h3>\n<p>\u4f7f\u7528\u5d4c\u5165\u5f0fRK\u65b9\u6cd5\uff08\u5982RK45\uff09\u4f30\u8ba1\u8bef\u5dee\uff1a\n$$\\epsilon = |\\mathbf{y}_{n+1}^{(5)} - \\mathbf{y}_{n+1}^{(4)}|$$\n\u8c03\u6574\u65f6\u95f4\u6b65\u957f\uff1a\n$$h_{new} = h \\cdot \\min\\left(2, \\max\\left(0.5, 0.9\\left(\\frac{\\epsilon_{tol}}{\\epsilon}\\right)^{1/5}\\right)\\right)$$</p>\n<h3 id=\"1135\">11.3.5 \u80fd\u91cf\u5b88\u6052\u4e0e\u6570\u503c\u8017\u6563</h3>\n<h4 id=\"_27\">\u54c8\u5bc6\u987f\u7cfb\u7edf\u4e0e\u8f9b\u7ed3\u6784</h4>\n<p>\u54c8\u5bc6\u987f\u7cfb\u7edf\u7684\u76f8\u7a7a\u95f4\u6f14\u5316\u4fdd\u6301\u8f9b\u7ed3\u6784\uff1a\n$$\\frac{d}{dt}\\begin{bmatrix} \\mathbf{q} \\ \\mathbf{p} \\end{bmatrix} = \\begin{bmatrix} \\mathbf{0} &amp; \\mathbf{I} \\ -\\mathbf{I} &amp; \\mathbf{0} \\end{bmatrix} \\begin{bmatrix} \\nabla_\\mathbf{q} H \\ \\nabla_\\mathbf{p} H \\end{bmatrix}$$\n\u5176\u4e2d$H(\\mathbf{q}, \\mathbf{p})$\u662f\u54c8\u5bc6\u987f\u91cf\u3002</p>\n<p><strong>Liouville\u5b9a\u7406</strong>\uff1a\u76f8\u7a7a\u95f4\u4f53\u79ef\u5728\u54c8\u5bc6\u987f\u6d41\u4e0b\u4fdd\u6301\u4e0d\u53d8\u3002</p>\n<h4 id=\"_28\">\u8f9b\u79ef\u5206\u5668</h4>\n<p><strong>St\u00f6rmer-Verlet\u65b9\u6cd5</strong>\uff1a\n$$\\mathbf{x}_{n+1} = 2\\mathbf{x}_n - \\mathbf{x}_{n-1} + h^2\\mathbf{M}^{-1}\\mathbf{f}_n$$\n\u8fd9\u662f\u4e8c\u9636\u7cbe\u5ea6\u7684\u8f9b\u79ef\u5206\u5668\u3002\u901f\u5ea6\u8ba1\u7b97\uff1a\n$$\\mathbf{v}_n = \\frac{\\mathbf{x}_{n+1} - \\mathbf{x}_{n-1}}{2h} + O(h^2)$$\n<strong>\u901f\u5ea6Verlet\u65b9\u6cd5</strong>\uff08\u6570\u503c\u4e0a\u66f4\u7a33\u5b9a\uff09\uff1a\n$$\\mathbf{x}_{n+1} = \\mathbf{x}_n + h\\mathbf{v}_n + \\frac{h^2}{2}\\mathbf{a}_n$$\n$$\\mathbf{v}_{n+1} = \\mathbf{v}_n + \\frac{h}{2}(\\mathbf{a}_n + \\mathbf{a}_{n+1})$$</p>\n<h4 id=\"_29\">\u80fd\u91cf\u8bef\u5dee\u5206\u6790</h4>\n<p>\u5bf9\u4e8e\u8f9b\u79ef\u5206\u5668\uff0c\u80fd\u91cf\u8bef\u5dee\u662f\u6709\u754c\u7684\uff1a\n$$|H(t) - H(0)| \\leq Ch^p$$\n\u5176\u4e2d$p$\u662f\u65b9\u6cd5\u7684\u9636\u6570\uff0c$C$\u4e0e\u65f6\u95f4$t$\u65e0\u5173\u3002</p>\n<p>\u975e\u8f9b\u65b9\u6cd5\uff08\u5982RK4\uff09\u7684\u80fd\u91cf\u8bef\u5dee\u53ef\u80fd\u7ebf\u6027\u589e\u957f\uff1a\n$$|H(t) - H(0)| \\sim Cth^p$$</p>\n<h4 id=\"_30\">\u540e\u5411\u8bef\u5dee\u5206\u6790</h4>\n<p>\u8f9b\u79ef\u5206\u5668\u7cbe\u786e\u6c42\u89e3\u4e00\u4e2a\u6270\u52a8\u7684\u54c8\u5bc6\u987f\u7cfb\u7edf\uff1a\n$$\\tilde{H} = H + h^2H_2 + h^4H_4 + \\cdots$$\n\u8fd9\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u8f9b\u65b9\u6cd5\u957f\u671f\u884c\u4e3a\u66f4\u597d\u3002</p>\n<h4 id=\"_31\">\u7ea6\u675f\u7cfb\u7edf\u7684\u80fd\u91cf\u5b88\u6052</h4>\n<p>\u5bf9\u4e8e\u7ea6\u675f\u7cfb\u7edf\uff0c\u4f7f\u7528<strong>SHAKE\u7b97\u6cd5</strong>\uff1a</p>\n<ol>\n<li>\u65e0\u7ea6\u675f\u66f4\u65b0\uff1a$\\mathbf{r}^* = \\mathbf{r}_n + h\\mathbf{v}_n + \\frac{h^2}{2m}\\mathbf{f}_n$</li>\n<li>\u6c42\u89e3\u7ea6\u675f\uff1a$g(\\mathbf{r}_{n+1}) = 0$</li>\n<li>\u7ea6\u675f\u529b\uff1a$\\mathbf{f}_c = \\frac{m}{h^2}(\\mathbf{r}_{n+1} - \\mathbf{r}^*)$</li>\n</ol>\n<p><strong>RATTLE\u7b97\u6cd5</strong>\u540c\u65f6\u7ea6\u675f\u4f4d\u7f6e\u548c\u901f\u5ea6\u3002</p>\n<h3 id=\"1136\">11.3.6 \u9ad8\u9636\u79ef\u5206\u65b9\u6cd5\u4e0e\u5206\u88c2\u7b97\u6cd5</h3>\n<h4 id=\"_32\">\u9ad8\u9636\u8f9b\u79ef\u5206\u5668</h4>\n<p><strong>Forest-Ruth\u65b9\u6cd5</strong>\uff084\u9636\uff09\uff1a\n$$\\begin{align}\n\\mathbf{x}_{1/2} &amp;= \\mathbf{x}_n + \\theta h \\mathbf{v}_n/2 \\\n\\mathbf{v}_1 &amp;= \\mathbf{v}_n + \\theta h \\mathbf{a}(\\mathbf{x}_{1/2}) \\\n\\mathbf{x}_1 &amp;= \\mathbf{x}_{1/2} + (1-\\theta)h\\mathbf{v}_1/2 \\\n\\mathbf{v}_{3/2} &amp;= \\mathbf{v}_1 + (1-2\\theta)h\\mathbf{a}(\\mathbf{x}_1) \\\n\\mathbf{x}_{3/2} &amp;= \\mathbf{x}_1 + (1-\\theta)h\\mathbf{v}_{3/2}/2 \\\n\\mathbf{v}_2 &amp;= \\mathbf{v}_{3/2} + \\theta h \\mathbf{a}(\\mathbf{x}_{3/2}) \\\n\\mathbf{x}_{n+1} &amp;= \\mathbf{x}_{3/2} + \\theta h \\mathbf{v}_2/2\n\\end{align}$$\n\u5176\u4e2d$\\theta = 2^{1/3}/(2-2^{1/3})$\u3002</p>\n<h4 id=\"_33\">\u7b97\u5b50\u5206\u88c2\u65b9\u6cd5</h4>\n<p>\u5bf9\u4e8e$\\frac{d\\mathbf{y}}{dt} = \\mathbf{A}(\\mathbf{y}) + \\mathbf{B}(\\mathbf{y})$\uff1a</p>\n<p><strong>Strang\u5206\u88c2</strong>\uff08\u4e8c\u9636\uff09\uff1a\n$$\\mathbf{y}_{n+1} = e^{h\\mathbf{B}/2} e^{h\\mathbf{A}} e^{h\\mathbf{B}/2} \\mathbf{y}_n$$\n<strong>Yoshida\u5206\u88c2</strong>\uff084\u9636\uff09\uff1a\n$$\\mathbf{y}_{n+1} = e^{w_1h\\mathbf{A}} e^{w_1h\\mathbf{B}} e^{w_2h\\mathbf{A}} e^{w_2h\\mathbf{B}} e^{w_3h\\mathbf{A}} e^{w_3h\\mathbf{B}} e^{w_2h\\mathbf{A}} e^{w_2h\\mathbf{B}} e^{w_1h\\mathbf{A}} e^{w_1h\\mathbf{B}} \\mathbf{y}_n$$\n\u5176\u4e2d\u6743\u91cd\u7ecf\u8fc7\u7cbe\u5fc3\u9009\u62e9\u4ee5\u6d88\u9664\u4f4e\u9636\u8bef\u5dee\u9879\u3002</p>\n<h4 id=\"_34\">\u591a\u65f6\u95f4\u5c3a\u5ea6\u65b9\u6cd5</h4>\n<p>\u5bf9\u4e8e\u521a\u6027\u7cfb\u7edf\uff0c\u4f7f\u7528<strong>IMEX\u65b9\u6cd5</strong>\uff1a\n$$\\mathbf{y}_{n+1} = \\mathbf{y}_n + h[\\mathbf{f}_{explicit}(\\mathbf{y}_n) + \\mathbf{f}_{implicit}(\\mathbf{y}_{n+1})]$$\n\u5c06\u5feb\u53d8\uff08\u521a\u6027\uff09\u90e8\u5206\u9690\u5f0f\u5904\u7406\uff0c\u6162\u53d8\u90e8\u5206\u663e\u5f0f\u5904\u7406\u3002</p>\n<h2 id=\"114\">11.4 \u521a\u4f53\u4e0e\u6d41\u4f53\u6a21\u62df</h2>\n<h3 id=\"1141\">11.4.1 \u521a\u4f53\u52a8\u529b\u5b66\u57fa\u7840</h3>\n<p>\u521a\u4f53\u7684\u72b6\u6001\u7531\u4ee5\u4e0b\u91cf\u63cf\u8ff0\uff1a</p>\n<ul>\n<li>\u8d28\u5fc3\u4f4d\u7f6e\uff1a$\\mathbf{x}$</li>\n<li>\u65b9\u5411\uff08\u56db\u5143\u6570\uff09\uff1a$\\mathbf{q}$</li>\n<li>\u7ebf\u901f\u5ea6\uff1a$\\mathbf{v}$</li>\n<li>\u89d2\u901f\u5ea6\uff1a$\\boldsymbol{\\omega}$</li>\n</ul>\n<p>\u8fd0\u52a8\u65b9\u7a0b\uff1a\n$$m\\dot{\\mathbf{v}} = \\mathbf{f}$$\n$$\\mathbf{I}\\dot{\\boldsymbol{\\omega}} + \\boldsymbol{\\omega} \\times (\\mathbf{I}\\boldsymbol{\\omega}) = \\boldsymbol{\\tau}$$\n\u5176\u4e2d $\\mathbf{I}$ \u662f\u60ef\u6027\u5f20\u91cf\uff0c$\\boldsymbol{\\tau}$ \u662f\u529b\u77e9\u3002</p>\n<p>\u4e16\u754c\u5750\u6807\u7cfb\u4e0b\u7684\u60ef\u6027\u5f20\u91cf\uff1a\n$$\\mathbf{I}_{world} = \\mathbf{R}\\mathbf{I}_{body}\\mathbf{R}^T$$</p>\n<h3 id=\"1142\">11.4.2 \u78b0\u649e\u68c0\u6d4b\u4e0e\u54cd\u5e94</h3>\n<p><strong>\u78b0\u649e\u68c0\u6d4b</strong>\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a</p>\n<ol>\n<li><strong>\u7c97\u68c0\u6d4b\uff08Broad Phase\uff09</strong>\uff1a\u4f7f\u7528AABB\u3001OBB\u6216\u7403\u5f62\u5305\u56f4\u76d2</li>\n<li><strong>\u7ec6\u68c0\u6d4b\uff08Narrow Phase\uff09</strong>\uff1aGJK\u7b97\u6cd5\u6216SAT\uff08\u5206\u79bb\u8f74\u5b9a\u7406\uff09</li>\n</ol>\n<p><strong>\u78b0\u649e\u54cd\u5e94</strong>\u4f7f\u7528\u51b2\u91cf\u65b9\u6cd5\uff1a</p>\n<p>\u63a5\u89e6\u70b9\u7684\u76f8\u5bf9\u901f\u5ea6\uff1a\n$$\\mathbf{v}_{rel} = (\\mathbf{v}_A + \\boldsymbol{\\omega}_A \\times \\mathbf{r}_A) - (\\mathbf{v}_B + \\boldsymbol{\\omega}_B \\times \\mathbf{r}_B)$$\n\u51b2\u91cf\u5927\u5c0f\uff1a\n$$j = \\frac{-(1 + e)\\mathbf{v}_{rel} \\cdot \\mathbf{n}}{\\frac{1}{m_A} + \\frac{1}{m_B} + (\\mathbf{I}_A^{-1}(\\mathbf{r}_A \\times \\mathbf{n})) \\times \\mathbf{r}_A) \\cdot \\mathbf{n} + ((\\mathbf{I}_B^{-1}(\\mathbf{r}_B \\times \\mathbf{n})) \\times \\mathbf{r}_B) \\cdot \\mathbf{n}}$$\n\u5176\u4e2d $e$ \u662f\u6062\u590d\u7cfb\u6570\uff0c$\\mathbf{n}$ \u662f\u63a5\u89e6\u6cd5\u7ebf\u3002</p>\n<h3 id=\"1143\">11.4.3 \u6d41\u4f53\u7684\u6b27\u62c9\u4e0e\u62c9\u683c\u6717\u65e5\u63cf\u8ff0</h3>\n<p><strong>\u62c9\u683c\u6717\u65e5\u63cf\u8ff0</strong>\uff1a\u8ddf\u8e2a\u6d41\u4f53\u7c92\u5b50\n$$\\frac{D\\mathbf{u}}{Dt} = \\frac{\\partial \\mathbf{u}}{\\partial t} + (\\mathbf{u} \\cdot \\nabla)\\mathbf{u}$$\n<strong>\u6b27\u62c9\u63cf\u8ff0</strong>\uff1a\u56fa\u5b9a\u7f51\u683c\u4e0a\u7684\u573a\n$$\\frac{\\partial \\mathbf{u}}{\\partial t} + (\\mathbf{u} \\cdot \\nabla)\\mathbf{u} = -\\frac{1}{\\rho}\\nabla p + \\nu\\nabla^2\\mathbf{u} + \\mathbf{g}$$</p>\n<h3 id=\"1144-navier-stokes\">11.4.4 Navier-Stokes\u65b9\u7a0b</h3>\n<p>\u4e0d\u53ef\u538b\u7f29\u6d41\u4f53\u7684NS\u65b9\u7a0b\uff1a\n$$\\frac{\\partial \\mathbf{u}}{\\partial t} + (\\mathbf{u} \\cdot \\nabla)\\mathbf{u} = -\\frac{1}{\\rho}\\nabla p + \\nu\\nabla^2\\mathbf{u} + \\mathbf{f}$$\n$$\\nabla \\cdot \\mathbf{u} = 0$$\n\u4f7f\u7528\u6295\u5f71\u6cd5\u6c42\u89e3\uff1a</p>\n<ol>\n<li><strong>\u5bf9\u6d41\u6b65</strong>\uff1a$\\mathbf{u}^* = \\mathbf{u}^n - \\Delta t(\\mathbf{u} \\cdot \\nabla)\\mathbf{u}$</li>\n<li><strong>\u6269\u6563\u6b65</strong>\uff1a$\\mathbf{u}^{<em><em>} = \\mathbf{u}^</em> + \\Delta t\\nu\\nabla^2\\mathbf{u}^</em>$</li>\n<li><strong>\u6295\u5f71\u6b65</strong>\uff1a\u6c42\u89e3 $\\nabla^2 p = \\frac{\\rho}{\\Delta t}\\nabla \\cdot \\mathbf{u}^{**}$</li>\n<li><strong>\u6821\u6b63\u6b65</strong>\uff1a$\\mathbf{u}^{n+1} = \\mathbf{u}^{**} - \\frac{\\Delta t}{\\rho}\\nabla p$</li>\n</ol>\n<h3 id=\"1145-sph\">11.4.5 SPH\u4e0e\u683c\u5b50\u65b9\u6cd5</h3>\n<p><strong>\u5149\u6ed1\u7c92\u5b50\u6d41\u4f53\u52a8\u529b\u5b66\uff08SPH\uff09</strong>\uff1a</p>\n<p>\u5bc6\u5ea6\u4f30\u8ba1\uff1a\n$$\\rho_i = \\sum_j m_j W(|\\mathbf{x}_i - \\mathbf{x}_j|, h)$$\n\u538b\u529b\uff1a\n$$p_i = k(\\rho_i - \\rho_0)$$\n\u52a0\u901f\u5ea6\uff1a\n$$\\mathbf{a}_i = -\\sum_j m_j\\left(\\frac{p_i}{\\rho_i^2} + \\frac{p_j}{\\rho_j^2}\\right)\\nabla W_{ij} + \\nu\\sum_j m_j\\frac{\\mathbf{u}_j - \\mathbf{u}_i}{\\rho_j}\\nabla^2 W_{ij}$$\n<strong>\u683c\u5b50Boltzmann\u65b9\u6cd5\uff08LBM\uff09</strong>\uff1a</p>\n<p>\u5206\u5e03\u51fd\u6570\u6f14\u5316\uff1a\n$$f_i(\\mathbf{x} + \\mathbf{e}_i\\Delta t, t + \\Delta t) = f_i(\\mathbf{x}, t) + \\Omega_i(\\mathbf{x}, t)$$\n\u5176\u4e2d $\\Omega_i$ \u662f\u78b0\u649e\u7b97\u5b50\u3002</p>\n<p>\u5b8f\u89c2\u91cf\u901a\u8fc7\u77e9\u83b7\u5f97\uff1a\n$$\\rho = \\sum_i f_i, \\quad \\rho\\mathbf{u} = \\sum_i f_i\\mathbf{e}_i$$</p>\n<h2 id=\"_35\">\u672c\u7ae0\u5c0f\u7ed3</h2>\n<p>\u672c\u7ae0\u6df1\u5165\u63a2\u8ba8\u4e86\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u7684\u52a8\u753b\u4e0e\u7269\u7406\u6a21\u62df\u6280\u672f\uff1a</p>\n<ol>\n<li>\n<p><strong>\u52a8\u753b\u57fa\u7840</strong>\uff1a\n   - \u65f6\u95f4\u53c2\u6570\u5316\uff1a$\\mathbf{p}(t) = f(t)$\n   - \u5173\u952e\u5e27\u63d2\u503c\uff1a\u7ebf\u6027\u63d2\u503c\u3001\u7403\u9762\u7ebf\u6027\u63d2\u503c\uff08slerp\uff09\n   - \u6837\u6761\u66f2\u7ebf\uff1aCatmull-Rom\u6837\u6761 $\\mathbf{p}(t) = \\mathbf{T}(t)\\mathbf{M}_{CR}\\mathbf{G}$</p>\n</li>\n<li>\n<p><strong>\u8d28\u70b9\u5f39\u7c27\u7cfb\u7edf</strong>\uff1a\n   - \u8fd0\u52a8\u65b9\u7a0b\uff1a$m_i\\mathbf{a}_i = \\sum_j \\mathbf{f}_{ij} + \\mathbf{f}_{ext,i}$\n   - \u5f39\u7c27\u529b\uff1a$\\mathbf{f} = -k_s(|\\mathbf{x}| - l_0)\\hat{\\mathbf{x}}$\n   - IK\u96c5\u53ef\u6bd4\uff1a$\\Delta\\boldsymbol{\\theta} = \\mathbf{J}^+\\Delta\\mathbf{x}$</p>\n</li>\n<li>\n<p><strong>\u6570\u503c\u79ef\u5206</strong>\uff1a\n   - \u663e\u5f0f\u6b27\u62c9\uff1a$\\mathbf{y}_{n+1} = \\mathbf{y}_n + h\\mathbf{f}(t_n, \\mathbf{y}_n)$\n   - \u9690\u5f0f\u6b27\u62c9\uff1a$\\mathbf{y}_{n+1} = \\mathbf{y}_n + h\\mathbf{f}(t_{n+1}, \\mathbf{y}_{n+1})$\n   - \u7a33\u5b9a\u6027\u6761\u4ef6\uff1a$h &lt; 2\\sqrt{m/k}$\uff08\u663e\u5f0f\uff09\n   - Verlet\u79ef\u5206\uff1a$\\mathbf{x}_{n+1} = 2\\mathbf{x}_n - \\mathbf{x}_{n-1} + h^2\\mathbf{M}^{-1}\\mathbf{f}_n$</p>\n</li>\n<li>\n<p><strong>\u521a\u4f53\u52a8\u529b\u5b66</strong>\uff1a\n   - \u6b27\u62c9\u65b9\u7a0b\uff1a$\\mathbf{I}\\dot{\\boldsymbol{\\omega}} + \\boldsymbol{\\omega} \\times (\\mathbf{I}\\boldsymbol{\\omega}) = \\boldsymbol{\\tau}$\n   - \u78b0\u649e\u51b2\u91cf\uff1a$j = \\frac{-(1+e)\\mathbf{v}_{rel} \\cdot \\mathbf{n}}{1/m_A + 1/m_B + ...}$</p>\n</li>\n<li>\n<p><strong>\u6d41\u4f53\u6a21\u62df</strong>\uff1a\n   - Navier-Stokes\uff1a$\\frac{\\partial \\mathbf{u}}{\\partial t} + (\\mathbf{u} \\cdot \\nabla)\\mathbf{u} = -\\frac{1}{\\rho}\\nabla p + \\nu\\nabla^2\\mathbf{u}$\n   - \u4e0d\u53ef\u538b\u7f29\u6761\u4ef6\uff1a$\\nabla \\cdot \\mathbf{u} = 0$\n   - SPH\u5bc6\u5ea6\uff1a$\\rho_i = \\sum_j m_j W(|\\mathbf{x}_i - \\mathbf{x}_j|, h)$</p>\n</li>\n</ol>\n<h2 id=\"_36\">\u7ec3\u4e60\u9898</h2>\n<h3 id=\"_37\">\u57fa\u7840\u9898</h3>\n<p><strong>\u7ec3\u4e6011.1</strong> \u7ed9\u5b9a\u4e24\u4e2a\u5173\u952e\u5e27\u4f4d\u7f6e $\\mathbf{p}_0 = [0, 0, 0]^T$ \u5728 $t_0 = 0$\uff0c$\\mathbf{p}_1 = [1, 2, 0]^T$ \u5728 $t_1 = 1$\u3002\u4f7f\u7528\u7ebf\u6027\u63d2\u503c\u8ba1\u7b97 $t = 0.3$ \u65f6\u7684\u4f4d\u7f6e\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u4f7f\u7528\u7ebf\u6027\u63d2\u503c\u516c\u5f0f\uff1a\n$$\\mathbf{p}(0.3) = \\mathbf{p}_0 + \\frac{0.3 - 0}{1 - 0}(\\mathbf{p}_1 - \\mathbf{p}_0) = [0, 0, 0]^T + 0.3([1, 2, 0]^T - [0, 0, 0]^T)$$\n$$= [0, 0, 0]^T + 0.3[1, 2, 0]^T = [0.3, 0.6, 0]^T$$</p>\n</details>\n<p><strong>\u7ec3\u4e6011.2</strong> \u4e00\u4e2a\u8d28\u91cf\u4e3a $m = 1$ kg \u7684\u8d28\u70b9\u901a\u8fc7\u521a\u5ea6 $k = 100$ N/m \u7684\u5f39\u7c27\u8fde\u63a5\u5230\u539f\u70b9\u3002\u4f7f\u7528\u663e\u5f0f\u6b27\u62c9\u6cd5\uff0c\u8ba1\u7b97\u4fdd\u8bc1\u7a33\u5b9a\u6027\u7684\u6700\u5927\u65f6\u95f4\u6b65\u957f\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u7a33\u5b9a\u6027\u6761\u4ef6\uff1a$h &lt; 2\\sqrt{m/k}$</p>\n<p>\u4ee3\u5165\u6570\u503c\uff1a\n$$h &lt; 2\\sqrt{1/100} = 2 \\times 0.1 = 0.2 \\text{ s}$$\n\u56e0\u6b64\u6700\u5927\u65f6\u95f4\u6b65\u957f\u7ea6\u4e3a 0.2 \u79d2\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e6011.3</strong> \u4e24\u4e2a\u521a\u4f53\u53d1\u751f\u5b8c\u5168\u5f39\u6027\u78b0\u649e\uff08$e = 1$\uff09\uff0c\u8d28\u91cf\u5206\u522b\u4e3a $m_A = 2$ kg \u548c $m_B = 3$ kg\uff0c\u78b0\u649e\u524d\u901f\u5ea6\u4e3a $v_A = 5$ m/s \u548c $v_B = -2$ m/s\uff08\u4e00\u7ef4\u60c5\u51b5\uff09\u3002\u8ba1\u7b97\u78b0\u649e\u540e\u7684\u901f\u5ea6\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u52a8\u91cf\u5b88\u6052\uff1a$m_A v_A + m_B v_B = m_A v_A' + m_B v_B'$\n\u80fd\u91cf\u5b88\u6052\uff08\u5b8c\u5168\u5f39\u6027\uff09\uff1a$\\frac{1}{2}m_A v_A^2 + \\frac{1}{2}m_B v_B^2 = \\frac{1}{2}m_A v_A'^2 + \\frac{1}{2}m_B v_B'^2$</p>\n<p>\u4ee3\u5165\u6570\u503c\uff1a\n$2 \\times 5 + 3 \\times (-2) = 2v_A' + 3v_B'$\n$10 - 6 = 2v_A' + 3v_B'$\n$4 = 2v_A' + 3v_B'$ ... (1)</p>\n<p>\u76f8\u5bf9\u901f\u5ea6\u5173\u7cfb\uff08$e = 1$\uff09\uff1a\n$v_B' - v_A' = -(v_B - v_A) = -(-2 - 5) = 7$ ... (2)</p>\n<p>\u89e3\u65b9\u7a0b\u7ec4\u5f97\uff1a\n$v_A' = -2.6$ m/s\n$v_B' = 4.4$ m/s</p>\n</details>\n<h3 id=\"_38\">\u6311\u6218\u9898</h3>\n<p><strong>\u7ec3\u4e6011.4</strong> \u63a8\u5bfc\u4e8c\u7ef4\u5e73\u9762\u4e0a\u4e09\u8fde\u6746\u673a\u68b0\u81c2\u7684\u96c5\u53ef\u6bd4\u77e9\u9635\u3002\u8bbe\u4e09\u4e2a\u5173\u8282\u89d2\u5ea6\u4e3a $\\theta_1, \\theta_2, \\theta_3$\uff0c\u6bcf\u6bb5\u957f\u5ea6\u4e3a $l_1, l_2, l_3$\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u4f7f\u7528\u94fe\u5f0f\u6cd5\u5219\u548c\u65cb\u8f6c\u77e9\u9635\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u672b\u7aef\u6267\u884c\u5668\u4f4d\u7f6e\uff1a\n$$\\mathbf{x} = \\begin{bmatrix} x \\ y \\end{bmatrix} = \\begin{bmatrix}\nl_1\\cos\\theta_1 + l_2\\cos(\\theta_1 + \\theta_2) + l_3\\cos(\\theta_1 + \\theta_2 + \\theta_3) \\\nl_1\\sin\\theta_1 + l_2\\sin(\\theta_1 + \\theta_2) + l_3\\sin(\\theta_1 + \\theta_2 + \\theta_3)\n\\end{bmatrix}$$\n\u96c5\u53ef\u6bd4\u77e9\u9635\uff1a\n$$\\mathbf{J} = \\begin{bmatrix}\n-l_1\\sin\\theta_1 - l_2\\sin(\\theta_1 + \\theta_2) - l_3\\sin(\\theta_1 + \\theta_2 + \\theta_3) &amp; -l_2\\sin(\\theta_1 + \\theta_2) - l_3\\sin(\\theta_1 + \\theta_2 + \\theta_3) &amp; -l_3\\sin(\\theta_1 + \\theta_2 + \\theta_3) \\\nl_1\\cos\\theta_1 + l_2\\cos(\\theta_1 + \\theta_2) + l_3\\cos(\\theta_1 + \\theta_2 + \\theta_3) &amp; l_2\\cos(\\theta_1 + \\theta_2) + l_3\\cos(\\theta_1 + \\theta_2 + \\theta_3) &amp; l_3\\cos(\\theta_1 + \\theta_2 + \\theta_3)\n\\end{bmatrix}$$</p>\n</details>\n<p><strong>\u7ec3\u4e6011.5</strong> \u8bc1\u660eVerlet\u79ef\u5206\u4fdd\u6301\u4e8c\u9636\u7cbe\u5ea6\uff0c\u5e76\u8bf4\u660e\u4e3a\u4ec0\u4e48\u5b83\u6bd4\u663e\u5f0f\u6b27\u62c9\u6cd5\u66f4\u597d\u5730\u4fdd\u6301\u80fd\u91cf\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u4f7f\u7528\u6cf0\u52d2\u5c55\u5f00\u5206\u6790\u5c40\u90e8\u622a\u65ad\u8bef\u5dee\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u6cf0\u52d2\u5c55\u5f00\uff1a\n$$\\mathbf{x}(t + h) = \\mathbf{x}(t) + h\\dot{\\mathbf{x}}(t) + \\frac{h^2}{2}\\ddot{\\mathbf{x}}(t) + \\frac{h^3}{6}\\dddot{\\mathbf{x}}(t) + O(h^4)$$\n$$\\mathbf{x}(t - h) = \\mathbf{x}(t) - h\\dot{\\mathbf{x}}(t) + \\frac{h^2}{2}\\ddot{\\mathbf{x}}(t) - \\frac{h^3}{6}\\dddot{\\mathbf{x}}(t) + O(h^4)$$\n\u76f8\u52a0\u5f97\uff1a\n$$\\mathbf{x}(t + h) = 2\\mathbf{x}(t) - \\mathbf{x}(t - h) + h^2\\ddot{\\mathbf{x}}(t) + O(h^4)$$\n\u5c40\u90e8\u622a\u65ad\u8bef\u5dee\u4e3a $O(h^4)$\uff0c\u56e0\u6b64\u662f\u4e8c\u9636\u7cbe\u5ea6\u3002</p>\n<p>Verlet\u79ef\u5206\u662f\u65f6\u95f4\u53ef\u9006\u7684\uff08symplectic\uff09\uff0c\u8fd9\u4fdd\u8bc1\u4e86\u76f8\u7a7a\u95f4\u4f53\u79ef\u5b88\u6052\uff0c\u4ece\u800c\u66f4\u597d\u5730\u4fdd\u6301\u957f\u671f\u80fd\u91cf\u884c\u4e3a\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e6011.6</strong> \u8bbe\u8ba1\u4e00\u4e2a\u81ea\u9002\u5e94\u65f6\u95f4\u6b65\u957f\u7b97\u6cd5\uff0c\u7528\u4e8e\u6a21\u62df\u521a\u5ea6\u53d8\u5316\u5f88\u5927\u7684\u5f39\u7c27\u7cfb\u7edf\u3002\u8981\u6c42\u5728\u4fdd\u6301\u7a33\u5b9a\u6027\u7684\u540c\u65f6\u6700\u5927\u5316\u6548\u7387\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u8003\u8651\u4f7f\u7528\u5c40\u90e8\u8bef\u5dee\u4f30\u8ba1\u548c\u521a\u5ea6\u68c0\u6d4b\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u7b97\u6cd5\u6846\u67b6\uff1a</p>\n<ol>\n<li>\u4f30\u8ba1\u5c40\u90e8\u521a\u5ea6\uff1a$k_{max} = \\max_i k_i$</li>\n<li>\u8ba1\u7b97\u7a33\u5b9a\u6027\u9650\u5236\uff1a$h_{stable} = C\\sqrt{m_{min}/k_{max}}$\uff0c\u5176\u4e2d $C &lt; 2$</li>\n<li>\u4f7f\u7528\u5d4c\u5165\u5f0fRK45\u4f30\u8ba1\u8bef\u5dee\uff1a$\\epsilon = |\\mathbf{x}_5 - \\mathbf{x}_4|$</li>\n<li>\n<p>\u8c03\u6574\u6b65\u957f\uff1a\n$$h_{new} = \\min\\left(h_{stable}, h \\cdot \\left(\\frac{\\epsilon_{tol}}{\\epsilon}\\right)^{1/5}\\right)$$</p>\n</li>\n<li>\n<p>\u5bf9\u4e8e\u63a5\u8fd1\u5947\u5f02\u7684\u914d\u7f6e\uff0c\u5207\u6362\u5230\u9690\u5f0f\u65b9\u6cd5</p>\n</li>\n</ol>\n<p>\u5173\u952e\u70b9\u662f\u540c\u65f6\u8003\u8651\u7a33\u5b9a\u6027\u548c\u7cbe\u5ea6\u8981\u6c42\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e6011.7</strong> \u63a8\u5bfcSPH\u65b9\u6cd5\u4e2d\u7684\u538b\u529b\u68af\u5ea6\u9879\uff0c\u5e76\u89e3\u91ca\u4e3a\u4ec0\u4e48\u4f7f\u7528\u5bf9\u79f0\u5f62\u5f0f\u53ef\u4ee5\u4fdd\u8bc1\u52a8\u91cf\u5b88\u6052\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u4ece\u8fde\u7eed\u6027\u65b9\u7a0b\u5f00\u59cb\uff0c\u8003\u8651\u6838\u51fd\u6570\u7684\u6027\u8d28\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u4ece\u538b\u529b\u68af\u5ea6\u5f00\u59cb\uff1a\n$$-\\frac{1}{\\rho}\\nabla p$$\nSPH\u8fd1\u4f3c\uff1a\n$$-\\frac{1}{\\rho_i}\\nabla p_i = -\\frac{1}{\\rho_i}\\sum_j m_j \\frac{p_j}{\\rho_j}\\nabla W_{ij}$$\n\u4f46\u8fd9\u4e0d\u4fdd\u8bc1\u52a8\u91cf\u5b88\u6052\u3002\u5bf9\u79f0\u5f62\u5f0f\uff1a\n$$\\mathbf{f}_i^{pressure} = -m_i\\sum_j m_j\\left(\\frac{p_i}{\\rho_i^2} + \\frac{p_j}{\\rho_j^2}\\right)\\nabla W_{ij}$$\n\u7531\u4e8e $\\nabla W_{ij} = -\\nabla W_{ji}$\uff0c\u6709\uff1a\n$$\\mathbf{f}_i + \\mathbf{f}_j = 0$$\n\u8fd9\u4fdd\u8bc1\u4e86\u52a8\u91cf\u5b88\u6052\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e6011.8</strong> \u5206\u6790\u6295\u5f71\u6cd5\u6c42\u89e3\u4e0d\u53ef\u538b\u7f29\u6d41\u4f53\u65f6\u7684\u6570\u503c\u8bef\u5dee\u6765\u6e90\uff0c\u5e76\u63d0\u51fa\u6539\u8fdb\u65b9\u6848\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u8003\u8651\u5206\u88c2\u8bef\u5dee\u548c\u8fb9\u754c\u6761\u4ef6\u5904\u7406\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u8bef\u5dee\u6765\u6e90\uff1a</p>\n<ol>\n<li><strong>\u5206\u88c2\u8bef\u5dee</strong>\uff1a\u5c06NS\u65b9\u7a0b\u5206\u6b65\u6c42\u89e3\u5f15\u5165 $O(\\Delta t)$ \u8bef\u5dee</li>\n<li><strong>\u6295\u5f71\u8bef\u5dee</strong>\uff1a\u538b\u529bPoisson\u65b9\u7a0b\u7684\u79bb\u6563\u5316\u8bef\u5dee</li>\n<li><strong>\u8fb9\u754c\u6761\u4ef6</strong>\uff1a\u901f\u5ea6\u548c\u538b\u529b\u8fb9\u754c\u6761\u4ef6\u7684\u4e0d\u4e00\u81f4\u6027</li>\n</ol>\n<p>\u6539\u8fdb\u65b9\u6848\uff1a</p>\n<ol>\n<li>\u4f7f\u7528\u9ad8\u9636\u5206\u88c2\u683c\u5f0f\uff08\u5982Strang splitting\uff09</li>\n<li>\u4ea4\u9519\u7f51\u683c\uff08MAC grid\uff09\u51cf\u5c11\u538b\u529b\u9707\u8361</li>\n<li>\u4e00\u81f4\u7684\u8fb9\u754c\u6761\u4ef6\u5904\u7406</li>\n<li>\u4f7f\u7528\u589e\u91cf\u538b\u529b\u683c\u5f0f\uff1a\n$$\\nabla^2 \\phi = \\frac{1}{\\Delta t}\\nabla \\cdot \\mathbf{u}^<em>$$\n   $$p^{n+1} = p^n + \\phi - \\frac{\\mu}{2}\\nabla \\cdot \\mathbf{u}^</em>$$</li>\n</ol>\n</details>\n<h2 id=\"_39\">\u5e38\u89c1\u9677\u9631\u4e0e\u9519\u8bef</h2>\n<h3 id=\"1\">1. \u6570\u503c\u79ef\u5206\u7684\u7a33\u5b9a\u6027\u95ee\u9898</h3>\n<p><strong>\u9677\u9631</strong>\uff1a\u4f7f\u7528\u663e\u5f0f\u6b27\u62c9\u6cd5\u6a21\u62df\u521a\u6027\u7cfb\u7edf\uff08\u5982\u9ad8\u521a\u5ea6\u5f39\u7c27\uff09\u65f6\u51fa\u73b0\u7206\u70b8\u3002</p>\n<p><strong>\u89e3\u51b3\u65b9\u6848</strong>\uff1a</p>\n<ul>\n<li>\u68c0\u67e5\u65f6\u95f4\u6b65\u957f\uff1a\u786e\u4fdd $h &lt; 2\\sqrt{m/k}$</li>\n<li>\u5bf9\u521a\u6027\u7cfb\u7edf\u4f7f\u7528\u9690\u5f0f\u65b9\u6cd5</li>\n<li>\u5b9e\u73b0\u81ea\u9002\u5e94\u65f6\u95f4\u6b65\u957f</li>\n</ul>\n<h3 id=\"2\">2. \u56db\u5143\u6570\u63d2\u503c\u7684\u9519\u8bef</h3>\n<p><strong>\u9677\u9631</strong>\uff1a\u76f4\u63a5\u5bf9\u56db\u5143\u6570\u5206\u91cf\u8fdb\u884c\u7ebf\u6027\u63d2\u503c\u5bfc\u81f4\u975e\u5355\u4f4d\u56db\u5143\u6570\u3002</p>\n<p><strong>\u89e3\u51b3\u65b9\u6848</strong>\uff1a</p>\n<ul>\n<li>\u59cb\u7ec8\u4f7f\u7528\u7403\u9762\u7ebf\u6027\u63d2\u503c\uff08slerp\uff09</li>\n<li>\u63d2\u503c\u540e\u5f52\u4e00\u5316\u56db\u5143\u6570</li>\n<li>\u6ce8\u610f\u5904\u7406 $\\theta \\approx 0$ \u7684\u7279\u6b8a\u60c5\u51b5</li>\n</ul>\n<h3 id=\"3\">3. \u7ea6\u675f\u6c42\u89e3\u7684\u6570\u503c\u6f02\u79fb</h3>\n<p><strong>\u9677\u9631</strong>\uff1a\u4f4d\u7f6e\u7ea6\u675f\u5728\u8fed\u4ee3\u8fc7\u7a0b\u4e2d\u9010\u6e10\u8fdd\u53cd\u3002</p>\n<p><strong>\u89e3\u51b3\u65b9\u6848</strong>\uff1a</p>\n<ul>\n<li>\u4f7f\u7528Baumgarte\u7a33\u5b9a\u5316\uff1a$\\mathbf{J}\\ddot{\\mathbf{x}} = -\\alpha C - \\beta \\dot{C}$</li>\n<li>\u5b9e\u73b0\u4f4d\u7f6e\u6821\u6b63\u6b65\u9aa4</li>\n<li>\u4f7f\u7528\u66f4\u7a33\u5b9a\u7684\u7ea6\u675f\u516c\u5f0f</li>\n</ul>\n<h3 id=\"4\">4. \u78b0\u649e\u68c0\u6d4b\u7684\u9057\u6f0f</h3>\n<p><strong>\u9677\u9631</strong>\uff1a\u5feb\u901f\u79fb\u52a8\u7684\u7269\u4f53\u7a7f\u900f\uff08tunneling\uff09\u3002</p>\n<p><strong>\u89e3\u51b3\u65b9\u6848</strong>\uff1a</p>\n<ul>\n<li>\u5b9e\u73b0\u8fde\u7eed\u78b0\u649e\u68c0\u6d4b\uff08CCD\uff09</li>\n<li>\u4f7f\u7528\u4fdd\u5b88\u524d\u8fdb\u7b97\u6cd5</li>\n<li>\u9650\u5236\u6700\u5927\u901f\u5ea6\u6216\u7ec6\u5206\u65f6\u95f4\u6b65</li>\n</ul>\n<h3 id=\"5\">5. \u6d41\u4f53\u6a21\u62df\u7684\u8d28\u91cf\u635f\u5931</h3>\n<p><strong>\u9677\u9631</strong>\uff1a\u4e0d\u53ef\u538b\u7f29\u6d41\u4f53\u51fa\u73b0\u4f53\u79ef\u53d8\u5316\u3002</p>\n<p><strong>\u89e3\u51b3\u65b9\u6848</strong>\uff1a</p>\n<ul>\n<li>\u786e\u4fdd\u6563\u5ea6\u81ea\u7531\uff1a$\\nabla \\cdot \\mathbf{u} = 0$</li>\n<li>\u4f7f\u7528\u9ad8\u7cbe\u5ea6\u538b\u529b\u6c42\u89e3\u5668</li>\n<li>\u5b9e\u73b0FLIP/PIC\u6df7\u5408\u65b9\u6cd5\u51cf\u5c11\u6570\u503c\u8017\u6563</li>\n</ul>\n<h3 id=\"6-sph\">6. SPH\u7684\u7c92\u5b50\u805a\u96c6</h3>\n<p><strong>\u9677\u9631</strong>\uff1aSPH\u7c92\u5b50\u503e\u5411\u4e8e\u805a\u96c6\u6210\u56e2\u3002</p>\n<p><strong>\u89e3\u51b3\u65b9\u6848</strong>\uff1a</p>\n<ul>\n<li>\u6dfb\u52a0\u4eba\u5de5\u538b\u529b\u9879</li>\n<li>\u4f7f\u7528XSPH\u901f\u5ea6\u5e73\u6ed1</li>\n<li>\u8c03\u6574\u6838\u51fd\u6570\u548c\u641c\u7d22\u534a\u5f84</li>\n</ul>\n<h2 id=\"_40\">\u6700\u4f73\u5b9e\u8df5\u68c0\u67e5\u6e05\u5355</h2>\n<h3 id=\"_41\">\u52a8\u753b\u7cfb\u7edf\u8bbe\u8ba1</h3>\n<ul>\n<li>[ ] \u9009\u62e9\u5408\u9002\u7684\u65f6\u95f4\u8868\u793a\uff08\u56fa\u5b9a\u65f6\u95f4\u6b65 vs \u53ef\u53d8\u65f6\u95f4\u6b65\uff09</li>\n<li>[ ] \u5b9e\u73b0\u63d2\u503c\u65b9\u6cd5\u7684\u7f13\u5b58\u673a\u5236</li>\n<li>[ ] \u652f\u6301\u52a8\u753b\u6df7\u5408\u548c\u8fc7\u6e21</li>\n<li>[ ] \u8003\u8651\u52a8\u753b\u538b\u7f29\u9700\u6c42</li>\n<li>[ ] \u5b9e\u73b0\u52a8\u753b\u4e8b\u4ef6\u7cfb\u7edf</li>\n</ul>\n<h3 id=\"_42\">\u7269\u7406\u6a21\u62df\u67b6\u6784</h3>\n<ul>\n<li>[ ] \u5206\u79bb\u78b0\u649e\u68c0\u6d4b\u548c\u52a8\u529b\u5b66\u6c42\u89e3</li>\n<li>[ ] \u5b9e\u73b0\u591a\u79cd\u79ef\u5206\u5668\u4f9b\u9009\u62e9</li>\n<li>[ ] \u652f\u6301\u7ea6\u675f\u7684\u589e\u91cf\u6dfb\u52a0/\u5220\u9664</li>\n<li>[ ] \u8bbe\u8ba1\u6e05\u6670\u7684\u529b/\u7ea6\u675f\u63a5\u53e3</li>\n<li>[ ] \u5b9e\u73b0\u8c03\u8bd5\u53ef\u89c6\u5316</li>\n</ul>\n<h3 id=\"_43\">\u6570\u503c\u65b9\u6cd5\u9009\u62e9</h3>\n<ul>\n<li>[ ] \u6839\u636e\u521a\u5ea6\u9009\u62e9\u79ef\u5206\u65b9\u6cd5</li>\n<li>[ ] \u5b9e\u73b0\u8bef\u5dee\u4f30\u8ba1\u548c\u81ea\u9002\u5e94</li>\n<li>[ ] \u8003\u8651\u80fd\u91cf\u5b88\u6052\u9700\u6c42</li>\n<li>[ ] \u5e73\u8861\u7cbe\u5ea6\u548c\u6027\u80fd</li>\n<li>[ ] \u63d0\u4f9b\u7a33\u5b9a\u6027\u76d1\u63a7</li>\n</ul>\n<h3 id=\"_44\">\u6027\u80fd\u4f18\u5316</h3>\n<ul>\n<li>[ ] \u4f7f\u7528\u7a7a\u95f4\u5206\u5272\u52a0\u901f\u78b0\u649e\u68c0\u6d4b</li>\n<li>[ ] \u5b9e\u73b0\u591a\u7ea7\u65f6\u95f4\u6b65\u8fdb</li>\n<li>[ ] \u5229\u7528SIMD\u6307\u4ee4</li>\n<li>[ ] \u8003\u8651GPU\u52a0\u901f</li>\n<li>[ ] \u5b9e\u73b0LOD\u7cfb\u7edf</li>\n</ul>\n<h3 id=\"_45\">\u9c81\u68d2\u6027\u4fdd\u8bc1</h3>\n<ul>\n<li>[ ] \u5904\u7406\u6570\u503c\u9000\u5316\u60c5\u51b5</li>\n<li>[ ] \u5b9e\u73b0\u6545\u969c\u6062\u590d\u673a\u5236</li>\n<li>[ ] \u6dfb\u52a0\u53c2\u6570\u6709\u6548\u6027\u68c0\u67e5</li>\n<li>[ ] \u63d0\u4f9b\u7a33\u5b9a\u6027\u8b66\u544a</li>\n<li>[ ] \u8bb0\u5f55\u8bca\u65ad\u4fe1\u606f</li>\n</ul>\n<h3 id=\"_46\">\u7528\u6237\u63a5\u53e3</h3>\n<ul>\n<li>[ ] \u63d0\u4f9b\u76f4\u89c2\u7684\u53c2\u6570\u8c03\u8282</li>\n<li>[ ] \u5b9e\u73b0\u5b9e\u65f6\u9884\u89c8</li>\n<li>[ ] \u652f\u6301\u52a8\u753b\u5bfc\u5165/\u5bfc\u51fa</li>\n<li>[ ] \u63d0\u4f9b\u6027\u80fd\u5206\u6790\u5de5\u5177</li>\n<li>[ ] \u6587\u6863\u5316\u6240\u6709\u53c2\u6570\u542b\u4e49</li>\n</ul>"
  },
  "../chapter5.md": {
    "hash": "c9fd9fee6d3821aa3b5a729b0efb82e6",
    "content": "<h1 id=\"5\">\u7b2c5\u7ae0\uff1a\u9ad8\u7ea7\u7740\u8272\u6280\u672f</h1>\n<h2 id=\"_1\">\u7ae0\u8282\u6982\u8ff0</h2>\n<p>\u672c\u7ae0\u6df1\u5165\u63a2\u8ba8\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u7684\u9ad8\u7ea7\u7740\u8272\u6280\u672f\u3002\u6211\u4eec\u5c06\u4ece\u63d2\u503c\u6280\u672f\u7684\u6570\u5b66\u57fa\u7840\u5f00\u59cb\uff0c\u6df1\u5165\u7406\u89e3GPU\u5982\u4f55\u5728\u4e09\u89d2\u5f62\u5185\u90e8\u8fdb\u884c\u5c5e\u6027\u63d2\u503c\u3002\u968f\u540e\uff0c\u6211\u4eec\u5c06\u63a2\u7d22\u9ad8\u7ea7\u7eb9\u7406\u6620\u5c04\u6280\u672f\uff0c\u5305\u62ecMIP\u6620\u5c04\u3001\u5404\u5411\u5f02\u6027\u8fc7\u6ee4\u7b49\u73b0\u4ee3GPU\u6280\u672f\u3002\u6700\u540e\uff0c\u6211\u4eec\u5c06\u5b66\u4e60\u7a0b\u5e8f\u5316\u7eb9\u7406\u751f\u6210\u548c\u7740\u8272\u5668\u4f18\u5316\u6280\u672f\uff0c\u4e3a\u5b9e\u73b0\u9ad8\u6027\u80fd\u6e32\u67d3\u6253\u4e0b\u57fa\u7840\u3002</p>\n<h2 id=\"_2\">\u5b66\u4e60\u76ee\u6807</h2>\n<ul>\n<li>\u638c\u63e1\u900f\u89c6\u6b63\u786e\u63d2\u503c\u7684\u6570\u5b66\u539f\u7406</li>\n<li>\u7406\u89e3\u9ad8\u7ea7\u7eb9\u7406\u6620\u5c04\u6280\u672f\u7684\u5b9e\u73b0\u7ec6\u8282</li>\n<li>\u5b66\u4f1a\u8bbe\u8ba1\u548c\u4f18\u5316\u7a0b\u5e8f\u5316\u7eb9\u7406</li>\n<li>\u638c\u63e1\u7740\u8272\u5668\u6027\u80fd\u4f18\u5316\u7684\u5173\u952e\u6280\u672f</li>\n</ul>\n<h2 id=\"51\">5.1 \u63d2\u503c\u6280\u672f\u8be6\u89e3</h2>\n<h3 id=\"511\">5.1.1 \u91cd\u5fc3\u5750\u6807\u7cfb</h3>\n<p>\u5728\u4e09\u89d2\u5f62\u5185\u90e8\u8fdb\u884c\u63d2\u503c\u662f\u5149\u6805\u5316\u7684\u6838\u5fc3\u64cd\u4f5c\u3002\u5bf9\u4e8e\u4e09\u89d2\u5f62ABC\u548c\u5185\u90e8\u70b9P\uff0c\u91cd\u5fc3\u5750\u6807$(u, v, w)$\u5b9a\u4e49\u4e3a\uff1a</p>\n<p>$$P = u \\cdot A + v \\cdot B + w \\cdot C$$\n\u5176\u4e2d $u + v + w = 1$\u3002</p>\n<h4 id=\"_3\">\u51e0\u4f55\u610f\u4e49</h4>\n<p>\u91cd\u5fc3\u5750\u6807\u5177\u6709\u76f4\u89c2\u7684\u51e0\u4f55\u89e3\u91ca\uff1a</p>\n<ul>\n<li>$u$\u8868\u793a\u70b9P\u5230\u8fb9BC\u7684\"\u76f8\u5bf9\u8ddd\u79bb\"</li>\n<li>\u5f53$u=1$\u65f6\uff0cP\u4f4d\u4e8e\u9876\u70b9A\uff1b\u5f53$u=0$\u65f6\uff0cP\u4f4d\u4e8e\u8fb9BC\u4e0a</li>\n<li>\u91cd\u5fc3\u5750\u6807\u5728\u4eff\u5c04\u53d8\u6362\u4e0b\u4fdd\u6301\u4e0d\u53d8</li>\n</ul>\n<p>\u91cd\u5fc3\u5750\u6807\u7684\u7269\u7406\u610f\u4e49\u53ef\u4ee5\u7406\u89e3\u4e3a\u8d28\u70b9\u7cfb\u7edf\uff1a\u5982\u679c\u5728\u4e09\u4e2a\u9876\u70b9\u5206\u522b\u653e\u7f6e\u8d28\u91cf$u$\u3001$v$\u3001$w$\u7684\u8d28\u70b9\uff0c\u5219\u7cfb\u7edf\u7684\u8d28\u5fc3\u6070\u597d\u4f4d\u4e8e\u70b9P\u3002\u8fd9\u89e3\u91ca\u4e86\"\u91cd\u5fc3\"\u8fd9\u4e00\u540d\u79f0\u7684\u7531\u6765\u3002</p>\n<h4 id=\"_4\">\u51f8\u6027\u6761\u4ef6</h4>\n<p>\u70b9P\u5728\u4e09\u89d2\u5f62\u5185\u90e8\u7684\u5145\u8981\u6761\u4ef6\u662f\uff1a\n$$u \\geq 0, \\quad v \\geq 0, \\quad w \\geq 0$$\n\u5f53\u67d0\u4e2a\u5750\u6807\u4e3a0\u65f6\uff0cP\u4f4d\u4e8e\u5bf9\u5e94\u9876\u70b9\u7684\u5bf9\u8fb9\u4e0a\uff1b\u5f53\u4e24\u4e2a\u5750\u6807\u4e3a0\u65f6\uff0cP\u4f4d\u4e8e\u76f8\u5e94\u7684\u9876\u70b9\u4e0a\u3002</p>\n<h4 id=\"_5\">\u8ba1\u7b97\u65b9\u6cd5</h4>\n<p><strong>\u65b9\u6cd51\uff1a\u9762\u79ef\u6bd4</strong>\n$$u = \\frac{\\text{Area}(PBC)}{\\text{Area}(ABC)}, \\quad v = \\frac{\\text{Area}(APC)}{\\text{Area}(ABC)}, \\quad w = \\frac{\\text{Area}(ABP)}{\\text{Area}(ABC)}$$\n\u9762\u79ef\u8ba1\u7b97\u4f7f\u7528\u53c9\u79ef\uff1a\u5bf9\u4e8e2D\u4e09\u89d2\u5f62ABC\uff0c\u5176\u6709\u5411\u9762\u79ef\u4e3a\uff1a\n$$\\text{Area}(ABC) = \\frac{1}{2}(B_x - A_x)(C_y - A_y) - (C_x - A_x)(B_y - A_y)$$\n<strong>\u65b9\u6cd52\uff1a\u53c9\u79ef\u5f62\u5f0f</strong></p>\n<p>\u5bf9\u4e8e2D\u60c5\u51b5\uff1a\n$$u = \\frac{(B-P) \\times (C-P)}{(B-A) \\times (C-A)}$$\n\u8fd9\u91cc\u7684\u53c9\u79ef\u7406\u89e3\u4e3a2D\u4f2a\u53c9\u79ef\uff1a$(x_1, y_1) \\times (x_2, y_2) = x_1y_2 - y_1x_2$</p>\n<p>\u5bf9\u4e8e3D\u60c5\u51b5\uff0c\u9700\u8981\u6295\u5f71\u5230\u5408\u9002\u7684\u5e73\u9762\uff1a\n$$u = \\frac{|(B-P) \\times (C-P) \\cdot \\mathbf{n}|}{|(B-A) \\times (C-A) \\cdot \\mathbf{n}|}$$\n\u5176\u4e2d$\\mathbf{n}$\u662f\u4e09\u89d2\u5f62\u6cd5\u5411\u91cf\u3002\u6295\u5f71\u7684\u9009\u62e9\u539f\u5219\uff1a</p>\n<ul>\n<li>\u9009\u62e9\u6295\u5f71\u540e\u4e09\u89d2\u5f62\u9762\u79ef\u6700\u5927\u7684\u5e73\u9762</li>\n<li>\u901a\u5e38\u9009\u62e9\u6cd5\u5411\u91cf\u6700\u5927\u5206\u91cf\u5bf9\u5e94\u7684\u5750\u6807\u5e73\u9762</li>\n<li>\u4f8b\u5982\uff1a\u82e5$|n_z|$\u6700\u5927\uff0c\u5219\u6295\u5f71\u5230XY\u5e73\u9762</li>\n</ul>\n<p><strong>\u65b9\u6cd53\uff1a\u76f4\u63a5\u6c42\u89e3\u7ebf\u6027\u7cfb\u7edf</strong></p>\n<p>\u8bbe$P = (p_x, p_y)$\uff0c\u53ef\u4ee5\u5efa\u7acb\u65b9\u7a0b\uff1a\n$$\\begin{pmatrix} a_x &amp; b_x &amp; c_x \\ a_y &amp; b_y &amp; c_y \\ 1 &amp; 1 &amp; 1 \\end{pmatrix} \\begin{pmatrix} u \\ v \\ w \\end{pmatrix} = \\begin{pmatrix} p_x \\ p_y \\ 1 \\end{pmatrix}$$\n\u4f7f\u7528Cramer\u6cd5\u5219\u6c42\u89e3\uff1a\n$$u = \\frac{\\begin{vmatrix} p_x &amp; b_x &amp; c_x \\ p_y &amp; b_y &amp; c_y \\ 1 &amp; 1 &amp; 1 \\end{vmatrix}}{\\begin{vmatrix} a_x &amp; b_x &amp; c_x \\ a_y &amp; b_y &amp; c_y \\ 1 &amp; 1 &amp; 1 \\end{vmatrix}}$$</p>\n<h4 id=\"_6\">\u6570\u503c\u7a33\u5b9a\u6027</h4>\n<p>\u5728\u5b9e\u9645\u5b9e\u73b0\u4e2d\uff0c\u9700\u8981\u8003\u8651\uff1a</p>\n<ol>\n<li>\n<p><strong>\u9000\u5316\u60c5\u51b5</strong>\uff1a\u5f53\u4e09\u89d2\u5f62\u63a5\u8fd1\u5171\u7ebf\u65f6\uff0c\u5206\u6bcd\u63a5\u8fd10\n   - \u68c0\u6d4b\u6761\u4ef6\uff1a$|\\text{Area}(ABC)| &lt; \\epsilon$\n   - \u5904\u7406\u65b9\u6cd5\uff1a\u9000\u5316\u4e3a\u7ebf\u6bb5\u6216\u70b9\u7684\u63d2\u503c\n   - \u9608\u503c\u9009\u62e9\uff1a\u901a\u5e38$\\epsilon = 10^{-6}$\uff08\u76f8\u5bf9\u4e8e\u4e09\u89d2\u5f62\u5305\u56f4\u76d2\uff09</p>\n</li>\n<li>\n<p><strong>\u7cbe\u5ea6\u95ee\u9898</strong>\uff1a\u4f7f\u7528double\u7cbe\u5ea6\u8ba1\u7b97\u4e2d\u95f4\u7ed3\u679c\n   - \u7d2f\u79ef\u8bef\u5dee\u63a7\u5236\uff1a\u907f\u514d\u8fde\u7eed\u7684\u6d6e\u70b9\u8fd0\u7b97\n   - \u4e2d\u95f4\u7ed3\u679c\u89c4\u8303\u5316\uff1a\u9632\u6b62\u6570\u503c\u6ea2\u51fa\n   - \u5173\u952e\u8fd0\u7b97\uff08\u5982\u9664\u6cd5\uff09\u524d\u68c0\u67e5\u5206\u6bcd</p>\n</li>\n<li>\n<p><strong>\u8fb9\u754c\u5904\u7406</strong>\uff1a$u, v, w \\in [0, 1]$\u7684\u4e25\u683c\u5224\u65ad\n   - \u4f7f\u7528\u5bb9\u5dee\uff1a$-\\epsilon \\leq u, v, w \\leq 1 + \\epsilon$\n   - \u8fb9\u754c\u5939\u7d27\uff1a$u = \\text{clamp}(u, 0, 1)$\n   - \u91cd\u65b0\u5f52\u4e00\u5316\uff1a\u786e\u4fdd$u + v + w = 1$</p>\n</li>\n</ol>\n<h4 id=\"_7\">\u4f18\u5316\u5b9e\u73b0</h4>\n<p>\u5bf9\u4e8e\u5149\u6805\u5316\u4e2d\u7684\u5927\u91cf\u8ba1\u7b97\uff0c\u53ef\u4ee5\u4f7f\u7528\u589e\u91cf\u7b97\u6cd5\uff1a\n$$u(x+1, y) = u(x, y) + \\Delta u_x$$\n$$u(x, y+1) = u(x, y) + \\Delta u_y$$\n\u5176\u4e2d$\\Delta u_x$\u548c$\\Delta u_y$\u662f\u5e38\u6570\uff0c\u53ef\u9884\u8ba1\u7b97\uff1a</p>\n<p><strong>\u8fb9\u51fd\u6570\u65b9\u6cd5</strong>\uff1a\n\u5b9a\u4e49\u8fb9\u51fd\u6570$E_{AB}(x, y) = (y_A - y_B)x + (x_B - x_A)y + x_A y_B - x_B y_A$</p>\n<p>\u5219\uff1a</p>\n<ul>\n<li>$\\Delta E_{AB,x} = y_A - y_B$\uff08x\u65b9\u5411\u589e\u91cf\uff09</li>\n<li>$\\Delta E_{AB,y} = x_B - x_A$\uff08y\u65b9\u5411\u589e\u91cf\uff09</li>\n</ul>\n<p>\u91cd\u5fc3\u5750\u6807\u901a\u8fc7\u8fb9\u51fd\u6570\u8ba1\u7b97\uff1a\n$$u = \\frac{E_{BC}(x, y)}{E_{BC}(x_A, y_A)}$$\n<strong>\u5e76\u884c\u5316\u7b56\u7565</strong>\uff1a</p>\n<ul>\n<li>SIMD\u5904\u7406\uff1a\u540c\u65f6\u8ba1\u7b97\u591a\u4e2a\u50cf\u7d20\u7684\u91cd\u5fc3\u5750\u6807</li>\n<li>\u5c42\u6b21\u904d\u5386\uff1a\u5148\u5224\u65ad\u50cf\u7d20\u5757\uff0c\u518d\u5904\u7406\u5185\u90e8\u50cf\u7d20</li>\n<li>\u9884\u8ba1\u7b97\u8fb9\u754c\uff1a\u5229\u7528\u5305\u56f4\u76d2\u51cf\u5c11\u65e0\u6548\u8ba1\u7b97</li>\n</ul>\n<h3 id=\"512\">5.1.2 \u900f\u89c6\u6b63\u786e\u63d2\u503c</h3>\n<p>\u5c4f\u5e55\u7a7a\u95f4\u7684\u7ebf\u6027\u63d2\u503c\u5728\u900f\u89c6\u6295\u5f71\u4e0b\u4f1a\u4ea7\u751f\u9519\u8bef\u3002\u8fd9\u662f\u56e0\u4e3a\u900f\u89c6\u6295\u5f71\u662f\u975e\u7ebf\u6027\u53d8\u6362\uff0c\u7834\u574f\u4e86\u5c5e\u6027\u7684\u7ebf\u6027\u5173\u7cfb\u3002</p>\n<h4 id=\"_8\">\u95ee\u9898\u7684\u672c\u8d28</h4>\n<p>\u8003\u8651\u4e16\u754c\u7a7a\u95f4\u4e2d\u7684\u7ebf\u6bb5\uff0c\u5176\u5c5e\u6027\uff08\u5982\u7eb9\u7406\u5750\u6807\uff09\u7ebf\u6027\u53d8\u5316\u3002\u7ecf\u8fc7\u900f\u89c6\u6295\u5f71\u540e\uff1a</p>\n<ol>\n<li>\u7a7a\u95f4\u4f4d\u7f6e\u88ab\u975e\u7ebf\u6027\u538b\u7f29</li>\n<li>\u4f46\u5c4f\u5e55\u7a7a\u95f4\u7684\u5149\u6805\u5316\u5047\u8bbe\u7ebf\u6027\u63d2\u503c</li>\n<li>\u5bfc\u81f4\u5c5e\u6027\u63d2\u503c\u51fa\u73b0\u626d\u66f2</li>\n</ol>\n<p><strong>\u76f4\u89c2\u4f8b\u5b50</strong>\uff1a\n\u60f3\u8c61\u4e00\u6761\u94c1\u8f68\u5411\u8fdc\u5904\u5ef6\u4f38\u3002\u94c1\u8f68\u6795\u6728\u5728\u4e16\u754c\u7a7a\u95f4\u4e2d\u7b49\u8ddd\u5206\u5e03\uff0c\u4f46\u5728\u5c4f\u5e55\u7a7a\u95f4\u4e2d\uff0c\u8fdc\u5904\u7684\u6795\u6728\u95f4\u8ddd\u660e\u663e\u53d8\u5c0f\u3002\u5982\u679c\u4f7f\u7528\u5c4f\u5e55\u7a7a\u95f4\u7ebf\u6027\u63d2\u503c\uff0c\u4f1a\u9519\u8bef\u5730\u8ba4\u4e3a\u8fdc\u5904\u6795\u6728\u66f4\u5bc6\u96c6\u3002</p>\n<p><strong>\u6570\u5b66\u8868\u793a</strong>\uff1a\n\u8bbe\u4e16\u754c\u7a7a\u95f4\u53c2\u6570$t \\in [0,1]$\uff0c\u5c4f\u5e55\u7a7a\u95f4\u53c2\u6570$s \\in [0,1]$\uff0c\u5b83\u4eec\u7684\u5173\u7cfb\u4e3a\uff1a\n$$s = \\frac{t/z_0}{t/z_0 + (1-t)/z_1}$$\n\u8fd9\u662f\u4e00\u4e2a\u6709\u7406\u51fd\u6570\uff0c\u800c\u975e\u7ebf\u6027\u5173\u7cfb\u3002</p>\n<h4 id=\"_9\">\u6570\u5b66\u63a8\u5bfc</h4>\n<p>\u8bbe\u9876\u70b9\u5c5e\u6027\u4e3a$\\phi_0, \\phi_1, \\phi_2$\uff0c\u89c6\u7a7a\u95f4\u6df1\u5ea6\u4e3a$z_0, z_1, z_2$\u3002</p>\n<p><strong>\u5173\u952e\u89c2\u5bdf</strong>\uff1a\u5728\u9f50\u6b21\u5750\u6807\u7cfb\u4e2d\uff0c\u5c5e\u6027$\\phi/w$\uff08\u5176\u4e2d$w=z$\uff09\u4fdd\u6301\u7ebf\u6027\u3002</p>\n<p><strong>\u63a8\u5bfc\u6b65\u9aa4</strong>\uff1a</p>\n<ol>\n<li>\n<p>\u9f50\u6b21\u7a7a\u95f4\u7684\u7ebf\u6027\u63d2\u503c\uff1a\n$$\\left(\\frac{\\phi}{z}\\right)_p = u\\frac{\\phi_0}{z_0} + v\\frac{\\phi_1}{z_1} + w\\frac{\\phi_2}{z_2}$$</p>\n</li>\n<li>\n<p>\u6df1\u5ea6\u7684\u5012\u6570\u4e5f\u7ebf\u6027\u63d2\u503c\uff1a\n$$\\frac{1}{z_p} = u\\frac{1}{z_0} + v\\frac{1}{z_1} + w\\frac{1}{z_2}$$</p>\n</li>\n<li>\n<p>\u6062\u590d\u539f\u59cb\u5c5e\u6027\uff1a\n$$\\phi_p = \\frac{\\left(\\frac{\\phi}{z}\\right)_p}{\\frac{1}{z_p}} = \\frac{u\\frac{\\phi_0}{z_0} + v\\frac{\\phi_1}{z_1} + w\\frac{\\phi_2}{z_2}}{u\\frac{1}{z_0} + v\\frac{1}{z_1} + w\\frac{1}{z_2}}$$</p>\n</li>\n</ol>\n<h4 id=\"_10\">\u5b9e\u73b0\u7ec6\u8282</h4>\n<p><strong>\u786c\u4ef6\u900f\u89c6\u6821\u6b63\u6d41\u7a0b</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u9876\u70b9\u5904\u7406\u9636\u6bb5</strong>\uff1a\n   - \u6240\u6709\u5c5e\u6027\u81ea\u52a8\u9664\u4ee5$w$\uff08\u9f50\u6b21\u5750\u6807\u7684\u7b2c\u56db\u5206\u91cf\uff09\n   - \u989d\u5916\u8f93\u51fa$1/w$\u4f5c\u4e3a\u72ec\u7acb\u5c5e\u6027\n   - \u786c\u4ef6\u81ea\u52a8\u5b8c\u6210\uff0c\u65e0\u9700\u624b\u52a8\u5e72\u9884</p>\n</li>\n<li>\n<p><strong>\u5149\u6805\u5316\u9636\u6bb5</strong>\uff1a\n   - \u5bf9$\\phi/w$\u548c$1/w$\u8fdb\u884c\u5c4f\u5e55\u7a7a\u95f4\u7ebf\u6027\u63d2\u503c\n   - \u4f7f\u7528\u91cd\u5fc3\u5750\u6807\u4f5c\u4e3a\u63d2\u503c\u6743\u91cd\n   - \u786c\u4ef6\u63d2\u503c\u5668\u5e76\u884c\u5904\u7406\u591a\u4e2a\u5c5e\u6027</p>\n</li>\n<li>\n<p><strong>\u7247\u5143\u5904\u7406\u9636\u6bb5</strong>\uff1a\n   - \u6267\u884c\u900f\u89c6\u9664\u6cd5\uff1a$\\phi = (\\phi/w) / (1/w)$\n   - \u73b0\u4ee3GPU\u5728\u7247\u5143\u7740\u8272\u5668\u524d\u81ea\u52a8\u5b8c\u6210\n   - \u7a0b\u5e8f\u5458\u770b\u5230\u7684\u5df2\u662f\u6b63\u786e\u7684\u5c5e\u6027\u503c</p>\n</li>\n</ol>\n<p><strong>\u7279\u6b8a\u60c5\u51b5\u5904\u7406</strong>\uff1a</p>\n<pre class=\"codehilite\"><code class=\"language-glsl\">// \u9700\u8981\u5c4f\u5e55\u7a7a\u95f4\u5bfc\u6570\u7684\u8ba1\u7b97\nvec2 dx = dFdx(texcoord);  // \u786c\u4ef6\u81ea\u52a8\u5904\u7406\u900f\u89c6\u6821\u6b63\nvec2 dy = dFdy(texcoord);  // \u7528\u4e8eMIP\u7ea7\u522b\u8ba1\u7b97\n</code></pre>\n\n<h4 id=\"_11\">\u6027\u80fd\u4f18\u5316</h4>\n<ol>\n<li><strong>\u9884\u8ba1\u7b97\u4f18\u5316</strong>\uff1a\u5728\u9876\u70b9\u7740\u8272\u5668\u8ba1\u7b97$1/z$\uff0c\u907f\u514d\u7247\u5143\u7740\u8272\u5668\u9664\u6cd5</li>\n<li>\n<p><strong>\u5411\u91cf\u5316</strong>\uff1a\u540c\u65f6\u5904\u7406\u591a\u4e2a\u5c5e\u6027\u7684\u900f\u89c6\u6821\u6b63\n   - \u6253\u5305\u76f8\u5173\u5c5e\u6027\u5230vec4\n   - \u5229\u7528\u786c\u4ef6\u76844-wide SIMD\u5355\u5143\n   - \u51cf\u5c11\u63d2\u503c\u5668\u4f7f\u7528\u6570\u91cf</p>\n</li>\n<li>\n<p><strong>\u7cbe\u5ea6\u63a7\u5236</strong>\uff1a\u5173\u952e\u8ba1\u7b97\u4f7f\u7528highp\u7cbe\u5ea6\n   - \u4f4d\u7f6e\u548c\u6df1\u5ea6\uff1a\u59cb\u7ec8\u4f7f\u7528highp\n   - \u7eb9\u7406\u5750\u6807\uff1a\u901a\u5e38mediump\u8db3\u591f\n   - \u989c\u8272\u503c\uff1a\u53ef\u4f7f\u7528lowp\uff088\u4f4d/\u901a\u9053\uff09</p>\n</li>\n</ol>\n<h4 id=\"_12\">\u7279\u6b8a\u60c5\u51b5</h4>\n<p><strong>\u5c4f\u5e55\u7a7a\u95f4\u5c5e\u6027</strong>\uff1a\u67d0\u4e9b\u5c5e\u6027\uff08\u5982\u5c4f\u5e55\u7a7a\u95f4\u5bfc\u6570\uff09\u4e0d\u9700\u8981\u900f\u89c6\u6821\u6b63\uff0c\u4f7f\u7528<code>noperspective</code>\u9650\u5b9a\u7b26\uff1a</p>\n<pre class=\"codehilite\"><code class=\"language-glsl\">noperspective out vec2 screen_coord;\n</code></pre>\n\n<p><strong>\u5e38\u89c1\u9519\u8bef\u6848\u4f8b</strong>\uff1a</p>\n<ul>\n<li>\u6cd5\u7ebf\u63d2\u503c\uff1a\u9700\u8981\u5148\u5f52\u4e00\u5316\u518d\u63d2\u503c</li>\n<li>\u9519\u8bef\uff1a\u76f4\u63a5\u63d2\u503c\u672a\u5f52\u4e00\u5316\u7684\u6cd5\u7ebf</li>\n<li>\n<p>\u6b63\u786e\uff1a\u63d2\u503c\u540e\u91cd\u65b0\u5f52\u4e00\u5316\uff0c\u6216\u4f7f\u7528\u56db\u5143\u6570\u63d2\u503c</p>\n</li>\n<li>\n<p>\u989c\u8272\u63d2\u503c\uff1a\u7ebf\u6027\u989c\u8272\u7a7a\u95f4vs sRGB\u7a7a\u95f4</p>\n</li>\n<li>\u7ebf\u6027\u7a7a\u95f4\u63d2\u503c\u4ea7\u751f\u6b63\u786e\u7684\u4e2d\u95f4\u8272</li>\n<li>\n<p>sRGB\u7a7a\u95f4\u63d2\u503c\u4f1a\u504f\u6697</p>\n</li>\n<li>\n<p>\u5207\u7ebf\u7a7a\u95f4\uff1a\u9700\u8981\u4fdd\u6301\u6b63\u4ea4\u6027</p>\n</li>\n<li>\u4f7f\u7528Gram-Schmidt\u6b63\u4ea4\u5316</li>\n<li>\u6216\u4f20\u9012\u5b8c\u6574\u7684TBN\u77e9\u9635</li>\n</ul>\n<h3 id=\"513\">5.1.3 \u5c5e\u6027\u63d2\u503c\u7684\u786c\u4ef6\u5b9e\u73b0</h3>\n<p>\u73b0\u4ee3GPU\u4f7f\u7528\u4e13\u95e8\u7684\u63d2\u503c\u5668\u786c\u4ef6\uff0c\u8fd9\u662f\u56fa\u5b9a\u529f\u80fd\u7ba1\u7ebf\u7684\u5173\u952e\u7ec4\u4ef6\u4e4b\u4e00\u3002</p>\n<h4 id=\"_13\">\u63d2\u503c\u6a21\u5f0f\u8be6\u89e3</h4>\n<ol>\n<li>\n<p><strong>flat shading</strong>: \n   - \u4f7f\u7528provoking vertex\uff08\u901a\u5e38\u662f\u6700\u540e\u4e00\u4e2a\u9876\u70b9\uff09\u7684\u5c5e\u6027\u503c\n   - \u6574\u4e2a\u4e09\u89d2\u5f62\u4f7f\u7528\u540c\u4e00\u503c\uff0c\u65e0\u63d2\u503c\u8ba1\u7b97\n   - \u9002\u7528\u4e8e\uff1a\u56fe\u5143ID\u3001\u6750\u8d28\u7d22\u5f15\u7b49\u79bb\u6563\u5c5e\u6027</p>\n</li>\n<li>\n<p><strong>smooth shading</strong>: \n   - \u6267\u884c\u5b8c\u6574\u7684\u900f\u89c6\u6b63\u786e\u63d2\u503c\n   - \u9ed8\u8ba4\u6a21\u5f0f\uff0c\u9002\u7528\u4e8e\u5927\u591a\u6570\u5c5e\u6027\n   - \u786c\u4ef6\u81ea\u52a8\u5904\u7406$1/w$\u7684\u8ba1\u7b97\u548c\u6062\u590d</p>\n</li>\n<li>\n<p><strong>noperspective</strong>: \n   - \u5c4f\u5e55\u7a7a\u95f4\u7ebf\u6027\u63d2\u503c\uff0c\u8df3\u8fc7\u900f\u89c6\u6821\u6b63\n   - \u9002\u7528\u4e8e\uff1a\u5c4f\u5e55\u7a7a\u95f4\u6548\u679c\u3001\u540e\u5904\u7406\u5750\u6807\n   - \u6027\u80fd\u66f4\u9ad8\u4f46\u53ef\u80fd\u4ea7\u751f\u900f\u89c6\u5931\u771f</p>\n</li>\n<li>\n<p><strong>centroid sampling</strong>:\n   - \u5728MSAA\u60c5\u51b5\u4e0b\uff0c\u786e\u4fdd\u91c7\u6837\u70b9\u5728\u4e09\u89d2\u5f62\u5185\u90e8\n   - \u907f\u514d\u8fb9\u7f18artifacts\u4f46\u53ef\u80fd\u5f71\u54cd\u5bfc\u6570\u8ba1\u7b97</p>\n</li>\n</ol>\n<h4 id=\"_14\">\u786c\u4ef6\u67b6\u6784</h4>\n<p><strong>\u53c2\u6570\u7f13\u5b58</strong>\uff1a</p>\n<ul>\n<li>\u5b58\u50a8\u4e09\u89d2\u5f62\u7684\u63d2\u503c\u53c2\u6570\uff08\u68af\u5ea6\u3001\u8d77\u59cb\u503c\uff09</li>\n<li>\u5178\u578b\u5927\u5c0f\uff1a32-64\u4e2a\u4e09\u89d2\u5f62</li>\n<li>LRU\u66ff\u6362\u7b56\u7565</li>\n</ul>\n<p><strong>\u63d2\u503c\u7ba1\u7ebf</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>\u9876\u70b9\u5c5e\u6027 \u2192 \u53c2\u6570\u8ba1\u7b97 \u2192 \u53c2\u6570\u7f13\u5b58 \u2192 \u7247\u5143\u63d2\u503c \u2192 \u5c5e\u6027\u8f93\u51fa\n           \u2193                      \u2191\n      \u68af\u5ea6\u8ba1\u7b97\u5355\u5143            \u626b\u63cf\u7ebf\u751f\u6210\u5668\n</code></pre>\n\n<h4 id=\"_15\">\u589e\u91cf\u7b97\u6cd5\u5b9e\u73b0</h4>\n<p>\u5bf9\u4e8e\u5c5e\u6027$\\phi$\u5728\u5c4f\u5e55\u5750\u6807$(x,y)$\u7684\u503c\uff1a\n$$\\phi(x,y) = \\phi_0 + \\frac{\\partial \\phi}{\\partial x}(x-x_0) + \\frac{\\partial \\phi}{\\partial y}(y-y_0)$$\n\u68af\u5ea6\u8ba1\u7b97\uff1a\n$$\\frac{\\partial \\phi}{\\partial x} = \\frac{(\\phi_1 - \\phi_0)(y_2 - y_0) - (\\phi_2 - \\phi_0)(y_1 - y_0)}{(x_1 - x_0)(y_2 - y_0) - (x_2 - x_0)(y_1 - y_0)}$$\n<strong>\u626b\u63cf\u7ebf\u904d\u5386\u4f18\u5316</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>// \u6cbf\u626b\u63cf\u7ebf\u7684\u589e\u91cf\nfor (x = x_start; x &lt;= x_end; x++) {\n    phi += dphi_dx;\n    inv_w += dinv_w_dx;\n}\n// \u6362\u884c\u65f6\u7684\u8c03\u6574\nphi_row += dphi_dy;\ninv_w_row += dinv_w_dy;\n</code></pre>\n\n<h4 id=\"simd\">SIMD\u5e76\u884c\u7b56\u7565</h4>\n<p><strong>2\u00d72 Quad\u5e76\u884c</strong>\uff1a</p>\n<ul>\n<li>GPU\u4ee52\u00d72\u50cf\u7d20\u5757\uff08quad\uff09\u4e3a\u5355\u4f4d\u5904\u7406</li>\n<li>\u4fbf\u4e8e\u8ba1\u7b97\u5c4f\u5e55\u7a7a\u95f4\u5bfc\u6570</li>\n<li>\u5171\u4eab\u63d2\u503c\u53c2\u6570\uff0c\u51cf\u5c11\u5e26\u5bbd</li>\n</ul>\n<p><strong>\u5bfc\u6570\u8ba1\u7b97</strong>\uff1a\n$$\\frac{\\partial \\phi}{\\partial x} \\approx \\phi_{x+1,y} - \\phi_{x,y}$$\n$$\\frac{\\partial \\phi}{\\partial y} \\approx \\phi_{x,y+1} - \\phi_{x,y}$$</p>\n<h4 id=\"_16\">\u7cbe\u5ea6\u4e0e\u6027\u80fd\u6743\u8861</h4>\n<p><strong>\u5b9a\u70b9\u6570\u4f18\u5316</strong>\uff1a</p>\n<ul>\n<li>\u5c4f\u5e55\u5750\u6807\u4f7f\u7528\u5b9a\u70b9\u6570\uff08\u598216.8\u683c\u5f0f\uff09</li>\n<li>\u907f\u514d\u6d6e\u70b9\u7d2f\u79ef\u8bef\u5dee</li>\n<li>\u63d0\u9ad8\u904d\u5386\u7cbe\u5ea6</li>\n</ul>\n<p><strong>\u5c5e\u6027\u538b\u7f29</strong>\uff1a</p>\n<ul>\n<li>16\u4f4d\u6d6e\u70b9\u7528\u4e8e\u989c\u8272\u3001\u7eb9\u7406\u5750\u6807</li>\n<li>32\u4f4d\u6d6e\u70b9\u7528\u4e8e\u4f4d\u7f6e\u3001\u6df1\u5ea6</li>\n<li>\u6253\u5305\u591a\u4e2a\u5c0f\u5c5e\u6027\u5230\u5355\u4e2a\u5bc4\u5b58\u5668</li>\n</ul>\n<p><strong>\u7f13\u5b58\u4f18\u5316\u7b56\u7565</strong>\uff1a</p>\n<ol>\n<li><strong>\u9876\u70b9\u7f13\u5b58</strong>\uff1a\u907f\u514d\u91cd\u590d\u53d8\u6362</li>\n<li><strong>\u53c2\u6570\u7f13\u5b58</strong>\uff1a\u91cd\u7528\u4e09\u89d2\u5f62\u8bbe\u7f6e</li>\n<li><strong>\u7eb9\u7406\u7f13\u5b58</strong>\uff1a\u5229\u75282D\u5c40\u90e8\u6027</li>\n</ol>\n<h3 id=\"514\">5.1.4 \u9ad8\u9636\u63d2\u503c</h3>\n<p>\u7ebf\u6027\u63d2\u503c\u53ef\u80fd\u4e0d\u8db3\u4ee5\u8868\u793a\u590d\u6742\u7684\u5c5e\u6027\u53d8\u5316\uff0c\u7279\u522b\u662f\u5728\u66f2\u9762\u6e32\u67d3\u548c\u9ad8\u8d28\u91cf\u7740\u8272\u4e2d\u3002</p>\n<h4 id=\"_17\">\u4e8c\u6b21\u63d2\u503c</h4>\n<p><strong>B\u00e9zier\u4e09\u89d2\u5f62\u8868\u793a</strong>\uff1a\n\u5bf9\u4e8e\u4e8c\u6b21B\u00e9zier\u4e09\u89d2\u5f62\uff0c\u4f7f\u75286\u4e2a\u63a7\u5236\u70b9\uff1a\n$$\\phi(u,v,w) = \\sum_{i+j+k=2} \\binom{2}{i,j,k} u^i v^j w^k \\phi_{ijk}$$\n\u5176\u4e2d$\\binom{2}{i,j,k} = \\frac{2!}{i!j!k!}$\u662f\u591a\u9879\u5f0f\u7cfb\u6570\u3002</p>\n<p><strong>\u5c55\u5f00\u5f62\u5f0f</strong>\uff1a\n$$\\phi(u,v,w) = u^2\\phi_{200} + v^2\\phi_{020} + w^2\\phi_{002} + 2uv\\phi_{110} + 2vw\\phi_{011} + 2uw\\phi_{101}$$\n<strong>\u63a7\u5236\u70b9\u5e03\u5c40</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>      \u03c6200\n     /    \\\n  \u03c6110    \u03c6101\n   /        \\\n\u03c6020--\u03c6011--\u03c6002\n</code></pre>\n\n<h4 id=\"_18\">\u4e09\u6b21\u63d2\u503c</h4>\n<p><strong>PN\u4e09\u89d2\u5f62\uff08Point-Normal Triangles\uff09</strong>\uff1a\n\u7528\u4e8e\u51e0\u4f55\u7ec6\u5206\u548c\u5149\u6ed1\u8868\u9762\uff1a</p>\n<ol>\n<li>\n<p><strong>\u51e0\u4f55\u63a7\u5236\u70b9</strong>\uff1a\n$$b_{ijk} = \\frac{i\\mathbf{P}_1 + j\\mathbf{P}_2 + k\\mathbf{P}_3}{3} + \\frac{ij}{3}\\mathbf{w}_{12} + \\frac{jk}{3}\\mathbf{w}_{23} + \\frac{ki}{3}\\mathbf{w}_{31}$$\n\u5176\u4e2d$\\mathbf{w}_{ij}$\u662f\u4fee\u6b63\u5411\u91cf\u3002</p>\n</li>\n<li>\n<p><strong>\u6cd5\u7ebf\u63d2\u503c</strong>\uff1a\n   \u4f7f\u7528\u4e8c\u6b21\u63d2\u503c\u4fdd\u8bc1$C^1$\u8fde\u7eed\u6027</p>\n</li>\n</ol>\n<h4 id=\"_19\">\u6709\u7406\u63d2\u503c</h4>\n<p><strong>NURBS\u4e09\u89d2\u5f62</strong>\uff1a\n$$\\phi(u,v,w) = \\frac{\\sum_{i+j+k=n} w_{ijk} \\phi_{ijk} B_{ijk}^n(u,v,w)}{\\sum_{i+j+k=n} w_{ijk} B_{ijk}^n(u,v,w)}$$\n\u5176\u4e2d$w_{ijk}$\u662f\u6743\u91cd\uff0c$B_{ijk}^n$\u662fBernstein\u57fa\u51fd\u6570\u3002</p>\n<h4 id=\"_20\">\u81ea\u9002\u5e94\u63d2\u503c</h4>\n<p><strong>\u8bef\u5dee\u9a71\u52a8\u7ec6\u5206</strong>\uff1a\n\u6839\u636e\u63d2\u503c\u8bef\u5dee\u52a8\u6001\u9009\u62e9\u63d2\u503c\u9636\u6570\uff1a\n$$E = \\max_{\\mathbf{p} \\in T} |\\phi_{linear}(\\mathbf{p}) - \\phi_{exact}(\\mathbf{p})|$$\n\u5f53$E &gt; \\epsilon$\u65f6\uff0c\u4f7f\u7528\u9ad8\u9636\u63d2\u503c\u6216\u7ec6\u5206\u4e09\u89d2\u5f62\u3002</p>\n<h4 id=\"_21\">\u5b9e\u73b0\u8003\u8651</h4>\n<p><strong>\u5b58\u50a8\u5f00\u9500</strong>\uff1a</p>\n<ul>\n<li>\u7ebf\u6027\uff1a3\u4e2a\u7cfb\u6570</li>\n<li>\u4e8c\u6b21\uff1a6\u4e2a\u7cfb\u6570</li>\n<li>\u4e09\u6b21\uff1a10\u4e2a\u7cfb\u6570</li>\n</ul>\n<p><strong>\u8ba1\u7b97\u590d\u6742\u5ea6</strong>\uff1a</p>\n<ul>\n<li>\u7ebf\u6027\uff1a3\u6b21\u4e58\u6cd5\uff0c2\u6b21\u52a0\u6cd5</li>\n<li>\u4e8c\u6b21\uff1a6\u6b21\u4e58\u6cd5\uff0c5\u6b21\u52a0\u6cd5\uff0c3\u6b21\u5e73\u65b9</li>\n<li>\u4e09\u6b21\uff1a10\u6b21\u4e58\u6cd5\uff0c9\u6b21\u52a0\u6cd5\uff0c\u9700\u8981\u7acb\u65b9\u8ba1\u7b97</li>\n</ul>\n<p><strong>\u786c\u4ef6\u652f\u6301</strong>\uff1a</p>\n<ul>\n<li>\u73b0\u4ee3GPU\u4e3b\u8981\u652f\u6301\u7ebf\u6027\u63d2\u503c</li>\n<li>\u9ad8\u9636\u63d2\u503c\u901a\u8fc7\u7740\u8272\u5668\u5b9e\u73b0</li>\n<li>\u66f2\u9762\u7ec6\u5206\u7740\u8272\u5668\u63d0\u4f9b\u786c\u4ef6\u52a0\u901f</li>\n</ul>\n<p><strong>\u5e94\u7528\u573a\u666f</strong>\uff1a</p>\n<ol>\n<li><strong>\u4f4d\u79fb\u8d34\u56fe</strong>\uff1a\u9700\u8981\u5e73\u6ed1\u7684\u51e0\u4f55\u53d8\u5316</li>\n<li><strong>\u6cd5\u7ebf\u63d2\u503c</strong>\uff1a\u907f\u514dGouraud\u7740\u8272\u7684\u68f1\u89d2</li>\n<li><strong>\u7a0b\u5e8f\u5316\u7eb9\u7406</strong>\uff1a\u5e73\u6ed1\u7684\u53c2\u6570\u53d8\u5316</li>\n</ol>\n<h2 id=\"52\">5.2 \u9ad8\u7ea7\u7eb9\u7406\u6620\u5c04</h2>\n<p>\u7eb9\u7406\u6620\u5c04\u662f\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u589e\u52a0\u8868\u9762\u7ec6\u8282\u7684\u6838\u5fc3\u6280\u672f\u3002\u672c\u8282\u6df1\u5165\u63a2\u8ba8\u9ad8\u7ea7\u7eb9\u7406\u6280\u672f\uff0c\u5305\u62ec\u5750\u6807\u751f\u6210\u3001\u8fc7\u6ee4\u7b97\u6cd5\u3001\u538b\u7f29\u683c\u5f0f\u7b49\u73b0\u4ee3GPU\u7684\u5173\u952e\u7279\u6027\u3002</p>\n<h3 id=\"521\">5.2.1 \u7eb9\u7406\u5750\u6807\u7684\u751f\u6210\u4e0e\u53d8\u6362</h3>\n<p>\u7eb9\u7406\u5750\u6807\u662f\u5c06\u4e8c\u7ef4\u56fe\u50cf\u6620\u5c04\u5230\u4e09\u7ef4\u51e0\u4f55\u4f53\u7684\u6865\u6881\u3002\u4e0d\u540c\u7684\u751f\u6210\u65b9\u6cd5\u9002\u7528\u4e8e\u4e0d\u540c\u7684\u51e0\u4f55\u5f62\u72b6\u548c\u5e94\u7528\u573a\u666f\u3002</p>\n<h4 id=\"_22\">\u53c2\u6570\u5316\u6620\u5c04</h4>\n<p><strong>UV\u5c55\u5f00\u7b97\u6cd5</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u4fdd\u89d2\u6620\u5c04\uff08Conformal Mapping\uff09</strong>\uff1a\n   - \u4fdd\u6301\u5c40\u90e8\u89d2\u5ea6\uff0c\u9002\u5408\u7eb9\u7406\u7ed8\u5236\n   - \u4f7f\u7528\u590d\u53d8\u51fd\u6570\u7406\u8bba\uff1a$f: \\mathbb{C} \\to \\mathbb{C}$\n   - \u6ee1\u8db3Cauchy-Riemann\u65b9\u7a0b\uff1a$\\frac{\\partial u}{\\partial x} = \\frac{\\partial v}{\\partial y}$, $\\frac{\\partial u}{\\partial y} = -\\frac{\\partial v}{\\partial x}$\n   - \u4f18\u70b9\uff1a\u65e0\u89d2\u5ea6\u626d\u66f2\uff0c\u9002\u5408\u6cd5\u7ebf\u8d34\u56fe\n   - \u7f3a\u70b9\uff1a\u53ef\u80fd\u4ea7\u751f\u8f83\u5927\u7684\u9762\u79ef\u626d\u66f2</p>\n</li>\n<li>\n<p><strong>\u4fdd\u9762\u79ef\u6620\u5c04\uff08Area-Preserving\uff09</strong>\uff1a\n   - \u4fdd\u6301\u4e09\u89d2\u5f62\u9762\u79ef\u6bd4\n   - \u4f18\u5316\u76ee\u6807\uff1a$\\min \\sum_T \\left(\\frac{A_{3D}}{A_{2D}} - 1\\right)^2$\n   - \u96c5\u53ef\u6bd4\u884c\u5217\u5f0f\u7ea6\u675f\uff1a$\\det(\\mathbf{J}) = 1$\n   - \u5e94\u7528\uff1a\u7eb9\u7406\u5bc6\u5ea6\u5747\u5300\u5206\u5e03</p>\n</li>\n<li>\n<p><strong>LSCM\uff08Least Squares Conformal Maps\uff09</strong>\uff1a\n   - \u6700\u5c0f\u4e8c\u4e58\u4fdd\u89d2\u6620\u5c04\n   - \u7ebf\u6027\u7cfb\u7edf\u6c42\u89e3\uff0c\u9002\u5408\u5927\u89c4\u6a21\u7f51\u683c\n   - \u80fd\u91cf\u51fd\u6570\uff1a$E = \\sum_T A_T \\cdot ||\\nabla u + i\\nabla v||^2$\n   - \u8fb9\u754c\u6761\u4ef6\uff1a\u56fa\u5b9a\u8fb9\u754c\u6216\u81ea\u7531\u8fb9\u754c</p>\n</li>\n<li>\n<p><strong>ABF\uff08Angle Based Flattening\uff09</strong>\uff1a\n   - \u57fa\u4e8e\u89d2\u5ea6\u7684\u5c55\u5f00\u65b9\u6cd5\n   - \u4fdd\u6301\u4e09\u89d2\u5f62\u5185\u89d2\u548c\n   - \u975e\u7ebf\u6027\u4f18\u5316\uff0c\u8d28\u91cf\u66f4\u9ad8</p>\n</li>\n</ol>\n<h4 id=\"_23\">\u6295\u5f71\u6620\u5c04</h4>\n<p><strong>\u5e73\u9762\u6295\u5f71</strong>\uff1a\n$$u = \\frac{(\\mathbf{p} - \\mathbf{o}) \\cdot \\mathbf{u}_{axis}}{scale_u}$$\n$$v = \\frac{(\\mathbf{p} - \\mathbf{o}) \\cdot \\mathbf{v}_{axis}}{scale_v}$$\n\u5e94\u7528\u573a\u666f\uff1a</p>\n<ul>\n<li>\u5730\u5f62\u7eb9\u7406\uff08\u4ece\u4e0a\u65b9\u6295\u5f71\uff09</li>\n<li>\u8d34\u82b1\u7cfb\u7edf\uff08\u4efb\u610f\u65b9\u5411\u6295\u5f71\uff09</li>\n<li>\u9634\u5f71\u8d34\u56fe\uff08\u4ece\u5149\u6e90\u6295\u5f71\uff09</li>\n</ul>\n<p><strong>\u5706\u67f1\u6295\u5f71</strong>\uff1a\n$$u = \\frac{1}{2\\pi} \\arctan2(y, x) + 0.5$$\n$$v = \\frac{z - z_{min}}{z_{max} - z_{min}}$$\n\u63a5\u7f1d\u5904\u7406\uff1a</p>\n<ul>\n<li>\u5728$u = 0$\u548c$u = 1$\u5904\u590d\u5236\u9876\u70b9</li>\n<li>\u6216\u4f7f\u7528\u7eb9\u7406\u7684wrap\u6a21\u5f0f</li>\n</ul>\n<p><strong>\u7403\u9762\u6295\u5f71</strong>\uff1a\n$$u = \\frac{1}{2\\pi} \\arctan2(y, x) + 0.5$$\n$$v = \\frac{1}{\\pi} \\arccos\\left(\\frac{z}{|\\mathbf{r}|}\\right)$$\n\u5947\u5f02\u70b9\u5904\u7406\uff1a</p>\n<ul>\n<li>\u5317\u6781\uff1a$v = 0$\u65f6\uff0c$u$\u4e0d\u786e\u5b9a</li>\n<li>\u5357\u6781\uff1a$v = 1$\u65f6\uff0c$u$\u4e0d\u786e\u5b9a</li>\n<li>\u89e3\u51b3\u65b9\u6848\uff1a\u5728\u6781\u70b9\u5904\u590d\u5236\u9876\u70b9\uff0c\u8d4b\u4e88\u4e0d\u540c\u7684$u$\u503c</li>\n</ul>\n<p><strong>\u7acb\u65b9\u4f53\u6295\u5f71\u4f18\u5316</strong>\uff1a\n\u907f\u514d\u4e09\u89d2\u51fd\u6570\u7684\u5feb\u901f\u65b9\u6cd5\uff1a\n$$u = 0.5 + 0.5 \\times \\frac{-d_z}{|d_x|}$$\uff08\u5bf9\u4e8e+X\u9762\uff09</p>\n<h4 id=\"_24\">\u73af\u5883\u6620\u5c04</h4>\n<p><strong>\u7acb\u65b9\u4f53\u8d34\u56fe\uff08Cube Mapping\uff09</strong>\uff1a</p>\n<ol>\n<li><strong>\u9762\u9009\u62e9</strong>\uff1a\n   ```\n   absX = |direction.x|\n   absY = |direction.y|\n   absZ = |direction.z|</li>\n</ol>\n<p>if (absX &gt;= absY &amp;&amp; absX &gt;= absZ) {\n       face = (direction.x &gt; 0) ? +X : -X\n   }\n   // \u7c7b\u4f3c\u5904\u7406Y\u548cZ\n   ```</p>\n<ol start=\"2\">\n<li><strong>\u5750\u6807\u8ba1\u7b97</strong>\uff1a\n   \u5bf9\u4e8e+X\u9762\uff1a\n   $$u = 0.5 \\times \\left(1 + \\frac{-direction.z}{direction.x}\\right)$$\n   $$v = 0.5 \\times \\left(1 + \\frac{-direction.y}{direction.x}\\right)$$\n<strong>\u7403\u9762\u73af\u5883\u8d34\u56fe</strong>\uff1a</li>\n</ol>\n<ul>\n<li>Equirectangular\uff1a\u76f4\u63a5\u4f7f\u7528\u7403\u9762\u5750\u6807</li>\n<li>Dual-Paraboloid\uff1a\u4e24\u4e2a\u629b\u7269\u9762\u8986\u76d6\u5168\u7403</li>\n</ul>\n<h4 id=\"_25\">\u52a8\u6001\u7eb9\u7406\u5750\u6807\u751f\u6210</h4>\n<p><strong>\u4e09\u5e73\u9762\u6620\u5c04\uff08Triplanar Mapping\uff09</strong>\uff1a</p>\n<pre class=\"codehilite\"><code class=\"language-glsl\">vec3 blendWeights = abs(normal);\nblendWeights = normalize(max(blendWeights, 0.00001));\n\nvec3 xaxis = texture(tex, position.yz) * blendWeights.x;\nvec3 yaxis = texture(tex, position.xz) * blendWeights.y;\nvec3 zaxis = texture(tex, position.xy) * blendWeights.z;\n\nreturn xaxis + yaxis + zaxis;\n</code></pre>\n\n<p><strong>\u6295\u5f71\u7eb9\u7406</strong>\uff1a\n\u4ece\u5149\u6e90\u89c6\u89d2\u6295\u5f71\uff1a\n$$\\mathbf{uv} = \\frac{1}{2} + \\frac{1}{2} \\times \\frac{\\mathbf{P}_{light}}{w_{light}}$$</p>\n<h4 id=\"_26\">\u7eb9\u7406\u5750\u6807\u53d8\u6362</h4>\n<p><strong>\u4eff\u5c04\u53d8\u6362</strong>\uff1a\n$$\\begin{pmatrix} u' \\ v' \\end{pmatrix} = \\begin{pmatrix} a &amp; b \\ c &amp; d \\end{pmatrix} \\begin{pmatrix} u \\ v \\end{pmatrix} + \\begin{pmatrix} t_x \\ t_y \\end{pmatrix}$$\n<strong>\u900f\u89c6\u53d8\u6362</strong>\uff1a\n$$u' = \\frac{au + bv + c}{gu + hv + 1}$$\n$$v' = \\frac{du + ev + f}{gu + hv + 1}$$</p>\n<h3 id=\"522-mip\">5.2.2 MIP\u6620\u5c04\u539f\u7406</h3>\n<p>MIP\uff08Multum In Parvo\uff0c\"\u591a\u5728\u5c0f\u4e2d\"\uff09\u6620\u5c04\u662f\u89e3\u51b3\u7eb9\u7406\u8d70\u6837\u7684\u6838\u5fc3\u6280\u672f\u3002\u5b83\u901a\u8fc7\u9884\u8ba1\u7b97\u4e0d\u540c\u5206\u8fa8\u7387\u7684\u7eb9\u7406\u91d1\u5b57\u5854\uff0c\u5728\u6e32\u67d3\u65f6\u9009\u62e9\u5408\u9002\u7684\u7ea7\u522b\u3002</p>\n<h4 id=\"_27\">\u8d70\u6837\u95ee\u9898\u5206\u6790</h4>\n<p><strong>\u6b20\u91c7\u6837\uff08Undersampling\uff09</strong>\uff1a</p>\n<ul>\n<li>\u5f53\u7eb9\u7406\u9891\u7387\u8d85\u8fc7Nyquist\u9891\u7387\u65f6\u53d1\u751f</li>\n<li>\u4ea7\u751f\u6469\u5c14\u7eb9\u3001\u95ea\u70c1\u7b49artifacts</li>\n<li>\u6839\u672c\u539f\u56e0\uff1a\u5c4f\u5e55\u50cf\u7d20\u8986\u76d6\u591a\u4e2a\u7eb9\u7d20</li>\n</ul>\n<p><strong>Nyquist-Shannon\u91c7\u6837\u5b9a\u7406</strong>\uff1a\n\u8981\u5b8c\u6574\u91cd\u5efa\u4fe1\u53f7\uff0c\u91c7\u6837\u9891\u7387\u5fc5\u987b\u81f3\u5c11\u662f\u4fe1\u53f7\u6700\u9ad8\u9891\u7387\u7684\u4e24\u500d\uff1a\n$$f_s \\geq 2f_{max}$$\n\u5728\u7eb9\u7406\u6620\u5c04\u4e2d\uff1a</p>\n<ul>\n<li>$f_s$\uff1a\u5c4f\u5e55\u91c7\u6837\u7387\uff08\u50cf\u7d20\u5bc6\u5ea6\uff09</li>\n<li>$f_{max}$\uff1a\u7eb9\u7406\u4e2d\u7684\u6700\u9ad8\u9891\u7387\u6210\u5206</li>\n</ul>\n<p><strong>\u8fc7\u91c7\u6837\uff08Oversampling\uff09</strong>\uff1a</p>\n<ul>\n<li>\u6d6a\u8d39\u5e26\u5bbd\u548c\u8ba1\u7b97\u8d44\u6e90</li>\n<li>\u53ef\u80fd\u5bfc\u81f4\u7eb9\u7406\u7f13\u5b58\u6548\u7387\u4f4e\u4e0b</li>\n<li>\u4f46\u4e0d\u4f1a\u4ea7\u751f\u89c6\u89c9artifacts</li>\n</ul>\n<h4 id=\"mip\">MIP\u7ea7\u522b\u8ba1\u7b97</h4>\n<p><strong>\u5c4f\u5e55\u7a7a\u95f4\u5bfc\u6570</strong>\uff1a\n\u4f7f\u7528\u96c5\u53ef\u6bd4\u77e9\u9635\u8ba1\u7b97\u7eb9\u7406\u5750\u6807\u7684\u53d8\u5316\u7387\uff1a\n$$\\mathbf{J} = \\begin{pmatrix} \\frac{\\partial u}{\\partial x} &amp; \\frac{\\partial u}{\\partial y} \\ \\frac{\\partial v}{\\partial x} &amp; \\frac{\\partial v}{\\partial y} \\end{pmatrix}$$\n<strong>\u50cf\u7d20\u8986\u76d6\u533a\u57df\u4f30\u8ba1</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5404\u5411\u540c\u6027\u4f30\u8ba1</strong>\uff08\u6807\u51c6MIP\uff09\uff1a\n$$\\rho = \\max\\left(||\\mathbf{J} \\cdot (1, 0)^T||, ||\\mathbf{J} \\cdot (0, 1)^T||\\right)$$\n\u5c55\u5f00\u5f62\u5f0f\uff1a\n$$\\rho = \\max\\left(\\sqrt{\\left(\\frac{\\partial u}{\\partial x}\\right)^2 + \\left(\\frac{\\partial v}{\\partial x}\\right)^2}, \\sqrt{\\left(\\frac{\\partial u}{\\partial y}\\right)^2 + \\left(\\frac{\\partial v}{\\partial y}\\right)^2}\\right)$$</p>\n</li>\n<li>\n<p><strong>\u5b8c\u6574LOD\u8ba1\u7b97</strong>\uff1a\n$$\\text{LOD} = \\log_2(\\rho \\cdot \\text{textureSize})$$\n\u76f4\u89c2\u7406\u89e3\uff1a\u5982\u679c\u4e00\u4e2a\u5c4f\u5e55\u50cf\u7d20\u8986\u76d6\u4e86$2^n$\u4e2a\u7eb9\u7d20\uff0c\u5e94\u8be5\u4f7f\u7528\u7b2c$n$\u7ea7MIP\u3002</p>\n</li>\n<li>\n<p><strong>LOD\u504f\u79fb\u4e0e\u7ea6\u675f</strong>\uff1a\n$$\\text{LOD}_{final} = \\text{clamp}(\\text{LOD} + \\text{bias}, \\text{minLOD}, \\text{maxLOD})$$</p>\n</li>\n</ol>\n<ul>\n<li>bias\uff1a\u827a\u672f\u5bb6\u63a7\u5236\uff0c\u8d1f\u503c\u66f4\u6e05\u6670\uff0c\u6b63\u503c\u66f4\u6a21\u7cca</li>\n<li>minLOD/maxLOD\uff1a\u9650\u5236MIP\u8303\u56f4\uff0c\u63a7\u5236\u5185\u5b58\u4f7f\u7528</li>\n</ul>\n<h4 id=\"mip_1\">MIP\u91d1\u5b57\u5854\u751f\u6210</h4>\n<p><strong>\u6ee4\u6ce2\u6838\u9009\u62e9</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u7b80\u5355\u5e73\u5747\uff08Box Filter\uff09</strong>\uff1a\n$$\\text{MIP}_{i+1}(x,y) = \\frac{1}{4}\\sum_{dx,dy \\in {0,1}} \\text{MIP}_i(2x+dx, 2y+dy)$$</p>\n</li>\n<li>\n<p><strong>\u9ad8\u65af\u6ee4\u6ce2</strong>\uff1a\n$$w(x,y) = \\frac{1}{2\\pi\\sigma^2} e^{-\\frac{x^2+y^2}{2\\sigma^2}}$$</p>\n</li>\n<li>\n<p><strong>Lanczos\u6ee4\u6ce2</strong>\uff1a\n$$L(x) = \\begin{cases}\n   \\text{sinc}(x) \\cdot \\text{sinc}(x/a) &amp; |x| &lt; a \\\n   0 &amp; \\text{otherwise}\n   \\end{cases}$$\n<strong>\u8fb9\u754c\u5904\u7406</strong>\uff1a</p>\n</li>\n</ol>\n<ul>\n<li>Clamp: \u9632\u6b62\u8d8a\u754c\u91c7\u6837</li>\n<li>Wrap: \u5468\u671f\u6027\u7eb9\u7406</li>\n<li>Mirror: \u955c\u50cf\u53cd\u5c04</li>\n</ul>\n<h4 id=\"_28\">\u4e09\u7ebf\u6027\u8fc7\u6ee4</h4>\n<p>\u5728\u4e24\u4e2aMIP\u7ea7\u522b\u4e4b\u95f4\u8fdb\u884c\u7ebf\u6027\u63d2\u503c\uff1a\n$$\\text{color} = (1-\\alpha) \\cdot \\text{sample}(\\lfloor\\text{LOD}\\rfloor, u, v) + \\alpha \\cdot \\text{sample}(\\lceil\\text{LOD}\\rceil, u, v)$$\n\u5176\u4e2d$\\alpha = \\text{fract}(\\text{LOD})$\u3002</p>\n<h4 id=\"_29\">\u5bfc\u6570\u8ba1\u7b97\u4f18\u5316</h4>\n<p><strong>\u663e\u5f0f\u5bfc\u6570\u4f20\u9012</strong>\uff1a</p>\n<pre class=\"codehilite\"><code class=\"language-glsl\">vec4 textureGrad(sampler2D tex, vec2 uv, vec2 dPdx, vec2 dPdy)\n</code></pre>\n\n<p><strong>\u81ea\u52a8\u5bfc\u6570\u8ba1\u7b97</strong>\uff1a\nGPU\u57282\u00d72 quad\u5185\u4f7f\u7528\u5dee\u5206\uff1a\n$$\\frac{\\partial f}{\\partial x} \\approx f(x+1, y) - f(x, y)$$</p>\n<h4 id=\"_30\">\u5b58\u50a8\u4f18\u5316</h4>\n<p><strong>\u5185\u5b58\u5360\u7528</strong>\uff1a\n\u5b8c\u6574MIP\u94fe\u589e\u52a0\u7ea633%\u7684\u5b58\u50a8\uff1a\n$$\\text{Total} = \\text{Base} \\times \\sum_{i=0}^{\\infty} \\frac{1}{4^i} = \\frac{4}{3} \\times \\text{Base}$$\n<strong>\u7d27\u51d1\u5e03\u5c40</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>+--------+----+--+-+\n| Level0 | L1 |L2|3|\n|        +----+--+-+\n|        | L1 |L2|3|\n+--------+----+--+-+\n</code></pre>\n\n<h3 id=\"523\">5.2.3 \u5404\u5411\u5f02\u6027\u8fc7\u6ee4</h3>\n<p>\u5404\u5411\u5f02\u6027\u8fc7\u6ee4\u89e3\u51b3\u4e86\u6807\u51c6MIP\u6620\u5c04\u5728\u503e\u659c\u89c6\u89d2\u4e0b\u7684\u6a21\u7cca\u95ee\u9898\u3002\u5f53\u7eb9\u7406\u5728\u4e0d\u540c\u65b9\u5411\u4e0a\u62c9\u4f38\u7a0b\u5ea6\u4e0d\u540c\u65f6\uff0c\u5404\u5411\u540c\u6027\u7684MIP\u6ee4\u6ce2\u4f1a\u8fc7\u5ea6\u6a21\u7cca\u3002</p>\n<h4 id=\"_31\">\u50cf\u7d20\u8db3\u8ff9\u5206\u6790</h4>\n<p><strong>\u50cf\u7d20\u5728\u7eb9\u7406\u7a7a\u95f4\u7684\u6295\u5f71</strong>\uff1a\n\u5c4f\u5e55\u50cf\u7d20\u5728\u7eb9\u7406\u7a7a\u95f4\u5f62\u6210\u4e00\u4e2a\u8fd1\u4f3c\u692d\u5706\u7684\u533a\u57df\u3002</p>\n<p><strong>\u96c5\u53ef\u6bd4\u77e9\u9635</strong>\uff1a\n$$\\mathbf{J} = \\begin{pmatrix} \\frac{\\partial u}{\\partial x} &amp; \\frac{\\partial u}{\\partial y} \\ \\frac{\\partial v}{\\partial x} &amp; \\frac{\\partial v}{\\partial y} \\end{pmatrix}$$\n<strong>\u5f62\u72b6\u77e9\u9635</strong>\uff1a\n$$\\mathbf{M} = \\mathbf{J}^T \\mathbf{J} = \\begin{pmatrix} E &amp; F \\ F &amp; G \\end{pmatrix}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$E = \\left(\\frac{\\partial u}{\\partial x}\\right)^2 + \\left(\\frac{\\partial v}{\\partial x}\\right)^2$</li>\n<li>$F = \\frac{\\partial u}{\\partial x}\\frac{\\partial u}{\\partial y} + \\frac{\\partial v}{\\partial x}\\frac{\\partial v}{\\partial y}$</li>\n<li>$G = \\left(\\frac{\\partial u}{\\partial y}\\right)^2 + \\left(\\frac{\\partial v}{\\partial y}\\right)^2$</li>\n</ul>\n<h4 id=\"_32\">\u692d\u5706\u53c2\u6570\u8ba1\u7b97</h4>\n<p><strong>\u7279\u5f81\u503c\u5206\u89e3</strong>\uff1a\n$$\\lambda_{1,2} = \\frac{E + G \\pm \\sqrt{(E-G)^2 + 4F^2}}{2}$$\n<strong>\u692d\u5706\u4e3b\u8f74</strong>\uff1a</p>\n<ul>\n<li>\u957f\u8f74\uff1a$a = \\sqrt{\\lambda_{max}}$</li>\n<li>\u77ed\u8f74\uff1a$b = \\sqrt{\\lambda_{min}}$</li>\n<li>\u65cb\u8f6c\u89d2\uff1a$\\theta = \\frac{1}{2}\\arctan\\left(\\frac{2F}{E-G}\\right)$</li>\n</ul>\n<p><strong>\u5404\u5411\u5f02\u6027\u6bd4</strong>\uff1a\n$$r = \\frac{a}{b} = \\sqrt{\\frac{\\lambda_{max}}{\\lambda_{min}}}$$</p>\n<h4 id=\"ewa\">EWA\u8fc7\u6ee4\u5668</h4>\n<p><strong>\u692d\u5706\u52a0\u6743\u5e73\u5747\uff08EWA\uff09</strong>\uff1a\n$$c = \\frac{\\sum_{(s,t) \\in E} w(s,t) \\cdot \\text{texture}(s,t)}{\\sum_{(s,t) \\in E} w(s,t)}$$\n<strong>\u9ad8\u65af\u6743\u91cd\u51fd\u6570</strong>\uff1a\n$$w(s,t) = \\exp\\left(-\\frac{1}{2}(s,t)\\mathbf{M}^{-1}(s,t)^T\\right)$$</p>\n<h4 id=\"_33\">\u5b9e\u73b0\u65b9\u6cd5</h4>\n<p><strong>1. Ripmap</strong>\uff1a\n- \u5b58\u50a8\u5404\u79cd\u5bbd\u9ad8\u6bd4\u7684\u9884\u6ee4\u6ce2\u7eb9\u7406\n- \u5185\u5b58\u5f00\u9500\uff1a\u539f\u59cb\u7eb9\u7406\u76844\u500d\n- \u7d22\u5f15\uff1a$(\\log_2(width), \\log_2(height))$</p>\n<p><strong>2. \u591a\u91c7\u6837\u8fd1\u4f3c</strong>\uff1a</p>\n<pre class=\"codehilite\"><code class=\"language-glsl\">vec4 anisotropicSample(sampler2D tex, vec2 uv, vec2 ddx, vec2 ddy) {\n    float maxAniso = 16.0;\n\n    // \u8ba1\u7b97\u5404\u5411\u5f02\u6027\u65b9\u5411\n    vec2 dx = ddx * textureSize(tex, 0);\n    vec2 dy = ddy * textureSize(tex, 0);\n    float px = dot(dx, dx);\n    float py = dot(dy, dy);\n\n    float maxLod = 0.5 * log2(max(px, py));\n    float minLod = 0.5 * log2(min(px, py));\n\n    float anisoRatio = min(2.0 * (maxLod - minLod), log2(maxAniso));\n    float samples = exp2(anisoRatio);\n\n    // \u6cbf\u4e3b\u8f74\u91c7\u6837\n    vec2 majorAxis = (px &gt; py) ? normalize(ddx) : normalize(ddy);\n    vec4 color = vec4(0.0);\n\n    for (float i = 0; i &lt; samples; i++) {\n        float t = (i + 0.5) / samples - 0.5;\n        vec2 offset = t * majorAxis * length(ddx + ddy);\n        color += textureLod(tex, uv + offset, minLod);\n    }\n\n    return color / samples;\n}\n</code></pre>\n\n<p><strong>3. \u786c\u4ef6\u5b9e\u73b0\u7b56\u7565</strong>\uff1a\n- \u9650\u5236\u6700\u5927\u91c7\u6837\u6570\uff08\u901a\u5e388x\u62168x\uff09\n- \u4f7f\u7528\u67e5\u627e\u8868\u52a0\u901f\u4e09\u89d2\u51fd\u6570\n- \u7f13\u5b58\u53cb\u597d\u7684\u91c7\u6837\u6a21\u5f0f</p>\n<h4 id=\"_34\">\u6027\u80fd\u4e0e\u8d28\u91cf\u6743\u8861</h4>\n<p><strong>\u81ea\u9002\u5e94\u91c7\u6837</strong>\uff1a</p>\n<ul>\n<li>\u6839\u636e\u5404\u5411\u5f02\u6027\u6bd4\u52a8\u6001\u8c03\u6574\u91c7\u6837\u6570</li>\n<li>\u8fdc\u5904\u7269\u4f53\u4f7f\u7528\u8f83\u5c11\u91c7\u6837</li>\n<li>\u8fd1\u5904\u503e\u659c\u8868\u9762\u589e\u52a0\u91c7\u6837</li>\n</ul>\n<p><strong>LOD\u504f\u79fb\u4f18\u5316</strong>\uff1a\n$$\\text{LOD}_{aniso} = \\text{LOD}_{iso} - \\frac{1}{2}\\log_2(\\text{samples})$$</p>\n<h3 id=\"524\">5.2.4 \u7eb9\u7406\u538b\u7f29\u6280\u672f</h3>\n<p>\u7eb9\u7406\u538b\u7f29\u662f\u5e73\u8861\u5185\u5b58\u5360\u7528\u548c\u89c6\u89c9\u8d28\u91cf\u7684\u5173\u952e\u6280\u672f\u3002\u73b0\u4ee3GPU\u5728\u786c\u4ef6\u7ea7\u522b\u652f\u6301\u5b9e\u65f6\u89e3\u538b\u3002</p>\n<h4 id=\"_35\">\u5757\u538b\u7f29\u539f\u7406</h4>\n<p><strong>\u57fa\u672c\u601d\u60f3</strong>\uff1a</p>\n<ul>\n<li>\u5c06\u7eb9\u7406\u5206\u62104\u00d74\u7684\u5757</li>\n<li>\u6bcf\u5757\u72ec\u7acb\u538b\u7f29\uff0c\u4fbf\u4e8e\u968f\u673a\u8bbf\u95ee</li>\n<li>\u5229\u7528\u5757\u5185\u989c\u8272\u76f8\u5173\u6027</li>\n</ul>\n<h4 id=\"bc1dxt1\">BC1/DXT1\u683c\u5f0f</h4>\n<p><strong>\u6570\u636e\u7ed3\u6784</strong>\uff08\u6bcf\u575764\u4f4d\uff09\uff1a</p>\n<pre class=\"codehilite\"><code>color0: 16 bits (R5G6B5)\ncolor1: 16 bits (R5G6B5)\nindices: 32 bits (2 bits \u00d7 16 pixels)\n</code></pre>\n\n<p><strong>\u989c\u8272\u63d2\u503c\u89c4\u5219</strong>\uff1a\n\u5f53color0 &gt; color1\uff1a</p>\n<ul>\n<li>$c_0 = color0$</li>\n<li>$c_1 = color1$</li>\n<li>$c_2 = \\frac{2}{3}c_0 + \\frac{1}{3}c_1$</li>\n<li>$c_3 = \\frac{1}{3}c_0 + \\frac{2}{3}c_1$</li>\n</ul>\n<p>\u5f53color0 \u2264 color1\uff08\u900f\u660e\u6a21\u5f0f\uff09\uff1a</p>\n<ul>\n<li>$c_0 = color0$</li>\n<li>$c_1 = color1$</li>\n<li>$c_2 = \\frac{1}{2}c_0 + \\frac{1}{2}c_1$</li>\n<li>$c_3 = $ \u900f\u660e/\u9ed1\u8272</li>\n</ul>\n<p><strong>\u538b\u7f29\u6bd4</strong>\uff1a$\\frac{16 \\times 24}{64} = 6:1$</p>\n<h4 id=\"bc7bptc\">BC7/BPTC\u683c\u5f0f</h4>\n<p><strong>\u9ad8\u7ea7\u7279\u6027</strong>\uff1a</p>\n<ul>\n<li>8\u79cd\u538b\u7f29\u6a21\u5f0f</li>\n<li>\u6bcf\u5757128\u4f4d</li>\n<li>\u652f\u6301\u5b8c\u6574Alpha\u901a\u9053</li>\n<li>\u9002\u5408\u9ad8\u8d28\u91cf\u8d34\u56fe</li>\n</ul>\n<p><strong>\u6a21\u5f0f\u9009\u62e9\u7b56\u7565</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>Mode 0: 3 subsets, 4-bit endpoints\nMode 1: 2 subsets, 6-bit endpoints\nMode 2: 3 subsets, 5-bit endpoints\n...\nMode 7: 2 subsets, 5-bit RGBA\n</code></pre>\n\n<p><strong>\u5206\u533a\u6a21\u5f0f</strong>\uff1a\n\u5c06\u5757\u5206\u4e3a\u591a\u4e2a\u5b50\u96c6\uff0c\u6bcf\u4e2a\u5b50\u96c6\u72ec\u7acb\u63d2\u503c\uff1a\n$$c = \\sum_{i} w_i \\cdot endpoint_i$$</p>\n<h4 id=\"astc\">ASTC\u683c\u5f0f</h4>\n<p><strong>\u7075\u6d3b\u5757\u5927\u5c0f</strong>\uff1a</p>\n<ul>\n<li>\u4ece4\u00d74\u52308\u00d78\u3001\u751a\u81f312\u00d712</li>\n<li>\u53ef\u53d8\u538b\u7f29\u7387\uff1a8 bpp\u52070.89 bpp</li>\n<li>\u652f\u6301HDR</li>\n</ul>\n<p><strong>\u7f16\u7801\u539f\u7406</strong>\uff1a</p>\n<ol>\n<li><strong>\u989c\u8272\u7aef\u70b9\u7f16\u7801</strong>\uff1a\u4f7f\u7528BISE\uff08Bounded Integer Sequence Encoding\uff09</li>\n<li><strong>\u6743\u91cd\u7f16\u7801</strong>\uff1a\u91cf\u5316\u52303\u30015\u30017\u4f4d\u7b49</li>\n<li><strong>\u5206\u533a\u6a21\u5f0f</strong>\uff1a\u652f\u63011-4\u4e2a\u5206\u533a</li>\n</ol>\n<h4 id=\"_36\">\u7eb9\u7406\u538b\u7f29\u9009\u62e9\u7b56\u7565</h4>\n<p><strong>\u6839\u636e\u5185\u5bb9\u7c7b\u578b</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u6f2b\u53cd\u5c04\u8d34\u56fe</strong>\uff1a\n   - BC1/DXT1\uff1a\u4e00\u822c\u8d28\u91cf\u8db3\u591f\n   - BC7\uff1a\u9ad8\u8d28\u91cf\u9700\u6c42</p>\n</li>\n<li>\n<p><strong>\u6cd5\u7ebf\u8d34\u56fe</strong>\uff1a\n   - BC5\uff1a\u4e24\u901a\u9053\uff0c\u9002\u5408\u5b58\u50a8XY\n   - \u91cd\u5efaZ\uff1a$z = \\sqrt{1 - x^2 - y^2}$</p>\n</li>\n<li>\n<p><strong>HDR\u7eb9\u7406</strong>\uff1a\n   - BC6H\uff1a\u534a\u7cbe\u5ea6\u6d6e\u70b9\n   - ASTC HDR\u6a21\u5f0f</p>\n</li>\n</ol>\n<p><strong>\u6027\u80fd\u8003\u8651</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>\u7f13\u5b58\u547d\u4e2d\u7387 \u221d 1/\u538b\u7f29\u540e\u5927\u5c0f\n\u5e26\u5bbd\u9700\u6c42 = \u91c7\u6837\u7387 \u00d7 \u538b\u7f29\u540e\u5927\u5c0f\n</code></pre>\n\n<h4 id=\"_37\">\u5b9e\u65f6\u538b\u7f29\u4f18\u5316</h4>\n<p><strong>\u5feb\u901f\u7f16\u7801\u7b97\u6cd5</strong>\uff1a</p>\n<ol>\n<li><strong>PCA\u989c\u8272\u9009\u62e9</strong>\uff1a\u4f7f\u7528\u4e3b\u6210\u5206\u5206\u6790\u9009\u62e9\u7aef\u70b9</li>\n<li><strong>\u8bef\u5dee\u5ea6\u91cf</strong>\uff1a$E = \\sum_{i} ||c_i - \\hat{c}_i||^2$</li>\n<li><strong>\u5feb\u901f\u6a21\u5f0f\u51b3\u7b56</strong>\uff1a\u57fa\u4e8e\u5757\u7684\u7edf\u8ba1\u7279\u6027</li>\n</ol>\n<p><strong>GPU\u52a0\u901f\u7f16\u7801</strong>\uff1a</p>\n<ul>\n<li>\u5e76\u884c\u5904\u7406\u591a\u4e2a\u5757</li>\n<li>\u4f7f\u7528\u8ba1\u7b97\u7740\u8272\u5668</li>\n<li>\u5b9e\u65f6\u7eb9\u7406\u6d41</li>\n</ul>\n<h3 id=\"525\">5.2.5 \u865a\u62df\u7eb9\u7406</h3>\n<p>\u865a\u62df\u7eb9\u7406\u7cfb\u7edf\u7684\u9875\u8868\u7ba1\u7406\uff1a\n$$\\text{PhysicalAddr} = \\text{PageTable}[\\text{VirtualPage}] + \\text{PageOffset}$$\n\u7f3a\u9875\u5904\u7406\u7684\u4f18\u5148\u7ea7\u8ba1\u7b97\uff1a\n$$\\text{Priority} = \\frac{\\text{ScreenCoverage}}{\\text{LOD}^2}$$</p>\n<h2 id=\"53\">5.3 \u7a0b\u5e8f\u5316\u7eb9\u7406\u4e0e\u7740\u8272\u5668\u4f18\u5316</h2>\n<h3 id=\"531\">5.3.1 \u566a\u58f0\u51fd\u6570</h3>\n<p>Perlin\u566a\u58f0\u7684\u6784\u9020\uff1a</p>\n<ol>\n<li>\u68af\u5ea6\u573a\u751f\u6210\uff1a\u5728\u6574\u6570\u683c\u70b9\u968f\u673a\u5206\u914d\u68af\u5ea6\u5411\u91cf</li>\n<li>\u63d2\u503c\u8ba1\u7b97\uff1a\n$$n(x,y,z) = \\sum_{i,j,k \\in {0,1}} w_i w_j w_k \\cdot \\mathbf{g}_{ijk} \\cdot (x-x_{ijk}, y-y_{ijk}, z-z_{ijk})$$\n\u5176\u4e2d$w_i = \\text{fade}(x - \\lfloor x \\rfloor)$\uff0cfade\u51fd\u6570\uff1a\n$$\\text{fade}(t) = 6t^5 - 15t^4 + 10t^3$$</li>\n</ol>\n<h3 id=\"532\">5.3.2 \u5206\u5f62\u7eb9\u7406</h3>\n<p>fBm (Fractional Brownian Motion)\uff1a\n$$f(x) = \\sum_{i=0}^{n} \\frac{\\text{noise}(2^i x)}{2^i}$$\nTurbulence\u51fd\u6570\uff1a\n$$t(x) = \\sum_{i=0}^{n} \\frac{|\\text{noise}(2^i x)|}{2^i}$$</p>\n<h3 id=\"533\">5.3.3 \u7740\u8272\u5668\u4f18\u5316\u6280\u672f</h3>\n<p><strong>\u7b97\u672f\u5f3a\u5ea6\u4f18\u5316</strong>\uff1a</p>\n<ul>\n<li>\u4f7f\u7528MAD\u6307\u4ee4\uff1a$a \\times b + c$</li>\n<li>\u5411\u91cf\u5316\u64cd\u4f5c\uff1a\u540c\u65f6\u5904\u7406RGBA</li>\n<li>\u5e38\u91cf\u6298\u53e0\uff1a\u9884\u8ba1\u7b97\u9759\u6001\u8868\u8fbe\u5f0f</li>\n</ul>\n<p><strong>\u7eb9\u7406\u5e26\u5bbd\u4f18\u5316</strong>\uff1a</p>\n<ul>\n<li>\u7eb9\u7406\u6253\u5305\uff1a\u5c06\u591a\u4e2a\u7070\u5ea6\u7eb9\u7406\u5408\u5e76\u5230RGBA\u901a\u9053</li>\n<li>\u7eb9\u7406\u56fe\u96c6\uff1a\u51cf\u5c11\u7ed1\u5b9a\u5207\u6362</li>\n<li>\u538b\u7f29\u683c\u5f0f\u9009\u62e9\uff1a\u6839\u636e\u5185\u5bb9\u7279\u6027\u9009\u62e9</li>\n</ul>\n<p><strong>\u5206\u652f\u4f18\u5316</strong>\uff1a\n\u52a8\u6001\u5206\u652f\u7684\u6210\u672c\u6a21\u578b\uff1a\n$$\\text{Cost} = p \\cdot C_{\\text{true}} + (1-p) \\cdot C_{\\text{false}} + C_{\\text{divergence}}$$\n\u4f18\u5316\u7b56\u7565\uff1a</p>\n<ul>\n<li>\u4f7f\u7528\u6761\u4ef6\u8d4b\u503c\u4ee3\u66ff\u5206\u652f</li>\n<li>\u9759\u6001\u5206\u652f\uff1a\u4f7f\u7528uniform\u53d8\u91cf</li>\n<li>\u52a8\u6001\u5206\u652f\u5408\u5e76\uff1a\u76f8\u4f3c\u5206\u652f\u8def\u5f84</li>\n</ul>\n<h3 id=\"534\">5.3.4 \u8ba1\u7b97\u7740\u8272\u5668\u4f18\u5316</h3>\n<p><strong>\u5de5\u4f5c\u7ec4\u5927\u5c0f\u4f18\u5316</strong>\uff1a\n\u5360\u7528\u7387\u8ba1\u7b97\uff1a\n$$\\text{Occupancy} = \\frac{\\text{ActiveWarps}}{\\text{MaxWarps}}$$\n\u5f71\u54cd\u56e0\u7d20\uff1a</p>\n<ul>\n<li>\u5bc4\u5b58\u5668\u4f7f\u7528\u91cf</li>\n<li>\u5171\u4eab\u5185\u5b58\u4f7f\u7528\u91cf</li>\n<li>\u5de5\u4f5c\u7ec4\u5927\u5c0f</li>\n</ul>\n<p><strong>\u5185\u5b58\u8bbf\u95ee\u6a21\u5f0f</strong>\uff1a</p>\n<ul>\n<li>Coalesced\u8bbf\u95ee\uff1a\u8fde\u7eed\u7ebf\u7a0b\u8bbf\u95ee\u8fde\u7eed\u5730\u5740</li>\n<li>Bank\u51b2\u7a81\u907f\u514d\uff1a\u5171\u4eab\u5185\u5b58\u7684\u6b65\u957f\u8bbf\u95ee</li>\n<li>\u7eb9\u7406\u7f13\u5b58\u5229\u7528\uff1a2D\u5c40\u90e8\u6027</li>\n</ul>\n<h2 id=\"_38\">\u672c\u7ae0\u5c0f\u7ed3</h2>\n<p>\u672c\u7ae0\u6df1\u5165\u63a2\u8ba8\u4e86\u9ad8\u7ea7\u7740\u8272\u6280\u672f\u7684\u6838\u5fc3\u6982\u5ff5\uff1a</p>\n<h3 id=\"_39\">\u5173\u952e\u516c\u5f0f\u56de\u987e</h3>\n<ol>\n<li>\n<p><strong>\u900f\u89c6\u6b63\u786e\u63d2\u503c</strong>\uff1a\n$$\\phi = \\frac{u\\frac{\\phi_0}{z_0} + v\\frac{\\phi_1}{z_1} + w\\frac{\\phi_2}{z_2}}{u\\frac{1}{z_0} + v\\frac{1}{z_1} + w\\frac{1}{z_2}}$$</p>\n</li>\n<li>\n<p><strong>MIP\u7ea7\u522b\u8ba1\u7b97</strong>\uff1a\n$$\\text{LOD} = \\log_2(\\max(||\\frac{\\partial \\mathbf{u}}{\\partial x}||, ||\\frac{\\partial \\mathbf{u}}{\\partial y}||) \\cdot \\text{textureSize})$$</p>\n</li>\n<li>\n<p><strong>Perlin\u566a\u58f0fade\u51fd\u6570</strong>\uff1a\n$$\\text{fade}(t) = 6t^5 - 15t^4 + 10t^3$$</p>\n</li>\n<li>\n<p><strong>fBm\u5206\u5f62</strong>\uff1a\n$$f(x) = \\sum_{i=0}^{n} \\frac{\\text{noise}(2^i x)}{2^i}$$</p>\n</li>\n</ol>\n<h3 id=\"_40\">\u6838\u5fc3\u6982\u5ff5</h3>\n<ul>\n<li><strong>\u63d2\u503c\u6280\u672f</strong>\uff1a\u91cd\u5fc3\u5750\u6807\u3001\u900f\u89c6\u6821\u6b63\u3001\u786c\u4ef6\u5b9e\u73b0</li>\n<li><strong>\u7eb9\u7406\u6620\u5c04</strong>\uff1aMIP\u6620\u5c04\u3001\u5404\u5411\u5f02\u6027\u8fc7\u6ee4\u3001\u865a\u62df\u7eb9\u7406</li>\n<li><strong>\u7a0b\u5e8f\u5316\u7eb9\u7406</strong>\uff1a\u566a\u58f0\u51fd\u6570\u3001\u5206\u5f62\u3001\u4f18\u5316\u6280\u672f</li>\n<li><strong>\u6027\u80fd\u4f18\u5316</strong>\uff1a\u7b97\u672f\u5f3a\u5ea6\u3001\u5185\u5b58\u8bbf\u95ee\u3001\u5206\u652f\u9884\u6d4b</li>\n</ul>\n<h2 id=\"_41\">\u7ec3\u4e60\u9898</h2>\n<h3 id=\"_42\">\u57fa\u7840\u9898</h3>\n<p><strong>\u7ec3\u4e605.1\uff1a\u91cd\u5fc3\u5750\u6807\u8ba1\u7b97</strong>\n\u7ed9\u5b9a\u4e09\u89d2\u5f62\u9876\u70b9$A(0,0)$\uff0c$B(4,0)$\uff0c$C(2,3)$\u548c\u70b9$P(2,1)$\uff0c\u8ba1\u7b97P\u7684\u91cd\u5fc3\u5750\u6807\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u4f7f\u7528\u9762\u79ef\u6cd5\u6216\u53c9\u79ef\u6cd5\u8ba1\u7b97\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u4f7f\u7528\u53c9\u79ef\u6cd5\uff1a</p>\n<ul>\n<li>\u4e09\u89d2\u5f62\u9762\u79ef\uff1a$\\text{Area}(ABC) = \\frac{1}{2}|(B-A) \\times (C-A)| = \\frac{1}{2}|4 \\times 3 - 0| = 6$</li>\n<li>$u = \\frac{\\text{Area}(PBC)}{\\text{Area}(ABC)} = \\frac{|(B-P) \\times (C-P)|/2}{6} = \\frac{|2 \\times 2 - (-1) \\times 0|/2}{6} = \\frac{1}{3}$</li>\n<li>$v = \\frac{\\text{Area}(APC)}{\\text{Area}(ABC)} = \\frac{|(P-A) \\times (C-A)|/2}{6} = \\frac{|2 \\times 3 - 1 \\times 2|/2}{6} = \\frac{1}{3}$</li>\n<li>$w = 1 - u - v = \\frac{1}{3}$</li>\n</ul>\n<p>\u56e0\u6b64\u91cd\u5fc3\u5750\u6807\u4e3a$(1/3, 1/3, 1/3)$\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e605.2\uff1a\u900f\u89c6\u63d2\u503c\u8bef\u5dee</strong>\n\u8003\u8651\u4e00\u6761\u4ece$z=1$\u5230$z=10$\u7684\u7ebf\u6bb5\uff0c\u5176\u7eb9\u7406\u5750\u6807\u4ece0\u52301\u7ebf\u6027\u53d8\u5316\u3002\u5728\u5c4f\u5e55\u7a7a\u95f4$x=0.5$\u5904\uff0c\u6bd4\u8f83\u7ebf\u6027\u63d2\u503c\u548c\u900f\u89c6\u6b63\u786e\u63d2\u503c\u7684\u7ed3\u679c\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u8bbe\u7f6e\u5408\u9002\u7684\u6295\u5f71\u77e9\u9635\u53c2\u6570\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u5047\u8bbe\u900f\u89c6\u6295\u5f71\u540e\uff0c$z=1$\u6620\u5c04\u5230$x'=0$\uff0c$z=10$\u6620\u5c04\u5230$x'=1$\u3002</p>\n<p>\u7ebf\u6027\u63d2\u503c\uff1a$u_{\\text{linear}} = 0.5$</p>\n<p>\u900f\u89c6\u6b63\u786e\u63d2\u503c\uff1a</p>\n<ul>\n<li>\u5728$x'=0.5$\u5904\uff0c$\\frac{1}{z} = 0.5 \\times \\frac{1}{1} + 0.5 \\times \\frac{1}{10} = 0.55$</li>\n<li>\u56e0\u6b64$z = \\frac{1}{0.55} \\approx 1.82$</li>\n<li>$u = \\frac{0.5 \\times \\frac{0}{1} + 0.5 \\times \\frac{1}{10}}{0.55} = \\frac{0.05}{0.55} \\approx 0.091$</li>\n</ul>\n<p>\u8bef\u5dee\uff1a$|0.5 - 0.091| = 0.409$\uff0c\u8bf4\u660e\u7ebf\u6027\u63d2\u503c\u4f1a\u4ea7\u751f\u663e\u8457\u8bef\u5dee\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e605.3\uff1aMIP\u7ea7\u522b\u9009\u62e9</strong>\n\u7eb9\u7406\u5927\u5c0f\u4e3a1024\u00d71024\uff0c\u5f53\u524d\u50cf\u7d20\u7684\u7eb9\u7406\u5750\u6807\u5bfc\u6570\u4e3a$\\frac{\\partial u}{\\partial x} = 0.01$\uff0c$\\frac{\\partial v}{\\partial x} = 0.02$\uff0c$\\frac{\\partial u}{\\partial y} = 0.015$\uff0c$\\frac{\\partial v}{\\partial y} = 0.01$\u3002\u8ba1\u7b97\u5e94\u9009\u62e9\u7684MIP\u7ea7\u522b\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u4f7f\u7528\u6700\u5927\u5404\u5411\u5f02\u6027\u5bfc\u6570\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u8ba1\u7b97\u5404\u65b9\u5411\u7684\u5bfc\u6570\u5927\u5c0f\uff1a</p>\n<ul>\n<li>$||\\frac{\\partial \\mathbf{u}}{\\partial x}|| = \\sqrt{0.01^2 + 0.02^2} = \\sqrt{0.0005} \\approx 0.0224$</li>\n<li>$||\\frac{\\partial \\mathbf{u}}{\\partial y}|| = \\sqrt{0.015^2 + 0.01^2} = \\sqrt{0.000325} \\approx 0.0180$</li>\n</ul>\n<p>\u6700\u5927\u5bfc\u6570\uff1a$\\max(0.0224, 0.0180) = 0.0224$</p>\n<p>LOD\u7ea7\u522b\uff1a\n$$\\text{LOD} = \\log_2(0.0224 \\times 1024) = \\log_2(22.94) \\approx 4.52$$\n\u5e94\u9009\u62e9MIP\u7ea7\u522b4\u62165\uff08\u901a\u5e38\u4f1a\u5728\u4e24\u8005\u4e4b\u95f4\u8fdb\u884c\u4e09\u7ebf\u6027\u63d2\u503c\uff09\u3002</p>\n</details>\n<h3 id=\"_43\">\u6311\u6218\u9898</h3>\n<p><strong>\u7ec3\u4e605.4\uff1a\u81ea\u5b9a\u4e49\u63d2\u503c\u57fa\u51fd\u6570</strong>\n\u8bbe\u8ba1\u4e00\u4e2aC\u00b2\u8fde\u7eed\u7684\u63d2\u503c\u57fa\u51fd\u6570$h(t)$\uff0c\u6ee1\u8db3$h(0)=0$\uff0c$h(1)=1$\uff0c$h'(0)=h'(1)=0$\uff0c$h''(0)=h''(1)=0$\uff0c\u5e76\u4e0ePerlin\u7684fade\u51fd\u6570\u6bd4\u8f83\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u8003\u86517\u6b21\u591a\u9879\u5f0f\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u8bbe$h(t) = at^7 + bt^6 + ct^5 + dt^4 + et^3 + ft^2 + gt + h$</p>\n<p>\u8fb9\u754c\u6761\u4ef6\uff1a</p>\n<ul>\n<li>$h(0) = 0 \\Rightarrow h = 0$</li>\n<li>$h(1) = 1 \\Rightarrow a + b + c + d + e + f + g = 1$</li>\n<li>$h'(0) = 0 \\Rightarrow g = 0$</li>\n<li>$h'(1) = 0 \\Rightarrow 7a + 6b + 5c + 4d + 3e + 2f = 0$</li>\n<li>$h''(0) = 0 \\Rightarrow f = 0$</li>\n<li>$h''(1) = 0 \\Rightarrow 42a + 30b + 20c + 12d + 6e = 0$</li>\n</ul>\n<p>\u89e3\u5f97\uff1a$h(t) = -20t^7 + 70t^6 - 84t^5 + 35t^4$</p>\n<p>\u4e0ePerlin\u7684fade\u51fd\u6570$f(t) = 6t^5 - 15t^4 + 10t^3$\u76f8\u6bd4\uff0c\u65b0\u51fd\u6570\u5177\u6709\u66f4\u9ad8\u7684\u8fde\u7eed\u6027\u4f46\u8ba1\u7b97\u6210\u672c\u66f4\u9ad8\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e605.5\uff1a\u5404\u5411\u5f02\u6027\u91c7\u6837\u4f18\u5316</strong>\n\u7ed9\u5b9a\u7eb9\u7406\u7a7a\u95f4\u7684\u96c5\u53ef\u6bd4\u77e9\u9635$\\mathbf{J} = \\begin{pmatrix} 2 &amp; 1 \\ 0 &amp; 0.5 \\end{pmatrix}$\uff0c\u8bbe\u8ba1\u4e00\u4e2a\u91c7\u6837\u7b56\u7565\uff0c\u4f7f\u7528\u6700\u5c11\u7684\u91c7\u6837\u70b9\u8986\u76d695%\u7684\u80fd\u91cf\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u5206\u6790\u692d\u5706\u7684\u4e3b\u8f74\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u8ba1\u7b97\u5f62\u72b6\u77e9\u9635\uff1a\n$$\\mathbf{M} = \\mathbf{J}^T\\mathbf{J} = \\begin{pmatrix} 4 &amp; 2 \\ 2 &amp; 1.25 \\end{pmatrix}$$\n\u7279\u5f81\u503c\u5206\u89e3\uff1a</p>\n<ul>\n<li>\u7279\u5f81\u503c\uff1a$\\lambda_1 = 5.13$\uff0c$\\lambda_2 = 0.12$</li>\n<li>\u4e3b\u8f74\u957f\u5ea6\uff1a$a = \\sqrt{\\lambda_1} = 2.26$\uff0c$b = \\sqrt{\\lambda_2} = 0.35$</li>\n<li>\u5404\u5411\u5f02\u6027\u6bd4\uff1a$\\frac{a}{b} = 6.5$</li>\n</ul>\n<p>\u91c7\u6837\u7b56\u7565\uff1a</p>\n<ol>\n<li>\u6cbf\u4e3b\u8f74\u65b9\u5411\u91c7\u6837$n = \\lceil 2a \\rceil = 5$\u4e2a\u70b9</li>\n<li>\u5782\u76f4\u65b9\u5411\u91c7\u6837$m = \\lceil 2b \\rceil = 1$\u4e2a\u70b9</li>\n<li>\u4f7f\u7528\u9ad8\u65af\u6743\u91cd\uff1a$w(x,y) = \\exp(-\\frac{x^2}{2a^2} - \\frac{y^2}{2b^2})$</li>\n</ol>\n<p>\u603b\u5171\u9700\u89815\u4e2a\u91c7\u6837\u70b9\u5373\u53ef\u8986\u76d695%\u7684\u80fd\u91cf\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e605.6\uff1a\u865a\u62df\u7eb9\u7406\u7f13\u5b58\u7b56\u7565</strong>\n\u8bbe\u8ba1\u4e00\u4e2a\u865a\u62df\u7eb9\u7406\u7cfb\u7edf\u7684\u9875\u9762\u66ff\u6362\u7b97\u6cd5\uff0c\u8003\u8651\uff1a\u9875\u9762\u5927\u5c0f128\u00d7128\uff0c\u7269\u7406\u5185\u5b58\u53ef\u5b58\u50a8256\u9875\uff0c\u6bcf\u5e27\u9884\u6d4b\u672a\u67653\u5e27\u7684\u8bbf\u95ee\u6a21\u5f0f\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u7ed3\u5408LRU\u548c\u9884\u6d4b\u4fe1\u606f\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u6df7\u5408\u66ff\u6362\u7b97\u6cd5\u8bbe\u8ba1\uff1a</p>\n<ol>\n<li><strong>\u4f18\u5148\u7ea7\u8ba1\u7b97</strong>\uff1a\n$$P_i = \\alpha \\cdot \\text{LRU}_i + \\beta \\cdot \\text{Future}_i + \\gamma \\cdot \\text{LOD}_i$$\n\u5176\u4e2d\uff1a</li>\n</ol>\n<ul>\n<li>$\\text{LRU}_i$\uff1a\u6700\u8fd1\u4f7f\u7528\u65f6\u95f4\uff08\u5f52\u4e00\u5316\uff09</li>\n<li>$\\text{Future}_i$\uff1a\u672a\u67653\u5e27\u7684\u9884\u6d4b\u8bbf\u95ee\u6982\u7387</li>\n<li>$\\text{LOD}_i$\uff1aMIP\u7ea7\u522b\u6743\u91cd\uff08\u9ad8\u5206\u8fa8\u7387\u4f18\u5148\uff09</li>\n</ul>\n<ol start=\"2\">\n<li>\n<p><strong>\u53c2\u6570\u8bbe\u7f6e</strong>\uff1a\n   - $\\alpha = 0.4$\uff08\u5386\u53f2\u6743\u91cd\uff09\n   - $\\beta = 0.5$\uff08\u9884\u6d4b\u6743\u91cd\uff09\n   - $\\gamma = 0.1$\uff08\u5206\u8fa8\u7387\u6743\u91cd\uff09</p>\n</li>\n<li>\n<p><strong>\u5b9e\u73b0\u7ec6\u8282</strong>\uff1a\n   - \u7ef4\u62a4\u8bbf\u95ee\u5386\u53f2\u7684\u5faa\u73af\u7f13\u51b2\u533a\n   - \u4f7f\u7528\u8fd0\u52a8\u5411\u91cf\u9884\u6d4b\u672a\u6765\u8bbf\u95ee\n   - \u9884\u52a0\u8f7d\u8fb9\u754c\u9875\u9762</p>\n</li>\n<li>\n<p><strong>\u6027\u80fd\u4f18\u5316</strong>\uff1a\n   - \u6279\u91cf\u66ff\u6362\uff1a\u4e00\u6b21\u66ff\u6362\u591a\u4e2a\u4f4e\u4f18\u5148\u7ea7\u9875\u9762\n   - \u5f02\u6b65\u52a0\u8f7d\uff1a\u4f7f\u7528\u53cc\u7f13\u51b2\u907f\u514d\u505c\u987f\n   - \u538b\u7f29\u4f20\u8f93\uff1a\u4f7f\u7528GPU\u89e3\u538b</p>\n</li>\n</ol>\n</details>\n<p><strong>\u7ec3\u4e605.7\uff1a\u7740\u8272\u5668\u81ea\u52a8\u4f18\u5316</strong>\n\u7ed9\u5b9a\u7740\u8272\u5668\u4ee3\u7801\u7247\u6bb5\uff0c\u8bbe\u8ba1\u4e00\u4e2a\u4f18\u5316\u6d41\u7a0b\uff0c\u76ee\u6807\u662f\u51cf\u5c1150%\u7684\u7eb9\u7406\u5e26\u5bbd\u3002\u8003\u8651\u7eb9\u7406\u91cd\u7528\u3001\u8ba1\u7b97\u4e0e\u8bbf\u5b58\u5e73\u8861\u7b49\u56e0\u7d20\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u6784\u5efa\u6570\u636e\u4f9d\u8d56\u56fe\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u4f18\u5316\u6d41\u7a0b\u8bbe\u8ba1\uff1a</p>\n<ol>\n<li>\n<p><strong>\u9759\u6001\u5206\u6790</strong>\uff1a\n   - \u6784\u5efaSSA\u5f62\u5f0f\u7684\u4e2d\u95f4\u8868\u793a\n   - \u8bc6\u522b\u7eb9\u7406\u8bbf\u95ee\u6a21\u5f0f\n   - \u8ba1\u7b97\u590d\u7528\u8ddd\u79bb</p>\n</li>\n<li>\n<p><strong>\u4f18\u5316\u53d8\u6362</strong>\uff1a\n   a) <strong>\u7eb9\u7406\u5408\u5e76</strong>\uff1a</p>\n<ul>\n<li>\u8bc6\u522b\u76f8\u540c\u5750\u6807\u7684\u591a\u6b21\u91c7\u6837</li>\n<li>\u5408\u5e76\u5230\u5355\u4e2afloat4\u91c7\u6837</li>\n</ul>\n</li>\n</ol>\n<p>b) <strong>\u5faa\u73af\u4f18\u5316</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>  - \u63d0\u5347\u5faa\u73af\u4e0d\u53d8\u7684\u7eb9\u7406\u8bbf\u95ee\n  - \u5411\u91cf\u5316\u76f8\u90bb\u50cf\u7d20\u7684\u8bbf\u95ee\n</code></pre>\n\n<p>c) <strong>\u9884\u8ba1\u7b97</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>  - \u5c06view-dependent\u8ba1\u7b97\u79fb\u5230\u9876\u70b9\u7740\u8272\u5668\n  - \u4f7f\u7528\u67e5\u627e\u8868\u66ff\u4ee3\u590d\u6742\u51fd\u6570\n</code></pre>\n\n<ol start=\"3\">\n<li>\n<p><strong>\u6027\u80fd\u6a21\u578b</strong>\uff1a\n$$\\text{Bandwidth} = \\sum_i \\text{AccessCount}_i \\times \\text{CacheMiss}_i \\times \\text{DataSize}_i$$</p>\n</li>\n<li>\n<p><strong>\u9a8c\u8bc1\u65b9\u6cd5</strong>\uff1a\n   - \u4f7f\u7528GPU\u6027\u80fd\u8ba1\u6570\u5668\u9a8c\u8bc1\n   - A/B\u6d4b\u8bd5\u4e0d\u540c\u4f18\u5316\u7ec4\u5408\n   - \u786e\u4fdd\u89c6\u89c9\u8d28\u91cf\u4e0d\u964d\u4f4e</p>\n</li>\n</ol>\n<p>\u9884\u671f\u7ed3\u679c\uff1a\u901a\u8fc7\u7eb9\u7406\u6253\u5305\u548c\u8bbf\u95ee\u6a21\u5f0f\u4f18\u5316\uff0c\u53ef\u5b9e\u73b040-60%\u7684\u5e26\u5bbd\u51cf\u5c11\u3002</p>\n</details>\n<h2 id=\"_44\">\u5e38\u89c1\u9677\u9631\u4e0e\u9519\u8bef</h2>\n<h3 id=\"1\">1. \u63d2\u503c\u7cbe\u5ea6\u95ee\u9898</h3>\n<ul>\n<li><strong>\u9519\u8bef</strong>\uff1a\u4f7f\u7528float16\u8fdb\u884c\u900f\u89c6\u9664\u6cd5</li>\n<li><strong>\u6b63\u786e</strong>\uff1a\u900f\u89c6\u9664\u6cd5\u5fc5\u987b\u4f7f\u7528float32\u4ee5\u4e0a\u7cbe\u5ea6</li>\n<li><strong>\u539f\u56e0</strong>\uff1a$1/z$\u7684\u52a8\u6001\u8303\u56f4\u5f88\u5927\uff0c\u4f4e\u7cbe\u5ea6\u4f1a\u5bfc\u81f4\u4e25\u91cd\u8bef\u5dee</li>\n</ul>\n<h3 id=\"2-mip\">2. MIP\u94fe\u751f\u6210\u9519\u8bef</h3>\n<ul>\n<li><strong>\u9519\u8bef</strong>\uff1a\u7b80\u5355\u76842\u00d72\u5e73\u5747</li>\n<li><strong>\u6b63\u786e</strong>\uff1a\u4f7f\u7528\u9002\u5f53\u7684\u6ee4\u6ce2\u6838\uff08\u5982Lanczos\uff09</li>\n<li><strong>\u5f71\u54cd</strong>\uff1a\u4f4e\u8d28\u91cfMIP\u94fe\u5bfc\u81f4\u6469\u5c14\u7eb9\u548c\u6a21\u7cca</li>\n</ul>\n<h3 id=\"3\">3. \u7eb9\u7406\u91c7\u6837\u8fb9\u754c\u5904\u7406</h3>\n<ul>\n<li><strong>\u9519\u8bef</strong>\uff1a\u5ffd\u7565\u7eb9\u7406\u8fb9\u754c\u7684\u534a\u50cf\u7d20\u504f\u79fb</li>\n<li><strong>\u6b63\u786e</strong>\uff1a\u8003\u8651\u7eb9\u7d20\u4e2d\u5fc3\u5bf9\u9f50</li>\n<li><strong>\u516c\u5f0f</strong>\uff1a$u' = \\frac{u \\times (size - 1) + 0.5}{size}$</li>\n</ul>\n<h3 id=\"4\">4. \u7740\u8272\u5668\u7cbe\u5ea6\u635f\u5931</h3>\n<ul>\n<li><strong>\u9519\u8bef</strong>\uff1a<code>normalize(normal + tangent)</code></li>\n<li><strong>\u6b63\u786e</strong>\uff1a\u5148normalize\u518d\u63d2\u503c\uff0c\u6216\u4f7f\u7528\u56db\u5143\u6570</li>\n<li><strong>\u539f\u56e0</strong>\uff1a\u5411\u91cf\u52a0\u6cd5\u7834\u574f\u5355\u4f4d\u957f\u5ea6\u7ea6\u675f</li>\n</ul>\n<h3 id=\"5_1\">5. \u865a\u62df\u7eb9\u7406\u53cd\u9988\u5ef6\u8fdf</h3>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1a\u9875\u9762\u8bf7\u6c42\u5230\u52a0\u8f7d\u5b8c\u6210\u6709\u591a\u5e27\u5ef6\u8fdf</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u9884\u6d4b\u6027\u52a0\u8f7d\u3001\u591a\u5206\u8fa8\u7387\u56de\u9000</li>\n<li><strong>\u6743\u8861</strong>\uff1a\u5185\u5b58\u4f7f\u7528vs\u54cd\u5e94\u901f\u5ea6</li>\n</ul>\n<h2 id=\"_45\">\u6700\u4f73\u5b9e\u8df5\u68c0\u67e5\u6e05\u5355</h2>\n<h3 id=\"_46\">\u63d2\u503c\u5b9e\u73b0\u68c0\u67e5</h3>\n<ul>\n<li>[ ] \u900f\u89c6\u6b63\u786e\u63d2\u503c\u7528\u4e8e\u6240\u6709view-dependent\u5c5e\u6027</li>\n<li>[ ] \u91cd\u5fc3\u5750\u6807\u8ba1\u7b97\u8003\u8651\u6570\u503c\u7a33\u5b9a\u6027</li>\n<li>[ ] \u6b63\u786e\u5904\u7406\u9000\u5316\u4e09\u89d2\u5f62\uff08\u9762\u79ef\u63a5\u8fd10\uff09</li>\n<li>[ ] \u5c5e\u6027\u63d2\u503c\u7684\u7cbe\u5ea6\u5339\u914d\u6e32\u67d3\u9700\u6c42</li>\n</ul>\n<h3 id=\"_47\">\u7eb9\u7406\u7cfb\u7edf\u8bbe\u8ba1</h3>\n<ul>\n<li>[ ] MIP\u94fe\u751f\u6210\u4f7f\u7528\u9ad8\u8d28\u91cf\u6ee4\u6ce2</li>\n<li>[ ] \u5404\u5411\u5f02\u6027\u7ea7\u522b\u6839\u636e\u786c\u4ef6\u80fd\u529b\u8bbe\u7f6e</li>\n<li>[ ] \u7eb9\u7406\u683c\u5f0f\u9009\u62e9\u5e73\u8861\u8d28\u91cf\u4e0e\u5e26\u5bbd</li>\n<li>[ ] \u865a\u62df\u7eb9\u7406\u9875\u9762\u5927\u5c0f\u4f18\u5316\uff08\u901a\u5e38128\u00d7128\uff09</li>\n<li>[ ] \u7eb9\u7406\u56fe\u96c6\u8003\u8651\u8fb9\u754c\u586b\u5145\uff08\u9632\u6b62\u6e17\u8272\uff09</li>\n</ul>\n<h3 id=\"_48\">\u7740\u8272\u5668\u4f18\u5316\u9a8c\u8bc1</h3>\n<ul>\n<li>[ ] \u4f7f\u7528\u6027\u80fd\u5206\u6790\u5de5\u5177\u6d4b\u91cf\u74f6\u9888</li>\n<li>[ ] \u7b97\u672f\u5f3a\u5ea6\u8fbe\u5230\u76ee\u6807\u786c\u4ef6\u7684\u7406\u60f3\u503c</li>\n<li>[ ] \u5bc4\u5b58\u5668\u4f7f\u7528\u4e0d\u8d85\u8fc7\u786c\u4ef6\u9650\u5236</li>\n<li>[ ] \u5206\u652f\u53d1\u6563\u5ea6\u63a7\u5236\u5728\u53ef\u63a5\u53d7\u8303\u56f4</li>\n<li>[ ] \u7eb9\u7406\u7f13\u5b58\u547d\u4e2d\u7387\u76d1\u63a7</li>\n<li>[ ] \u8003\u8651\u4e0d\u540c\u786c\u4ef6\u7684\u79fb\u690d\u6027</li>\n</ul>\n<h3 id=\"_49\">\u8d28\u91cf\u4fdd\u8bc1</h3>\n<ul>\n<li>[ ] \u5404\u5411\u5f02\u6027\u8fc7\u6ee4\u5728\u63a0\u5c04\u89d2\u4e0b\u65e0\u660e\u663e\u7455\u75b5</li>\n<li>[ ] \u7a0b\u5e8f\u5316\u7eb9\u7406\u5728\u4e0d\u540c\u5c3a\u5ea6\u4e0b\u8fde\u7eed</li>\n<li>[ ] LOD\u5207\u6362\u65e0\u660e\u663e\u8df3\u53d8</li>\n<li>[ ] \u7eb9\u7406\u538b\u7f29artifacts\u5728\u53ef\u63a5\u53d7\u8303\u56f4</li>\n<li>[ ] \u6027\u80fd\u4f18\u5316\u672a\u5f15\u5165\u89c6\u89c9\u9000\u5316</li>\n</ul>"
  },
  "../chapter1.md": {
    "hash": "fd0a64332b62286bf0b5f25f0f4838fd",
    "content": "<h1 id=\"1\">\u7b2c1\u7ae0\uff1a\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u6982\u8ff0\u4e0e\u6570\u5b66\u57fa\u7840</h1>\n<p>\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u662f\u7814\u7a76\u5982\u4f55\u901a\u8fc7\u8ba1\u7b97\u751f\u6210\u3001\u64cd\u4f5c\u548c\u663e\u793a\u89c6\u89c9\u5185\u5bb9\u7684\u5b66\u79d1\u3002\u672c\u7ae0\u5c06\u4ece\u5b8f\u89c2\u89c6\u89d2\u4ecb\u7ecd\u56fe\u5f62\u5b66\u7684\u6838\u5fc3\u6982\u5ff5\uff0c\u5e76\u5efa\u7acb\u5fc5\u8981\u7684\u6570\u5b66\u57fa\u7840\u3002\u6211\u4eec\u5c06\u6df1\u5165\u63a2\u8ba8\u5411\u91cf\u7a7a\u95f4\u3001\u7ebf\u6027\u53d8\u6362\u4ee5\u53ca\u56db\u5143\u6570\u7b49\u9ad8\u7ea7\u6570\u5b66\u5de5\u5177\uff0c\u8fd9\u4e9b\u5185\u5bb9\u6784\u6210\u4e86\u540e\u7eed\u7ae0\u8282\u7684\u7406\u8bba\u57fa\u77f3\u3002\u901a\u8fc7\u672c\u7ae0\u5b66\u4e60\uff0c\u8bfb\u8005\u5c06\u638c\u63e1\u56fe\u5f62\u5b66\u4e2d\u7684\u57fa\u672c\u6570\u5b66\u8bed\u8a00\uff0c\u5e76\u7406\u89e3\u5404\u79cd\u6570\u5b66\u5de5\u5177\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u7684\u4f18\u52bf\u4e0e\u5c40\u9650\u3002</p>\n<h2 id=\"11\">1.1 \u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u6982\u8ff0</h2>\n<h3 id=\"111\">1.1.1 \u56fe\u5f62\u5b66\u7684\u672c\u8d28\u4e0e\u5e94\u7528\u9886\u57df</h3>\n<p>\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u7684\u6838\u5fc3\u4efb\u52a1\u662f\u5c06\u4e09\u7ef4\u4e16\u754c\u7684\u51e0\u4f55\u4fe1\u606f\u8f6c\u6362\u4e3a\u4e8c\u7ef4\u56fe\u50cf\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u6d89\u53ca\u51e0\u4f55\u5efa\u6a21\u3001\u5149\u7167\u8ba1\u7b97\u3001\u6295\u5f71\u53d8\u6362\u548c\u56fe\u50cf\u5408\u6210\u7b49\u591a\u4e2a\u73af\u8282\u3002\u5728\u73b0\u4ee3\u5e94\u7528\u4e2d\uff0c\u56fe\u5f62\u5b66\u5df2\u7ecf\u6e17\u900f\u5230\u6e38\u620f\u5f00\u53d1\u3001\u7535\u5f71\u7279\u6548\u3001\u79d1\u5b66\u53ef\u89c6\u5316\u3001\u865a\u62df\u73b0\u5b9e\u3001\u8ba1\u7b97\u673a\u8f85\u52a9\u8bbe\u8ba1\u7b49\u4f17\u591a\u9886\u57df\u3002</p>\n<p>\u4ece\u6570\u5b66\u89d2\u5ea6\u770b\uff0c\u56fe\u5f62\u5b66\u672c\u8d28\u4e0a\u662f\u4e00\u7cfb\u5217\u51fd\u6570\u6620\u5c04\uff1a\n$$f: \\mathbb{R}^3 \\times \\mathcal{L} \\times \\mathcal{M} \\rightarrow \\mathbb{R}^2 \\times \\mathcal{C}$$\n\u5176\u4e2d$\\mathbb{R}^3$\u8868\u793a\u4e09\u7ef4\u7a7a\u95f4\u5750\u6807\uff0c$\\mathcal{L}$\u8868\u793a\u5149\u7167\u6761\u4ef6\uff0c$\\mathcal{M}$\u8868\u793a\u6750\u8d28\u5c5e\u6027\uff0c$\\mathbb{R}^2$\u8868\u793a\u56fe\u50cf\u5e73\u9762\u5750\u6807\uff0c$\\mathcal{C}$\u8868\u793a\u989c\u8272\u7a7a\u95f4\u3002</p>\n<p><strong>\u6838\u5fc3\u5e94\u7528\u9886\u57df\u7684\u6280\u672f\u8981\u6c42</strong></p>\n<p>\u4e0d\u540c\u5e94\u7528\u9886\u57df\u5bf9\u56fe\u5f62\u5b66\u6280\u672f\u6709\u4e0d\u540c\u4fa7\u91cd\uff1a</p>\n<ol>\n<li>\n<p><strong>\u6e38\u620f\u5f15\u64ce</strong>\uff1a\n   - \u5b9e\u65f6\u6027\u8981\u6c42\uff1a16.67ms/\u5e27\uff0860 FPS\uff09\n   - \u5927\u89c4\u6a21\u573a\u666f\u7ba1\u7406\uff1aLOD\u3001\u6d41\u5f0f\u52a0\u8f7d\u3001\u906e\u6321\u5254\u9664\n   - \u7269\u7406\u6a21\u62df\u96c6\u6210\uff1a\u78b0\u649e\u68c0\u6d4b\u3001\u521a\u4f53\u52a8\u529b\u5b66\n   - \u7279\u6548\u7cfb\u7edf\uff1a\u7c92\u5b50\u7cfb\u7edf\u3001\u540e\u5904\u7406\u7ba1\u7ebf</p>\n</li>\n<li>\n<p><strong>\u7535\u5f71\u89c6\u89c9\u7279\u6548</strong>\uff1a\n   - \u7269\u7406\u51c6\u786e\u6027\uff1a\u5149\u8c31\u6e32\u67d3\u3001\u6b21\u8868\u9762\u6563\u5c04\n   - \u8d85\u9ad8\u5206\u8fa8\u7387\uff1a4K-8K\u6e32\u67d3\uff0c\u6bcf\u5e27\u53ef\u80fd\u9700\u8981\u6570\u5c0f\u65f6\n   - \u590d\u6742\u6750\u8d28\uff1a\u6bdb\u53d1\u3001\u76ae\u80a4\u3001\u6d41\u4f53\n   - \u5408\u6210\u6280\u672f\uff1a\u7eff\u5e55\u62a0\u50cf\u3001\u52a8\u4f5c\u6355\u6349\u96c6\u6210</p>\n</li>\n<li>\n<p><strong>\u79d1\u5b66\u53ef\u89c6\u5316</strong>\uff1a\n   - \u5927\u6570\u636e\u5904\u7406\uff1aTB\u7ea7\u6570\u636e\u7684\u5b9e\u65f6\u53ef\u89c6\u5316\n   - \u51c6\u786e\u6027\u8981\u6c42\uff1a\u8272\u5f69\u6620\u5c04\u7684\u611f\u77e5\u5747\u5300\u6027\n   - \u4ea4\u4e92\u5f0f\u63a2\u7d22\uff1a\u5207\u7247\u3001\u7b49\u503c\u9762\u3001\u6d41\u7ebf\n   - \u4e0d\u786e\u5b9a\u6027\u53ef\u89c6\u5316\uff1a\u8bef\u5dee\u4f20\u64ad\u3001\u7f6e\u4fe1\u533a\u95f4</p>\n</li>\n<li>\n<p><strong>\u8ba1\u7b97\u673a\u8f85\u52a9\u8bbe\u8ba1\uff08CAD\uff09</strong>\uff1a\n   - \u7cbe\u786e\u51e0\u4f55\u8868\u793a\uff1aNURBS\u3001\u7ec6\u5206\u66f2\u9762\n   - \u5b9e\u65f6\u7f16\u8f91\uff1a\u53c2\u6570\u5316\u5efa\u6a21\u3001\u7ea6\u675f\u6c42\u89e3\n   - \u5236\u9020\u96c6\u6210\uff1aSTL\u5bfc\u51fa\u3001\u5207\u7247\u7b97\u6cd5\n   - \u4eff\u771f\u9a8c\u8bc1\uff1a\u6709\u9650\u5143\u5206\u6790\u53ef\u89c6\u5316</p>\n</li>\n<li>\n<p><strong>\u865a\u62df/\u589e\u5f3a\u73b0\u5b9e\uff08VR/AR\uff09</strong>\uff1a\n   - \u8d85\u4f4e\u5ef6\u8fdf\uff1a&lt;20ms\u8fd0\u52a8\u5230\u5149\u5b50\u5ef6\u8fdf\n   - \u7acb\u4f53\u6e32\u67d3\uff1a\u53cc\u76ee\u89c6\u5dee\u3001\u4f1a\u805a\u8c03\u8282\u51b2\u7a81\n   - \u6ce8\u89c6\u70b9\u6e32\u67d3\uff1a\u4e2d\u5fc3\u51f9\u6e32\u67d3\u4f18\u5316\n   - \u7a7a\u95f4\u5b9a\u4f4d\uff1aSLAM\u3001\u6df1\u5ea6\u91cd\u5efa</p>\n</li>\n</ol>\n<p><strong>\u56fe\u5f62\u5b66\u7684\u5c42\u6b21\u5316\u89c6\u89d2</strong></p>\n<p>\u4ece\u4e0d\u540c\u62bd\u8c61\u5c42\u6b21\u7406\u89e3\u56fe\u5f62\u5b66\uff1a</p>\n<ol>\n<li>\n<p><strong>\u4fe1\u53f7\u5904\u7406\u5c42</strong>\uff1a\u56fe\u50cf\u662f\u4e8c\u7ef4\u4fe1\u53f7\uff0c\u6e32\u67d3\u662f\u91cd\u5efa\u8fc7\u7a0b\n$$I(x,y) = \\int\\int h(x-x', y-y') S(x', y') dx' dy'$$\n\u5176\u4e2d$h$\u662f\u91cd\u5efa\u6838\uff0c$S$\u662f\u7406\u60f3\u4fe1\u53f7</p>\n</li>\n<li>\n<p><strong>\u51e0\u4f55\u53d8\u6362\u5c42</strong>\uff1a\u5750\u6807\u7cfb\u53d8\u6362\u94fe\n$$\\mathbf{p}_{screen} = \\mathbf{M}_{viewport} \\cdot \\mathbf{M}_{proj} \\cdot \\mathbf{M}_{view} \\cdot \\mathbf{M}_{model} \\cdot \\mathbf{p}_{local}$$</p>\n</li>\n<li>\n<p><strong>\u5149\u4f20\u8f93\u5c42</strong>\uff1a\u8f90\u5c04\u5ea6\u91cf\u5b66\u63cf\u8ff0\u5149\u80fd\u4f20\u64ad\n$$L(\\mathbf{x}, \\omega) = L_e(\\mathbf{x}, \\omega) + \\int_\\Omega f_r(\\mathbf{x}, \\omega', \\omega) L(\\mathbf{x}', -\\omega') G(\\mathbf{x}, \\mathbf{x}') V(\\mathbf{x}, \\mathbf{x}') d\\omega'$$\n<strong>\u6e32\u67d3\u7684\u4fe1\u606f\u8bba\u89c6\u89d2</strong></p>\n</li>\n</ol>\n<p>\u4ece\u4fe1\u606f\u8bba\u89d2\u5ea6\uff0c\u6e32\u67d3\u662f\u4fe1\u606f\u538b\u7f29\u8fc7\u7a0b\uff1a</p>\n<ul>\n<li><strong>\u8f93\u5165\u4fe1\u606f</strong>\uff1a3D\u573a\u666f\u63cf\u8ff0\uff0c\u4fe1\u606f\u71b5$H(S)$</li>\n<li><strong>\u8f93\u51fa\u4fe1\u606f</strong>\uff1a2D\u56fe\u50cf\uff0c\u4fe1\u606f\u71b5$H(I)$</li>\n<li><strong>\u4fe1\u606f\u635f\u5931</strong>\uff1a$I(S;I) = H(S) - H(S|I)$</li>\n</ul>\n<p>\u7406\u60f3\u6e32\u67d3\u5668\u6700\u5927\u5316\u4e92\u4fe1\u606f$I(S;I)$\uff0c\u540c\u65f6\u6ee1\u8db3\u4eba\u7c7b\u89c6\u89c9\u7cfb\u7edf\u7684\u611f\u77e5\u7ea6\u675f\u3002</p>\n<p><strong>\u6e32\u67d3\u65b9\u7a0b\u7684\u7edf\u4e00\u6846\u67b6</strong></p>\n<p>\u66f4\u4e25\u683c\u5730\u8bf4\uff0c\u6e32\u67d3\u7684\u672c\u8d28\u662f\u6c42\u89e3\u6e32\u67d3\u65b9\u7a0b\uff08Kajiya, 1986\uff09\uff1a\n$$L_o(\\mathbf{x}, \\omega_o) = L_e(\\mathbf{x}, \\omega_o) + \\int_{\\Omega} f_r(\\mathbf{x}, \\omega_i, \\omega_o) L_i(\\mathbf{x}, \\omega_i) (\\omega_i \\cdot \\mathbf{n}) d\\omega_i$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$L_o$\uff1a\u51fa\u5c04\u8f90\u5c04\u5ea6\uff08radiance\uff09</li>\n<li>$L_e$\uff1a\u81ea\u53d1\u5149\u8f90\u5c04\u5ea6</li>\n<li>$f_r$\uff1a\u53cc\u5411\u53cd\u5c04\u5206\u5e03\u51fd\u6570\uff08BRDF\uff09</li>\n<li>$L_i$\uff1a\u5165\u5c04\u8f90\u5c04\u5ea6</li>\n<li>$\\Omega$\uff1a\u534a\u7403\u79ef\u5206\u57df</li>\n</ul>\n<p>\u8fd9\u4e2a\u79ef\u5206\u65b9\u7a0b\u7edf\u4e00\u4e86\u5c40\u90e8\u5149\u7167\u548c\u5168\u5c40\u5149\u7167\uff0c\u662f\u73b0\u4ee3\u6e32\u67d3\u7b97\u6cd5\u7684\u7406\u8bba\u57fa\u7840\u3002</p>\n<p><strong>\u56fe\u5f62\u5b66\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\u6311\u6218</strong></p>\n<p>\u6e32\u67d3\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\u4e3b\u8981\u6765\u81ea\uff1a</p>\n<ol>\n<li><strong>\u51e0\u4f55\u590d\u6742\u5ea6</strong>\uff1a$O(n)$\u4e2a\u591a\u8fb9\u5f62\uff0c\u6bcf\u4e2a\u9700\u8981\u6295\u5f71\u548c\u88c1\u526a</li>\n<li><strong>\u7740\u8272\u590d\u6742\u5ea6</strong>\uff1a$O(p)$\u4e2a\u50cf\u7d20\uff0c\u6bcf\u4e2a\u9700\u8981\u5149\u7167\u8ba1\u7b97</li>\n<li><strong>\u5149\u7167\u590d\u6742\u5ea6</strong>\uff1a$O(l)$\u4e2a\u5149\u6e90\uff0c\u53ef\u80fd\u9700\u8981\u9634\u5f71\u8ba1\u7b97</li>\n<li><strong>\u5168\u5c40\u5149\u7167</strong>\uff1a\u9012\u5f52\u7684\u5149\u7ebf\u4f20\u64ad\uff0c\u590d\u6742\u5ea6\u53ef\u8fbe$O(n^2p)$</li>\n</ol>\n<p>\u56e0\u6b64\uff0c\u603b\u590d\u6742\u5ea6\u5728\u6700\u574f\u60c5\u51b5\u4e0b\u4e3a$O(nlp)$\uff0c\u8fd9\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u9700\u8981\u5404\u79cd\u52a0\u901f\u7b97\u6cd5\u3002</p>\n<p><strong>\u6df1\u5165\u7406\u89e3\u590d\u6742\u5ea6\u6765\u6e90</strong></p>\n<p>\u8ba9\u6211\u4eec\u5206\u6790\u4e00\u4e2a\u5178\u578b\u573a\u666f\u7684\u8ba1\u7b97\u91cf\uff1a</p>\n<ul>\n<li>\u573a\u666f\u51e0\u4f55\uff1a$n = 10^6$ \u4e2a\u4e09\u89d2\u5f62</li>\n<li>\u5c4f\u5e55\u5206\u8fa8\u7387\uff1a$p = 1920 \\times 1080 \\approx 2 \\times 10^6$ \u50cf\u7d20</li>\n<li>\u5149\u6e90\u6570\u91cf\uff1a$l = 100$ \u4e2a\u5149\u6e90</li>\n<li>\u5149\u7ebf\u5f39\u5c04\u6b21\u6570\uff1a$d = 5$ \u6b21\uff08\u5168\u5c40\u5149\u7167\uff09</li>\n</ul>\n<p>\u57fa\u7840\u5149\u6805\u5316\uff1a$O(n \\log n + p)$ \uff08\u6df1\u5ea6\u6392\u5e8f + Z-buffer\uff09\n\u5e26\u9634\u5f71\u7684\u5149\u6805\u5316\uff1a$O(nl + p \\cdot l)$ \uff08\u6bcf\u4e2a\u5149\u6e90\u4e00\u4e2ashadow map\uff09\n\u8def\u5f84\u8ffd\u8e2a\uff1a$O(p \\cdot d \\cdot \\log n)$ \uff08\u6bcf\u50cf\u7d20\u591a\u6761\u5149\u7ebf\uff09</p>\n<p>\u5b9e\u9645\u8ba1\u7b97\u91cf\uff1a</p>\n<ul>\n<li>\u5149\u6805\u5316\uff1a\u7ea6$10^7$\u6b21\u64cd\u4f5c</li>\n<li>\u5e26\u9634\u5f71\uff1a\u7ea6$10^8$\u6b21\u64cd\u4f5c  </li>\n<li>\u8def\u5f84\u8ffd\u8e2a\uff1a\u7ea6$10^8$\u6b21\u5149\u7ebf\u6c42\u4ea4</li>\n</ul>\n<p>\u8fd9\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u9700\u8981\uff1a</p>\n<ul>\n<li>\u786c\u4ef6\u52a0\u901f\uff08GPU\u5e76\u884c\u5316\uff09</li>\n<li>\u7b97\u6cd5\u4f18\u5316\uff08\u7a7a\u95f4\u6570\u636e\u7ed3\u6784\uff09</li>\n<li>\u8fd1\u4f3c\u6280\u672f\uff08\u5c4f\u5e55\u7a7a\u95f4\u6548\u679c\uff09</li>\n</ul>\n<p><strong>\u590d\u6742\u5ea6\u4f18\u5316\u7b56\u7565</strong></p>\n<p>\u73b0\u4ee3\u56fe\u5f62\u5b66\u901a\u8fc7\u591a\u79cd\u7b56\u7565\u964d\u4f4e\u590d\u6742\u5ea6\uff1a</p>\n<ol>\n<li>\n<p><strong>\u7a7a\u95f4\u6570\u636e\u7ed3\u6784</strong>\uff1a\n   - BVH\uff08\u5305\u56f4\u4f53\u5c42\u6b21\uff09\uff1a\u6784\u5efa$O(n\\log n)$\uff0c\u67e5\u8be2$O(\\log n)$\n   - KD-Tree\uff1a\u7a7a\u95f4\u5212\u5206\uff0c\u5e73\u5747\u67e5\u8be2$O(\\log n)$\n   - \u516b\u53c9\u6811\uff1a\u7a00\u758f\u4f53\u7d20\u5316\uff0c\u5185\u5b58\u6548\u7387\u9ad8</p>\n</li>\n<li>\n<p><strong>\u65f6\u95f4\u76f8\u5e72\u6027</strong>\uff1a\n   - \u5e27\u95f4\u590d\u7528\uff1a$I_t = \\alpha I_{t-1} + (1-\\alpha)I_{new}$\n   - \u8fd0\u52a8\u5411\u91cf\uff1a$\\mathbf{p}_t = \\mathbf{p}_{t-1} + \\mathbf{v}\\Delta t$\n   - \u65f6\u5e8f\u6297\u952f\u9f7f\uff08TAA\uff09\uff1a\u7d2f\u79ef\u591a\u5e27\u6837\u672c</p>\n</li>\n<li>\n<p><strong>\u5c42\u6b21\u5316\u52a0\u901f</strong>\uff1a\n   - LOD\uff08\u7ec6\u8282\u5c42\u6b21\uff09\uff1a$L(d) = L_{max} \\cdot \\max(0, 1 - \\frac{d}{d_{max}})$\n   - Mipmap\uff1a\u9884\u8fc7\u6ee4\u7eb9\u7406\uff0c$O(1)$\u67e5\u8be2\n   - \u89c6\u9525\u4f53\u88c1\u526a\uff1a$\\mathbf{n} \\cdot (\\mathbf{p} - \\mathbf{p}_0) \\geq 0$</p>\n</li>\n<li>\n<p><strong>\u8fd1\u4f3c\u7b97\u6cd5</strong>\uff1a\n   - \u5c4f\u5e55\u7a7a\u95f4\u6280\u672f\uff1aSSAO\u3001SSR\n   - \u9884\u8ba1\u7b97\u8f90\u7167\u5ea6\uff1a\u7403\u8c10\u51fd\u6570\u5c55\u5f00\n   - \u795e\u7ecf\u7f51\u7edc\u964d\u566a\uff1a$\\tilde{I} = D_\\theta(I_{noisy})$</p>\n</li>\n</ol>\n<h3 id=\"112\">1.1.2 \u5b9e\u65f6\u6e32\u67d3\u4e0e\u79bb\u7ebf\u6e32\u67d3</h3>\n<p>\u56fe\u5f62\u5b66\u5e94\u7528\u53ef\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a</p>\n<p><strong>\u5b9e\u65f6\u6e32\u67d3</strong>\uff1a\u8ffd\u6c42\u5728\u6709\u9650\u65f6\u95f4\u5185\uff08\u901a\u5e3816-33\u6beb\u79d2\uff09\u751f\u6210\u56fe\u50cf\uff0c\u5e38\u7528\u4e8e\u6e38\u620f\u548c\u4ea4\u4e92\u5e94\u7528\u3002\u4e3b\u8981\u6280\u672f\u5305\u62ec\uff1a</p>\n<ul>\n<li>\u5149\u6805\u5316\u7ba1\u7ebf\uff08Z-buffer\u3001\u7740\u8272\u5668\uff09</li>\n<li>\u5c42\u6b21\u7ec6\u8282\uff08LOD\uff09\u4f18\u5316</li>\n<li>\u65f6\u95f4\u76f8\u5173\u6027\u5229\u7528\uff08\u65f6\u5e8f\u6297\u952f\u9f7f\u3001\u8fd0\u52a8\u6a21\u7cca\uff09</li>\n</ul>\n<p><strong>\u79bb\u7ebf\u6e32\u67d3</strong>\uff1a\u8ffd\u6c42\u7269\u7406\u51c6\u786e\u6027\u548c\u89c6\u89c9\u771f\u5b9e\u611f\uff0c\u8ba1\u7b97\u65f6\u95f4\u53ef\u8fbe\u6570\u5c0f\u65f6\u3002\u6838\u5fc3\u6280\u672f\u5305\u62ec\uff1a</p>\n<ul>\n<li>\u5149\u7ebf\u8ffd\u8e2a\u4e0e\u8def\u5f84\u8ffd\u8e2a</li>\n<li>\u5168\u5c40\u5149\u7167\u7b97\u6cd5</li>\n<li>\u57fa\u4e8e\u7269\u7406\u7684\u6e32\u67d3\uff08PBR\uff09</li>\n</ul>\n<p><strong>\u5b9e\u65f6\u6e32\u67d3\u7684\u5173\u952e\u6280\u672f\u6808</strong></p>\n<ol>\n<li>\n<p><strong>\u53ef\u89c1\u6027\u5224\u65ad</strong>\uff1a\n   - \u89c6\u9525\u4f53\u88c1\u526a\uff1a\u5e73\u9762\u65b9\u7a0b $\\mathbf{n} \\cdot \\mathbf{p} + d = 0$\n   - \u906e\u6321\u5254\u9664\uff1a\u786c\u4ef6\u906e\u6321\u67e5\u8be2\u3001Hi-Z buffer\n   - \u80cc\u9762\u5254\u9664\uff1a$(\\mathbf{v}_2 - \\mathbf{v}_0) \\times (\\mathbf{v}_1 - \\mathbf{v}_0) \\cdot \\mathbf{view} &lt; 0$\n   - \u65e9\u671f\u6df1\u5ea6\u6d4b\u8bd5\uff1a\u907f\u514d\u65e0\u7528\u7684\u7247\u6bb5\u7740\u8272</p>\n</li>\n<li>\n<p><strong>\u7740\u8272\u4f18\u5316</strong>\uff1a\n   - \u5ef6\u8fdf\u6e32\u67d3\uff1a\u51e0\u4f55pass + \u5149\u7167pass\u5206\u79bb\n   - \u524d\u5411+\u6e32\u67d3\uff1atiled\u5149\u7167\u5254\u9664\n   - \u53ef\u53d8\u901f\u7387\u7740\u8272\uff1a\u6839\u636e\u5185\u5bb9\u52a8\u6001\u8c03\u6574\u91c7\u6837\u7387\n   - \u7740\u8272\u5668LOD\uff1a\u8ddd\u79bb\u76f8\u5173\u7684\u7740\u8272\u590d\u6742\u5ea6</p>\n</li>\n<li>\n<p><strong>\u6297\u952f\u9f7f\u6280\u672f</strong>\uff1a\n   - MSAA\uff1a\u786c\u4ef6\u591a\u91cd\u91c7\u6837\uff0c$4\\times$\u6216$8\\times$\n   - FXAA/SMAA\uff1a\u540e\u5904\u7406\u8fb9\u7f18\u68c0\u6d4b\n   - TAA\uff1a\u65f6\u95f4\u7d2f\u79ef + \u8fd0\u52a8\u5411\u91cf\n   - DLSS\uff1aAI\u9a71\u52a8\u7684\u8d85\u91c7\u6837</p>\n</li>\n</ol>\n<p><strong>\u79bb\u7ebf\u6e32\u67d3\u7684\u8d28\u91cf\u8ffd\u6c42</strong></p>\n<ol>\n<li>\n<p><strong>\u5149\u4f20\u8f93\u6a21\u62df</strong>\uff1a\n   - \u53cc\u5411\u8def\u5f84\u8ffd\u8e2a\uff08BDPT\uff09\uff1a\u4ece\u76f8\u673a\u548c\u5149\u6e90\u540c\u65f6\u8ffd\u8e2a\n   - Metropolis\u5149\u4f20\u8f93\uff08MLT\uff09\uff1a\u9a6c\u5c14\u53ef\u592b\u94fe\u91c7\u6837\n   - \u5149\u5b50\u6620\u5c04\uff1a\u56e0\u679c\u5149\u5b50 + \u6700\u7ec8\u805a\u96c6\n   - \u8f90\u7167\u5ea6\u7f13\u5b58\uff1a\u7a00\u758f\u91c7\u6837 + \u63d2\u503c</p>\n</li>\n<li>\n<p><strong>\u6750\u8d28\u590d\u6742\u5ea6</strong>\uff1a\n   - \u5206\u5c42\u6750\u8d28\uff1a\u6e05\u6f06\u3001\u57fa\u5e95\u591a\u5c42\u6df7\u5408\n   - \u4f53\u79ef\u6563\u5c04\uff1a\u6b21\u8868\u9762\u6563\u5c04\u3001\u4e91\u96fe\n   - \u5149\u8c31\u6e32\u67d3\uff1a\u907f\u514d\u540c\u8272\u5f02\u8c31\u95ee\u9898\n   - \u504f\u632f\u5149\uff1a\u6676\u4f53\u3001\u6c34\u9762\u771f\u5b9e\u611f</p>\n</li>\n<li>\n<p><strong>\u51e0\u4f55\u7ec6\u8282</strong>\uff1a\n   - \u7f6e\u6362\u8d34\u56fe\uff1a\u771f\u5b9e\u51e0\u4f55\u7ec6\u8282\n   - \u81ea\u9002\u5e94\u7ec6\u5206\uff1a\u5c4f\u5e55\u7a7a\u95f4\u8bef\u5dee\u63a7\u5236\n   - \u6bdb\u53d1\u6e32\u67d3\uff1aMarschner\u6a21\u578b\n   - \u6d41\u4f53\u6a21\u62df\uff1aSPH\u3001FLIP\u6c42\u89e3\u5668</p>\n</li>\n</ol>\n<p><strong>\u6027\u80fd\u6307\u6807\u7684\u6570\u5b66\u5206\u6790</strong></p>\n<p>\u5b9e\u65f6\u6e32\u67d3\u7684\u5e27\u7387\u8981\u6c42\u53ef\u4ee5\u8868\u8ff0\u4e3a\uff1a\n$$t_{frame} = t_{CPU} + t_{GPU} \\leq \\frac{1}{FPS_{target}}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$t_{CPU}$\uff1aCPU\u8ba1\u7b97\u65f6\u95f4\uff08\u573a\u666f\u7ba1\u7406\u3001\u7269\u7406\u6a21\u62df\uff09</li>\n<li>$t_{GPU}$\uff1aGPU\u6e32\u67d3\u65f6\u95f4\uff08\u9876\u70b9\u5904\u7406\u3001\u7247\u6bb5\u7740\u8272\uff09</li>\n<li>$FPS_{target}$\uff1a\u76ee\u6807\u5e27\u7387\uff08\u598260 FPS \u2192 16.67ms\uff09</li>\n</ul>\n<p><strong>\u7b97\u6cd5\u590d\u6742\u5ea6\u5bf9\u6bd4</strong></p>\n<p>| \u6e32\u67d3\u65b9\u6cd5 | \u51e0\u4f55\u590d\u6742\u5ea6 | \u50cf\u7d20\u590d\u6742\u5ea6 | \u5185\u5b58\u9700\u6c42 | \u5178\u578b\u5e94\u7528 |</p>\n<table>\n<thead>\n<tr>\n<th>\u6e32\u67d3\u65b9\u6cd5</th>\n<th>\u51e0\u4f55\u590d\u6742\u5ea6</th>\n<th>\u50cf\u7d20\u590d\u6742\u5ea6</th>\n<th>\u5185\u5b58\u9700\u6c42</th>\n<th>\u5178\u578b\u5e94\u7528</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\u5149\u6805\u5316</td>\n<td>$O(n\\log n)$</td>\n<td>$O(p)$</td>\n<td>$O(p)$ (Z-buffer)</td>\n<td>\u6e38\u620f\u5f15\u64ce</td>\n</tr>\n<tr>\n<td>\u5149\u7ebf\u8ffd\u8e2a</td>\n<td>$O(p\\log n)$</td>\n<td>$O(pd)$</td>\n<td>$O(n)$ (BVH)</td>\n<td>\u7535\u5f71\u7279\u6548</td>\n</tr>\n<tr>\n<td>\u8f90\u5c04\u5ea6</td>\n<td>$O(n^2)$</td>\n<td>$O(p)$</td>\n<td>$O(n^2)$</td>\n<td>\u5efa\u7b51\u53ef\u89c6\u5316</td>\n</tr>\n</tbody>\n</table>\n<p>\u8fd9\u91cc$n$\u662f\u573a\u666f\u4e2d\u7684\u56fe\u5143\u6570\uff0c$p$\u662f\u50cf\u7d20\u6570\uff0c$d$\u662f\u9012\u5f52\u6df1\u5ea6\u3002</p>\n<p><strong>\u5b9e\u65f6\u4e0e\u79bb\u7ebf\u7684\u754c\u9650\u6a21\u7cca\u5316</strong></p>\n<p>\u73b0\u4ee3GPU\u7684\u53d1\u5c55\u4f7f\u5f97\u8fd9\u4e24\u8005\u7684\u754c\u9650\u8d8a\u6765\u8d8a\u6a21\u7cca\uff1a</p>\n<ul>\n<li><strong>\u6df7\u5408\u6e32\u67d3</strong>\uff1a\u5b9e\u65f6\u5149\u7ebf\u8ffd\u8e2a\u7528\u4e8e\u53cd\u5c04\u548c\u9634\u5f71\uff0c\u5149\u6805\u5316\u7528\u4e8e\u4e3b\u8981\u53ef\u89c1\u6027</li>\n<li><strong>\u65f6\u95f4\u79ef\u7d2f</strong>\uff1a\u5229\u7528\u591a\u5e27\u7d2f\u79ef\u63d0\u9ad8\u8d28\u91cf\uff08\u5982DLSS\uff09</li>\n<li><strong>\u9884\u8ba1\u7b97\u6280\u672f</strong>\uff1a\u5149\u7167\u8d34\u56fe\u3001\u73af\u5883\u5149\u906e\u853d\u3001\u8f90\u7167\u5ea6\u63a2\u9488</li>\n</ul>\n<h3 id=\"113\">1.1.3 \u56fe\u5f62\u7ba1\u7ebf\u6982\u8ff0</h3>\n<p>\u73b0\u4ee3\u56fe\u5f62\u7ba1\u7ebf\u53ef\u4ee5\u62bd\u8c61\u4e3a\u4ee5\u4e0b\u9636\u6bb5\uff1a</p>\n<ol>\n<li><strong>\u5e94\u7528\u9636\u6bb5</strong>\uff1a\u573a\u666f\u7ba1\u7406\u3001\u78b0\u649e\u68c0\u6d4b\u3001\u52a8\u753b\u66f4\u65b0</li>\n<li><strong>\u51e0\u4f55\u5904\u7406</strong>\uff1a\u9876\u70b9\u53d8\u6362\u3001\u88c1\u526a\u3001\u56fe\u5143\u88c5\u914d</li>\n<li><strong>\u5149\u6805\u5316</strong>\uff1a\u5c06\u51e0\u4f55\u56fe\u5143\u8f6c\u6362\u4e3a\u50cf\u7d20\u7247\u6bb5</li>\n<li><strong>\u7247\u6bb5\u5904\u7406</strong>\uff1a\u7740\u8272\u8ba1\u7b97\u3001\u6df1\u5ea6\u6d4b\u8bd5\u3001\u6df7\u5408</li>\n</ol>\n<p>\u6bcf\u4e2a\u9636\u6bb5\u90fd\u6d89\u53ca\u7279\u5b9a\u7684\u6570\u5b66\u53d8\u6362\u548c\u7b97\u6cd5\u4f18\u5316\uff0c\u6211\u4eec\u5c06\u5728\u540e\u7eed\u7ae0\u8282\u8be6\u7ec6\u63a2\u8ba8\u3002</p>\n<p><strong>\u7ba1\u7ebf\u7684\u6f14\u5316\u5386\u53f2</strong></p>\n<ol>\n<li>\n<p><strong>\u56fa\u5b9a\u529f\u80fd\u7ba1\u7ebf\u65f6\u4ee3</strong>\uff081990s\uff09\uff1a\n   - \u786c\u7f16\u7801\u7684\u53d8\u6362\u548c\u5149\u7167\u6a21\u578b\n   - Gouraud\u7740\u8272\u3001Phong\u7740\u8272\n   - \u6709\u9650\u7684\u7eb9\u7406\u5355\u5143\u548c\u6df7\u5408\u6a21\u5f0f\n   - OpenGL 1.x\u3001DirectX 7</p>\n</li>\n<li>\n<p><strong>\u53ef\u7f16\u7a0b\u7740\u8272\u5668\u65f6\u4ee3</strong>\uff082000s\uff09\uff1a\n   - \u9876\u70b9\u7740\u8272\u5668\uff1a\u81ea\u5b9a\u4e49\u9876\u70b9\u53d8\u6362\n   - \u7247\u6bb5\u7740\u8272\u5668\uff1a\u81ea\u5b9a\u4e49\u50cf\u7d20\u7740\u8272\n   - \u7740\u8272\u5668\u6a21\u578b\u6f14\u8fdb\uff1aSM 2.0 \u2192 5.0\n   - GLSL\u3001HLSL\u3001Cg\u8bed\u8a00</p>\n</li>\n<li>\n<p><strong>\u7edf\u4e00\u7740\u8272\u5668\u67b6\u6784</strong>\uff082010s\uff09\uff1a\n   - \u51e0\u4f55\u7740\u8272\u5668\uff1a\u56fe\u5143\u7ea7\u64cd\u4f5c\n   - \u66f2\u9762\u7ec6\u5206\u7740\u8272\u5668\uff1a\u52a8\u6001\u7ec6\u5206\n   - \u8ba1\u7b97\u7740\u8272\u5668\uff1a\u901a\u7528GPU\u8ba1\u7b97\n   - Vulkan\u3001DirectX 12\u4f4e\u7ea7API</p>\n</li>\n<li>\n<p><strong>\u73b0\u4ee3GPU\u521b\u65b0</strong>\uff082020s\uff09\uff1a\n   - \u5149\u7ebf\u8ffd\u8e2a\u6838\u5fc3\uff1a\u786c\u4ef6BVH\u904d\u5386\n   - \u5f20\u91cf\u6838\u5fc3\uff1aAI\u52a0\u901f\n   - \u7f51\u683c\u7740\u8272\u5668\uff1aGPU\u9a71\u52a8\u7684\u6e32\u67d3\n   - \u53ef\u53d8\u901f\u7387\u7740\u8272\uff1a\u81ea\u9002\u5e94\u8d28\u91cf</p>\n</li>\n</ol>\n<p><strong>\u7ba1\u7ebf\u9636\u6bb5\u7684\u8be6\u7ec6\u5206\u6790</strong></p>\n<p>\u5404\u9636\u6bb5\u7684\u6838\u5fc3\u7b97\u6cd5\u548c\u6570\u636e\u6d41\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5e94\u7528\u9636\u6bb5\uff08CPU\uff09</strong>\uff1a\n   - \u573a\u666f\u56fe\u904d\u5386\uff1a$O(n)$\u590d\u6742\u5ea6\n   - \u89c6\u9525\u4f53\u88c1\u526a\uff1a6\u4e2a\u5e73\u9762\u6d4b\u8bd5\n   - \u7269\u7406\u6a21\u62df\uff1a$\\mathbf{x}_{t+\\Delta t} = \\mathbf{x}_t + \\mathbf{v}_t\\Delta t + \\frac{1}{2}\\mathbf{a}_t\\Delta t^2$\n   - \u52a8\u753b\u66f4\u65b0\uff1a\u9aa8\u9abc\u77e9\u9635\u63d2\u503c</p>\n</li>\n<li>\n<p><strong>\u9876\u70b9\u5904\u7406\uff08GPU\uff09</strong>\uff1a\n   - \u6a21\u578b\u53d8\u6362\uff1a$\\mathbf{v}_{world} = \\mathbf{M}_{model} \\cdot \\mathbf{v}_{local}$\n   - \u89c6\u56fe\u53d8\u6362\uff1a$\\mathbf{v}_{view} = \\mathbf{M}_{view} \\cdot \\mathbf{v}_{world}$\n   - \u6295\u5f71\u53d8\u6362\uff1a$\\mathbf{v}_{clip} = \\mathbf{M}_{proj} \\cdot \\mathbf{v}_{view}$\n   - \u900f\u89c6\u9664\u6cd5\uff1a$\\mathbf{v}_{ndc} = \\mathbf{v}_{clip} / w_{clip}$</p>\n</li>\n<li>\n<p><strong>\u56fe\u5143\u88c5\u914d\u4e0e\u88c1\u526a</strong>\uff1a\n   - Sutherland-Hodgman\u7b97\u6cd5\n   - \u9f50\u6b21\u88c1\u526a\u7a7a\u95f4\uff1a$-w \\leq x,y,z \\leq w$\n   - \u80cc\u9762\u5254\u9664\uff1a$(\\mathbf{v}_1 - \\mathbf{v}_0) \\times (\\mathbf{v}_2 - \\mathbf{v}_0) \\cdot \\mathbf{view} &lt; 0$</p>\n</li>\n<li>\n<p><strong>\u5149\u6805\u5316</strong>\uff1a\n   - \u626b\u63cf\u7ebf\u7b97\u6cd5\uff1a\u589e\u91cf\u5f0f\u8fb9\u7f18\u8ba1\u7b97\n   - \u91cd\u5fc3\u5750\u6807\uff1a$\\lambda_i = \\frac{A_i}{A_{total}}$\n   - \u6df1\u5ea6\u63d2\u503c\uff1a$z = \\lambda_0 z_0 + \\lambda_1 z_1 + \\lambda_2 z_2$</p>\n</li>\n<li>\n<p><strong>\u7247\u6bb5\u5904\u7406</strong>\uff1a\n   - Early-Z\u6d4b\u8bd5\uff1a$z_{frag} &lt; z_{buffer}$\n   - \u7740\u8272\u8ba1\u7b97\uff1aBRDF\u8bc4\u4f30\n   - Alpha\u6df7\u5408\uff1a$\\mathbf{c}_{out} = \\alpha_{src}\\mathbf{c}_{src} + (1-\\alpha_{src})\\mathbf{c}_{dst}$</p>\n</li>\n</ol>\n<p><strong>\u7ba1\u7ebf\u7684\u6570\u5b66\u8868\u793a</strong></p>\n<p>\u56fe\u5f62\u7ba1\u7ebf\u53ef\u4ee5\u8868\u793a\u4e3a\u4e00\u7cfb\u5217\u51fd\u6570\u7684\u590d\u5408\uff1a\n$$\\mathcal{P} = \\mathcal{F} \\circ \\mathcal{R} \\circ \\mathcal{G} \\circ \\mathcal{A}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$\\mathcal{A}$\uff1a\u5e94\u7528\u9636\u6bb5\uff0c$\\mathcal{A}: \\mathcal{S} \\rightarrow \\mathcal{V}$\uff08\u573a\u666f\u2192\u9876\u70b9\uff09</li>\n<li>$\\mathcal{G}$\uff1a\u51e0\u4f55\u9636\u6bb5\uff0c$\\mathcal{G}: \\mathcal{V} \\rightarrow \\mathcal{T}$\uff08\u9876\u70b9\u2192\u53d8\u6362\u540e\u7684\u56fe\u5143\uff09</li>\n<li>$\\mathcal{R}$\uff1a\u5149\u6805\u5316\uff0c$\\mathcal{R}: \\mathcal{T} \\rightarrow \\mathcal{F}$\uff08\u56fe\u5143\u2192\u7247\u6bb5\uff09</li>\n<li>$\\mathcal{F}$\uff1a\u7247\u6bb5\u9636\u6bb5\uff0c$\\mathcal{F}: \\mathcal{F} \\rightarrow \\mathcal{I}$\uff08\u7247\u6bb5\u2192\u56fe\u50cf\uff09</li>\n</ul>\n<p><strong>\u53ef\u7f16\u7a0b\u7ba1\u7ebf\u7684\u9769\u547d</strong></p>\n<p>\u73b0\u4ee3GPU\u63d0\u4f9b\u4e86\u53ef\u7f16\u7a0b\u9636\u6bb5\uff1a</p>\n<ul>\n<li><strong>\u9876\u70b9\u7740\u8272\u5668</strong>\uff1a$\\mathbf{v}_{clip} = \\mathbf{M}_{proj} \\cdot \\mathbf{M}_{view} \\cdot \\mathbf{M}_{model} \\cdot \\mathbf{v}_{local}$</li>\n<li><strong>\u51e0\u4f55\u7740\u8272\u5668</strong>\uff1a\u53ef\u4ee5\u521b\u5efa\u6216\u9500\u6bc1\u56fe\u5143</li>\n<li><strong>\u7247\u6bb5\u7740\u8272\u5668</strong>\uff1a\u8ba1\u7b97\u6700\u7ec8\u989c\u8272 $\\mathbf{c} = f_{shader}(\\mathbf{n}, \\mathbf{l}, \\mathbf{v}, \\mathbf{material})$</li>\n<li><strong>\u8ba1\u7b97\u7740\u8272\u5668</strong>\uff1a\u901a\u7528\u5e76\u884c\u8ba1\u7b97</li>\n</ul>\n<p><strong>\u5e76\u884c\u5316\u7684\u6570\u5b66\u57fa\u7840</strong></p>\n<p>GPU\u7684\u9ad8\u6548\u6765\u81ea\u4e8e\u5927\u89c4\u6a21\u5e76\u884c\uff1a</p>\n<ul>\n<li><strong>\u6570\u636e\u5e76\u884c</strong>\uff1a$\\forall i \\in [0, N): y_i = f(x_i)$</li>\n<li><strong>SIMD\u6267\u884c</strong>\uff1a\u76f8\u540c\u6307\u4ee4\u4f5c\u7528\u4e8e\u591a\u4e2a\u6570\u636e</li>\n<li><strong>\u5185\u5b58\u8bbf\u95ee\u6a21\u5f0f</strong>\uff1a\u5408\u5e76\u8bbf\u95ee\u3001\u7eb9\u7406\u7f13\u5b58</li>\n</ul>\n<p>\u5e76\u884c\u6548\u7387\u53ef\u4ee5\u7528Amdahl\u5b9a\u5f8b\u4f30\u7b97\uff1a\n$$S = \\frac{1}{(1-p) + \\frac{p}{n}}$$\n\u5176\u4e2d$p$\u662f\u53ef\u5e76\u884c\u5316\u90e8\u5206\u7684\u6bd4\u4f8b\uff0c$n$\u662f\u5904\u7406\u5668\u6570\u91cf\u3002</p>\n<h3 id=\"114\">1.1.4 \u73b0\u4ee3\u56fe\u5f62\u5b66\u7684\u6311\u6218\u4e0e\u673a\u9047</h3>\n<p>\u968f\u7740AI\u6280\u672f\u7684\u53d1\u5c55\uff0c\u56fe\u5f62\u5b66\u9762\u4e34\u65b0\u7684\u673a\u9047\uff1a</p>\n<ul>\n<li><strong>\u795e\u7ecf\u6e32\u67d3</strong>\uff1a\u4f7f\u7528\u6df1\u5ea6\u5b66\u4e60\u52a0\u901f\u6216\u66ff\u4ee3\u4f20\u7edf\u6e32\u67d3\u7b97\u6cd5</li>\n<li><strong>\u53ef\u5fae\u6e32\u67d3</strong>\uff1a\u5c06\u6e32\u67d3\u8fc7\u7a0b\u8bbe\u8ba1\u4e3a\u53ef\u5fae\u51fd\u6570\uff0c\u652f\u6301\u57fa\u4e8e\u68af\u5ea6\u7684\u4f18\u5316</li>\n<li><strong>\u5b9e\u65f6\u5149\u7ebf\u8ffd\u8e2a</strong>\uff1a\u786c\u4ef6\u52a0\u901f\u4f7f\u5f97\u5b9e\u65f6\u5149\u7ebf\u8ffd\u8e2a\u6210\u4e3a\u53ef\u80fd</li>\n<li><strong>\u865a\u62df\u73b0\u5b9e\u4e0e\u589e\u5f3a\u73b0\u5b9e</strong>\uff1a\u5bf9\u5ef6\u8fdf\u548c\u5206\u8fa8\u7387\u63d0\u51fa\u66f4\u9ad8\u8981\u6c42</li>\n</ul>\n<p><strong>\u65b0\u5174\u6280\u672f\u7684\u6df1\u5ea6\u5206\u6790</strong></p>\n<ol>\n<li>\n<p><strong>\u795e\u7ecf\u573a\u666f\u8868\u793a</strong>\uff1a\n   - NeRF\u7c7b\u65b9\u6cd5\uff1a\u8fde\u7eed\u4f53\u7d20\u8868\u793a\n   - 3D Gaussian Splatting\uff1a\u79bb\u6563\u9ad8\u65af\u8868\u793a\n   - Hash\u7f16\u7801\uff1a$\\gamma(p) = [\\sin(2^0\\pi p), \\cos(2^0\\pi p), ..., \\sin(2^L\\pi p), \\cos(2^L\\pi p)]$\n   - \u4f18\u52bf\uff1a\u538b\u7f29\u7387\u9ad8\uff0c\u65b0\u89c6\u89d2\u5408\u6210\u8d28\u91cf\u597d</p>\n</li>\n<li>\n<p><strong>\u6df7\u5408\u6e32\u67d3\u7ba1\u7ebf</strong>\uff1a\n   - \u5149\u6805\u5316\u4e3b\u8def\u5f84 + \u5149\u7ebf\u8ffd\u8e2a\u8f85\u52a9\n   - \u964d\u566a\u5668\uff1a$\\mathcal{D}: I_{noisy} \\rightarrow I_{clean}$\n   - \u91cd\u8981\u6027\u91c7\u6837\uff1a$p(\\omega) \\propto L_i(\\omega)f_r(\\omega)|\\cos\\theta|$\n   - \u81ea\u9002\u5e94\u91c7\u6837\uff1a\u57fa\u4e8e\u65b9\u5dee\u4f30\u8ba1\u52a8\u6001\u5206\u914d\u6837\u672c</p>\n</li>\n<li>\n<p><strong>\u5b9e\u65f6\u5168\u5c40\u5149\u7167\u8fd1\u4f3c</strong>\uff1a\n   - Voxel Cone Tracing\uff1a\u4f53\u7d20\u5316\u573a\u666f\u9525\u5f62\u91c7\u6837\n   - Radiance Probes\uff1a\u7a00\u758f\u8f90\u7167\u5ea6\u91c7\u6837\n   - Screen Space GI\uff1a\u5c4f\u5e55\u7a7a\u95f4\u5149\u7ebf\u6b65\u8fdb\n   - \u6df7\u5408\u65b9\u6848\uff1a\u8fdc\u573a\u7528\u63a2\u9488\uff0c\u8fd1\u573a\u7528\u5c4f\u5e55\u7a7a\u95f4</p>\n</li>\n<li>\n<p><strong>AI\u9a71\u52a8\u7684\u5185\u5bb9\u751f\u6210</strong>\uff1a\n   - \u7a0b\u5e8f\u5316\u7eb9\u7406\uff1a$T = G_\\theta(z, \\mathbf{uv})$\n   - \u98ce\u683c\u8fc1\u79fb\uff1a$I_{styled} = \\arg\\min_I \\mathcal{L}_{content}(I, I_c) + \\alpha\\mathcal{L}_{style}(I, I_s)$\n   - \u8d85\u5206\u8fa8\u7387\uff1a\u7aef\u5230\u7aef\u5b66\u4e60\u4e0a\u91c7\u6837\n   - \u65f6\u5e8f\u7a33\u5b9a\u6027\uff1a\u5faa\u73af\u4e00\u81f4\u6027\u7ea6\u675f</p>\n</li>\n</ol>\n<p><strong>\u795e\u7ecf\u6e32\u67d3\u7684\u6570\u5b66\u6846\u67b6</strong></p>\n<p>\u795e\u7ecf\u6e32\u67d3\u5c06\u4f20\u7edf\u6e32\u67d3\u51fd\u6570$f$\u66ff\u6362\u4e3a\u795e\u7ecf\u7f51\u7edc$f_\\theta$\uff1a\n$$\\mathbf{I} = f_\\theta(\\mathbf{G}, \\mathbf{V}, \\mathbf{L})$$\n\u5176\u4e2d$\\theta$\u662f\u7f51\u7edc\u53c2\u6570\uff0c\u901a\u8fc7\u6700\u5c0f\u5316\u635f\u5931\u51fd\u6570\u5b66\u4e60\uff1a\n$$\\mathcal{L} = \\mathbb{E}_{(\\mathbf{I}_{gt}, \\mathbf{x})} \\left[ |\\mathbf{I}_{gt} - f_\\theta(\\mathbf{x})|^2 + \\lambda R(\\theta) \\right]$$\n\u5178\u578b\u5e94\u7528\u5305\u62ec\uff1a</p>\n<ul>\n<li><strong>\u795e\u7ecf\u8f90\u5c04\u573a\uff08NeRF\uff09</strong>\uff1a$F_\\theta: (\\mathbf{x}, \\mathbf{d}) \\rightarrow (\\mathbf{c}, \\sigma)$</li>\n<li><strong>\u795e\u7ecf\u7eb9\u7406</strong>\uff1a\u5b66\u4e60\u7684\u7279\u5f81\u56fe\u4ee3\u66ff\u4f20\u7edf\u7eb9\u7406</li>\n<li><strong>\u8d85\u5206\u8fa8\u7387</strong>\uff1a$\\mathbf{I}_{high} = G_\\theta(\\mathbf{I}_{low})$</li>\n</ul>\n<p><strong>\u53ef\u5fae\u6e32\u67d3\u7684\u68af\u5ea6\u8ba1\u7b97</strong></p>\n<p>\u53ef\u5fae\u6e32\u67d3\u9700\u8981\u8ba1\u7b97$\\frac{\\partial \\mathbf{I}}{\\partial \\mathbf{p}}$\uff0c\u5176\u4e2d$\\mathbf{p}$\u53ef\u4ee5\u662f\u51e0\u4f55\u3001\u6750\u8d28\u6216\u5149\u7167\u53c2\u6570\u3002\u4e3b\u8981\u6311\u6218\u5305\u62ec\uff1a</p>\n<ol>\n<li><strong>\u53ef\u89c1\u6027\u7684\u4e0d\u8fde\u7eed\u6027</strong>\uff1a\u4f7f\u7528\u8fb9\u7f18\u91c7\u6837\u6216\u8f6f\u5149\u6805\u5316</li>\n<li>\n<p><strong>\u8499\u7279\u5361\u6d1b\u79ef\u5206\u7684\u68af\u5ea6</strong>\uff1a\n$$\\nabla_\\theta \\mathbb{E}_{p_\\theta}[f(x)] = \\mathbb{E}_{p_\\theta}[f(x) \\nabla_\\theta \\log p_\\theta(x)]$$</p>\n</li>\n<li>\n<p><strong>\u53cd\u5411\u6a21\u5f0f\u81ea\u52a8\u5fae\u5206</strong>\uff1a\u9ad8\u6548\u8ba1\u7b97\u590d\u6742\u7ba1\u7ebf\u7684\u68af\u5ea6</p>\n</li>\n</ol>\n<p><strong>\u786c\u4ef6\u52a0\u901f\u7684\u65b0\u65f6\u4ee3</strong></p>\n<p>\u73b0\u4ee3GPU\u5f15\u5165\u4e86\u4e13\u7528\u786c\u4ef6\uff1a</p>\n<ul>\n<li><strong>RT Core</strong>\uff1a\u52a0\u901f\u5149\u7ebf-\u4e09\u89d2\u5f62\u76f8\u4ea4\u6d4b\u8bd5</li>\n<li><strong>Tensor Core</strong>\uff1a\u52a0\u901f\u77e9\u9635\u8fd0\u7b97\u548cAI\u63a8\u7406</li>\n<li><strong>\u53ef\u53d8\u901f\u7387\u7740\u8272\uff08VRS\uff09</strong>\uff1a\u6839\u636e\u5185\u5bb9\u81ea\u9002\u5e94\u8c03\u6574\u7740\u8272\u7387</li>\n</ul>\n<p>\u6027\u80fd\u6a21\u578b\uff1a\n$$T_{total} = T_{traverse} + T_{intersect} + T_{shade}$$\n\u5176\u4e2d\u786c\u4ef6\u52a0\u901f\u4e3b\u8981\u4f18\u5316$T_{intersect}$\uff0c\u53ef\u8fbe10-100\u500d\u52a0\u901f\u3002</p>\n<h2 id=\"12\">1.2 \u5411\u91cf\u4e0e\u7ebf\u6027\u4ee3\u6570</h2>\n<h3 id=\"121\">1.2.1 \u5411\u91cf\u7a7a\u95f4\u4e0e\u57fa\u672c\u8fd0\u7b97</h3>\n<p>\u5411\u91cf\u662f\u56fe\u5f62\u5b66\u4e2d\u6700\u57fa\u672c\u7684\u6570\u5b66\u5bf9\u8c61\u3002\u5728$n$\u7ef4\u6b27\u51e0\u91cc\u5f97\u7a7a\u95f4$\\mathbb{R}^n$\u4e2d\uff0c\u5411\u91cf$\\mathbf{v} = (v_1, v_2, ..., v_n)^T$\u8868\u793a\u4e00\u4e2a\u6709\u5411\u7ebf\u6bb5\u3002</p>\n<p><strong>\u5411\u91cf\u52a0\u6cd5\u4e0e\u6807\u91cf\u4e58\u6cd5</strong>\uff1a\n$$\\mathbf{u} + \\mathbf{v} = (u_1 + v_1, u_2 + v_2, ..., u_n + v_n)^T$$\n$$k\\mathbf{v} = (kv_1, kv_2, ..., kv_n)^T$$\n\u8fd9\u4e9b\u8fd0\u7b97\u6ee1\u8db3\u5411\u91cf\u7a7a\u95f4\u7684\u516b\u6761\u516c\u7406\uff0c\u4f7f$\\mathbb{R}^n$\u6210\u4e3a\u4e00\u4e2a\u7ebf\u6027\u7a7a\u95f4\u3002</p>\n<p><strong>\u5411\u91cf\u7684\u51e0\u4f55\u89e3\u91ca</strong></p>\n<p>\u5411\u91cf\u53ef\u4ee5\u6709\u591a\u79cd\u89e3\u91ca\uff0c\u5728\u56fe\u5f62\u5b66\u4e2d\u5e38\u89c1\u7684\u5305\u62ec\uff1a</p>\n<ol>\n<li>\n<p><strong>\u4f4d\u79fb\u5411\u91cf</strong>\uff1a\u8868\u793a\u4ece\u4e00\u70b9\u5230\u53e6\u4e00\u70b9\u7684\u79fb\u52a8\n   - \u5e73\u79fb\u53d8\u6362\uff1a$\\mathbf{p}' = \\mathbf{p} + \\mathbf{t}$\n   - \u76f8\u5bf9\u4f4d\u7f6e\uff1a$\\mathbf{v}_{AB} = \\mathbf{p}_B - \\mathbf{p}_A$</p>\n</li>\n<li>\n<p><strong>\u65b9\u5411\u5411\u91cf</strong>\uff1a\u8868\u793a\u671d\u5411\uff0c\u901a\u5e38\u5f52\u4e00\u5316\n   - \u8868\u9762\u6cd5\u7ebf\uff1a$\\mathbf{n} = \\frac{(\\mathbf{v}_1 - \\mathbf{v}_0) \\times (\\mathbf{v}_2 - \\mathbf{v}_0)}{|(\\mathbf{v}_1 - \\mathbf{v}_0) \\times (\\mathbf{v}_2 - \\mathbf{v}_0)|}$\n   - \u5149\u7ebf\u65b9\u5411\uff1a$\\mathbf{d} = \\frac{\\mathbf{p}_{target} - \\mathbf{p}_{origin}}{|\\mathbf{p}_{target} - \\mathbf{p}_{origin}|}$</p>\n</li>\n<li>\n<p><strong>\u901f\u5ea6\u5411\u91cf</strong>\uff1a\u8868\u793a\u8fd0\u52a8\u72b6\u6001\n   - \u7ebf\u901f\u5ea6\uff1a$\\mathbf{v} = \\frac{d\\mathbf{p}}{dt}$\n   - \u89d2\u901f\u5ea6\uff1a$\\boldsymbol{\\omega} \\times \\mathbf{r}$\uff08\u53c9\u79ef\u7ed9\u51fa\u5207\u5411\u901f\u5ea6\uff09</p>\n</li>\n<li>\n<p><strong>\u529b\u5411\u91cf</strong>\uff1a\u7269\u7406\u6a21\u62df\u4e2d\u7684\u4f5c\u7528\u529b\n   - \u91cd\u529b\uff1a$\\mathbf{F}_g = m\\mathbf{g}$\n   - \u5f39\u7c27\u529b\uff1a$\\mathbf{F}_s = -k(\\mathbf{x} - \\mathbf{x}_0)$</p>\n</li>\n</ol>\n<p><strong>\u5411\u91cf\u7a7a\u95f4\u7684\u516c\u7406\u7cfb\u7edf</strong></p>\n<p>\u5411\u91cf\u7a7a\u95f4$(V, +, \\cdot)$\u5fc5\u987b\u6ee1\u8db3\uff1a</p>\n<ol>\n<li><strong>\u52a0\u6cd5\u5c01\u95ed\u6027</strong>\uff1a$\\forall \\mathbf{u}, \\mathbf{v} \\in V: \\mathbf{u} + \\mathbf{v} \\in V$</li>\n<li><strong>\u52a0\u6cd5\u4ea4\u6362\u5f8b</strong>\uff1a$\\mathbf{u} + \\mathbf{v} = \\mathbf{v} + \\mathbf{u}$</li>\n<li><strong>\u52a0\u6cd5\u7ed3\u5408\u5f8b</strong>\uff1a$(\\mathbf{u} + \\mathbf{v}) + \\mathbf{w} = \\mathbf{u} + (\\mathbf{v} + \\mathbf{w})$</li>\n<li><strong>\u96f6\u5411\u91cf\u5b58\u5728</strong>\uff1a$\\exists \\mathbf{0} \\in V: \\mathbf{v} + \\mathbf{0} = \\mathbf{v}$</li>\n<li><strong>\u52a0\u6cd5\u9006\u5143</strong>\uff1a$\\forall \\mathbf{v} \\in V, \\exists -\\mathbf{v}: \\mathbf{v} + (-\\mathbf{v}) = \\mathbf{0}$</li>\n<li><strong>\u6807\u91cf\u4e58\u6cd5\u5c01\u95ed</strong>\uff1a$\\forall k \\in \\mathbb{R}, \\mathbf{v} \\in V: k\\mathbf{v} \\in V$</li>\n<li><strong>\u6807\u91cf\u5206\u914d\u5f8b</strong>\uff1a$k(\\mathbf{u} + \\mathbf{v}) = k\\mathbf{u} + k\\mathbf{v}$</li>\n<li><strong>\u5411\u91cf\u5206\u914d\u5f8b</strong>\uff1a$(k + l)\\mathbf{v} = k\\mathbf{v} + l\\mathbf{v}$</li>\n</ol>\n<p><strong>\u4eff\u5c04\u7a7a\u95f4\u4e0e\u5411\u91cf\u7a7a\u95f4\u7684\u533a\u522b</strong></p>\n<p>\u56fe\u5f62\u5b66\u4e2d\u5e38\u6df7\u6dc6\u70b9\u548c\u5411\u91cf\uff1a</p>\n<ul>\n<li><strong>\u70b9</strong>\uff1a\u4f4d\u7f6e\uff0c\u5c5e\u4e8e\u4eff\u5c04\u7a7a\u95f4$\\mathcal{A}$</li>\n<li><strong>\u5411\u91cf</strong>\uff1a\u4f4d\u79fb\uff0c\u5c5e\u4e8e\u5411\u91cf\u7a7a\u95f4$V$</li>\n<li><strong>\u5173\u7cfb</strong>\uff1a$\\mathbf{p} - \\mathbf{q} = \\mathbf{v}$\uff08\u4e24\u70b9\u4e4b\u5dee\u662f\u5411\u91cf\uff09</li>\n<li><strong>\u4eff\u5c04\u7ec4\u5408</strong>\uff1a$\\mathbf{p} = \\sum_i \\lambda_i \\mathbf{p}_i$\uff0c\u5176\u4e2d$\\sum_i \\lambda_i = 1$</li>\n</ul>\n<p><strong>\u5185\u79ef\uff08\u70b9\u79ef\uff09</strong>\uff1a\n$$\\mathbf{u} \\cdot \\mathbf{v} = \\sum_{i=1}^{n} u_i v_i = |\\mathbf{u}||\\mathbf{v}|\\cos\\theta$$\n\u5185\u79ef\u7684\u51e0\u4f55\u610f\u4e49\uff1a</p>\n<ul>\n<li>\u8ba1\u7b97\u6295\u5f71\u957f\u5ea6\uff1a$\\text{proj}_{\\mathbf{v}}\\mathbf{u} = \\frac{\\mathbf{u} \\cdot \\mathbf{v}}{|\\mathbf{v}|^2}\\mathbf{v}$</li>\n<li>\u5224\u65ad\u65b9\u5411\u5173\u7cfb\uff1a$\\mathbf{u} \\cdot \\mathbf{v} &gt; 0$\u8868\u793a\u5939\u89d2\u5c0f\u4e8e90\u00b0</li>\n<li>\u8ba1\u7b97\u529f\u548c\u80fd\u91cf\uff1a\u5728\u7269\u7406\u6a21\u62df\u4e2d\u5e7f\u6cdb\u5e94\u7528</li>\n</ul>\n<p><strong>\u5185\u79ef\u7684\u63a8\u5e7f\u5f62\u5f0f</strong></p>\n<p>\u66f4\u4e00\u822c\u5730\uff0c\u5185\u79ef\u53ef\u4ee5\u5b9a\u4e49\u4e3a\uff1a\n$$\\langle \\mathbf{u}, \\mathbf{v} \\rangle_{\\mathbf{M}} = \\mathbf{u}^T \\mathbf{M} \\mathbf{v}$$\n\u5176\u4e2d$\\mathbf{M}$\u662f\u6b63\u5b9a\u77e9\u9635\u3002\u8fd9\u5728\u5404\u5411\u5f02\u6027\u6750\u8d28\u548c\u692d\u7403\u4f53\u8ddd\u79bb\u8ba1\u7b97\u4e2d\u5f88\u6709\u7528\u3002</p>\n<p><strong>\u5916\u79ef\uff08\u53c9\u79ef\uff09</strong>\uff1a\u4ec5\u5728\u4e09\u7ef4\u7a7a\u95f4\u5b9a\u4e49\n$$\\mathbf{u} \\times \\mathbf{v} = \\begin{pmatrix}\nu_2v_3 - u_3v_2 \\\nu_3v_1 - u_1v_3 \\\nu_1v_2 - u_2v_1\n\\end{pmatrix}$$\n\u5916\u79ef\u7684\u6027\u8d28\uff1a</p>\n<ul>\n<li>$|\\mathbf{u} \\times \\mathbf{v}| = |\\mathbf{u}||\\mathbf{v}|\\sin\\theta$</li>\n<li>\u65b9\u5411\u9075\u5faa\u53f3\u624b\u5b9a\u5219</li>\n<li>\u53cd\u4ea4\u6362\u5f8b\uff1a$\\mathbf{u} \\times \\mathbf{v} = -\\mathbf{v} \\times \\mathbf{u}$</li>\n</ul>\n<p><strong>\u53c9\u79ef\u7684\u77e9\u9635\u5f62\u5f0f</strong></p>\n<p>\u53c9\u79ef\u53ef\u4ee5\u8868\u793a\u4e3a\u53cd\u5bf9\u79f0\u77e9\u9635\u4e58\u6cd5\uff1a\n$$\\mathbf{u} \\times \\mathbf{v} = [\\mathbf{u}]_\\times \\mathbf{v}$$\n\u5176\u4e2d\uff1a\n$$[\\mathbf{u}]_\\times = \\begin{pmatrix}\n0 &amp; -u_3 &amp; u_2 \\\nu_3 &amp; 0 &amp; -u_1 \\\n-u_2 &amp; u_1 &amp; 0\n\\end{pmatrix}$$\n\u8fd9\u4e2a\u8868\u793a\u5728\u521a\u4f53\u52a8\u529b\u5b66\u548c\u76f8\u673a\u6807\u5b9a\u4e2d\u975e\u5e38\u6709\u7528\u3002</p>\n<p><strong>\u4e09\u91cd\u79ef\u516c\u5f0f</strong></p>\n<p>\u6807\u91cf\u4e09\u91cd\u79ef\uff1a\n$$(\\mathbf{a} \\times \\mathbf{b}) \\cdot \\mathbf{c} = \\det[\\mathbf{a} | \\mathbf{b} | \\mathbf{c}]$$\n\u51e0\u4f55\u610f\u4e49\uff1a\u4e09\u4e2a\u5411\u91cf\u5f20\u6210\u7684\u5e73\u884c\u516d\u9762\u4f53\u7684\u6709\u5411\u4f53\u79ef\u3002</p>\n<p>\u5411\u91cf\u4e09\u91cd\u79ef\uff08BAC-CAB\u89c4\u5219\uff09\uff1a\n$$\\mathbf{a} \\times (\\mathbf{b} \\times \\mathbf{c}) = \\mathbf{b}(\\mathbf{a} \\cdot \\mathbf{c}) - \\mathbf{c}(\\mathbf{a} \\cdot \\mathbf{b})$$</p>\n<h3 id=\"122\">1.2.2 \u77e9\u9635\u4e0e\u7ebf\u6027\u53d8\u6362</h3>\n<p>\u7ebf\u6027\u53d8\u6362$T: \\mathbb{R}^n \\rightarrow \\mathbb{R}^m$\u53ef\u4ee5\u7528$m \\times n$\u77e9\u9635$\\mathbf{A}$\u8868\u793a\uff1a\n$$T(\\mathbf{v}) = \\mathbf{A}\\mathbf{v}$$\n\u7ebf\u6027\u53d8\u6362\u5fc5\u987b\u6ee1\u8db3\uff1a</p>\n<ul>\n<li>\u53ef\u52a0\u6027\uff1a$T(\\mathbf{u} + \\mathbf{v}) = T(\\mathbf{u}) + T(\\mathbf{v})$</li>\n<li>\u9f50\u6b21\u6027\uff1a$T(k\\mathbf{v}) = kT(\\mathbf{v})$</li>\n</ul>\n<p><strong>\u57fa\u672c\u53d8\u6362\u77e9\u9635</strong>\uff1a</p>\n<p>\u7f29\u653e\u77e9\u9635\uff1a\n$$\\mathbf{S} = \\begin{pmatrix}\ns_x &amp; 0 &amp; 0 \\\n0 &amp; s_y &amp; 0 \\\n0 &amp; 0 &amp; s_z\n\\end{pmatrix}$$\n\u7ed5$z$\u8f74\u65cb\u8f6c$\\theta$\u89d2\uff1a\n$$\\mathbf{R}_z(\\theta) = \\begin{pmatrix}\n\\cos\\theta &amp; -\\sin\\theta &amp; 0 \\\n\\sin\\theta &amp; \\cos\\theta &amp; 0 \\\n0 &amp; 0 &amp; 1\n\\end{pmatrix}$$\n<strong>\u4efb\u610f\u8f74\u65cb\u8f6c\uff08Rodrigues\u516c\u5f0f\uff09</strong></p>\n<p>\u7ed5\u5355\u4f4d\u8f74$\\mathbf{k}$\u65cb\u8f6c$\\theta$\u89d2\u7684\u65cb\u8f6c\u77e9\u9635\uff1a\n$$\\mathbf{R}(\\mathbf{k}, \\theta) = \\mathbf{I} + \\sin\\theta[\\mathbf{k}]_\\times + (1-\\cos\\theta)[\\mathbf{k}]_\\times^2$$\n\u5c55\u5f00\u5f62\u5f0f\uff1a\n$$\\mathbf{R} = \\cos\\theta\\mathbf{I} + (1-\\cos\\theta)\\mathbf{k}\\mathbf{k}^T + \\sin\\theta[\\mathbf{k}]_\\times$$\n\u8fd9\u4e2a\u516c\u5f0f\u5728\u9aa8\u9abc\u52a8\u753b\u548c\u7269\u7406\u6a21\u62df\u4e2d\u5e7f\u6cdb\u4f7f\u7528\u3002</p>\n<p><strong>\u77e9\u9635\u8fd0\u7b97\u7684\u51e0\u4f55\u610f\u4e49</strong>\uff1a</p>\n<ul>\n<li>\u77e9\u9635\u4e58\u6cd5\u5bf9\u5e94\u53d8\u6362\u7684\u590d\u5408</li>\n<li>\u9006\u77e9\u9635\u5bf9\u5e94\u9006\u53d8\u6362</li>\n<li>\u884c\u5217\u5f0f\u8868\u793a\u4f53\u79ef\u7f29\u653e\u56e0\u5b50</li>\n<li>\u7279\u5f81\u503c\u548c\u7279\u5f81\u5411\u91cf\u63ed\u793a\u53d8\u6362\u7684\u4e0d\u53d8\u65b9\u5411</li>\n</ul>\n<p><strong>\u5947\u5f02\u503c\u5206\u89e3\uff08SVD\uff09\u7684\u51e0\u4f55\u89e3\u91ca</strong></p>\n<p>\u4efb\u610f\u77e9\u9635$\\mathbf{A}$\u53ef\u5206\u89e3\u4e3a\uff1a\n$$\\mathbf{A} = \\mathbf{U}\\mathbf{\\Sigma}\\mathbf{V}^T$$\n\u51e0\u4f55\u610f\u4e49\uff1a</p>\n<ol>\n<li>$\\mathbf{V}^T$\uff1a\u7b2c\u4e00\u6b21\u65cb\u8f6c\uff08\u8f93\u5165\u7a7a\u95f4\uff09</li>\n<li>$\\mathbf{\\Sigma}$\uff1a\u6cbf\u4e3b\u8f74\u7f29\u653e</li>\n<li>$\\mathbf{U}$\uff1a\u7b2c\u4e8c\u6b21\u65cb\u8f6c\uff08\u8f93\u51fa\u7a7a\u95f4\uff09</li>\n</ol>\n<p>\u5728\u56fe\u5f62\u5b66\u4e2d\u7684\u5e94\u7528\uff1a</p>\n<ul>\n<li>\u63d0\u53d6\u65cb\u8f6c\u548c\u7f29\u653e\u5206\u91cf</li>\n<li>\u77e9\u9635\u8fd1\u4f3c\u548c\u538b\u7f29</li>\n<li>\u6700\u5c0f\u4e8c\u4e58\u95ee\u9898\u6c42\u89e3</li>\n<li>\u4e3b\u6210\u5206\u5206\u6790\uff08PCA\uff09</li>\n</ul>\n<h3 id=\"123\">1.2.3 \u9f50\u6b21\u5750\u6807\u4e0e\u4eff\u5c04\u53d8\u6362</h3>\n<p>\u4e3a\u4e86\u7edf\u4e00\u8868\u793a\u7ebf\u6027\u53d8\u6362\u548c\u5e73\u79fb\uff0c\u5f15\u5165\u9f50\u6b21\u5750\u6807\u3002\u4e09\u7ef4\u70b9$(x, y, z)$\u7684\u9f50\u6b21\u5750\u6807\u4e3a$(x, y, z, 1)$\uff0c\u5411\u91cf\u7684\u9f50\u6b21\u5750\u6807\u4e3a$(x, y, z, 0)$\u3002</p>\n<p>\u4eff\u5c04\u53d8\u6362\u7684\u4e00\u822c\u5f62\u5f0f\uff1a\n$$\\mathbf{T} = \\begin{pmatrix}\n\\mathbf{A}_{3\u00d73} &amp; \\mathbf{t}_{3\u00d71} \\\n\\mathbf{0}_{1\u00d73} &amp; 1\n\\end{pmatrix}$$\n\u5176\u4e2d$\\mathbf{A}$\u662f\u7ebf\u6027\u53d8\u6362\u90e8\u5206\uff0c$\\mathbf{t}$\u662f\u5e73\u79fb\u5411\u91cf\u3002</p>\n<p><strong>\u53d8\u6362\u7684\u7ec4\u5408\u4e0e\u5206\u89e3</strong>\uff1a</p>\n<ul>\n<li>\u4efb\u610f\u521a\u4f53\u53d8\u6362\u53ef\u5206\u89e3\u4e3a\u65cb\u8f6c\u548c\u5e73\u79fb</li>\n<li>\u4efb\u610f\u4eff\u5c04\u53d8\u6362\u53ef\u901a\u8fc7SVD\u5206\u89e3\u4e3a\u65cb\u8f6c\u3001\u7f29\u653e\u548c\u526a\u5207</li>\n<li>\u53d8\u6362\u987a\u5e8f\u5f88\u91cd\u8981\uff1a$\\mathbf{T}_1\\mathbf{T}_2 \\neq \\mathbf{T}_2\\mathbf{T}_1$</li>\n</ul>\n<h3 id=\"124\">1.2.4 \u6b63\u4ea4\u6027\u4e0e\u6295\u5f71</h3>\n<p><strong>\u6b63\u4ea4\u77e9\u9635</strong>\u6ee1\u8db3$\\mathbf{Q}^T\\mathbf{Q} = \\mathbf{I}$\uff0c\u5177\u6709\u4ee5\u4e0b\u6027\u8d28\uff1a</p>\n<ul>\n<li>\u4fdd\u6301\u957f\u5ea6\u548c\u89d2\u5ea6</li>\n<li>\u884c\u5217\u5f0f\u4e3a\u00b11</li>\n<li>\u9006\u77e9\u9635\u7b49\u4e8e\u8f6c\u7f6e\u77e9\u9635</li>\n</ul>\n<p><strong>\u6295\u5f71\u77e9\u9635</strong>\uff1a\n\u6b63\u4ea4\u6295\u5f71\u5230\u5b50\u7a7a\u95f4$\\text{span}(\\mathbf{v}_1, ..., \\mathbf{v}_k)$\uff1a\n$$\\mathbf{P} = \\mathbf{V}(\\mathbf{V}^T\\mathbf{V})^{-1}\\mathbf{V}^T$$\n\u5176\u4e2d$\\mathbf{V} = [\\mathbf{v}_1 | ... | \\mathbf{v}_k]$\u3002</p>\n<p>\u900f\u89c6\u6295\u5f71\u77e9\u9635\uff08\u540e\u7eed\u7ae0\u8282\u8be6\u8ff0\uff09\u5c06\u4e09\u7ef4\u70b9\u6620\u5c04\u5230\u89c4\u8303\u5316\u8bbe\u5907\u5750\u6807\u3002</p>\n<h2 id=\"13\">1.3 \u56db\u5143\u6570\u4e0e\u590d\u6570\u5728\u56fe\u5f62\u5b66\u4e2d\u7684\u5e94\u7528</h2>\n<h3 id=\"131\">1.3.1 \u590d\u6570\u4e0e\u4e8c\u7ef4\u65cb\u8f6c</h3>\n<p>\u590d\u6570\u63d0\u4f9b\u4e86\u4f18\u96c5\u7684\u4e8c\u7ef4\u65cb\u8f6c\u8868\u793a\u3002\u590d\u6570$z = a + bi$\u53ef\u4ee5\u5199\u6210\u6781\u5750\u6807\u5f62\u5f0f\uff1a\n$$z = r(\\cos\\theta + i\\sin\\theta) = re^{i\\theta}$$\n\u4e8c\u7ef4\u70b9$(x, y)$\u5bf9\u5e94\u590d\u6570$x + yi$\uff0c\u7ed5\u539f\u70b9\u65cb\u8f6c$\\phi$\u89d2\u7b49\u4ef7\u4e8e\u4e58\u4ee5$e^{i\\phi}$\uff1a\n$$(x + yi)e^{i\\phi} = (x + yi)(\\cos\\phi + i\\sin\\phi)$$\n$$= (x\\cos\\phi - y\\sin\\phi) + i(x\\sin\\phi + y\\cos\\phi)$$\n\u8fd9\u6070\u597d\u5bf9\u5e94\u65cb\u8f6c\u77e9\u9635\u7684\u4f5c\u7528\u7ed3\u679c\u3002\u590d\u6570\u4e58\u6cd5\u7684\u51e0\u4f55\u610f\u4e49\uff1a</p>\n<ul>\n<li>\u6a21\u76f8\u4e58\uff1a$|z_1z_2| = |z_1||z_2|$</li>\n<li>\u5e45\u89d2\u76f8\u52a0\uff1a$\\arg(z_1z_2) = \\arg(z_1) + \\arg(z_2)$</li>\n</ul>\n<h3 id=\"132\">1.3.2 \u56db\u5143\u6570\u57fa\u7840</h3>\n<p>\u56db\u5143\u6570\u662f\u590d\u6570\u7684\u63a8\u5e7f\uff0c\u5f62\u5f0f\u4e3a\uff1a\n$$q = w + xi + yj + zk$$\n\u5176\u4e2d$i^2 = j^2 = k^2 = ijk = -1$\uff0c\u4e14\uff1a</p>\n<ul>\n<li>$ij = k, jk = i, ki = j$</li>\n<li>$ji = -k, kj = -i, ik = -j$</li>\n</ul>\n<p>\u56db\u5143\u6570\u53ef\u4ee5\u5199\u6210\u6807\u91cf-\u5411\u91cf\u5f62\u5f0f\uff1a\n$$q = (s, \\mathbf{v}) = s + v_xi + v_yj + v_zk$$\n<strong>\u56db\u5143\u6570\u8fd0\u7b97</strong>\uff1a</p>\n<p>\u52a0\u6cd5\uff1a$(s_1, \\mathbf{v}_1) + (s_2, \\mathbf{v}_2) = (s_1 + s_2, \\mathbf{v}_1 + \\mathbf{v}_2)$</p>\n<p>\u4e58\u6cd5\uff08Hamilton\u79ef\uff09\uff1a\n$$q_1q_2 = (s_1s_2 - \\mathbf{v}_1 \\cdot \\mathbf{v}_2, s_1\\mathbf{v}_2 + s_2\\mathbf{v}_1 + \\mathbf{v}_1 \\times \\mathbf{v}_2)$$\n\u5171\u8f6d\uff1a$q^* = (s, -\\mathbf{v})$</p>\n<p>\u6a21\uff1a$|q| = \\sqrt{qq^*} = \\sqrt{s^2 + |\\mathbf{v}|^2}$</p>\n<h3 id=\"133\">1.3.3 \u56db\u5143\u6570\u4e0e\u4e09\u7ef4\u65cb\u8f6c</h3>\n<p>\u5355\u4f4d\u56db\u5143\u6570\u53ef\u4ee5\u8868\u793a\u4e09\u7ef4\u65cb\u8f6c\u3002\u7ed5\u5355\u4f4d\u8f74$\\mathbf{n}$\u65cb\u8f6c$\\theta$\u89d2\u5bf9\u5e94\u7684\u56db\u5143\u6570\u4e3a\uff1a\n$$q = \\cos\\frac{\\theta}{2} + \\sin\\frac{\\theta}{2}(n_xi + n_yj + n_zk)$$\n<strong>\u65cb\u8f6c\u516c\u5f0f</strong>\uff1a\u70b9$\\mathbf{p}$\u7ecf\u56db\u5143\u6570$q$\u65cb\u8f6c\u540e\u5f97\u5230\uff1a\n$$\\mathbf{p}' = q\\mathbf{p}q^*$$\n\u5176\u4e2d$\\mathbf{p}$\u88ab\u89c6\u4e3a\u7eaf\u56db\u5143\u6570$(0, \\mathbf{p})$\u3002</p>\n<p><strong>\u56db\u5143\u6570\u8f6c\u65cb\u8f6c\u77e9\u9635</strong>\uff1a\n\u8bbe$q = w + xi + yj + zk$\uff0c\u5bf9\u5e94\u7684\u65cb\u8f6c\u77e9\u9635\u4e3a\uff1a\n$$\\mathbf{R} = \\begin{pmatrix}\n1-2(y^2+z^2) &amp; 2(xy-wz) &amp; 2(xz+wy) \\\n2(xy+wz) &amp; 1-2(x^2+z^2) &amp; 2(yz-wx) \\\n2(xz-wy) &amp; 2(yz+wx) &amp; 1-2(x^2+y^2)\n\\end{pmatrix}$$</p>\n<h3 id=\"134\">1.3.4 \u56db\u5143\u6570\u7684\u4f18\u52bf\u4e0e\u5e94\u7528</h3>\n<p><strong>\u76f8\u6bd4\u6b27\u62c9\u89d2\u7684\u4f18\u52bf</strong>\uff1a</p>\n<ol>\n<li>\u65e0\u4e07\u5411\u9501\u95ee\u9898</li>\n<li>\u63d2\u503c\u66f4\u5e73\u6ed1\uff08\u7403\u9762\u7ebf\u6027\u63d2\u503cSLERP\uff09</li>\n<li>\u6570\u503c\u7a33\u5b9a\u6027\u66f4\u597d</li>\n<li>\u5b58\u50a8\u66f4\u7d27\u51d1\uff084\u4e2a\u6570vs9\u4e2a\u6570\uff09</li>\n</ol>\n<p><strong>\u7403\u9762\u7ebf\u6027\u63d2\u503c\uff08SLERP\uff09</strong>\uff1a\n$$\\text{slerp}(q_1, q_2, t) = \\frac{\\sin((1-t)\\Omega)}{\\sin\\Omega}q_1 + \\frac{\\sin(t\\Omega)}{\\sin\\Omega}q_2$$\n\u5176\u4e2d$\\cos\\Omega = q_1 \\cdot q_2$\u3002</p>\n<p><strong>\u5728\u56fe\u5f62\u5b66\u4e2d\u7684\u5e94\u7528</strong>\uff1a</p>\n<ul>\n<li>\u9aa8\u9abc\u52a8\u753b\u7684\u5173\u8282\u65cb\u8f6c</li>\n<li>\u76f8\u673a\u63a7\u5236\uff08\u907f\u514d\u4e07\u5411\u9501\uff09</li>\n<li>\u7269\u7406\u6a21\u62df\u4e2d\u7684\u521a\u4f53\u65b9\u5411</li>\n<li>\u6cd5\u7ebf\u8d34\u56fe\u7684\u5207\u7ebf\u7a7a\u95f4\u53d8\u6362</li>\n</ul>\n<h3 id=\"135\">1.3.5 \u5bf9\u5076\u56db\u5143\u6570\u4e0e\u521a\u4f53\u53d8\u6362</h3>\n<p>\u5bf9\u5076\u56db\u5143\u6570\u5c06\u65cb\u8f6c\u548c\u5e73\u79fb\u7edf\u4e00\u8868\u793a\uff1a\n$$\\hat{q} = q_r + \\epsilon q_d$$\n\u5176\u4e2d$\\epsilon^2 = 0$\uff08\u5bf9\u5076\u5355\u4f4d\uff09\uff0c$q_r$\u8868\u793a\u65cb\u8f6c\uff0c$q_d = \\frac{1}{2}tq_r$\uff08$t$\u662f\u5e73\u79fb\u56db\u5143\u6570\uff09\u3002</p>\n<p>\u5bf9\u5076\u56db\u5143\u6570\u7684\u4f18\u52bf\uff1a</p>\n<ul>\n<li>\u7edf\u4e00\u8868\u793a\u521a\u4f53\u53d8\u6362</li>\n<li>\u652f\u6301\u5e73\u6ed1\u63d2\u503c\uff08\u5305\u62ec\u65cb\u8f6c\u548c\u5e73\u79fb\uff09</li>\n<li>\u907f\u514d\u77e9\u9635\u4e58\u6cd5\u7684\u6570\u503c\u8bef\u5dee\u7d2f\u79ef</li>\n</ul>\n<h2 id=\"_1\">\u672c\u7ae0\u5c0f\u7ed3</h2>\n<p>\u672c\u7ae0\u5efa\u7acb\u4e86\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u7684\u6570\u5b66\u57fa\u7840\uff1a</p>\n<p><strong>\u6838\u5fc3\u6982\u5ff5</strong>\uff1a</p>\n<ol>\n<li>\u56fe\u5f62\u5b66\u7ba1\u7ebf\uff1a\u5e94\u7528\u2192\u51e0\u4f55\u2192\u5149\u6805\u5316\u2192\u7247\u6bb5\u5904\u7406</li>\n<li>\u5411\u91cf\u8fd0\u7b97\uff1a\u70b9\u79ef\uff08\u6295\u5f71\u3001\u89d2\u5ea6\uff09\u3001\u53c9\u79ef\uff08\u6cd5\u5411\u3001\u9762\u79ef\uff09</li>\n<li>\u77e9\u9635\u53d8\u6362\uff1a\u7ebf\u6027\u53d8\u6362\u3001\u4eff\u5c04\u53d8\u6362\u3001\u9f50\u6b21\u5750\u6807</li>\n<li>\u56db\u5143\u6570\uff1a\u7d27\u51d1\u7684\u65cb\u8f6c\u8868\u793a\uff0c\u907f\u514d\u4e07\u5411\u9501</li>\n</ol>\n<p><strong>\u5173\u952e\u516c\u5f0f</strong>\uff1a</p>\n<ul>\n<li>\u70b9\u79ef\uff1a$\\mathbf{u} \\cdot \\mathbf{v} = |\\mathbf{u}||\\mathbf{v}|\\cos\\theta$</li>\n<li>\u53c9\u79ef\uff1a$|\\mathbf{u} \\times \\mathbf{v}| = |\\mathbf{u}||\\mathbf{v}|\\sin\\theta$</li>\n<li>\u56db\u5143\u6570\u65cb\u8f6c\uff1a$\\mathbf{p}' = q\\mathbf{p}q^*$</li>\n<li>SLERP\uff1a$\\text{slerp}(q_1, q_2, t) = \\frac{\\sin((1-t)\\Omega)}{\\sin\\Omega}q_1 + \\frac{\\sin(t\\Omega)}{\\sin\\Omega}q_2$</li>\n</ul>\n<p><strong>\u91cd\u8981\u6027\u8d28</strong>\uff1a</p>\n<ul>\n<li>\u6b63\u4ea4\u77e9\u9635\u4fdd\u6301\u957f\u5ea6\u548c\u89d2\u5ea6</li>\n<li>\u5355\u4f4d\u56db\u5143\u6570\u5f62\u62103-\u7403\u9762$S^3$</li>\n<li>\u65cb\u8f6c\u7684\u590d\u5408\u5bf9\u5e94\u56db\u5143\u6570\u4e58\u6cd5</li>\n<li>\u4eff\u5c04\u53d8\u6362\u4fdd\u6301\u76f4\u7ebf\u548c\u5e73\u884c\u5173\u7cfb</li>\n</ul>\n<h2 id=\"_2\">\u7ec3\u4e60\u9898</h2>\n<h3 id=\"_3\">\u57fa\u7840\u9898</h3>\n<p><strong>1.1 \u5411\u91cf\u8fd0\u7b97\u57fa\u7840</strong>\n\u7ed9\u5b9a\u5411\u91cf$\\mathbf{a} = (1, 2, 3)$\uff0c$\\mathbf{b} = (4, -1, 2)$\uff0c\u8ba1\u7b97\uff1a</p>\n<ul>\n<li>(a) $\\mathbf{a} \\cdot \\mathbf{b}$</li>\n<li>(b) $\\mathbf{a} \\times \\mathbf{b}$</li>\n<li>(c) $\\mathbf{a}$\u5728$\\mathbf{b}$\u4e0a\u7684\u6295\u5f71\u5411\u91cf</li>\n</ul>\n<p><em>Hint</em>: \u6295\u5f71\u516c\u5f0f\u4e3a$\\text{proj}_{\\mathbf{b}}\\mathbf{a} = \\frac{\\mathbf{a} \\cdot \\mathbf{b}}{|\\mathbf{b}|^2}\\mathbf{b}$</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>(a) $\\mathbf{a} \\cdot \\mathbf{b} = 1\u00d74 + 2\u00d7(-1) + 3\u00d72 = 8$</p>\n<p>(b) $\\mathbf{a} \\times \\mathbf{b} = \\begin{pmatrix} 2\u00d72-3\u00d7(-1) \\ 3\u00d74-1\u00d72 \\ 1\u00d7(-1)-2\u00d74 \\end{pmatrix} = \\begin{pmatrix} 7 \\ 10 \\ -9 \\end{pmatrix}$</p>\n<p>(c) $|\\mathbf{b}|^2 = 16 + 1 + 4 = 21$\uff0c\u6240\u4ee5\u6295\u5f71\u5411\u91cf\u4e3a$\\frac{8}{21}(4, -1, 2) = (\\frac{32}{21}, -\\frac{8}{21}, \\frac{16}{21})$</p>\n</details>\n<p><strong>1.2 \u77e9\u9635\u53d8\u6362\u7ec4\u5408</strong>\n\u4e00\u4e2a\u7269\u4f53\u5148\u7ed5$z$\u8f74\u65cb\u8f6c45\u00b0\uff0c\u518d\u6cbf$x$\u8f74\u65b9\u5411\u7f29\u653e2\u500d\uff0c\u6700\u540e\u5e73\u79fb$(3, 1, 0)$\u3002\u5199\u51fa\u590d\u5408\u53d8\u6362\u77e9\u9635\u3002</p>\n<p><em>Hint</em>: \u6ce8\u610f\u53d8\u6362\u987a\u5e8f\uff0c\u4f7f\u7528\u9f50\u6b21\u5750\u6807</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u53d8\u6362\u987a\u5e8f\uff08\u4ece\u53f3\u5230\u5de6\uff09\uff1a\u65cb\u8f6c\u2192\u7f29\u653e\u2192\u5e73\u79fb\n$$\\mathbf{T} = \\begin{pmatrix}\n1 &amp; 0 &amp; 0 &amp; 3 \\\n0 &amp; 1 &amp; 0 &amp; 1 \\\n0 &amp; 0 &amp; 1 &amp; 0 \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{pmatrix}\n\\begin{pmatrix}\n2 &amp; 0 &amp; 0 &amp; 0 \\\n0 &amp; 1 &amp; 0 &amp; 0 \\\n0 &amp; 0 &amp; 1 &amp; 0 \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{pmatrix}\n\\begin{pmatrix}\n\\cos45\u00b0 &amp; -\\sin45\u00b0 &amp; 0 &amp; 0 \\\n\\sin45\u00b0 &amp; \\cos45\u00b0 &amp; 0 &amp; 0 \\\n0 &amp; 0 &amp; 1 &amp; 0 \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{pmatrix}$$</p>\n<p>$$= \\begin{pmatrix}\n\\sqrt{2} &amp; -\\frac{\\sqrt{2}}{2} &amp; 0 &amp; 3 \\\n\\frac{\\sqrt{2}}{2} &amp; \\frac{\\sqrt{2}}{2} &amp; 0 &amp; 1 \\\n0 &amp; 0 &amp; 1 &amp; 0 \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{pmatrix}$$</p>\n</details>\n<p><strong>1.3 \u56db\u5143\u6570\u65cb\u8f6c</strong>\n\u5c06\u56db\u5143\u6570$q = \\frac{1}{2} + \\frac{1}{2}i + \\frac{1}{2}j + \\frac{1}{2}k$\u8f6c\u6362\u4e3a\u65cb\u8f6c\u77e9\u9635\u3002</p>\n<p><em>Hint</em>: \u9996\u5148\u9a8c\u8bc1\u8fd9\u662f\u5355\u4f4d\u56db\u5143\u6570</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u9a8c\u8bc1\uff1a$|q| = \\sqrt{(\\frac{1}{2})^2 + (\\frac{1}{2})^2 + (\\frac{1}{2})^2 + (\\frac{1}{2})^2} = 1$ \u2713</p>\n<p>\u8bbe$w = \\frac{1}{2}, x = y = z = \\frac{1}{2}$\uff0c\u4ee3\u5165\u516c\u5f0f\uff1a\n$$\\mathbf{R} = \\begin{pmatrix}\n1-2(\\frac{1}{4}+\\frac{1}{4}) &amp; 2(\\frac{1}{4}-\\frac{1}{4}) &amp; 2(\\frac{1}{4}+\\frac{1}{4}) \\\n2(\\frac{1}{4}+\\frac{1}{4}) &amp; 1-2(\\frac{1}{4}+\\frac{1}{4}) &amp; 2(\\frac{1}{4}-\\frac{1}{4}) \\\n2(\\frac{1}{4}-\\frac{1}{4}) &amp; 2(\\frac{1}{4}+\\frac{1}{4}) &amp; 1-2(\\frac{1}{4}+\\frac{1}{4})\n\\end{pmatrix}$$</p>\n<p>$$= \\begin{pmatrix}\n0 &amp; 0 &amp; 1 \\\n1 &amp; 0 &amp; 0 \\\n0 &amp; 1 &amp; 0\n\\end{pmatrix}$$\n\u8fd9\u662f\u4e00\u4e2a120\u00b0\u65cb\u8f6c\uff0c\u8f74\u4e3a$(1,1,1)$\u65b9\u5411\u3002</p>\n</details>\n<h3 id=\"_4\">\u6311\u6218\u9898</h3>\n<p><strong>1.4 \u6700\u5c0f\u4e8c\u4e58\u6295\u5f71</strong>\n\u63a8\u5bfc\u5c06\u5411\u91cf$\\mathbf{b}$\u6295\u5f71\u5230\u7531\u5217\u5411\u91cf$\\mathbf{a}_1, \\mathbf{a}_2$\u5f20\u6210\u7684\u5e73\u9762\u4e0a\u7684\u6295\u5f71\u77e9\u9635$\\mathbf{P}$\uff0c\u5e76\u8bc1\u660e$\\mathbf{P}^2 = \\mathbf{P}$\u3002</p>\n<p><em>Hint</em>: \u4f7f\u7528\u6b63\u89c4\u65b9\u7a0b$\\mathbf{A}^T\\mathbf{A}\\mathbf{x} = \\mathbf{A}^T\\mathbf{b}$</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u8bbe$\\mathbf{A} = [\\mathbf{a}_1 | \\mathbf{a}_2]$\uff0c\u6295\u5f71\u4e3a$\\mathbf{p} = \\mathbf{A}\\mathbf{x}$\u3002</p>\n<p>\u6700\u5c0f\u5316$|\\mathbf{b} - \\mathbf{A}\\mathbf{x}|^2$\uff0c\u5f97\u6b63\u89c4\u65b9\u7a0b\uff1a\n$$\\mathbf{A}^T\\mathbf{A}\\mathbf{x} = \\mathbf{A}^T\\mathbf{b}$$\n\u89e3\u5f97\uff1a$\\mathbf{x} = (\\mathbf{A}^T\\mathbf{A})^{-1}\\mathbf{A}^T\\mathbf{b}$</p>\n<p>\u6295\u5f71\uff1a$\\mathbf{p} = \\mathbf{A}(\\mathbf{A}^T\\mathbf{A})^{-1}\\mathbf{A}^T\\mathbf{b}$</p>\n<p>\u56e0\u6b64\u6295\u5f71\u77e9\u9635\uff1a$\\mathbf{P} = \\mathbf{A}(\\mathbf{A}^T\\mathbf{A})^{-1}\\mathbf{A}^T$</p>\n<p>\u8bc1\u660e\u5e42\u7b49\u6027\uff1a\n$$\\mathbf{P}^2 = \\mathbf{A}(\\mathbf{A}^T\\mathbf{A})^{-1}\\mathbf{A}^T\\mathbf{A}(\\mathbf{A}^T\\mathbf{A})^{-1}\\mathbf{A}^T = \\mathbf{A}(\\mathbf{A}^T\\mathbf{A})^{-1}\\mathbf{A}^T = \\mathbf{P}$$</p>\n</details>\n<p><strong>1.5 \u56db\u5143\u6570\u63d2\u503c\u4f18\u5316</strong>\n\u7ed9\u5b9a\u4e24\u4e2a\u5355\u4f4d\u56db\u5143\u6570$q_1$\u548c$q_2$\uff0c\u5f53$q_1 \\cdot q_2 &lt; 0$\u65f6\uff0cSLERP\u4f1a\u9009\u62e9\"\u957f\u8def\u5f84\"\u3002\u5982\u4f55\u4fee\u6b63\u8fd9\u4e2a\u95ee\u9898\uff1f\u8bc1\u660e\u4f60\u7684\u65b9\u6cd5\u4fdd\u6301\u63d2\u503c\u7684\u8fde\u7eed\u6027\u3002</p>\n<p><em>Hint</em>: \u8003\u8651\u56db\u5143\u6570\u7684\u53cc\u8986\u76d6\u6027\u8d28</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u56db\u5143\u6570$q$\u548c$-q$\u8868\u793a\u76f8\u540c\u7684\u65cb\u8f6c\uff08\u53cc\u8986\u76d6\uff09\u3002\u5f53$q_1 \\cdot q_2 &lt; 0$\u65f6\uff0c$q_1$\u548c$q_2$\u57284D\u7403\u9762\u4e0a\u7684\u5939\u89d2\u5927\u4e8e90\u00b0\u3002</p>\n<p>\u4fee\u6b63\u65b9\u6cd5\uff1a\u82e5$q_1 \\cdot q_2 &lt; 0$\uff0c\u5c06$q_2$\u66ff\u6362\u4e3a$-q_2$\u3002</p>\n<p>\u8bc1\u660e\u8fde\u7eed\u6027\uff1a\n\u8bbe\u539f\u59cb\u63d2\u503c\u8def\u5f84\u4e3a$\\gamma(t) = \\text{slerp}(q_1, q_2, t)$\uff0c\u4fee\u6b63\u540e\u4e3a$\\gamma'(t) = \\text{slerp}(q_1, -q_2, t)$\u3002</p>\n<p>\u5728$t=0$\uff1a$\\gamma'(0) = q_1 = \\gamma(0)$\n\u5728$t=1$\uff1a$\\gamma'(1) = -q_2$\uff0c\u4f46$-q_2$\u548c$q_2$\u8868\u793a\u76f8\u540c\u65cb\u8f6c</p>\n<p>\u4fee\u6b63\u540e\u7684\u5939\u89d2$\\Omega' = \\arccos(-q_1 \\cdot q_2) = \\pi - \\Omega &lt; \\pi/2$\uff0c\u786e\u4fdd\u9009\u62e9\u77ed\u8def\u5f84\u3002</p>\n</details>\n<p><strong>1.6 \u4eff\u5c04\u53d8\u6362\u7684\u4e0d\u52a8\u70b9</strong>\n\u8bc1\u660e\uff1a\u4efb\u610f\u4e8c\u7ef4\u4eff\u5c04\u53d8\u6362$T(\\mathbf{x}) = \\mathbf{A}\\mathbf{x} + \\mathbf{b}$\uff08\u5176\u4e2d$\\det(\\mathbf{A}-\\mathbf{I}) \\neq 0$\uff09\u6709\u552f\u4e00\u4e0d\u52a8\u70b9\u3002\u627e\u51fa\u8be5\u4e0d\u52a8\u70b9\u7684\u8868\u8fbe\u5f0f\u3002</p>\n<p><em>Hint</em>: \u4e0d\u52a8\u70b9\u6ee1\u8db3$T(\\mathbf{x}) = \\mathbf{x}$</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u8bbe\u4e0d\u52a8\u70b9\u4e3a$\\mathbf{x}_0$\uff0c\u5219\uff1a\n$$\\mathbf{A}\\mathbf{x}_0 + \\mathbf{b} = \\mathbf{x}_0$$\n$$(\\mathbf{A} - \\mathbf{I})\\mathbf{x}_0 = -\\mathbf{b}$$\n\u7531\u4e8e$\\det(\\mathbf{A}-\\mathbf{I}) \\neq 0$\uff0c\u77e9\u9635$\\mathbf{A}-\\mathbf{I}$\u53ef\u9006\uff0c\u56e0\u6b64\uff1a\n$$\\mathbf{x}_0 = -(\\mathbf{A} - \\mathbf{I})^{-1}\\mathbf{b}$$\n\u8fd9\u662f\u552f\u4e00\u89e3\u3002</p>\n<p>\u51e0\u4f55\u610f\u4e49\uff1a\u4e0d\u52a8\u70b9\u662f\u53d8\u6362\u7684\"\u4e2d\u5fc3\"\uff0c\u6240\u6709\u70b9\u56f4\u7ed5\u5b83\u8fdb\u884c\u53d8\u6362\u3002</p>\n</details>\n<p><strong>1.7 \u590d\u6570\u4e0e\u56db\u5143\u6570\u7684\u8054\u7cfb</strong>\n\u5c06\u4e8c\u7ef4\u65cb\u8f6c\u7684\u590d\u6570\u8868\u793a\u63a8\u5e7f\u5230\u4e09\u7ef4\u3002\u5177\u4f53\u5730\uff0c\u5982\u4f55\u7528\u4e24\u4e2a\u590d\u6570\u8868\u793a\u4e00\u4e2a\u4e09\u7ef4\u65cb\u8f6c\uff1f\u8fd9\u4e0e\u56db\u5143\u6570\u6709\u4ec0\u4e48\u5173\u7cfb\uff1f</p>\n<p><em>Hint</em>: \u8003\u8651Cayley-Dickson\u6784\u9020</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u56db\u5143\u6570\u53ef\u4ee5\u770b\u4f5c\"\u590d\u6570\u5bf9\"\uff1a$q = z_1 + z_2j$\uff0c\u5176\u4e2d$z_1 = a + bi$\uff0c$z_2 = c + di$\u3002</p>\n<p>\u8fd9\u7ed9\u51fa\uff1a$q = a + bi + cj + dk$</p>\n<p>\u5173\u7cfb\uff1a</p>\n<ul>\n<li>\u5f53$c = d = 0$\u65f6\uff0c\u9000\u5316\u4e3a\u590d\u6570\uff08\u4e8c\u7ef4\u65cb\u8f6c\uff09</li>\n<li>\u56db\u5143\u6570\u4e58\u6cd5\u89c4\u5219\u53ef\u4ece\u590d\u6570\u4e58\u6cd5\u63a8\u5e7f\u5f97\u51fa</li>\n</ul>\n<p>\u53e6\u4e00\u79cd\u8868\u793a\uff1a\u4f7f\u7528\u4e24\u4e2a\u590d\u6570$(z_1, z_2)$\u8868\u793a\u4e09\u7ef4\u65cb\u8f6c\uff0c\u6ee1\u8db3$|z_1|^2 + |z_2|^2 = 1$\u3002\u8fd9\u5b9e\u9645\u4e0a\u662f$SU(2)$\u7fa4\u7684\u8868\u793a\uff0c\u4e0e\u5355\u4f4d\u56db\u5143\u6570\u540c\u6784\u3002</p>\n<p>\u5bf9\u5e94\u5173\u7cfb\uff1a\n$$\\begin{pmatrix} z_1 &amp; -\\bar{z}_2 \\ z_2 &amp; \\bar{z}_1 \\end{pmatrix} \\leftrightarrow a + bi + cj + dk$$\n\u5176\u4e2d$z_1 = a + bi$\uff0c$z_2 = c + di$\u3002</p>\n</details>\n<p><strong>1.8 \u56fe\u5f62\u7ba1\u7ebf\u7684\u80fd\u91cf\u5b88\u6052</strong>\n\u5728\u7269\u7406\u771f\u5b9e\u7684\u6e32\u67d3\u4e2d\uff0c\u4e3a\u4ec0\u4e48\u9700\u8981\u786e\u4fddBRDF\u6ee1\u8db3\u80fd\u91cf\u5b88\u6052\uff1f\u7ed9\u51fa\u6570\u5b66\u8868\u8ff0\u5e76\u89e3\u91ca\u5176\u5728\u5b9e\u65f6\u6e32\u67d3\u4e2d\u7684\u7b80\u5316\u65b9\u6cd5\u3002</p>\n<p><em>Hint</em>: \u8003\u8651\u53cd\u5c04\u7387\u7684\u79ef\u5206</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u80fd\u91cf\u5b88\u6052\u8981\u6c42\u51fa\u5c04\u80fd\u91cf\u4e0d\u8d85\u8fc7\u5165\u5c04\u80fd\u91cf\u3002\u5bf9\u4e8eBRDF $f_r(\\omega_i, \\omega_o)$\uff1a\n$$\\int_{\\Omega} f_r(\\omega_i, \\omega_o) \\cos\\theta_i \\, d\\omega_i \\leq 1$$\n\u5bf9\u6240\u6709\u51fa\u5c04\u65b9\u5411$\\omega_o$\u6210\u7acb\u3002</p>\n<p>\u7269\u7406\u610f\u4e49\uff1a\u53cd\u5c04\u7684\u603b\u80fd\u91cf\u4e0d\u80fd\u8d85\u8fc7\u5165\u5c04\u80fd\u91cf\u3002</p>\n<p>\u5b9e\u65f6\u6e32\u67d3\u7b80\u5316\uff1a</p>\n<ol>\n<li>\u9884\u8ba1\u7b97\u79ef\u5206\u8868\uff08\u5982UE4\u7684\u73af\u5883BRDF\u67e5\u627e\u8868\uff09</li>\n<li>\u4f7f\u7528\u5f52\u4e00\u5316\u7684\u89e3\u6790BRDF\uff08\u5982\u5f52\u4e00\u5316Phong\uff09</li>\n<li>\u5206\u79bb\u6f2b\u53cd\u5c04\u548c\u955c\u9762\u53cd\u5c04\uff0c\u5206\u522b\u786e\u4fdd\u5b88\u6052</li>\n</ol>\n<p>\u4f8b\u5982\uff0c\u5bf9\u4e8e\u7b80\u5316\u7684BRDF\uff1a\n$$f_r = \\frac{k_d}{\\pi} + k_s \\cdot f_{specular}$$</p>\n<p>\u786e\u4fdd$k_d + k_s \\leq 1$\uff08\u83f2\u6d85\u5c14\u9879\u4f1a\u8fdb\u4e00\u6b65\u8c03\u6574\uff09\u3002</p>\n</details>\n<h2 id=\"_5\">\u5e38\u89c1\u9677\u9631\u4e0e\u9519\u8bef</h2>\n<h3 id=\"_6\">\u5411\u91cf\u4e0e\u70b9\u7684\u6df7\u6dc6</h3>\n<ul>\n<li><strong>\u9519\u8bef</strong>\uff1a\u5c06\u5411\u91cf\u5f53\u4f5c\u70b9\u8fdb\u884c\u5e73\u79fb\u53d8\u6362</li>\n<li><strong>\u6b63\u786e</strong>\uff1a\u5411\u91cf\u7684\u9f50\u6b21\u5750\u6807\u7b2c\u56db\u5206\u91cf\u4e3a0\uff0c\u4e0d\u53d7\u5e73\u79fb\u5f71\u54cd</li>\n<li><strong>\u8c03\u8bd5\u6280\u5de7</strong>\uff1a\u68c0\u67e5\u9f50\u6b21\u5750\u6807\u7684w\u5206\u91cf</li>\n</ul>\n<h3 id=\"_7\">\u77e9\u9635\u4e58\u6cd5\u987a\u5e8f</h3>\n<ul>\n<li><strong>\u9519\u8bef</strong>\uff1a<code>translate * rotate * scale</code>\uff08\u9519\u8bef\u987a\u5e8f\uff09</li>\n<li><strong>\u6b63\u786e</strong>\uff1a<code>translate * rotate * scale * vertex</code>\uff08\u4ece\u53f3\u5411\u5de6\uff09</li>\n<li><strong>\u8bb0\u5fc6\u65b9\u6cd5</strong>\uff1a\u53d8\u6362\u4ece\u53f3\u5411\u5de6\u5e94\u7528\uff0c\u6700\u53f3\u8fb9\u7684\u5148\u6267\u884c</li>\n</ul>\n<h3 id=\"_8\">\u56db\u5143\u6570\u5f52\u4e00\u5316</h3>\n<ul>\n<li><strong>\u9519\u8bef</strong>\uff1a\u5fd8\u8bb0\u5f52\u4e00\u5316\u5bfc\u81f4\u7f29\u653e</li>\n<li><strong>\u6b63\u786e</strong>\uff1a\u6bcf\u6b21\u8fd0\u7b97\u540e\u91cd\u65b0\u5f52\u4e00\u5316</li>\n<li><strong>\u4f18\u5316</strong>\uff1a\u4f7f\u7528\u5e73\u65b9\u6839\u7684\u5feb\u901f\u8fd1\u4f3c\u7b97\u6cd5</li>\n</ul>\n<h3 id=\"_9\">\u53c9\u79ef\u7684\u624b\u6027</h3>\n<ul>\n<li><strong>\u9519\u8bef</strong>\uff1a\u6df7\u6dc6\u5de6\u624b\u7cfb\u548c\u53f3\u624b\u7cfb</li>\n<li><strong>\u6b63\u786e</strong>\uff1aOpenGL\u7528\u53f3\u624b\u7cfb\uff0cDirectX\u4f20\u7edf\u4e0a\u7528\u5de6\u624b\u7cfb</li>\n<li><strong>\u9a8c\u8bc1</strong>\uff1a$\\mathbf{x} \\times \\mathbf{y} = \\mathbf{z}$\uff08\u53f3\u624b\u7cfb\uff09</li>\n</ul>\n<h3 id=\"_10\">\u6d6e\u70b9\u7cbe\u5ea6\u95ee\u9898</h3>\n<ul>\n<li><strong>\u9519\u8bef</strong>\uff1a\u76f4\u63a5\u6bd4\u8f83\u6d6e\u70b9\u6570\u76f8\u7b49</li>\n<li><strong>\u6b63\u786e</strong>\uff1a\u4f7f\u7528epsilon\u5bb9\u5dee\uff1a<code>abs(a - b) &lt; epsilon</code></li>\n<li><strong>\u9009\u62e9epsilon</strong>\uff1a\u901a\u5e38\u7528<code>1e-6</code>\uff0c\u4f46\u9700\u6839\u636e\u573a\u666f\u8c03\u6574</li>\n</ul>\n<h3 id=\"gimbal-lock\">Gimbal Lock\uff08\u4e07\u5411\u9501\uff09</h3>\n<ul>\n<li><strong>\u75c7\u72b6</strong>\uff1a\u6b27\u62c9\u89d2\u5728\u67d0\u4e9b\u89d2\u5ea6\u5931\u53bb\u4e00\u4e2a\u81ea\u7531\u5ea6</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u4f7f\u7528\u56db\u5143\u6570\u6216\u8f74\u89d2\u8868\u793a</li>\n<li><strong>\u8f6c\u6362\u65f6\u673a</strong>\uff1a\u4ec5\u5728\u6700\u7ec8\u8f93\u51fa\u65f6\u8f6c\u6362\u4e3a\u6b27\u62c9\u89d2</li>\n</ul>\n<h2 id=\"_11\">\u6700\u4f73\u5b9e\u8df5\u68c0\u67e5\u6e05\u5355</h2>\n<h3 id=\"_12\">\u6570\u5b66\u5e93\u8bbe\u8ba1</h3>\n<ul>\n<li>[ ] \u5411\u91cf\u548c\u70b9\u4f7f\u7528\u4e0d\u540c\u7684\u7c7b\u578b\u6216\u660e\u786e\u533a\u5206</li>\n<li>[ ] \u63d0\u4f9b\u884c\u4e3b\u5e8f\u548c\u5217\u4e3b\u5e8f\u7684\u660e\u786e\u8bf4\u660e</li>\n<li>[ ] \u5b9e\u73b0SIMD\u4f18\u5316\u7684\u5411\u91cf\u8fd0\u7b97</li>\n<li>[ ] \u5305\u542b\u6570\u503c\u7a33\u5b9a\u7684\u5f52\u4e00\u5316\u51fd\u6570</li>\n<li>[ ] \u63d0\u4f9b\u4fbf\u6377\u7684\u8c03\u8bd5\u8f93\u51fa\u529f\u80fd</li>\n</ul>\n<h3 id=\"_13\">\u53d8\u6362\u7cfb\u7edf</h3>\n<ul>\n<li>[ ] \u4f7f\u7528\u9f50\u6b21\u5750\u6807\u7edf\u4e00\u5904\u7406\u53d8\u6362</li>\n<li>[ ] \u7f13\u5b58\u5e38\u7528\u7684\u53d8\u6362\u77e9\u9635</li>\n<li>[ ] \u63d0\u4f9b\u77e9\u9635\u5206\u89e3\u529f\u80fd\uff08\u63d0\u53d6\u65cb\u8f6c\u3001\u7f29\u653e\u7b49\uff09</li>\n<li>[ ] \u5b9e\u73b0\u89c6\u9525\u4f53\u88c1\u526a\u7684\u5feb\u901f\u8def\u5f84</li>\n<li>[ ] \u652f\u6301\u4e0d\u540c\u5750\u6807\u7cfb\u4e4b\u95f4\u7684\u8f6c\u6362</li>\n</ul>\n<h3 id=\"_14\">\u56db\u5143\u6570\u4f7f\u7528</h3>\n<ul>\n<li>[ ] \u59cb\u7ec8\u4fdd\u6301\u56db\u5143\u6570\u5f52\u4e00\u5316</li>\n<li>[ ] \u5b9e\u73b0SLERP\u548cNLERP\u4e24\u79cd\u63d2\u503c</li>\n<li>[ ] \u5904\u7406\u56db\u5143\u6570\u70b9\u79ef\u4e3a\u8d1f\u7684\u60c5\u51b5</li>\n<li>[ ] \u63d0\u4f9b\u4e0e\u6b27\u62c9\u89d2\u3001\u8f74\u89d2\u7684\u8f6c\u6362\u51fd\u6570</li>\n<li>[ ] \u8003\u8651\u4f7f\u7528\u5bf9\u5076\u56db\u5143\u6570\u5904\u7406\u521a\u4f53\u53d8\u6362</li>\n</ul>\n<h3 id=\"_15\">\u6027\u80fd\u4f18\u5316</h3>\n<ul>\n<li>[ ] \u907f\u514d\u4e0d\u5fc5\u8981\u7684\u77e9\u9635\u6c42\u9006</li>\n<li>[ ] \u4f7f\u7528\u5feb\u901f\u5e73\u65b9\u6839\u5012\u6570\u8fd1\u4f3c</li>\n<li>[ ] \u9884\u8ba1\u7b97\u80fd\u590d\u7528\u7684\u4e2d\u95f4\u7ed3\u679c</li>\n<li>[ ] \u8003\u8651\u5185\u5b58\u5bf9\u9f50\u548c\u7f13\u5b58\u53cb\u597d\u6027</li>\n<li>[ ] \u4f7f\u7528\u67e5\u8868\u6cd5\u52a0\u901f\u4e09\u89d2\u51fd\u6570</li>\n</ul>\n<h3 id=\"_16\">\u6570\u503c\u7a33\u5b9a\u6027</h3>\n<ul>\n<li>[ ] \u4f7f\u7528\u7a33\u5b9a\u7684\u6b63\u4ea4\u5316\u7b97\u6cd5\uff08\u5982\u6539\u8fdb\u7684Gram-Schmidt\uff09</li>\n<li>[ ] \u907f\u514d\u5728\u63a5\u8fd1\u5947\u5f02\u7684\u60c5\u51b5\u4e0b\u6c42\u9006</li>\n<li>[ ] \u4f7f\u7528\u9002\u5f53\u7684epsilon\u8fdb\u884c\u6d6e\u70b9\u6bd4\u8f83</li>\n<li>[ ] \u5b9a\u671f\u91cd\u65b0\u6b63\u4ea4\u5316\u65cb\u8f6c\u77e9\u9635</li>\n<li>[ ] \u8003\u8651\u4f7f\u7528\u53cc\u7cbe\u5ea6\u8fdb\u884c\u5173\u952e\u8ba1\u7b97</li>\n</ul>"
  },
  "../chapter10.md": {
    "hash": "c17ce7f57e4604d0eb597be192f89f1c",
    "content": "<h1 id=\"10\">\u7b2c10\u7ae0\uff1a\u6210\u50cf\u7cfb\u7edf</h1>\n<p>\u672c\u7ae0\u6df1\u5165\u63a2\u8ba8\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u7684\u6210\u50cf\u7cfb\u7edf\uff0c\u4ece\u7269\u7406\u76f8\u673a\u6a21\u578b\u5230\u4eba\u7c7b\u89c6\u89c9\u611f\u77e5\u3002\u6211\u4eec\u5c06\u5b66\u4e60\u5982\u4f55\u51c6\u786e\u6a21\u62df\u771f\u5b9e\u4e16\u754c\u7684\u6210\u50cf\u8fc7\u7a0b\uff0c\u7406\u89e3\u5149\u573a\u7684\u6570\u5b66\u8868\u793a\uff0c\u4ee5\u53ca\u989c\u8272\u79d1\u5b66\u7684\u57fa\u7840\u7406\u8bba\u3002\u8fd9\u4e9b\u77e5\u8bc6\u5bf9\u4e8e\u521b\u5efa\u771f\u5b9e\u611f\u56fe\u50cf\u3001\u8bbe\u8ba1\u9ad8\u7ea7\u6e32\u67d3\u7b97\u6cd5\u4ee5\u53ca\u7406\u89e3\u4eba\u7c7b\u89c6\u89c9\u7cfb\u7edf\u81f3\u5173\u91cd\u8981\u3002</p>\n<h2 id=\"101\">10.1 \u76f8\u673a\u4e0e\u900f\u955c\u6a21\u578b</h2>\n<h3 id=\"1011\">10.1.1 \u9488\u5b54\u76f8\u673a\u6a21\u578b</h3>\n<p>\u9488\u5b54\u76f8\u673a\u662f\u6700\u7b80\u5355\u7684\u6210\u50cf\u6a21\u578b\uff0c\u867d\u7136\u5728\u73b0\u5b9e\u4e2d\u5f88\u5c11\u4f7f\u7528\uff0c\u4f46\u5b83\u662f\u7406\u89e3\u590d\u6742\u76f8\u673a\u7cfb\u7edf\u7684\u57fa\u7840\u3002</p>\n<p><strong>\u57fa\u672c\u539f\u7406</strong>\uff1a</p>\n<ul>\n<li>\u5149\u7ebf\u901a\u8fc7\u4e00\u4e2a\u65e0\u9650\u5c0f\u7684\u5b54\u5f84\uff08\u9488\u5b54\uff09\u6295\u5c04\u5230\u6210\u50cf\u5e73\u9762</li>\n<li>\u6210\u50cf\u5173\u7cfb\uff1a$\\frac{h_i}{h_o} = \\frac{d_i}{d_o}$</li>\n<li>$h_i$\uff1a\u50cf\u9ad8\uff0c$h_o$\uff1a\u7269\u9ad8</li>\n<li>$d_i$\uff1a\u50cf\u8ddd\uff0c$d_o$\uff1a\u7269\u8ddd</li>\n<li>\u6210\u50cf\u7279\u70b9\uff1a\u666f\u6df1\u65e0\u9650\u5927\uff0c\u4f46\u5149\u901a\u91cf\u6781\u5c0f</li>\n</ul>\n<p><strong>\u51e0\u4f55\u5149\u5b66\u57fa\u7840</strong>\uff1a\n\u9488\u5b54\u6210\u50cf\u9075\u5faa\u76f4\u7ebf\u4f20\u64ad\u539f\u7406\u3002\u8003\u8651\u4e00\u4e2a\u4f4d\u4e8e\u539f\u70b9\u7684\u9488\u5b54\uff0c\u6210\u50cf\u5e73\u9762\u4f4d\u4e8e$z = -f$\u5904\uff1a</p>\n<ul>\n<li>\u7269\u70b9\uff1a$\\mathbf{P} = (X, Y, Z)$\uff0c\u5176\u4e2d$Z &gt; 0$</li>\n<li>\u50cf\u70b9\uff1a$\\mathbf{p} = (x, y, -f)$</li>\n<li>\u76f8\u4f3c\u4e09\u89d2\u5f62\u5173\u7cfb\uff1a$\\frac{x}{-f} = \\frac{X}{Z}$\uff0c$\\frac{y}{-f} = \\frac{Y}{Z}$</li>\n</ul>\n<p>\u89e3\u5f97\u50cf\u70b9\u5750\u6807\uff1a\n$$x = -f\\frac{X}{Z}, \\quad y = -f\\frac{Y}{Z}$$\n\u8d1f\u53f7\u8868\u793a\u6210\u50cf\u662f\u5012\u7acb\u7684\u3002\u4e3a\u4e86\u65b9\u4fbf\uff0c\u901a\u5e38\u5c06\u6210\u50cf\u5e73\u9762\u653e\u5728$z = f$\u524d\u65b9\uff0c\u5f97\u5230\uff1a\n$$x = f\\frac{X}{Z}, \\quad y = f\\frac{Y}{Z}$$\n<strong>\u900f\u89c6\u6295\u5f71\u7684\u6570\u5b66\u63cf\u8ff0</strong>\uff1a\n\u4e16\u754c\u5750\u6807\u7cfb\u4e2d\u7684\u70b9 $\\mathbf{X}_w = [X_w, Y_w, Z_w]^T$ \u9700\u8981\u5148\u53d8\u6362\u5230\u76f8\u673a\u5750\u6807\u7cfb\uff1a\n$$\\mathbf{X}_c = \\mathbf{R}\\mathbf{X}_w + \\mathbf{t}$$\n\u7136\u540e\u6295\u5f71\u5230\u56fe\u50cf\u5e73\u9762\uff1a\n$$\\begin{aligned}\nx &amp;= f\\frac{X_c}{Z_c} \\\ny &amp;= f\\frac{Y_c}{Z_c}\n\\end{aligned}$$\n\u5176\u4e2d $(X_c, Y_c, Z_c)$ \u662f\u76f8\u673a\u5750\u6807\u7cfb\u4e2d\u7684\u5750\u6807\u3002</p>\n<p><strong>\u5f52\u4e00\u5316\u56fe\u50cf\u5e73\u9762</strong>\uff1a\n\u5b9a\u4e49\u5f52\u4e00\u5316\u56fe\u50cf\u5e73\u9762\u5728$z = 1$\u5904\uff0c\u5f52\u4e00\u5316\u5750\u6807\u4e3a\uff1a\n$$x_n = \\frac{X_c}{Z_c}, \\quad y_n = \\frac{Y_c}{Z_c}$$\n\u7269\u7406\u56fe\u50cf\u5750\u6807\u4e0e\u5f52\u4e00\u5316\u5750\u6807\u7684\u5173\u7cfb\uff1a\n$$x = f \\cdot x_n, \\quad y = f \\cdot y_n$$\n<strong>\u50cf\u7d20\u5750\u6807\u7cfb</strong>\uff1a\n\u5b9e\u9645\u6570\u5b57\u56fe\u50cf\u4f7f\u7528\u79bb\u6563\u7684\u50cf\u7d20\u5750\u6807$(u, v)$\uff1a\n$$\\begin{aligned}\nu &amp;= \\frac{x}{p_x} + c_x = \\frac{f}{p_x} \\cdot \\frac{X_c}{Z_c} + c_x \\\nv &amp;= \\frac{y}{p_y} + c_y = \\frac{f}{p_y} \\cdot \\frac{Y_c}{Z_c} + c_y\n\\end{aligned}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$p_x, p_y$\uff1a\u50cf\u7d20\u7684\u7269\u7406\u5c3a\u5bf8\uff08mm/pixel\uff09</li>\n<li>$c_x, c_y$\uff1a\u4e3b\u70b9\u7684\u50cf\u7d20\u5750\u6807</li>\n<li>$f_x = f/p_x, f_y = f/p_y$\uff1a\u4ee5\u50cf\u7d20\u4e3a\u5355\u4f4d\u7684\u7126\u8ddd</li>\n</ul>\n<p><strong>\u9f50\u6b21\u5750\u6807\u8868\u793a</strong>\uff1a\n\u4f7f\u7528\u9f50\u6b21\u5750\u6807\uff0c\u6295\u5f71\u8fc7\u7a0b\u53ef\u4ee5\u8868\u793a\u4e3a\u7ebf\u6027\u53d8\u6362\uff1a\n$$s\\begin{bmatrix} u \\ v \\ 1 \\end{bmatrix} = \\mathbf{K}[\\mathbf{R}|\\mathbf{t}]\\begin{bmatrix} X_w \\ Y_w \\ Z_w \\ 1 \\end{bmatrix}$$\n\u5176\u4e2d $s = Z_c$ \u662f\u5c3a\u5ea6\u56e0\u5b50\u3002</p>\n<p><strong>\u6295\u5f71\u77e9\u9635\u5206\u89e3</strong>\uff1a\n$$\\mathbf{P} = \\mathbf{K}[\\mathbf{R}|\\mathbf{t}] = \\mathbf{K}\\mathbf{R}[\\mathbf{I}|\\mathbf{R}^T\\mathbf{t}]$$\n\u5176\u4e2d\u5185\u53c2\u77e9\u9635\uff1a\n$$\\mathbf{K} = \\begin{bmatrix}\nf_x &amp; s &amp; c_x \\\n0 &amp; f_y &amp; c_y \\\n0 &amp; 0 &amp; 1\n\\end{bmatrix}$$</p>\n<ul>\n<li>$f_x, f_y$\uff1a\u7126\u8ddd\uff08\u50cf\u7d20\u5355\u4f4d\uff09</li>\n<li>$c_x, c_y$\uff1a\u4e3b\u70b9\u5750\u6807</li>\n<li>$s$\uff1a\u626d\u66f2\u53c2\u6570\uff08skew\uff09\uff0c\u8868\u793a\u50cf\u7d20\u5750\u6807\u8f74\u7684\u975e\u6b63\u4ea4\u6027\uff0c\u73b0\u4ee3\u76f8\u673a\u901a\u5e38\u4e3a0</li>\n</ul>\n<p><strong>\u5916\u53c2\u77e9\u9635</strong>\uff1a</p>\n<ul>\n<li>$\\mathbf{R}$\uff1a3\u00d73\u65cb\u8f6c\u77e9\u9635\uff08\u6b63\u4ea4\u77e9\u9635\uff0c$\\det(\\mathbf{R}) = 1$\uff09</li>\n<li>$\\mathbf{t}$\uff1a3\u00d71\u5e73\u79fb\u5411\u91cf</li>\n<li>\u603b\u51716\u4e2a\u81ea\u7531\u5ea6\uff1a3\u4e2a\u65cb\u8f6c+3\u4e2a\u5e73\u79fb</li>\n</ul>\n<p><strong>\u6295\u5f71\u77e9\u9635\u7684\u6027\u8d28</strong>\uff1a</p>\n<ol>\n<li><strong>\u7ef4\u5ea6</strong>\uff1a$\\mathbf{P}$\u662f3\u00d74\u77e9\u9635\uff0c\u79e9\u4e3a3</li>\n<li><strong>\u96f6\u7a7a\u95f4</strong>\uff1a\u7ef4\u5ea6\u4e3a1\uff0c\u5bf9\u5e94\u76f8\u673a\u4e2d\u5fc3$\\mathbf{C}$\uff0c\u6ee1\u8db3$\\mathbf{P}\\mathbf{C} = \\mathbf{0}$</li>\n<li><strong>\u76f8\u673a\u4e2d\u5fc3</strong>\uff1a$\\mathbf{C} = -\\mathbf{R}^T\\mathbf{t}$\uff08\u4e16\u754c\u5750\u6807\u7cfb\uff09</li>\n<li><strong>\u4e3b\u8f74\u65b9\u5411</strong>\uff1a\u76f8\u673a\u7684\u5149\u8f74\u65b9\u5411\u4e3a$\\mathbf{R}^T[0, 0, 1]^T$</li>\n<li><strong>\u4fdd\u6301\u76f4\u7ebf</strong>\uff1a3D\u76f4\u7ebf\u6295\u5f71\u540e\u4ecd\u4e3a2D\u76f4\u7ebf\uff08\u6216\u70b9\uff09</li>\n<li><strong>\u4e0d\u4fdd\u6301\u5e73\u884c</strong>\uff1a\u5e73\u884c\u7ebf\u6295\u5f71\u540e\u4f1a\u76f8\u4ea4\u4e8e\u6d88\u5931\u70b9\uff08\u9664\u975e\u5e73\u884c\u4e8e\u6210\u50cf\u5e73\u9762\uff09</li>\n</ol>\n<p><strong>\u9006\u6295\u5f71\uff08\u53cd\u6295\u5f71\uff09</strong>\uff1a\n\u7ed9\u5b9a\u56fe\u50cf\u70b9$(u, v)$\uff0c\u5bf9\u5e94\u76843D\u5c04\u7ebf\u65b9\u5411\uff08\u76f8\u673a\u5750\u6807\u7cfb\uff09\uff1a\n$$\\mathbf{d}_c = \\mathbf{K}^{-1}\\begin{bmatrix} u \\ v \\ 1 \\end{bmatrix}$$\n\u4e16\u754c\u5750\u6807\u7cfb\u4e2d\u7684\u5c04\u7ebf\uff1a\n$$\\mathbf{X}_w(\\lambda) = \\mathbf{C} + \\lambda \\mathbf{R}^T\\mathbf{d}_c$$\n\u5176\u4e2d$\\lambda &gt; 0$\u662f\u5c04\u7ebf\u53c2\u6570\u3002</p>\n<p><strong>\u6d88\u5931\u70b9\u4e0e\u6d88\u5931\u7ebf</strong>\uff1a</p>\n<ul>\n<li><strong>\u6d88\u5931\u70b9</strong>\uff1a\u5e73\u884c\u7ebf\u5728\u56fe\u50cf\u4e2d\u7684\u4ea4\u70b9</li>\n<li>\n<p>\u4e16\u754c\u5750\u6807\u7cfb\u4e2d\u65b9\u5411\u4e3a$\\mathbf{d}$\u7684\u5e73\u884c\u7ebf\uff0c\u5176\u6d88\u5931\u70b9\u4e3a\uff1a\n$$\\mathbf{v} = \\mathbf{K}\\mathbf{R}\\mathbf{d}$$</p>\n</li>\n<li>\n<p><strong>\u6d88\u5931\u7ebf</strong>\uff1a\u5e73\u884c\u5e73\u9762\u7684\u50cf\uff0c\u7531\u8be5\u5e73\u9762\u6240\u6709\u65b9\u5411\u7684\u6d88\u5931\u70b9\u7ec4\u6210</p>\n</li>\n<li>\u5730\u5e73\u7ebf\u662f\u6240\u6709\u6c34\u5e73\u65b9\u5411\u6d88\u5931\u70b9\u7684\u96c6\u5408</li>\n</ul>\n<p><strong>\u9488\u5b54\u76f8\u673a\u7684\u5c40\u9650\u6027</strong>\uff1a</p>\n<ol>\n<li><strong>\u5149\u901a\u91cf</strong>\uff1a\u5b54\u5f84\u6781\u5c0f\uff0c\u8fdb\u5149\u91cf\u4e0d\u8db3\uff0c\u9700\u8981\u957f\u65f6\u95f4\u66dd\u5149</li>\n<li><strong>\u884d\u5c04\u6548\u5e94</strong>\uff1a\u5b54\u5f84\u8fc7\u5c0f\u65f6\u884d\u5c04\u4f1a\u964d\u4f4e\u56fe\u50cf\u8d28\u91cf</li>\n<li><strong>\u6700\u4f18\u5b54\u5f84</strong>\uff1a\u7ea6\u4e3a$d_{opt} = \\sqrt{2.44\\lambda L}$\uff0c\u5176\u4e2d$\\lambda$\u662f\u6ce2\u957f\uff0c$L$\u662f\u7269\u8ddd</li>\n<li><strong>\u5b9e\u7528\u6027</strong>\uff1a\u5b9e\u9645\u76f8\u673a\u4f7f\u7528\u900f\u955c\u7cfb\u7edf\u589e\u52a0\u8fdb\u5149\u91cf</li>\n</ol>\n<h3 id=\"1012\">10.1.2 \u8584\u900f\u955c\u6a21\u578b</h3>\n<p>\u8584\u900f\u955c\u6a21\u578b\u66f4\u63a5\u8fd1\u771f\u5b9e\u76f8\u673a\uff0c\u5f15\u5165\u4e86\u6709\u9650\u5b54\u5f84\u548c\u666f\u6df1\u6548\u679c\u3002</p>\n<p><strong>\u900f\u955c\u5236\u9020\u8005\u65b9\u7a0b</strong>\uff1a\n\u5bf9\u4e8e\u534a\u5f84\u4e3a$R_1$\u548c$R_2$\u7684\u4e24\u4e2a\u7403\u9762\uff0c\u6298\u5c04\u7387\u4e3a$n$\u7684\u8584\u900f\u955c\uff1a\n$$\\frac{1}{f} = (n-1)\\left(\\frac{1}{R_1} - \\frac{1}{R_2}\\right)$$\n\u7ea6\u5b9a\uff1a\u51f8\u9762\u534a\u5f84\u4e3a\u6b63\uff0c\u51f9\u9762\u534a\u5f84\u4e3a\u8d1f\u3002</p>\n<p><strong>\u9ad8\u65af\u900f\u955c\u65b9\u7a0b</strong>\uff1a\n$$\\frac{1}{f} = \\frac{1}{d_o} + \\frac{1}{d_i}$$\n\u8fd9\u4e2a\u65b9\u7a0b\u63cf\u8ff0\u4e86\u7269\u8ddd\u3001\u50cf\u8ddd\u548c\u7126\u8ddd\u4e4b\u95f4\u7684\u57fa\u672c\u5173\u7cfb\u3002</p>\n<p><strong>\u7279\u6b8a\u60c5\u51b5</strong>\uff1a</p>\n<ul>\n<li>\u65e0\u7a77\u8fdc\u7269\u4f53\uff1a$d_o \\to \\infty \\Rightarrow d_i = f$</li>\n<li>\u7269\u4f53\u5728\u7126\u70b9\uff1a$d_o = f \\Rightarrow d_i \\to \\infty$\uff08\u5e73\u884c\u5149\u51fa\u5c04\uff09</li>\n<li>\u7269\u4f53\u57282\u500d\u7126\u8ddd\uff1a$d_o = 2f \\Rightarrow d_i = 2f$\uff08\u7b49\u5927\u6210\u50cf\uff09</li>\n</ul>\n<p><strong>\u725b\u987f\u5f62\u5f0f</strong>\uff1a\n\u4ee5\u7126\u70b9\u4e3a\u53c2\u8003\uff1a\n$$x \\cdot x' = f^2$$\n\u5176\u4e2d$x = d_o - f$\uff0c$x' = d_i - f$\u3002</p>\n<p><strong>\u6a2a\u5411\u653e\u5927\u7387</strong>\uff1a\n$$M = -\\frac{d_i}{d_o} = \\frac{f}{f - d_o} = \\frac{d_i - f}{f}$$\n\u8d1f\u53f7\u8868\u793a\u50cf\u662f\u5012\u7acb\u7684\u3002</p>\n<p><strong>\u89d2\u653e\u5927\u7387</strong>\uff1a\n$$\\gamma = \\frac{\\tan\\theta'}{\\tan\\theta} = \\frac{d_o}{d_i} = -\\frac{1}{M}$$\n\u5176\u4e2d$\\theta$\u548c$\\theta'$\u662f\u5165\u5c04\u548c\u51fa\u5c04\u5149\u7ebf\u4e0e\u5149\u8f74\u7684\u5939\u89d2\u3002</p>\n<p><strong>\u5149\u5708\u4e0ef\u6570</strong>\uff1a</p>\n<ul>\n<li>\u5149\u5708\u76f4\u5f84\uff1a$D = \\frac{f}{N}$</li>\n<li>f\u6570\uff08f-number\uff09\uff1a$N = \\frac{f}{D}$</li>\n<li>\u5e38\u89c1f\u6570\u5e8f\u5217\uff1af/1.4, f/2, f/2.8, f/4, f/5.6, f/8, f/11, f/16</li>\n<li>\u6bcf\u4e00\u7ea7\u76f8\u5dee$\\sqrt{2}$\u500d\uff0c\u5149\u901a\u91cf\u76f8\u5dee2\u500d</li>\n</ul>\n<p><strong>\u6709\u6548f\u6570</strong>\uff1a\n\u5f53\u5bf9\u7126\u5728\u6709\u9650\u8ddd\u79bb\u65f6\uff1a\n$$N_{eff} = N(1 + M) = N\\left(1 + \\frac{d_i - f}{f}\\right)$$\n\u8fd9\u5728\u5fae\u8ddd\u6444\u5f71\u4e2d\u7279\u522b\u91cd\u8981\u3002</p>\n<p><strong>\u666f\u6df1\u7684\u7cbe\u786e\u8ba1\u7b97</strong>\uff1a\n\u666f\u6df1\u662f\u6307\u5728\u6210\u50cf\u5e73\u9762\u4e0a\u4ea7\u751f\u53ef\u63a5\u53d7\u6e05\u6670\u56fe\u50cf\u7684\u7269\u4f53\u6df1\u5ea6\u8303\u56f4\u3002</p>\n<p><strong>\u8d85\u7126\u8ddd</strong>\uff1a\n$$H = \\frac{f^2}{Nc} + f \\approx \\frac{f^2}{Nc}$$\n\u5bf9\u4e8e\u5927\u591a\u6570\u60c5\u51b5\uff0c$f \\ll \\frac{f^2}{Nc}$\uff0c\u6240\u4ee5\u53ef\u4ee5\u7b80\u5316\u3002</p>\n<p><strong>\u8fd1\u666f\u6df1\u754c\u9650</strong>\uff1a\n$$D_n = \\frac{d(H-f)}{H + d - 2f} \\approx \\frac{Hd}{H + d}$$\n<strong>\u8fdc\u666f\u6df1\u754c\u9650</strong>\uff1a\n$$D_f = \\frac{d(H-f)}{H - d} \\approx \\frac{Hd}{H - d}$$\n<strong>\u666f\u6df1\u603b\u91cf</strong>\uff1a\n$$\\text{DOF} = D_f - D_n = \\frac{2Hd^2(H-f)}{H^2 - d^2} \\approx \\frac{2Hd^2}{H^2 - d^2}$$\n<strong>\u7279\u6b8a\u60c5\u51b5</strong>\uff1a</p>\n<ol>\n<li>\u5f53$d = H$\u65f6\uff0c$D_f \\to \\infty$\uff0c\u8fdc\u666f\u6df1\u65e0\u9650\u8fdc</li>\n<li>\u5f53$d \\ll H$\u65f6\uff0c$\\text{DOF} \\approx \\frac{2d^2Nc}{f^2}$</li>\n<li>\u5f53$d \\gg H$\u65f6\uff0c$\\text{DOF} \\approx \\frac{2HNc}{f}$</li>\n</ol>\n<p><strong>\u666f\u6df1\u7684\u5b9e\u7528\u89c4\u5219</strong>\uff1a</p>\n<ol>\n<li>\u666f\u6df1\u4e0e\u5149\u5708\u6570\u6210\u6b63\u6bd4\uff1a$\\text{DOF} \\propto N$</li>\n<li>\u666f\u6df1\u4e0e\u7126\u8ddd\u5e73\u65b9\u6210\u53cd\u6bd4\uff1a$\\text{DOF} \\propto \\frac{1}{f^2}$\uff08\u8fdc\u8ddd\u79bb\uff09</li>\n<li>\u666f\u6df1\u4e0e\u5bf9\u7126\u8ddd\u79bb\u5e73\u65b9\u6210\u6b63\u6bd4\uff1a$\\text{DOF} \\propto d^2$\uff08\u8fd1\u8ddd\u79bb\uff09</li>\n</ol>\n<p><strong>\u5f25\u6563\u5706\u4e0e\u6a21\u7cca</strong>\uff1a\n\u5bf9\u4e8e\u7269\u8ddd\u4e3a$d_o'$\u7684\u70b9\uff0c\u5176\u5728\u5bf9\u7126\u5e73\u9762\u4e0a\u5f62\u6210\u7684\u5f25\u6563\u5706\u76f4\u5f84\uff1a\n$$b = \\frac{D \\cdot |d_i - d_i'|}{d_i'} = \\frac{f}{N} \\cdot \\left|\\frac{d_i}{d_i'} - 1\\right|$$\n\u4f7f\u7528\u900f\u955c\u65b9\u7a0b\uff1a\n$$b = \\frac{f^2}{N} \\cdot \\left|\\frac{1}{d_o} - \\frac{1}{d_o'}\\right|$$\n<strong>\u5f25\u6563\u5706\u7684\u89d2\u5ea6\u5927\u5c0f</strong>\uff1a\n\u4ece\u7269\u4f53\u770b\uff0c\u5f25\u6563\u5706\u7684\u89d2\u5ea6\u5927\u5c0f\u4e3a\uff1a\n$$\\theta_b = \\frac{b \\cdot d_o}{d_i \\cdot d_o'} = \\frac{D}{d_o'} \\cdot \\left|1 - \\frac{d_o'}{d_o}\\right|$$\n<strong>\u70b9\u6269\u6563\u51fd\u6570\uff08PSF\uff09</strong>\uff1a\n\u7406\u60f3\u8584\u900f\u955c\u7684PSF\u5728\u7126\u5916\u662f\u5747\u5300\u5706\u76d8\uff1a\n$$\\text{PSF}(x, y) = \\begin{cases}\n\\frac{1}{\\pi (b/2)^2} &amp; \\text{if } x^2 + y^2 \\leq (b/2)^2 \\\n0 &amp; \\text{otherwise}\n\\end{cases}$$\n<strong>\u5b9e\u9645\u5e94\u7528\u8003\u8651</strong>\uff1a</p>\n<ol>\n<li><strong>\u5f25\u6563\u5706\u5bb9\u8bb8\u5ea6</strong>\uff1a\u901a\u5e38\u53d6\u4f20\u611f\u5668\u5bf9\u89d2\u7ebf\u7684$1/1500$\u5230$1/1000$</li>\n<li><strong>\u50cf\u7d20\u5c3a\u5bf8\u9650\u5236</strong>\uff1a\u5f25\u6563\u5706\u5c0f\u4e8e2\u500d\u50cf\u7d20\u5c3a\u5bf8\u65f6\u88ab\u8ba4\u4e3a\u6e05\u6670</li>\n<li><strong>\u884d\u5c04\u6781\u9650</strong>\uff1a\u5f53$N &gt; \\frac{f}{1.22\\lambda}$\u65f6\uff0c\u884d\u5c04\u6548\u5e94\u8d85\u8fc7\u5f25\u6563\u5706</li>\n</ol>\n<h3 id=\"1013\">10.1.3 \u539a\u900f\u955c\u4e0e\u900f\u955c\u7ec4</h3>\n<p>\u5b9e\u9645\u76f8\u673a\u955c\u5934\u7531\u591a\u4e2a\u900f\u955c\u5143\u4ef6\u7ec4\u6210\uff0c\u9700\u8981\u8003\u8651\u66f4\u590d\u6742\u7684\u5149\u5b66\u7cfb\u7edf\u3002</p>\n<p><strong>\u57fa\u4e3b\u70b9\u7cfb\u7edf</strong>\uff1a\n\u539a\u900f\u955c\u7684\u5b8c\u6574\u63cf\u8ff0\u9700\u8981\u516d\u4e2a\u57fa\u4e3b\u70b9\uff1a</p>\n<ul>\n<li>\u524d\u4e3b\u70b9 $H$ \u548c\u540e\u4e3b\u70b9 $H'$</li>\n<li>\u524d\u7126\u70b9 $F$ \u548c\u540e\u7126\u70b9 $F'$</li>\n<li>\u524d\u8282\u70b9 $N$ \u548c\u540e\u8282\u70b9 $N'$</li>\n</ul>\n<p><strong>\u4e3b\u70b9\u548c\u8282\u70b9\u7684\u7269\u7406\u610f\u4e49</strong>\uff1a</p>\n<ul>\n<li><strong>\u4e3b\u70b9</strong>\uff1a\u6a2a\u5411\u653e\u5927\u7387\u4e3a+1\u7684\u5171\u8f6d\u70b9</li>\n<li>\u901a\u8fc7$H$\u7684\u5165\u5c04\u5149\u7ebf\u5e73\u884c\u4e8e\u901a\u8fc7$H'$\u7684\u51fa\u5c04\u5149\u7ebf</li>\n<li>\u6ee1\u8db3\uff1a$h' = h$\uff08\u7269\u9ad8\u7b49\u4e8e\u50cf\u9ad8\uff09</li>\n<li><strong>\u8282\u70b9</strong>\uff1a\u89d2\u653e\u5927\u7387\u4e3a+1\u7684\u5171\u8f6d\u70b9</li>\n<li>\u901a\u8fc7$N$\u7684\u5165\u5c04\u5149\u7ebf\u4e0e\u901a\u8fc7$N'$\u7684\u51fa\u5c04\u5149\u7ebf\u5e73\u884c</li>\n<li>\u6ee1\u8db3\uff1a$\\tan\\theta' = \\tan\\theta$</li>\n</ul>\n<p><strong>\u91cd\u8981\u6027\u8d28</strong>\uff1a</p>\n<ol>\n<li>\u5f53\u524d\u540e\u4ecb\u8d28\u76f8\u540c\u65f6\uff08\u5982\u7a7a\u6c14\uff09\uff0c\u4e3b\u70b9\u548c\u8282\u70b9\u91cd\u5408</li>\n<li>\u6d78\u6ca1\u900f\u955c\u4e2d\uff0c$HN = \\frac{n_1 - n_3}{n_3}f$\uff0c$H'N' = \\frac{n_3 - n_1}{n_1}f'$</li>\n</ol>\n<p><strong>\u539a\u900f\u955c\u7684\u57fa\u672c\u53c2\u6570</strong>\uff1a\n\u5bf9\u4e8e\u534a\u5f84\u4e3a$R_1$\u548c$R_2$\uff0c\u539a\u5ea6\u4e3a$t$\uff0c\u6298\u5c04\u7387\u4e3a$n$\u7684\u539a\u900f\u955c\uff1a</p>\n<p><strong>\u5149\u7126\u5ea6</strong>\uff1a\n$$P = P_1 + P_2 - \\frac{t}{n}P_1 P_2$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$P_1 = \\frac{n-1}{R_1}$\uff1a\u7b2c\u4e00\u9762\u5149\u7126\u5ea6</li>\n<li>$P_2 = \\frac{1-n}{R_2}$\uff1a\u7b2c\u4e8c\u9762\u5149\u7126\u5ea6</li>\n</ul>\n<p><strong>\u7b49\u6548\u7126\u8ddd</strong>\uff1a\n$$f = \\frac{1}{P} = \\frac{nR_1R_2}{(n-1)[n(R_2-R_1) + t(n-1)]}$$\n<strong>\u4e3b\u70b9\u4f4d\u7f6e</strong>\uff1a</p>\n<ul>\n<li>\u524d\u4e3b\u70b9\u5230\u7b2c\u4e00\u9762\uff1a$\\ell_H = -\\frac{f \\cdot t(n-1)}{nR_2}$</li>\n<li>\u540e\u4e3b\u70b9\u5230\u7b2c\u4e8c\u9762\uff1a$\\ell_{H'} = \\frac{f \\cdot t(n-1)}{nR_1}$</li>\n</ul>\n<p><strong>\u7ec4\u5408\u900f\u955c\u7cfb\u7edf\u7684\u77e9\u9635\u65b9\u6cd5</strong>\uff1a\n\u4f7f\u7528ABCD\u77e9\u9635\uff08\u5149\u7ebf\u4f20\u8f93\u77e9\u9635\uff09\uff1a\n$$\\begin{bmatrix} y_2 \\ \\theta_2 \\end{bmatrix} = \\begin{bmatrix} A &amp; B \\ C &amp; D \\end{bmatrix} \\begin{bmatrix} y_1 \\ \\theta_1 \\end{bmatrix}$$\n<strong>\u57fa\u672c\u5143\u4ef6\u7684ABCD\u77e9\u9635</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u81ea\u7531\u7a7a\u95f4\u4f20\u64ad</strong>\uff1a\n$$\\mathbf{M}_{\\text{space}} = \\begin{bmatrix} 1 &amp; d \\ 0 &amp; 1 \\end{bmatrix}$$</p>\n</li>\n<li>\n<p><strong>\u8584\u900f\u955c</strong>\uff1a\n$$\\mathbf{M}_{\\text{lens}} = \\begin{bmatrix} 1 &amp; 0 \\ -1/f &amp; 1 \\end{bmatrix}$$</p>\n</li>\n<li>\n<p><strong>\u7403\u9762\u6298\u5c04</strong>\uff1a\n$$\\mathbf{M}_{\\text{refr}} = \\begin{bmatrix} 1 &amp; 0 \\ \\frac{n_1-n_2}{R n_2} &amp; \\frac{n_1}{n_2} \\end{bmatrix}$$\n<strong>\u7cfb\u7edf\u77e9\u9635\u7684\u7ea7\u8054</strong>\uff1a\n$$\\mathbf{M}_{\\text{total}} = \\mathbf{M}_n \\cdot \\mathbf{M}_{n-1} \\cdot ... \\cdot \\mathbf{M}_2 \\cdot \\mathbf{M}_1$$\n<strong>\u4ece\u7cfb\u7edf\u77e9\u9635\u63d0\u53d6\u53c2\u6570</strong>\uff1a</p>\n</li>\n</ol>\n<ul>\n<li>\u7b49\u6548\u7126\u8ddd\uff1a$f = -\\frac{1}{C}$</li>\n<li>\u524d\u4e3b\u70b9\u4f4d\u7f6e\uff1a$\\ell_H = \\frac{D-1}{C}$</li>\n<li>\u540e\u4e3b\u70b9\u4f4d\u7f6e\uff1a$\\ell_{H'} = \\frac{1-A}{C}$</li>\n<li>\u524d\u7126\u8ddd\uff1a$\\text{FFL} = \\frac{D}{C}$</li>\n<li>\u540e\u7126\u8ddd\uff1a$\\text{BFL} = -\\frac{A}{C}$</li>\n</ul>\n<p><strong>\u4e24\u900f\u955c\u7cfb\u7edf\u7684\u8be6\u7ec6\u5206\u6790</strong>\uff1a\n\u4e24\u4e2a\u7126\u8ddd\u4e3a$f_1$\u548c$f_2$\uff0c\u95f4\u8ddd\u4e3a$d$\u7684\u8584\u900f\u955c\uff1a\n$$\\mathbf{M} = \\begin{bmatrix} 1 &amp; 0 \\ -1/f_2 &amp; 1 \\end{bmatrix} \\begin{bmatrix} 1 &amp; d \\ 0 &amp; 1 \\end{bmatrix} \\begin{bmatrix} 1 &amp; 0 \\ -1/f_1 &amp; 1 \\end{bmatrix}$$</p>\n<p>$$= \\begin{bmatrix} 1-d/f_1 &amp; d \\ -1/f_1-1/f_2+d/(f_1f_2) &amp; 1-d/f_2 \\end{bmatrix}$$\n<strong>\u6709\u6548\u7126\u8ddd</strong>\uff1a\n$$\\frac{1}{f} = \\frac{1}{f_1} + \\frac{1}{f_2} - \\frac{d}{f_1 f_2}$$\n<strong>\u4e3b\u70b9\u4f4d\u7f6e</strong>\uff1a</p>\n<ul>\n<li>\u524d\u4e3b\u70b9\u5230\u7b2c\u4e00\u900f\u955c\uff1a$\\text{H}_1 = -\\frac{fd}{f_2}$</li>\n<li>\u540e\u4e3b\u70b9\u5230\u7b2c\u4e8c\u900f\u955c\uff1a$\\text{H}_2 = \\frac{fd}{f_1}$</li>\n</ul>\n<p><strong>\u7126\u8ddd\u4f4d\u7f6e</strong>\uff1a</p>\n<ul>\n<li>\u524d\u7126\u8ddd\uff08FFL\uff09\uff1a$\\text{FFL} = f_1 \\frac{f_2 - d}{f_1 + f_2 - d}$</li>\n<li>\u540e\u7126\u8ddd\uff08BFL\uff09\uff1a$\\text{BFL} = f_2 \\frac{f_1 - d}{f_1 + f_2 - d}$</li>\n</ul>\n<p><strong>\u7279\u6b8a\u914d\u7f6e</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u671b\u8fdc\u955c\u914d\u7f6e</strong>\uff1a$d = f_1 + f_2$\n   - \u7cfb\u7edf\u7126\u8ddd\uff1a$f \\to \\infty$\uff08\u65e0\u7126\u7cfb\u7edf\uff09\n   - \u89d2\u653e\u5927\u7387\uff1a$\\gamma = -\\frac{f_2}{f_1}$</p>\n</li>\n<li>\n<p><strong>\u663e\u5fae\u955c\u914d\u7f6e</strong>\uff1a$d &gt; f_1 + f_2$\n   - \u865a\u50cf\u653e\u5927\n   - \u603b\u653e\u5927\u7387\uff1a$M = M_1 \\times M_2$</p>\n</li>\n<li>\n<p><strong>4f\u7cfb\u7edf</strong>\uff1a$d = 2(f_1 + f_2)$\uff0c\u4e14$f_1 = f_2 = f$\n   - \u5355\u4f4d\u653e\u5927\u7387\uff08$M = -1$\uff09\n   - \u7528\u4e8e\u50c5\u91cc\u53f6\u53d8\u6362\u548c\u7a7a\u95f4\u6ee4\u6ce2</p>\n</li>\n</ol>\n<p><strong>\u591a\u5143\u4ef6\u7cfb\u7edf\u7684\u8bbe\u8ba1\u8003\u8651</strong>\uff1a</p>\n<ol>\n<li><strong>\u8868\u9762\u6570\u91cf\u4f18\u5316</strong>\uff1a\u6bcf\u4e2a\u7a7a\u6c14-\u73bb\u7483\u754c\u9762\u90fd\u4f1a\u5f15\u5165\u53cd\u5c04\u635f\u5931</li>\n<li><strong>\u73bb\u7483\u9009\u62e9</strong>\uff1a\u4e0d\u540c\u6298\u5c04\u7387\u548c\u8272\u6563\u7279\u6027\u7684\u7ec4\u5408</li>\n<li><strong>\u673a\u68b0\u7ea6\u675f</strong>\uff1a\u603b\u957f\u5ea6\u3001\u91cd\u91cf\u3001\u6210\u672c\u7684\u5e73\u8861</li>\n</ol>\n<p><strong>\u50cf\u5dee\u7c7b\u578b\u4e0e\u7279\u5f81</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u7403\u5dee\uff08Spherical Aberration\uff09</strong>\n   - \u4e0d\u540c\u5165\u5c04\u9ad8\u5ea6\u7684\u5149\u7ebf\u805a\u7126\u4f4d\u7f6e\u4e0d\u540c\n   - \u7eb5\u5411\u7403\u5dee\uff1a$\\Delta s' = s'_{\\text{marginal}} - s'_{\\text{paraxial}}$\n   - \u53ef\u901a\u8fc7\u975e\u7403\u9762\u900f\u955c\u6216\u900f\u955c\u7ec4\u5408\u6821\u6b63</p>\n</li>\n<li>\n<p><strong>\u5f57\u5dee\uff08Coma\uff09</strong>\n   - \u79bb\u8f74\u70b9\u5149\u6e90\u6210\u50cf\u4e3a\u5f57\u661f\u72b6\n   - \u4e0e\u5165\u5c04\u89d2\u7684\u4e09\u6b21\u65b9\u6210\u6b63\u6bd4\n   - \u6b63\u5f26\u6761\u4ef6\uff1a$n y \\sin u = n' y' \\sin u'$</p>\n</li>\n<li>\n<p><strong>\u50cf\u6563\uff08Astigmatism\uff09</strong>\n   - \u5b50\u5348\u9762\u548c\u5f27\u77e2\u9762\u7684\u805a\u7126\u4f4d\u7f6e\u4e0d\u540c\n   - \u50cf\u6563\u5dee\uff1a$\\Delta s' = s'_T - s'_S$\n   - \u4ea7\u751f\u692d\u5706\u5f62\u7684\u70b9\u6269\u6563\u51fd\u6570</p>\n</li>\n<li>\n<p><strong>\u573a\u66f2\uff08Field Curvature\uff09</strong>\n   - \u5e73\u9762\u7269\u4f53\u6210\u50cf\u5728\u66f2\u9762\u4e0a\n   - Petzval\u66f2\u7387\uff1a$\\rho_P = \\sum \\frac{1}{n_i f_i}$\n   - \u53ef\u901a\u8fc7\u573a\u955c\u6821\u6b63</p>\n</li>\n<li>\n<p><strong>\u7578\u53d8\uff08Distortion\uff09</strong>\n   - \u5f71\u54cd\u51e0\u4f55\u5f62\u72b6\u4f46\u4e0d\u5f71\u54cd\u6e05\u6670\u5ea6\n   - \u6876\u5f62\u7578\u53d8\uff1a$r' = r(1 - kr^2)$\n   - \u6795\u5f62\u7578\u53d8\uff1a$r' = r(1 + kr^2)$</p>\n</li>\n<li>\n<p><strong>\u8272\u5dee\uff08Chromatic Aberration\uff09</strong>\n   - \u7eb5\u5411\u8272\u5dee\uff1a\u4e0d\u540c\u6ce2\u957f\u7126\u8ddd\u4e0d\u540c\n   - \u6a2a\u5411\u8272\u5dee\uff1a\u4e0d\u540c\u6ce2\u957f\u653e\u5927\u7387\u4e0d\u540c\n   - \u4f7f\u7528\u4e0d\u540c\u8272\u6563\u6750\u6599\u7ec4\u5408\u6d88\u9664</p>\n</li>\n</ol>\n<p><strong>Seidel\u50cf\u5dee\u7cfb\u6570</strong>\uff1a\n\u5bf9\u4e8e\u4e09\u9636\u50cf\u5dee\uff0c\u53ef\u7528\u4e94\u4e2aSeidel\u7cfb\u6570\u63cf\u8ff0\uff1a</p>\n<ul>\n<li>$S_I$\uff1a\u7403\u5dee\u7cfb\u6570</li>\n<li>$S_{II}$\uff1a\u5f57\u5dee\u7cfb\u6570  </li>\n<li>$S_{III}$\uff1a\u50cf\u6563\u7cfb\u6570</li>\n<li>$S_{IV}$\uff1a\u573a\u66f2\u7cfb\u6570</li>\n<li>$S_V$\uff1a\u7578\u53d8\u7cfb\u6570</li>\n</ul>\n<h3 id=\"1014\">10.1.4 \u5f84\u5411\u7578\u53d8\u6a21\u578b</h3>\n<p>\u5b9e\u9645\u955c\u5934\u7684\u7578\u53d8\u4e3b\u8981\u5305\u62ec\u5f84\u5411\u548c\u5207\u5411\u7578\u53d8\uff0c\u8fd9\u4e9b\u7578\u53d8\u9700\u8981\u5728\u56fe\u50cf\u5904\u7406\u4e2d\u8fdb\u884c\u6821\u6b63\u3002</p>\n<p><strong>\u5f84\u5411\u7578\u53d8</strong>\uff1a\n\u7531\u900f\u955c\u7684\u5f84\u5411\u5bf9\u79f0\u6027\u5f15\u8d77\uff0c\u4f7f\u5f97\u56fe\u50cf\u4e2d\u5fc3\u548c\u8fb9\u7f18\u7684\u653e\u5927\u7387\u4e0d\u540c\u3002\n$$\\begin{aligned}\nx_d &amp;= x_u(1 + k_1r^2 + k_2r^4 + k_3r^6) \\\ny_d &amp;= y_u(1 + k_1r^2 + k_2r^4 + k_3r^6)\n\\end{aligned}$$</p>\n<ul>\n<li>$k_1 &lt; 0$\uff1a\u6876\u5f62\u7578\u53d8\uff08barrel distortion\uff09</li>\n<li>$k_1 &gt; 0$\uff1a\u6795\u5f62\u7578\u53d8\uff08pincushion distortion\uff09</li>\n<li>\u901a\u5e38$|k_1| \\gg |k_2| \\gg |k_3|$</li>\n</ul>\n<p><strong>\u5207\u5411\u7578\u53d8</strong>\uff1a\n\u7531\u900f\u955c\u548c\u6210\u50cf\u5e73\u9762\u4e0d\u5b8c\u5168\u5e73\u884c\u5f15\u8d77\uff0c\u4e5f\u79f0\u4e3a\u504f\u5fc3\u7578\u53d8\u3002\n$$\\begin{aligned}\nx_d &amp;= x_u + [2p_1x_uy_u + p_2(r^2 + 2x_u^2)] \\\ny_d &amp;= y_u + [p_1(r^2 + 2y_u^2) + 2p_2x_uy_u]\n\\end{aligned}$$\n\u5176\u4e2d $r^2 = x_u^2 + y_u^2$\uff0c$(x_u, y_u)$ \u662f\u5f52\u4e00\u5316\u7684\u672a\u7578\u53d8\u5750\u6807\u3002</p>\n<p><strong>\u5b8c\u6574\u7684\u7578\u53d8\u6a21\u578b</strong>\uff1a\n\u7ec4\u5408\u5f84\u5411\u548c\u5207\u5411\u7578\u53d8\uff1a\n$$\\begin{aligned}\nx_d &amp;= x_u(1 + k_1r^2 + k_2r^4 + k_3r^6) + [2p_1x_uy_u + p_2(r^2 + 2x_u^2)] \\\ny_d &amp;= y_u(1 + k_1r^2 + k_2r^4 + k_3r^6) + [p_1(r^2 + 2y_u^2) + 2p_2x_uy_u]\n\\end{aligned}$$\n<strong>\u7578\u53d8\u6821\u6b63\u6d41\u7a0b</strong>\uff1a</p>\n<ol>\n<li>\u5c06\u50cf\u7d20\u5750\u6807\u8f6c\u6362\u4e3a\u5f52\u4e00\u5316\u5750\u6807\uff1a$(x_u, y_u) = ((u-c_x)/f_x, (v-c_y)/f_y)$</li>\n<li>\u8ba1\u7b97\u5f84\u5411\u8ddd\u79bb\uff1a$r^2 = x_u^2 + y_u^2$</li>\n<li>\u5e94\u7528\u7578\u53d8\u6a21\u578b\u5f97\u5230$(x_d, y_d)$</li>\n<li>\u8f6c\u6362\u56de\u50cf\u7d20\u5750\u6807\uff1a$(u_d, v_d) = (f_x x_d + c_x, f_y y_d + c_y)$</li>\n</ol>\n<p><strong>\u9ad8\u7ea7\u7578\u53d8\u6a21\u578b</strong>\uff1a</p>\n<ul>\n<li>\u68f1\u955c\u7578\u53d8\uff08thin prism distortion\uff09\uff1a\u8003\u8651\u66f4\u9ad8\u9636\u7684\u5207\u5411\u7578\u53d8</li>\n<li>\u6709\u7406\u51fd\u6570\u6a21\u578b\uff1a\u4f7f\u7528\u6709\u7406\u51fd\u6570\u66f4\u7cbe\u786e\u5730\u5efa\u6a21\u7578\u53d8</li>\n<li>\u5206\u6bb5\u7ebf\u6027\u6a21\u578b\uff1a\u5bf9\u4e0d\u540c\u534a\u5f84\u533a\u57df\u4f7f\u7528\u4e0d\u540c\u53c2\u6570</li>\n</ul>\n<h2 id=\"102\">10.2 \u5149\u573a\u7406\u8bba</h2>\n<h3 id=\"1021\">10.2.1 \u5149\u573a\u7684\u6570\u5b66\u8868\u793a</h3>\n<p>\u5149\u573a\uff08Light Field\uff09\u63cf\u8ff0\u7a7a\u95f4\u4e2d\u6240\u6709\u4f4d\u7f6e\u3001\u6240\u6709\u65b9\u5411\u7684\u5149\u7ebf\u5206\u5e03\u3002\u8fd9\u4e2a\u6982\u5ff5\u6700\u65e9\u7531Faraday\u57281846\u5e74\u63d0\u51fa\uff0c\u73b0\u4ee3\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u5e7f\u6cdb\u5e94\u7528\u4e8e\u6e32\u67d3\u548c\u6444\u5f71\u3002</p>\n<p><strong>5D\u5168\u5149\u51fd\u6570</strong>\uff1a\n$$L(x, y, z, \\theta, \\phi)$$\n\u8868\u793a\u7a7a\u95f4\u4f4d\u7f6e $(x, y, z)$ \u5904\u65b9\u5411 $(\\theta, \\phi)$ \u7684\u5149\u7ebf\u8f90\u5c04\u5ea6\u3002</p>\n<p><strong>\u5176\u4ed6\u8868\u793a\u65b9\u5f0f</strong>\uff1a</p>\n<ul>\n<li>7D\u5168\u5149\u51fd\u6570\uff1a$L(x, y, z, \\theta, \\phi, \\lambda, t)$</li>\n<li>\u589e\u52a0\u6ce2\u957f$\\lambda$\u548c\u65f6\u95f4$t$\u7ef4\u5ea6</li>\n<li>\u5b8c\u6574\u63cf\u8ff0\u5149\u7684\u6240\u6709\u5c5e\u6027</li>\n</ul>\n<p><strong>4D\u5149\u573a\u53c2\u6570\u5316</strong>\uff08\u53cc\u5e73\u9762\u53c2\u6570\u5316\uff09\uff1a\n\u5728\u81ea\u7531\u7a7a\u95f4\u4e2d\uff08\u65e0\u906e\u6321\uff09\uff0c\u5149\u7ebf\u53ef\u4ee5\u7528\u4e24\u4e2a\u5e73\u9762\u4e0a\u7684\u4ea4\u70b9\u8868\u793a\uff1a\n$$L(u, v, s, t)$$\n\u5176\u4e2d $(u, v)$ \u548c $(s, t)$ \u5206\u522b\u662f\u4e24\u4e2a\u5e73\u884c\u5e73\u9762\u4e0a\u7684\u5750\u6807\u3002</p>\n<p><strong>\u5149\u7ebf\u65b9\u7a0b</strong>\uff1a\n\u4ece$(u, v, 0)$\u5230$(s, t, 1)$\u7684\u5149\u7ebf\u53ef\u4ee5\u53c2\u6570\u5316\u4e3a\uff1a\n$$\\mathbf{r}(\\tau) = (1-\\tau)(u, v, 0) + \\tau(s, t, 1)$$\n<strong>\u5176\u4ed6\u53c2\u6570\u5316\u65b9\u5f0f</strong>\uff1a</p>\n<ol>\n<li><strong>\u7403\u9762\u53c2\u6570\u5316</strong>\uff1a\u4f7f\u7528\u7403\u9762\u5750\u6807\u8868\u793a\u5149\u7ebf\u65b9\u5411</li>\n<li><strong>\u5e73\u9762+\u534a\u7403\u53c2\u6570\u5316</strong>\uff1a\u9002\u5408\u8868\u793a\u8868\u9762\u5149\u573a</li>\n<li><strong>\u76f8\u673a\u5185\u53c2\u6570\u5316</strong>\uff1a\u4f7f\u7528\u76f8\u673a\u53c2\u6570\u8868\u793a\u591a\u89c6\u70b9\u56fe\u50cf</li>\n</ol>\n<p><strong>\u5149\u573a\u7684\u6027\u8d28</strong>\uff1a</p>\n<ol>\n<li><strong>\u5e38\u6570\u6027</strong>\uff1a\u5728\u81ea\u7531\u7a7a\u95f4\u4e2d\uff0c\u6cbf\u5149\u7ebf\u8f90\u5c04\u5ea6\u4e0d\u53d8</li>\n<li><strong>\u5bf9\u79f0\u6027</strong>\uff1a$L(u, v, s, t) = L(s, t, u, v)$</li>\n<li><strong>\u7ebf\u6027\u6027</strong>\uff1a\u591a\u4e2a\u5149\u6e90\u7684\u5149\u573a\u53ef\u4ee5\u53e0\u52a0</li>\n</ol>\n<h3 id=\"1022\">10.2.2 \u5149\u573a\u91c7\u6837\u4e0e\u91cd\u5efa</h3>\n<p><strong>\u5948\u594e\u65af\u7279\u91c7\u6837\u5b9a\u7406\u5e94\u7528</strong>\uff1a\n\u4e3a\u4e86\u5b8c\u6574\u91cd\u5efa\u5149\u573a\uff0c\u9700\u8981\u6ee1\u8db3\u7a7a\u95f4\u548c\u89d2\u5ea6\u7684\u91c7\u6837\u8981\u6c42\u3002</p>\n<ul>\n<li>\u89d2\u5ea6\u91c7\u6837\u7387\uff1a$\\Delta\\theta \\leq \\frac{\\lambda}{D}$</li>\n<li>\u7a7a\u95f4\u91c7\u6837\u7387\uff1a$\\Delta x \\leq \\frac{\\lambda z}{D}$</li>\n</ul>\n<p>\u5176\u4e2d $\\lambda$ \u662f\u6ce2\u957f\uff0c$D$ \u662f\u5b54\u5f84\uff0c$z$ \u662f\u6df1\u5ea6\u3002</p>\n<p><strong>\u91c7\u6837\u5bc6\u5ea6\u5206\u6790</strong>\uff1a</p>\n<ul>\n<li>\u603b\u91c7\u6837\u6570\uff1a$N = N_x \\times N_y \\times N_u \\times N_v$</li>\n<li>\u7a7a\u95f4-\u89d2\u5ea6\u5206\u8fa8\u7387\u6743\u8861\uff1a$N_x N_y \\times N_u N_v = \\text{const}$</li>\n<li>\u666f\u6df1\u4e0e\u89d2\u5ea6\u5206\u8fa8\u7387\u5173\u7cfb\uff1a$\\Delta z \\propto \\frac{1}{N_u}$</li>\n</ul>\n<p><strong>\u5149\u573a\u76f8\u673a\u539f\u7406</strong>\uff1a</p>\n<p><strong>\u4f20\u7edf\u8bbe\u8ba1</strong>\uff1a</p>\n<ul>\n<li>\u4e3b\u900f\u955c\u540e\u653e\u7f6e\u5fae\u900f\u955c\u9635\u5217</li>\n<li>\u6bcf\u4e2a\u5fae\u900f\u955c\u5bf9\u5e94\u591a\u4e2a\u4f20\u611f\u5668\u50cf\u7d20</li>\n<li>\u53ef\u4ee5\u8bb0\u5f55\u5149\u7ebf\u7684\u4f4d\u7f6e\u548c\u65b9\u5411\u4fe1\u606f</li>\n</ul>\n<p><strong>\u5149\u573a\u91c7\u96c6\u7684\u6570\u5b66\u6a21\u578b</strong>\uff1a\n\u5fae\u900f\u955c\u4e0b\u7684\u50cf\u7d20$(p, q)$\u8bb0\u5f55\u7684\u5149\u573a\u503c\uff1a\n$$I(i, j, p, q) = \\int\\int L(i\\Delta_u, j\\Delta_v, p\\Delta_s, q\\Delta_t) \\cdot A(p, q) \\, ds \\, dt$$\n\u5176\u4e2d$(i, j)$\u662f\u5fae\u900f\u955c\u7d22\u5f15\uff0c$A(p, q)$\u662f\u50cf\u7d20\u54cd\u5e94\u51fd\u6570\u3002</p>\n<p><strong>\u5176\u4ed6\u91c7\u96c6\u65b9\u6cd5</strong>\uff1a</p>\n<ol>\n<li><strong>\u76f8\u673a\u9635\u5217</strong>\uff1a\u4f7f\u7528\u591a\u4e2a\u76f8\u673a\u4ece\u4e0d\u540c\u89c6\u70b9\u62cd\u6444</li>\n<li><strong>\u79fb\u52a8\u76f8\u673a</strong>\uff1a\u5355\u76f8\u673a\u5728\u4e0d\u540c\u4f4d\u7f6e\u62cd\u6444</li>\n<li><strong>\u7f16\u7801\u5b54\u5f84</strong>\uff1a\u4f7f\u7528\u7279\u6b8a\u56fe\u6848\u7684\u5b54\u5f84\u63a9\u6a21</li>\n<li><strong>\u65f6\u95f4\u590d\u7528</strong>\uff1a\u4f7f\u7528\u53ef\u7f16\u7a0b\u5b54\u5f84\u6216\u5feb\u95e8</li>\n</ol>\n<p><strong>\u5149\u573a\u91cd\u5efa\u7b97\u6cd5</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u63d2\u503c\u65b9\u6cd5</strong>\uff1a\n   - \u6700\u8fd1\u90bb\u63d2\u503c\n   - \u53cc\u7ebf\u6027\u63d2\u503c\n   - \u9ad8\u9636\u6837\u6761\u63d2\u503c</p>\n</li>\n<li>\n<p><strong>\u57fa\u4e8e\u6df1\u5ea6\u7684\u91cd\u5efa</strong>\uff1a\n   - \u4f30\u8ba1\u573a\u666f\u6df1\u5ea6\n   - \u6839\u636e\u6df1\u5ea6\u6295\u5f71\u5149\u7ebf\n   - \u5904\u7406\u906e\u6321\u548c\u8fb9\u754c</p>\n</li>\n<li>\n<p><strong>\u538b\u7f29\u611f\u77e5\u91cd\u5efa</strong>\uff1a\n   - \u5229\u7528\u5149\u573a\u7684\u7a00\u758f\u6027\n   - \u4f7f\u7528\u5b57\u5178\u5b66\u4e60\u6216\u6df1\u5ea6\u5b66\u4e60</p>\n</li>\n</ol>\n<h3 id=\"1023\">10.2.3 \u5149\u573a\u6e32\u67d3\u4e0e\u5e94\u7528</h3>\n<p><strong>\u6570\u5b57\u91cd\u805a\u7126</strong>\uff1a\n\u5149\u573a\u6700\u91cd\u8981\u7684\u5e94\u7528\u4e4b\u4e00\u662f\u540e\u671f\u91cd\u805a\u7126\u3002\u901a\u8fc7\u5bf9\u5149\u573a\u8fdb\u884c\u526a\u5207\u548c\u79ef\u5206\u64cd\u4f5c\uff1a\n$$I_\\alpha(x', y') = \\iint L\\left(\\frac{x'}{\\alpha}, \\frac{y'}{\\alpha}, x' - u\\frac{1-\\alpha}{\\alpha}, y' - v\\frac{1-\\alpha}{\\alpha}\\right) du dv$$\n\u5176\u4e2d $\\alpha$ \u662f\u91cd\u805a\u7126\u53c2\u6570\uff1a</p>\n<ul>\n<li>$\\alpha = 1$\uff1a\u805a\u7126\u5728\u4e3b\u900f\u955c\u5e73\u9762</li>\n<li>$\\alpha &gt; 1$\uff1a\u805a\u7126\u5728\u66f4\u8fdc\u5904</li>\n<li>$\\alpha &lt; 1$\uff1a\u805a\u7126\u5728\u66f4\u8fd1\u5904</li>\n</ul>\n<p><strong>\u526a\u5207\u53d8\u6362\u7684\u51e0\u4f55\u89e3\u91ca</strong>\uff1a\n\u91cd\u805a\u7126\u64cd\u4f5c\u5bf9\u5e94\u4e8e\u5149\u573a\u7684\u526a\u5207\u53d8\u6362\uff1a\n$$\\begin{bmatrix} u' \\ v' \\ s' \\ t' \\end{bmatrix} = \\begin{bmatrix} 1 &amp; 0 &amp; \\alpha &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; \\alpha \\ 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \\end{bmatrix} \\begin{bmatrix} u \\ v \\ s \\ t \\end{bmatrix}$$\n<strong>\u5408\u6210\u5b54\u5f84</strong>\uff1a\n\u901a\u8fc7\u7ec4\u5408\u4e0d\u540c\u89c6\u89d2\u7684\u5b50\u56fe\u50cf\uff0c\u53ef\u4ee5\uff1a</p>\n<ul>\n<li>\u6539\u53d8\u666f\u6df1\uff1a\u9009\u62e9\u4e0d\u540c\u7684$(u, v)$\u8303\u56f4</li>\n<li>\u900f\u89c6\u906e\u6321\u7269\uff1a\u5229\u7528\u89c6\u5dee\u4fe1\u606f</li>\n<li>\u4ea7\u751f\u7acb\u4f53\u89c6\u5dee\uff1a\u9009\u62e9\u5de6\u53f3\u89c6\u70b9</li>\n</ul>\n<p><strong>\u5b54\u5f84\u51fd\u6570\u8bbe\u8ba1</strong>\uff1a</p>\n<ul>\n<li>\u5706\u5f62\u5b54\u5f84\uff1a\u4f20\u7edf\u6a21\u7cca\u6548\u679c</li>\n<li>\u5fc3\u5f62\u5b54\u5f84\uff1a\u827a\u672f\u6548\u679c</li>\n<li>\u7f16\u7801\u5b54\u5f84\uff1a\u6df1\u5ea6\u4f30\u8ba1</li>\n</ul>\n<p><strong>\u5085\u91cc\u53f6\u5207\u7247\u5b9a\u7406</strong>\uff1a\n\u5149\u573a\u7684\u5085\u91cc\u53f6\u53d8\u6362\u4e2d\uff0c\u4e0d\u540c\u6df1\u5ea6\u7684\u91cd\u805a\u7126\u56fe\u50cf\u5bf9\u5e94\u4e8e4D\u9891\u57df\u4e2d\u76842D\u5207\u7247\u3002</p>\n<p><strong>\u5b9a\u7406\u9648\u8ff0</strong>\uff1a\n\u91cd\u805a\u7126\u56fe\u50cf\u7684\u9891\u8c31\u662f\u5149\u573a\u9891\u8c31\u7684\u4e00\u4e2a2D\u5207\u7247\uff1a\n$$\\hat{I}_\\alpha(\\Omega_x, \\Omega_y) = \\hat{L}(\\Omega_x, \\Omega_y, -\\alpha\\Omega_x, -\\alpha\\Omega_y)$$\n<strong>\u5e94\u7528\u610f\u4e49</strong>\uff1a</p>\n<ol>\n<li>\u9891\u57df\u6ee4\u6ce2\u53ef\u4ee5\u5b9e\u73b0\u7279\u5b9a\u6df1\u5ea6\u7684\u589e\u5f3a</li>\n<li>\u5feb\u901f\u91cd\u805a\u7126\u7b97\u6cd5\u8bbe\u8ba1</li>\n<li>\u6df1\u5ea6\u4f30\u8ba1\u7684\u9891\u57df\u65b9\u6cd5</li>\n</ol>\n<p><strong>\u5176\u4ed6\u5149\u573a\u5e94\u7528</strong>\uff1a</p>\n<ol>\n<li><strong>\u89c6\u70b9\u5408\u6210</strong>\uff1a\u751f\u6210\u65b0\u7684\u89c6\u89d2\u56fe\u50cf</li>\n<li><strong>\u8d85\u5206\u8fa8\u7387</strong>\uff1a\u5229\u7528\u591a\u89c6\u89d2\u4fe1\u606f\u63d0\u9ad8\u5206\u8fa8\u7387</li>\n<li><strong>\u6750\u8d28\u8bc6\u522b</strong>\uff1a\u5229\u7528BRDF\u4fe1\u606f</li>\n<li><strong>\u4e09\u7ef4\u91cd\u5efa</strong>\uff1a\u4ece\u5149\u573a\u6062\u590d\u51e0\u4f55</li>\n</ol>\n<h3 id=\"1024\">10.2.4 \u5149\u573a\u538b\u7f29\u4e0e\u4f20\u8f93</h3>\n<p>\u5149\u573a\u6570\u636e\u91cf\u5de8\u5927\uff0c\u9ad8\u6548\u7684\u538b\u7f29\u548c\u4f20\u8f93\u65b9\u6cd5\u81f3\u5173\u91cd\u8981\u3002</p>\n<p><strong>\u6570\u636e\u91cf\u5206\u6790</strong>\uff1a</p>\n<ul>\n<li>\u5178\u578b\u5149\u573a\uff1a$1000 \\times 1000 \\times 10 \\times 10 = 10^8$\u4e2a\u6837\u672c</li>\n<li>\u6bcf\u4e2a\u6837\u672c3\u4e2a\u989c\u8272\u901a\u9053\uff0c16\u4f4d\u7cbe\u5ea6</li>\n<li>\u603b\u6570\u636e\u91cf\uff1a~600MB\uff08\u672a\u538b\u7f29\uff09</li>\n</ul>\n<p><strong>\u7ef4\u5ea6\u964d\u4f4e\u7b56\u7565</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u57fa\u4e8e\u6df1\u5ea6\u7684\u5206\u5c42\u8868\u793a</strong>\uff1a\n   - \u5c06\u573a\u666f\u5206\u89e3\u4e3a\u591a\u4e2a\u6df1\u5ea6\u5c42\n   - \u6bcf\u5c42\u4f7f\u7528\u7eb9\u7406+\u900f\u660e\u5ea6\u8868\u793a\n   - \u5c42\u6570\u8fdc\u5c0f\u4e8e\u89d2\u5ea6\u6837\u672c\u6570</p>\n</li>\n<li>\n<p><strong>\u7a00\u758f\u91c7\u6837\u4e0e\u63d2\u503c</strong>\uff1a\n   - \u5229\u7528\u5149\u573a\u7684\u5e73\u6ed1\u6027\n   - \u81ea\u9002\u5e94\u91c7\u6837\uff1a\u8fb9\u7f18\u5bc6\u96c6\uff0c\u5e73\u6ed1\u533a\u57df\u7a00\u758f\n   - \u4f7f\u7528\u9ad8\u8d28\u91cf\u63d2\u503c\u7b97\u6cd5\u91cd\u5efa</p>\n</li>\n<li>\n<p><strong>\u57fa\u4e8e\u5b57\u5178\u7684\u538b\u7f29</strong>\uff1a\n   - \u5b66\u4e60\u5149\u573a\u5757\u7684\u5b57\u5178\u8868\u793a\n   - \u7a00\u758f\u7f16\u7801\uff1a$\\mathbf{l} = \\mathbf{D}\\mathbf{\\alpha}$\n   - \u5b57\u5178\u5b66\u4e60\uff1aK-SVD\u3001MOD\u7b97\u6cd5</p>\n</li>\n</ol>\n<p><strong>\u5149\u573a\u7f16\u7801\u6280\u672f</strong>\uff1a</p>\n<p><strong>\u5229\u7528\u76f8\u5173\u6027</strong>\uff1a</p>\n<ul>\n<li>\u7a7a\u95f4\u76f8\u5173\u6027\uff1a\u76f8\u90bb\u50cf\u7d20\u76f8\u4f3c</li>\n<li>\u89d2\u5ea6\u76f8\u5173\u6027\uff1a\u76f8\u90bb\u89c6\u70b9\u76f8\u4f3c</li>\n<li>\u7a7a\u95f4-\u89d2\u5ea6\u76f8\u5173\u6027\uff1a\u7531\u51e0\u4f55\u7ea6\u675f\u51b3\u5b9a</li>\n</ul>\n<p><strong>\u89c6\u5dee\u8865\u507f\u9884\u6d4b</strong>\uff1a\n$$L(u+\\Delta u, v+\\Delta v, s, t) \\approx L(u, v, s-d\\Delta u, t-d\\Delta v)$$\n\u5176\u4e2d$d$\u662f\u89c6\u5dee\uff0c\u4e0e\u6df1\u5ea6\u6210\u53cd\u6bd4\u3002</p>\n<p><strong>\u591a\u5c3a\u5ea6\u8868\u793a</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5c0f\u6ce2\u53d8\u6362</strong>\uff1a\n   - 4D\u5c0f\u6ce2\u5206\u89e3\n   - \u4fdd\u7559\u91cd\u8981\u7cfb\u6570\n   - \u91cf\u5316\u548c\u7f16\u7801</p>\n</li>\n<li>\n<p><strong>\u5206\u5c42\u8868\u793a</strong>\uff1a\n   - \u57fa\u7840\u5c42\uff1a\u4f4e\u5206\u8fa8\u7387\u5168\u5149\u573a\n   - \u589e\u5f3a\u5c42\uff1a\u9ad8\u9891\u7ec6\u8282\n   - \u6e10\u8fdb\u5f0f\u4f20\u8f93</p>\n</li>\n</ol>\n<p><strong>\u5b9e\u65f6\u4f20\u8f93\u4f18\u5316</strong>\uff1a</p>\n<ul>\n<li>\u89c6\u70b9\u9884\u6d4b\uff1a\u53ea\u4f20\u8f93\u53ef\u80fd\u7528\u5230\u7684\u6570\u636e</li>\n<li>\u6d41\u5f0f\u4f20\u8f93\uff1a\u6309\u9700\u52a0\u8f7d\u6570\u636e\u5757</li>\n<li>GPU\u52a0\u901f\u89e3\u7801\uff1a\u5e76\u884c\u5904\u7406\u5149\u573a\u5757</li>\n</ul>\n<p><strong>\u65b0\u5174\u538b\u7f29\u65b9\u6cd5</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u6df1\u5ea6\u5b66\u4e60\u65b9\u6cd5</strong>\uff1a\n   - \u81ea\u7f16\u7801\u5668\u7f51\u7edc\n   - \u751f\u6210\u5bf9\u6297\u7f51\u7edc(GAN)\n   - \u795e\u7ecf\u8f90\u5c04\u573a(NeRF)</p>\n</li>\n<li>\n<p><strong>\u9690\u5f0f\u8868\u793a</strong>\uff1a\n   - \u5c06\u5149\u573a\u8868\u793a\u4e3a\u795e\u7ecf\u7f51\u7edc\n   - \u6781\u9ad8\u7684\u538b\u7f29\u7387\n   - \u8fde\u7eed\u8868\u793a\uff0c\u53ef\u4efb\u610f\u5206\u8fa8\u7387\u91c7\u6837</p>\n</li>\n</ol>\n<h2 id=\"103\">10.3 \u989c\u8272\u79d1\u5b66\u4e0e\u611f\u77e5</h2>\n<h3 id=\"1031\">10.3.1 \u4eba\u7c7b\u89c6\u89c9\u7cfb\u7edf</h3>\n<p><strong>\u5149\u611f\u53d7\u5668</strong>\uff1a</p>\n<ul>\n<li>\u89c6\u6746\u7ec6\u80de\uff08Rods\uff09\uff1a\u7ea61.2\u4ebf\u4e2a\uff0c\u5bf9\u5149\u654f\u611f\uff0c\u65e0\u8272\u89c9</li>\n<li>\u89c6\u9525\u7ec6\u80de\uff08Cones\uff09\uff1a\u7ea6600\u4e07\u4e2a\uff0c\u5206\u4e3aL\u3001M\u3001S\u4e09\u79cd</li>\n<li>L\u578b\uff1a\u5cf0\u503c\u7ea6564nm\uff08\u7ea2\uff09</li>\n<li>M\u578b\uff1a\u5cf0\u503c\u7ea6534nm\uff08\u7eff\uff09</li>\n<li>S\u578b\uff1a\u5cf0\u503c\u7ea6420nm\uff08\u84dd\uff09</li>\n</ul>\n<p><strong>\u5149\u8c31\u54cd\u5e94\u51fd\u6570</strong>\uff1a\n$$\\bar{x}(\\lambda), \\bar{y}(\\lambda), \\bar{z}(\\lambda)$$\nCIE 1931\u6807\u51c6\u89c2\u5bdf\u8005\u5339\u914d\u51fd\u6570\u3002</p>\n<h3 id=\"1032\">10.3.2 \u8272\u5f69\u7a7a\u95f4\u4e0e\u53d8\u6362</h3>\n<p><strong>CIE XYZ\u8272\u5f69\u7a7a\u95f4</strong>\uff1a\n$$\\begin{aligned}\nX &amp;= \\int_{380}^{780} S(\\lambda)\\bar{x}(\\lambda)d\\lambda \\\nY &amp;= \\int_{380}^{780} S(\\lambda)\\bar{y}(\\lambda)d\\lambda \\\nZ &amp;= \\int_{380}^{780} S(\\lambda)\\bar{z}(\\lambda)d\\lambda\n\\end{aligned}$$\n<strong>\u8272\u5ea6\u5750\u6807</strong>\uff1a\n$$x = \\frac{X}{X+Y+Z}, \\quad y = \\frac{Y}{X+Y+Z}$$\n<strong>RGB\u5230XYZ\u53d8\u6362</strong>\uff08sRGB\uff09\uff1a\n$$\\begin{bmatrix} X \\ Y \\ Z \\end{bmatrix} = \\begin{bmatrix}\n0.4124 &amp; 0.3576 &amp; 0.1805 \\\n0.2126 &amp; 0.7152 &amp; 0.0722 \\\n0.0193 &amp; 0.1192 &amp; 0.9505\n\\end{bmatrix} \\begin{bmatrix} R \\ G \\ B \\end{bmatrix}$$</p>\n<h3 id=\"1033\">10.3.3 \u611f\u77e5\u5747\u5300\u8272\u5f69\u7a7a\u95f4</h3>\n<p><strong>CIELAB\uff08L<em>a</em>b*\uff09</strong>\uff1a\n$$\\begin{aligned}\nL^<em> &amp;= 116f(Y/Y_n) - 16 \\\na^</em> &amp;= 500[f(X/X_n) - f(Y/Y_n)] \\\nb^* &amp;= 200[f(Y/Y_n) - f(Z/Z_n)]\n\\end{aligned}$$\n\u5176\u4e2d\uff1a\n$$f(t) = \\begin{cases}\nt^{1/3} &amp; \\text{if } t &gt; \\delta^3 \\\n\\frac{t}{3\\delta^2} + \\frac{4}{29} &amp; \\text{otherwise}\n\\end{cases}$$\n$\\delta = 6/29$</p>\n<p><strong>\u8272\u5dee\u8ba1\u7b97</strong>\uff1a\n$$\\Delta E_{ab}^<em> = \\sqrt{(\\Delta L^</em>)^2 + (\\Delta a^<em>)^2 + (\\Delta b^</em>)^2}$$</p>\n<h3 id=\"1034\">10.3.4 \u8272\u5f69\u7ba1\u7406\u4e0e\u6821\u51c6</h3>\n<p><strong>ICC\u8272\u5f69\u914d\u7f6e\u6587\u4ef6</strong>\uff1a</p>\n<ul>\n<li>\u63cf\u8ff0\u8bbe\u5907\u7684\u8272\u5f69\u7279\u6027</li>\n<li>\u5305\u542b\u8272\u5f69\u7a7a\u95f4\u53d8\u6362\u77e9\u9635</li>\n<li>\u652f\u6301\u591a\u79cd\u6e32\u67d3\u610f\u56fe</li>\n</ul>\n<p><strong>\u8272\u57df\u6620\u5c04</strong>\uff1a</p>\n<ol>\n<li>\u611f\u77e5\u6e32\u67d3\uff08Perceptual\uff09</li>\n<li>\u76f8\u5bf9\u8272\u5ea6\uff08Relative Colorimetric\uff09</li>\n<li>\u7edd\u5bf9\u8272\u5ea6\uff08Absolute Colorimetric\uff09</li>\n<li>\u9971\u548c\u5ea6\uff08Saturation\uff09</li>\n</ol>\n<p><strong>\u663e\u793a\u5668\u6821\u51c6</strong>\uff1a</p>\n<ul>\n<li>\u767d\u70b9\u8bbe\u7f6e\uff08\u901a\u5e38D65\uff09</li>\n<li>\u4f3d\u9a6c\u6821\u6b63\uff08\u901a\u5e382.2\uff09</li>\n<li>\u8272\u57df\u8986\u76d6\u7387\u6d4b\u91cf</li>\n</ul>\n<h3 id=\"1035\">10.3.5 \u9ad8\u52a8\u6001\u8303\u56f4\u4e0e\u8272\u8c03\u6620\u5c04</h3>\n<p><strong>\u5bf9\u6570\u611f\u77e5\u6a21\u578b</strong>\uff1a\n\u4eba\u773c\u5bf9\u4eae\u5ea6\u7684\u611f\u77e5\u8fd1\u4f3c\u5bf9\u6570\u5173\u7cfb\uff1a\n$$L_{\\text{perceived}} = k \\log(L_{\\text{physical}} + \\epsilon)$$\n<strong>\u8272\u8c03\u6620\u5c04\u7b97\u5b50</strong>\uff1a</p>\n<p><strong>Reinhard\u7b97\u5b50</strong>\uff1a\n$$L_d = \\frac{L_w(1 + L_w/L_{white}^2)}{1 + L_w}$$\n\u5176\u4e2d $L_w$ \u662f\u4e16\u754c\u4eae\u5ea6\uff0c$L_{white}$ \u662f\u6620\u5c04\u5230\u767d\u8272\u7684\u4eae\u5ea6\u503c\u3002</p>\n<p><strong>\u57fa\u4e8e\u68af\u5ea6\u57df\u7684\u65b9\u6cd5</strong>\uff1a\n\u901a\u8fc7\u538b\u7f29\u4eae\u5ea6\u68af\u5ea6\u6765\u4fdd\u6301\u5c40\u90e8\u5bf9\u6bd4\u5ea6\uff1a\n$$\\nabla L_d = \\Phi(\\nabla L_w)$$\n\u5176\u4e2d $\\Phi$ \u662f\u68af\u5ea6\u8870\u51cf\u51fd\u6570\u3002</p>\n<h2 id=\"_1\">\u672c\u7ae0\u5c0f\u7ed3</h2>\n<p>\u672c\u7ae0\u7cfb\u7edf\u5730\u4ecb\u7ecd\u4e86\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u7684\u6210\u50cf\u7cfb\u7edf\uff0c\u6db5\u76d6\u4e86\u4ece\u7269\u7406\u76f8\u673a\u6a21\u578b\u5230\u4eba\u7c7b\u89c6\u89c9\u611f\u77e5\u7684\u5b8c\u6574\u77e5\u8bc6\u4f53\u7cfb\u3002</p>\n<h3 id=\"_2\">\u5173\u952e\u6982\u5ff5\u56de\u987e</h3>\n<p><strong>\u76f8\u673a\u6a21\u578b</strong>\uff1a</p>\n<ul>\n<li>\u9488\u5b54\u76f8\u673a\uff1a$\\mathbf{P} = \\mathbf{K}[\\mathbf{R}|\\mathbf{t}]$</li>\n<li>\u8584\u900f\u955c\u65b9\u7a0b\uff1a$\\frac{1}{f} = \\frac{1}{d_o} + \\frac{1}{d_i}$</li>\n<li>\u666f\u6df1\u4e0e\u5149\u5708\u7684\u5173\u7cfb\uff1a$\\text{DOF} \\propto N$</li>\n<li>\u7578\u53d8\u6a21\u578b\uff1a\u5f84\u5411\u7578\u53d8 + \u5207\u5411\u7578\u53d8</li>\n</ul>\n<p><strong>\u5149\u573a\u7406\u8bba</strong>\uff1a</p>\n<ul>\n<li>5D\u5168\u5149\u51fd\u6570\uff1a$L(x, y, z, \\theta, \\phi)$</li>\n<li>4D\u5149\u573a\u53c2\u6570\u5316\uff1a$L(u, v, s, t)$</li>\n<li>\u6570\u5b57\u91cd\u805a\u7126\u539f\u7406</li>\n<li>\u5085\u91cc\u53f6\u5207\u7247\u5b9a\u7406\u7684\u5e94\u7528</li>\n</ul>\n<p><strong>\u989c\u8272\u79d1\u5b66</strong>\uff1a</p>\n<ul>\n<li>CIE XYZ\u8272\u5f69\u7a7a\u95f4\u5b9a\u4e49</li>\n<li>\u611f\u77e5\u5747\u5300\u7a7a\u95f4\uff1aCIELAB</li>\n<li>\u8272\u5dee\u5ea6\u91cf\uff1a$\\Delta E_{ab}^*$</li>\n<li>HDR\u4e0e\u8272\u8c03\u6620\u5c04</li>\n</ul>\n<h3 id=\"_3\">\u91cd\u8981\u516c\u5f0f\u6c47\u603b</h3>\n<ol>\n<li><strong>\u8d85\u7126\u8ddd</strong>\uff1a$H = \\frac{f^2}{Nc} + f$</li>\n<li><strong>\u7ec4\u5408\u900f\u955c\u7126\u8ddd</strong>\uff1a$\\frac{1}{f} = \\frac{1}{f_1} + \\frac{1}{f_2} - \\frac{d}{f_1 f_2}$</li>\n<li><strong>\u8272\u5ea6\u5750\u6807</strong>\uff1a$x = \\frac{X}{X+Y+Z}$, $y = \\frac{Y}{X+Y+Z}$</li>\n<li><strong>Reinhard\u8272\u8c03\u6620\u5c04</strong>\uff1a$L_d = \\frac{L_w(1 + L_w/L_{white}^2)}{1 + L_w}$</li>\n</ol>\n<h3 id=\"_4\">\u5b9e\u9645\u5e94\u7528\u8981\u70b9</h3>\n<ol>\n<li>\u76f8\u673a\u6807\u5b9a\u65f6\u9700\u8981\u8003\u8651\u5185\u53c2\u548c\u7578\u53d8\u53c2\u6570</li>\n<li>\u5149\u573a\u76f8\u673a\u53ef\u5b9e\u73b0\u540e\u671f\u91cd\u805a\u7126\u548c\u89c6\u89d2\u8c03\u6574</li>\n<li>\u8272\u5f69\u7ba1\u7406\u9700\u8981\u5b8c\u6574\u7684ICC\u5de5\u4f5c\u6d41\u7a0b</li>\n<li>HDR\u6210\u50cf\u9700\u8981\u9002\u5f53\u7684\u8272\u8c03\u6620\u5c04\u7b97\u6cd5</li>\n</ol>\n<h2 id=\"_5\">\u7ec3\u4e60\u9898</h2>\n<h3 id=\"_6\">\u57fa\u7840\u9898</h3>\n<p><strong>\u4e60\u989810.1</strong>\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u7126\u8ddd\u4e3a50mm\u7684\u8584\u900f\u955c\uff0c\u7269\u8ddd\u4e3a2m\uff0c\u6c42\u50cf\u8ddd\u548c\u653e\u5927\u7387\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u4f7f\u7528\u8584\u900f\u955c\u65b9\u7a0b $\\frac{1}{f} = \\frac{1}{d_o} + \\frac{1}{d_i}$</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u7531\u8584\u900f\u955c\u65b9\u7a0b\uff1a\n$$\\frac{1}{50} = \\frac{1}{2000} + \\frac{1}{d_i}$$\n$$\\frac{1}{d_i} = \\frac{1}{50} - \\frac{1}{2000} = \\frac{40-1}{2000} = \\frac{39}{2000}$$\n$$d_i = \\frac{2000}{39} \\approx 51.28 \\text{mm}$$\n\u653e\u5927\u7387\uff1a$M = -\\frac{d_i}{d_o} = -\\frac{51.28}{2000} \\approx -0.0256$</p>\n<p>\u8d1f\u53f7\u8868\u793a\u50cf\u662f\u5012\u7acb\u7684\uff0c\u653e\u5927\u7387\u7ea6\u4e3a1:39\u3002</p>\n</details>\n<p><strong>\u4e60\u989810.2</strong>\uff1a\u5df2\u77e5\u76f8\u673a\u7684\u5149\u5708\u4e3af/2.8\uff0c\u7126\u8ddd\u4e3a85mm\uff0c\u5bf9\u7126\u57285m\u5904\uff0c\u5f25\u6563\u5706\u76f4\u5f84\u4e3a0.03mm\u3002\u8ba1\u7b97\u666f\u6df1\u8303\u56f4\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u5148\u8ba1\u7b97\u8d85\u7126\u8ddd $H = \\frac{f^2}{Nc} + f$\uff0c\u7136\u540e\u8ba1\u7b97\u8fd1\u666f\u6df1\u548c\u8fdc\u666f\u6df1\u754c\u9650\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u8d85\u7126\u8ddd\uff1a\n$$H = \\frac{85^2}{2.8 \\times 0.03} + 85 = \\frac{7225}{0.084} + 85 \\approx 86012 + 85 \\approx 86.1 \\text{m}$$\n\u8fd1\u666f\u6df1\u754c\u9650\uff1a\n$$D_n = \\frac{Hd}{H + d - f} = \\frac{86100 \\times 5000}{86100 + 5000 - 85} \\approx 4.74 \\text{m}$$\n\u8fdc\u666f\u6df1\u754c\u9650\uff1a\n$$D_f = \\frac{Hd}{H - d + f} = \\frac{86100 \\times 5000}{86100 - 5000 + 85} \\approx 5.30 \\text{m}$$\n\u666f\u6df1\u8303\u56f4\uff1a4.74m - 5.30m\uff0c\u603b\u666f\u6df1\u7ea60.56m\u3002</p>\n</details>\n<p><strong>\u4e60\u989810.3</strong>\uff1a\u5c06RGB\u989c\u8272(0.8, 0.6, 0.2)\u8f6c\u6362\u4e3aCIE XYZ\u8272\u5f69\u7a7a\u95f4\uff08\u5047\u8bbesRGB\uff09\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u4f7f\u7528sRGB\u5230XYZ\u7684\u8f6c\u6362\u77e9\u9635\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u4f7f\u7528\u8f6c\u6362\u77e9\u9635\uff1a\n$$\\begin{bmatrix} X \\ Y \\ Z \\end{bmatrix} = \\begin{bmatrix}\n0.4124 &amp; 0.3576 &amp; 0.1805 \\\n0.2126 &amp; 0.7152 &amp; 0.0722 \\\n0.0193 &amp; 0.1192 &amp; 0.9505\n\\end{bmatrix} \\begin{bmatrix} 0.8 \\ 0.6 \\ 0.2 \\end{bmatrix}$$\n\u8ba1\u7b97\u5f97\uff1a</p>\n<ul>\n<li>$X = 0.4124 \\times 0.8 + 0.3576 \\times 0.6 + 0.1805 \\times 0.2 = 0.5801$</li>\n<li>$Y = 0.2126 \\times 0.8 + 0.7152 \\times 0.6 + 0.0722 \\times 0.2 = 0.6136$</li>\n<li>$Z = 0.0193 \\times 0.8 + 0.1192 \\times 0.6 + 0.9505 \\times 0.2 = 0.2769$</li>\n</ul>\n</details>\n<p><strong>\u4e60\u989810.4</strong>\uff1a\u5149\u573a\u76f8\u673a\u7684\u5fae\u900f\u955c\u9635\u5217\u6709100\u00d7100\u4e2a\u5fae\u900f\u955c\uff0c\u6bcf\u4e2a\u5fae\u900f\u955c\u4e0b\u670910\u00d710\u4e2a\u50cf\u7d20\u3002\u8ba1\u7b97\u5149\u573a\u7684\u7a7a\u95f4\u548c\u89d2\u5ea6\u5206\u8fa8\u7387\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u7a7a\u95f4\u5206\u8fa8\u7387\u5bf9\u5e94\u5fae\u900f\u955c\u6570\u91cf\uff0c\u89d2\u5ea6\u5206\u8fa8\u7387\u5bf9\u5e94\u6bcf\u4e2a\u5fae\u900f\u955c\u4e0b\u7684\u50cf\u7d20\u6570\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<ul>\n<li>\u7a7a\u95f4\u5206\u8fa8\u7387\uff1a100\u00d7100 = 10,000\u4e2a\u7a7a\u95f4\u6837\u672c</li>\n<li>\u89d2\u5ea6\u5206\u8fa8\u7387\uff1a10\u00d710 = 100\u4e2a\u89d2\u5ea6\u6837\u672c</li>\n<li>\u603b\u7684\u5149\u573a\u5206\u8fa8\u7387\uff1a10,000 \u00d7 100 = 1,000,000\u4e2a\u5149\u7ebf\u6837\u672c</li>\n<li>\u5982\u679c\u7528\u4e8e2D\u6210\u50cf\uff0c\u6700\u5927\u56fe\u50cf\u5206\u8fa8\u7387\u4e3a100\u00d7100\u50cf\u7d20</li>\n</ul>\n</details>\n<h3 id=\"_7\">\u6311\u6218\u9898</h3>\n<p><strong>\u4e60\u989810.5</strong>\uff1a\u63a8\u5bfc\u5f84\u5411\u7578\u53d8\u7684\u9006\u53d8\u6362\u516c\u5f0f\u3002\u5df2\u77e5\u7578\u53d8\u6a21\u578b\u4e3a $r_d = r_u(1 + k_1r_u^2)$\uff08\u4ec5\u8003\u8651\u4e00\u9636\u9879\uff09\uff0c\u6c42\u4ece\u7578\u53d8\u5750\u6807\u5230\u672a\u7578\u53d8\u5750\u6807\u7684\u53d8\u6362\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u8fd9\u662f\u4e00\u4e2a\u4e09\u6b21\u65b9\u7a0b\uff0c\u53ef\u4ee5\u4f7f\u7528\u725b\u987f\u8fed\u4ee3\u6cd5\u6216\u89e3\u6790\u89e3\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u7ed9\u5b9a $r_d = r_u(1 + k_1r_u^2)$\uff0c\u9700\u8981\u4ece $r_d$ \u6c42 $r_u$\u3002</p>\n<p>\u4ee4 $f(r_u) = r_u(1 + k_1r_u^2) - r_d = 0$</p>\n<p>\u725b\u987f\u8fed\u4ee3\u6cd5\uff1a\n$$r_{u,n+1} = r_{u,n} - \\frac{f(r_{u,n})}{f'(r_{u,n})}$$\n\u5176\u4e2d $f'(r_u) = 1 + 3k_1r_u^2$</p>\n<p>\u8fed\u4ee3\u516c\u5f0f\uff1a\n$$r_{u,n+1} = r_{u,n} - \\frac{r_{u,n}(1 + k_1r_{u,n}^2) - r_d}{1 + 3k_1r_{u,n}^2}$$\n\u521d\u59cb\u503c\u53ef\u9009 $r_{u,0} = r_d$\u3002</p>\n<p>\u5bf9\u4e8e\u5c0f\u7578\u53d8\uff08$|k_1r_u^2| \\ll 1$\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd1\u4f3c\uff1a\n$$r_u \\approx r_d(1 - k_1r_d^2)$$</p>\n</details>\n<p><strong>\u4e60\u989810.6</strong>\uff1a\u8bbe\u8ba1\u4e00\u4e2a\u7b97\u6cd5\uff0c\u4ece\u4e00\u7ec4\u4e0d\u540c\u7126\u8ddd\u7684\u56fe\u50cf\u4e2d\u6062\u590d\u573a\u666f\u7684\u6df1\u5ea6\u56fe\u3002\u5047\u8bbe\u76f8\u673a\u5185\u53c2\u5df2\u77e5\uff0c\u56fe\u50cf\u5df2\u914d\u51c6\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u5229\u7528\u6563\u7126\u6a21\u7cca\u4e0e\u6df1\u5ea6\u7684\u5173\u7cfb\uff0c\u53ef\u4ee5\u901a\u8fc7\u5206\u6790\u4e0d\u540c\u7126\u8ddd\u4e0b\u7684\u6a21\u7cca\u7a0b\u5ea6\u6765\u4f30\u8ba1\u6df1\u5ea6\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u6df1\u5ea6\u4ece\u6563\u7126\uff08Depth from Defocus\uff09\u7b97\u6cd5\uff1a</p>\n<ol>\n<li>\n<p><strong>\u6a21\u7cca\u5706\u76f4\u5f84\u4e0e\u6df1\u5ea6\u5173\u7cfb</strong>\uff1a\n$$b = \\frac{|d - d_f|}{d} \\cdot \\frac{f}{N} \\cdot \\frac{1}{d_f}$$\n\u5176\u4e2d $d$ \u662f\u6df1\u5ea6\uff0c$d_f$ \u662f\u5bf9\u7126\u6df1\u5ea6\uff0c$f$ \u662f\u7126\u8ddd\uff0c$N$ \u662f\u5149\u5708\u6570\u3002</p>\n</li>\n<li>\n<p><strong>\u7b97\u6cd5\u6b65\u9aa4</strong>\uff1a\n   - \u5bf9\u6bcf\u4e2a\u50cf\u7d20\u4f4d\u7f6e\uff0c\u6d4b\u91cf\u4e0d\u540c\u7126\u8ddd\u56fe\u50cf\u4e2d\u7684\u5c40\u90e8\u6a21\u7cca\u7a0b\u5ea6\n   - \u4f7f\u7528\u62c9\u666e\u62c9\u65af\u7b97\u5b50\u6216\u68af\u5ea6\u5e45\u503c\u4f5c\u4e3a\u6e05\u6670\u5ea6\u5ea6\u91cf\n   - \u627e\u5230\u6700\u6e05\u6670\u7684\u7126\u8ddd\u8bbe\u7f6e\uff0c\u5bf9\u5e94\u8be5\u70b9\u7684\u6df1\u5ea6\n   - \u4f7f\u7528\u6a21\u7cca\u7a0b\u5ea6\u53d8\u5316\u7387\u7ec6\u5316\u6df1\u5ea6\u4f30\u8ba1</p>\n</li>\n<li>\n<p><strong>\u4f18\u5316\u76ee\u6807</strong>\uff1a\n$$d^* = \\arg\\min_d \\sum_{i} |I_i - B(I_{\\text{sharp}}, b_i(d))|^2$$\n\u5176\u4e2d $B$ \u662f\u6a21\u7cca\u7b97\u5b50\uff0c$b_i(d)$ \u662f\u7b2c $i$ \u5f20\u56fe\u50cf\u5728\u6df1\u5ea6 $d$ \u5904\u7684\u6a21\u7cca\u6838\u5927\u5c0f\u3002</p>\n</li>\n<li>\n<p><strong>\u5b9e\u9645\u8003\u8651</strong>\uff1a\n   - \u4f7f\u7528\u591a\u5c3a\u5ea6\u65b9\u6cd5\u63d0\u9ad8\u9c81\u68d2\u6027\n   - \u8003\u8651\u8fb9\u7f18\u5904\u7684\u906e\u6321\u95ee\u9898\n   - \u4f7f\u7528\u6b63\u5219\u5316\u4fdd\u6301\u6df1\u5ea6\u56fe\u5e73\u6ed1</p>\n</li>\n</ol>\n</details>\n<p><strong>\u4e60\u989810.7</strong>\uff1a\u63a8\u5bfc4D\u5149\u573a\u7684\u5085\u91cc\u53f6\u5207\u7247\u5b9a\u7406\uff0c\u5e76\u89e3\u91ca\u5176\u5728\u5149\u573a\u5904\u7406\u4e2d\u7684\u5e94\u7528\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u8003\u8651\u5149\u573a\u7684\u5085\u91cc\u53f6\u53d8\u6362\u548c\u91cd\u805a\u7126\u64cd\u4f5c\u5728\u9891\u57df\u7684\u8868\u73b0\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p><strong>\u5085\u91cc\u53f6\u5207\u7247\u5b9a\u7406</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>4D\u5149\u573a\u7684\u5085\u91cc\u53f6\u53d8\u6362</strong>\uff1a\n$$\\hat{L}(\\Omega_x, \\Omega_y, \\Omega_u, \\Omega_v) = \\mathcal{F}{L(x, y, u, v)}$$</p>\n</li>\n<li>\n<p><strong>\u91cd\u805a\u7126\u64cd\u4f5c</strong>\uff08\u526a\u5207\u53d8\u6362\uff09\uff1a\n$$L_\\alpha(x, y, u, v) = L(x + \\alpha u, y + \\alpha v, u, v)$$</p>\n</li>\n<li>\n<p><strong>\u9891\u57df\u8868\u793a</strong>\uff1a\n   \u91cd\u805a\u7126\u5728\u9891\u57df\u5bf9\u5e94\u4e8e\uff1a\n$$\\hat{L}_\\alpha(\\Omega_x, \\Omega_y, \\Omega_u, \\Omega_v) = \\hat{L}(\\Omega_x, \\Omega_y, \\Omega_u - \\alpha\\Omega_x, \\Omega_v - \\alpha\\Omega_y)$$</p>\n</li>\n<li>\n<p><strong>2D\u5207\u7247</strong>\uff1a\n   \u91cd\u805a\u7126\u56fe\u50cf\u7684\u9891\u8c31\u662f4D\u9891\u8c31\u76842D\u5207\u7247\uff1a\n$$\\hat{I}_\\alpha(\\Omega_x, \\Omega_y) = \\hat{L}(\\Omega_x, \\Omega_y, -\\alpha\\Omega_x, -\\alpha\\Omega_y)$$\n<strong>\u5e94\u7528</strong>\uff1a</p>\n</li>\n</ol>\n<ul>\n<li>\u5feb\u901f\u91cd\u805a\u7126\uff1a\u5728\u9891\u57df\u8fdb\u884c\u5207\u7247\u6bd4\u7a7a\u57df\u79ef\u5206\u66f4\u9ad8\u6548</li>\n<li>\u6df1\u5ea6\u4f30\u8ba1\uff1a\u4e0d\u540c\u6df1\u5ea6\u5bf9\u5e94\u4e0d\u540c\u7684\u9891\u57df\u5207\u7247\u89d2\u5ea6</li>\n<li>\u5149\u573a\u538b\u7f29\uff1a\u5229\u7528\u9891\u57df\u7a00\u758f\u6027\u8fdb\u884c\u538b\u7f29</li>\n<li>\u5149\u573a\u6ee4\u6ce2\uff1a\u57284D\u9891\u57df\u8bbe\u8ba1\u6ee4\u6ce2\u5668</li>\n</ul>\n</details>\n<p><strong>\u4e60\u989810.8</strong>\uff1a\u8bbe\u8ba1\u4e00\u4e2a\u611f\u77e5\u5747\u5300\u7684HDR\u8272\u8c03\u6620\u5c04\u7b97\u6cd5\uff0c\u8981\u6c42\u4fdd\u6301\u5c40\u90e8\u5bf9\u6bd4\u5ea6\u5e76\u907f\u514d\u5149\u6655\u6548\u5e94\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u7ed3\u5408\u4eba\u773c\u611f\u77e5\u6a21\u578b\u3001\u591a\u5c3a\u5ea6\u5206\u89e3\u548c\u68af\u5ea6\u57df\u5904\u7406\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p><strong>\u591a\u5c3a\u5ea6\u611f\u77e5\u8272\u8c03\u6620\u5c04\u7b97\u6cd5</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5bf9\u6570\u57df\u8f6c\u6362</strong>\uff1a\n$$L_{\\log} = \\log(L_w + \\epsilon)$$</p>\n</li>\n<li>\n<p><strong>\u591a\u5c3a\u5ea6\u5206\u89e3</strong>\uff08\u4f7f\u7528\u9ad8\u65af\u91d1\u5b57\u5854\uff09\uff1a\n$$L_{\\log} = B_0 + \\sum_{i=1}^{N} D_i$$\n\u5176\u4e2d $B_0$ \u662f\u57fa\u7840\u5c42\uff0c$D_i$ \u662f\u7ec6\u8282\u5c42\u3002</p>\n</li>\n<li>\n<p><strong>\u57fa\u7840\u5c42\u538b\u7f29</strong>\uff1a\n$$B_0' = \\frac{B_0 - B_{\\min}}{B_{\\max} - B_{\\min}} \\cdot (L_{\\max} - L_{\\min}) + L_{\\min}$$</p>\n</li>\n<li>\n<p><strong>\u7ec6\u8282\u5c42\u589e\u5f3a</strong>\uff08\u4fdd\u6301\u5c40\u90e8\u5bf9\u6bd4\u5ea6\uff09\uff1a\n$$D_i' = \\sigma(|D_i|) \\cdot \\text{sign}(D_i) \\cdot |D_i|^{\\gamma_i}$$\n\u5176\u4e2d $\\sigma$ \u662fsigmoid\u51fd\u6570\uff0c$\\gamma_i$ \u968f\u5c3a\u5ea6\u53d8\u5316\u3002</p>\n</li>\n<li>\n<p><strong>\u91cd\u5efa</strong>\uff1a\n$$L_{\\log}' = B_0' + \\sum_{i=1}^{N} w_i D_i'$$\n\u6743\u91cd $w_i$ \u57fa\u4e8e\u5c40\u90e8\u5bf9\u6bd4\u5ea6\u81ea\u9002\u5e94\u8c03\u6574\u3002</p>\n</li>\n<li>\n<p><strong>\u907f\u514d\u5149\u6655</strong>\uff1a\n   - \u4f7f\u7528\u8fb9\u7f18\u505c\u6b62\u51fd\u6570\u9650\u5236\u8de8\u8fb9\u7f18\u7684\u5e73\u6ed1\n   - \u68af\u5ea6\u57df\u7ea6\u675f\uff1a$|\\nabla L_{\\log}' - \\Phi(\\nabla L_{\\log})| &lt; \\tau$</p>\n</li>\n<li>\n<p><strong>\u7ebf\u6027\u57df\u8f6c\u6362</strong>\uff1a\n$$L_d = \\exp(L_{\\log}') - \\epsilon$$</p>\n</li>\n</ol>\n<p>\u8be5\u7b97\u6cd5\u901a\u8fc7\u591a\u5c3a\u5ea6\u5904\u7406\u5206\u79bb\u5168\u5c40\u4eae\u5ea6\u548c\u5c40\u90e8\u7ec6\u8282\uff0c\u4fdd\u6301\u611f\u77e5\u5747\u5300\u6027\u7684\u540c\u65f6\u907f\u514d\u5149\u6655\u6548\u5e94\u3002</p>\n</details>\n<h2 id=\"_8\">\u5e38\u89c1\u9677\u9631\u4e0e\u9519\u8bef</h2>\n<h3 id=\"_9\">\u76f8\u673a\u6a21\u578b\u76f8\u5173</h3>\n<p><strong>\u9677\u96311\uff1a\u6df7\u6dc6\u7269\u7406\u7126\u8ddd\u548c\u7b49\u6548\u7126\u8ddd</strong></p>\n<ul>\n<li>\u9519\u8bef\uff1a\u76f4\u63a5\u4f7f\u7528\u4f20\u611f\u5668\u5c3a\u5bf8\u4e0d\u540c\u7684\u76f8\u673a\u7126\u8ddd\u8fdb\u884c\u6bd4\u8f83</li>\n<li>\u6b63\u786e\uff1a\u8f6c\u6362\u4e3a35mm\u7b49\u6548\u7126\u8ddd\u6216\u4f7f\u7528\u89c6\u573a\u89d2</li>\n<li>\u8c03\u8bd5\uff1a\u68c0\u67e5\u4f20\u611f\u5668\u5c3a\u5bf8\u548c\u88c1\u526a\u56e0\u5b50</li>\n</ul>\n<p><strong>\u9677\u96312\uff1a\u5f84\u5411\u7578\u53d8\u6821\u6b63\u987a\u5e8f\u9519\u8bef</strong></p>\n<ul>\n<li>\u9519\u8bef\uff1a\u5148\u8fdb\u884c\u5176\u4ed6\u51e0\u4f55\u53d8\u6362\uff0c\u518d\u6821\u6b63\u7578\u53d8</li>\n<li>\u6b63\u786e\uff1a\u7578\u53d8\u6821\u6b63\u5e94\u5728\u5176\u4ed6\u53d8\u6362\u4e4b\u524d\u8fdb\u884c</li>\n<li>\u8c03\u8bd5\uff1a\u53ef\u89c6\u5316\u6821\u6b63\u524d\u540e\u7684\u7f51\u683c\u56fe\u6848</li>\n</ul>\n<p><strong>\u9677\u96313\uff1a\u5ffd\u7565\u4e3b\u70b9\u504f\u79fb</strong></p>\n<ul>\n<li>\u9519\u8bef\uff1a\u5047\u8bbe\u4e3b\u70b9\u5728\u56fe\u50cf\u4e2d\u5fc3</li>\n<li>\u6b63\u786e\uff1a\u4f7f\u7528\u6807\u5b9a\u5f97\u5230\u7684\u51c6\u786e\u4e3b\u70b9\u4f4d\u7f6e</li>\n<li>\u8c03\u8bd5\uff1a\u68c0\u67e5\u76f8\u673a\u6807\u5b9a\u7ed3\u679c\u7684\u4e3b\u70b9\u53c2\u6570</li>\n</ul>\n<h3 id=\"_10\">\u5149\u573a\u5904\u7406\u76f8\u5173</h3>\n<p><strong>\u9677\u96314\uff1a\u5149\u573a\u91c7\u6837\u4e0d\u8db3</strong></p>\n<ul>\n<li>\u9519\u8bef\uff1a\u89d2\u5ea6\u91c7\u6837\u7387\u8fc7\u4f4e\u5bfc\u81f4\u6df7\u53e0</li>\n<li>\u6b63\u786e\uff1a\u6ee1\u8db3\u5948\u594e\u65af\u7279\u91c7\u6837\u5b9a\u7406</li>\n<li>\u8c03\u8bd5\uff1a\u68c0\u67e5\u91cd\u805a\u7126\u56fe\u50cf\u662f\u5426\u6709\u91cd\u5f71</li>\n</ul>\n<p><strong>\u9677\u96315\uff1a\u5149\u573a\u6570\u636e\u7ef4\u5ea6\u6df7\u6dc6</strong></p>\n<ul>\n<li>\u9519\u8bef\uff1a\u6df7\u6dc6\u7a7a\u95f4\u5750\u6807\u548c\u89d2\u5ea6\u5750\u6807</li>\n<li>\u6b63\u786e\uff1a\u660e\u786e\u533a\u5206(u,v)\u548c(s,t)\u7684\u7269\u7406\u610f\u4e49</li>\n<li>\u8c03\u8bd5\uff1a\u53ef\u89c6\u5316\u5b50\u5b54\u5f84\u56fe\u50cf\u6392\u5217</li>\n</ul>\n<p><strong>\u9677\u96316\uff1a\u5085\u91cc\u53f6\u57df\u5904\u7406\u8fb9\u754c\u6548\u5e94</strong></p>\n<ul>\n<li>\u9519\u8bef\uff1a\u76f4\u63a5\u8fdb\u884cFFT\u800c\u4e0d\u8003\u8651\u8fb9\u754c</li>\n<li>\u6b63\u786e\uff1a\u4f7f\u7528\u9002\u5f53\u7684\u7a97\u51fd\u6570\u6216\u586b\u5145</li>\n<li>\u8c03\u8bd5\uff1a\u68c0\u67e5\u9891\u8c31\u662f\u5426\u6709\u4e0d\u8fde\u7eed</li>\n</ul>\n<h3 id=\"_11\">\u989c\u8272\u5904\u7406\u76f8\u5173</h3>\n<p><strong>\u9677\u96317\uff1a\u5ffd\u7565gamma\u6821\u6b63</strong></p>\n<ul>\n<li>\u9519\u8bef\uff1a\u5728sRGB\u7a7a\u95f4\u76f4\u63a5\u8fdb\u884c\u7ebf\u6027\u8fd0\u7b97</li>\n<li>\u6b63\u786e\uff1a\u5148\u8f6c\u6362\u5230\u7ebf\u6027\u7a7a\u95f4\uff0c\u8fd0\u7b97\u540e\u518d\u8f6c\u56de</li>\n<li>\u8c03\u8bd5\uff1a\u68c0\u67e5\u4e2d\u95f4\u8272\u8c03\u662f\u5426\u6b63\u786e</li>\n</ul>\n<p><strong>\u9677\u96318\uff1a\u8272\u5f69\u7a7a\u95f4\u8f6c\u6362\u7cbe\u5ea6\u635f\u5931</strong></p>\n<ul>\n<li>\u9519\u8bef\uff1a\u4f7f\u75288\u4f4d\u6574\u6570\u8fdb\u884c\u4e2d\u95f4\u8ba1\u7b97</li>\n<li>\u6b63\u786e\uff1a\u4f7f\u7528\u6d6e\u70b9\u6570\u4fdd\u6301\u7cbe\u5ea6</li>\n<li>\u8c03\u8bd5\uff1a\u5f80\u8fd4\u8f6c\u6362\u68c0\u67e5\u8bef\u5dee\u7d2f\u79ef</li>\n</ul>\n<p><strong>\u9677\u96319\uff1a\u767d\u5e73\u8861\u4e0e\u8272\u5f69\u7a7a\u95f4\u4e0d\u5339\u914d</strong></p>\n<ul>\n<li>\u9519\u8bef\uff1a\u5728\u9519\u8bef\u7684\u8272\u5f69\u7a7a\u95f4\u5e94\u7528\u767d\u5e73\u8861</li>\n<li>\u6b63\u786e\uff1a\u5728\u7ebf\u6027RGB\u7a7a\u95f4\u8fdb\u884c\u767d\u5e73\u8861</li>\n<li>\u8c03\u8bd5\uff1a\u4f7f\u7528\u7070\u5361\u9a8c\u8bc1\u767d\u5e73\u8861\u6548\u679c</li>\n</ul>\n<h3 id=\"hdr\">HDR\u76f8\u5173</h3>\n<p><strong>\u9677\u963110\uff1aHDR\u5408\u6210\u4e2d\u7684\u8fd0\u52a8\u4f2a\u5f71</strong></p>\n<ul>\n<li>\u9519\u8bef\uff1a\u76f4\u63a5\u5408\u6210\u672a\u5bf9\u9f50\u7684\u591a\u66dd\u5149\u56fe\u50cf</li>\n<li>\u6b63\u786e\uff1a\u5148\u8fdb\u884c\u56fe\u50cf\u914d\u51c6\u6216\u4f7f\u7528\u9b3c\u5f71\u6d88\u9664</li>\n<li>\u8c03\u8bd5\uff1a\u68c0\u67e5\u8fd0\u52a8\u533a\u57df\u7684\u5408\u6210\u6548\u679c</li>\n</ul>\n<p><strong>\u9677\u963111\uff1a\u8272\u8c03\u6620\u5c04\u53c2\u6570\u9009\u62e9\u4e0d\u5f53</strong></p>\n<ul>\n<li>\u9519\u8bef\uff1a\u4f7f\u7528\u56fa\u5b9a\u53c2\u6570\u5904\u7406\u6240\u6709\u56fe\u50cf</li>\n<li>\u6b63\u786e\uff1a\u6839\u636e\u573a\u666f\u52a8\u6001\u8303\u56f4\u81ea\u9002\u5e94\u8c03\u6574</li>\n<li>\u8c03\u8bd5\uff1a\u68c0\u67e5\u9ad8\u5149\u548c\u9634\u5f71\u7ec6\u8282\u4fdd\u7559</li>\n</ul>\n<p><strong>\u9677\u963112\uff1a\u5ffd\u7565\u663e\u793a\u8bbe\u5907\u9650\u5236</strong></p>\n<ul>\n<li>\u9519\u8bef\uff1a\u5047\u8bbe\u663e\u793a\u5668\u53ef\u4ee5\u51c6\u786e\u663e\u793a\u6240\u6709\u989c\u8272</li>\n<li>\u6b63\u786e\uff1a\u8003\u8651\u663e\u793a\u5668\u8272\u57df\u548c\u4eae\u5ea6\u8303\u56f4</li>\n<li>\u8c03\u8bd5\uff1a\u4f7f\u7528\u8272\u5f69\u7ba1\u7406\u7684\u663e\u793a\u5668\u9a8c\u8bc1</li>\n</ul>\n<h2 id=\"_12\">\u6700\u4f73\u5b9e\u8df5\u68c0\u67e5\u6e05\u5355</h2>\n<h3 id=\"_13\">\u76f8\u673a\u7cfb\u7edf\u8bbe\u8ba1</h3>\n<ul>\n<li>[ ] <strong>\u76f8\u673a\u6807\u5b9a</strong></li>\n<li>\u4f7f\u7528\u9ad8\u8d28\u91cf\u6807\u5b9a\u677f\uff08\u68cb\u76d8\u683c\u6216\u5706\u70b9\u9635\u5217\uff09</li>\n<li>\u91c7\u96c6\u4e0d\u540c\u89d2\u5ea6\u548c\u8ddd\u79bb\u7684\u6807\u5b9a\u56fe\u50cf\uff08\u81f3\u5c1120\u5f20\uff09</li>\n<li>\u9a8c\u8bc1\u91cd\u6295\u5f71\u8bef\u5dee\u5728\u4e9a\u50cf\u7d20\u7ea7\u522b</li>\n<li>\n<p>\u5b9a\u671f\u91cd\u65b0\u6807\u5b9a\u4ee5\u5e94\u5bf9\u673a\u68b0\u5f62\u53d8</p>\n</li>\n<li>\n<p>[ ] <strong>\u955c\u5934\u9009\u62e9</strong></p>\n</li>\n<li>\u6839\u636e\u5e94\u7528\u573a\u666f\u9009\u62e9\u5408\u9002\u7126\u8ddd</li>\n<li>\u8003\u8651\u5149\u5708\u8303\u56f4\u548c\u666f\u6df1\u9700\u6c42</li>\n<li>\u8bc4\u4f30\u955c\u5934\u7578\u53d8\u548c\u8272\u5dee\u7279\u6027</li>\n<li>\n<p>\u5e73\u8861\u6210\u50cf\u8d28\u91cf\u548c\u6210\u672c</p>\n</li>\n<li>\n<p>[ ] <strong>\u56fe\u50cf\u91c7\u96c6</strong></p>\n</li>\n<li>\u8bbe\u7f6e\u5408\u9002\u7684\u66dd\u5149\u53c2\u6570\uff08\u907f\u514d\u8fc7\u66dd\u548c\u6b20\u66dd\uff09</li>\n<li>\u4f7f\u7528RAW\u683c\u5f0f\u4fdd\u7559\u6700\u5927\u52a8\u6001\u8303\u56f4</li>\n<li>\u8003\u8651\u73af\u5883\u5149\u7167\u6761\u4ef6</li>\n<li>\u5b9e\u65bd\u8fd0\u52a8\u6a21\u7cca\u8865\u507f\uff08\u5982\u9700\u8981\uff09</li>\n</ul>\n<h3 id=\"_14\">\u5149\u573a\u7cfb\u7edf\u5b9e\u73b0</h3>\n<ul>\n<li>[ ] <strong>\u786c\u4ef6\u914d\u7f6e</strong></li>\n<li>\u5fae\u900f\u955c\u9635\u5217\u4e0e\u4f20\u611f\u5668\u7cbe\u786e\u5bf9\u51c6</li>\n<li>\u9009\u62e9\u5408\u9002\u7684\u7a7a\u95f4-\u89d2\u5ea6\u5206\u8fa8\u7387\u6743\u8861</li>\n<li>\u786e\u4fdd\u5747\u5300\u7167\u660e\u548c\u6807\u5b9a</li>\n<li>\n<p>\u8003\u8651\u8ba1\u7b97\u548c\u5b58\u50a8\u9700\u6c42</p>\n</li>\n<li>\n<p>[ ] <strong>\u6570\u636e\u5904\u7406</strong></p>\n</li>\n<li>\u5b9e\u73b0\u9ad8\u6548\u76844D\u6570\u636e\u7ed3\u6784</li>\n<li>\u4f7f\u7528GPU\u52a0\u901f\u5149\u573a\u6e32\u67d3</li>\n<li>\u4f18\u5316\u5185\u5b58\u8bbf\u95ee\u6a21\u5f0f</li>\n<li>\n<p>\u5b9e\u65bd\u6e10\u8fdb\u5f0f\u5904\u7406\u7b56\u7565</p>\n</li>\n<li>\n<p>[ ] <strong>\u5e94\u7528\u5f00\u53d1</strong></p>\n</li>\n<li>\u63d0\u4f9b\u76f4\u89c2\u7684\u91cd\u805a\u7126\u754c\u9762</li>\n<li>\u5b9e\u73b0\u5b9e\u65f6\u9884\u89c8\u529f\u80fd</li>\n<li>\u652f\u6301\u591a\u79cd\u8f93\u51fa\u683c\u5f0f</li>\n<li>\u8003\u8651\u5411\u540e\u517c\u5bb9\u6027</li>\n</ul>\n<h3 id=\"_15\">\u8272\u5f69\u7ba1\u7406\u6d41\u7a0b</h3>\n<ul>\n<li>[ ] <strong>\u8f93\u5165\u6821\u51c6</strong></li>\n<li>\u5efa\u7acb\u8bbe\u5907\u8272\u5f69\u914d\u7f6e\u6587\u4ef6</li>\n<li>\u4f7f\u7528\u6807\u51c6\u8272\u5361\u8fdb\u884c\u9a8c\u8bc1</li>\n<li>\u8bb0\u5f55\u7167\u660e\u6761\u4ef6\u548c\u767d\u70b9</li>\n<li>\n<p>\u5b9e\u65bd\u4e00\u81f4\u7684\u5de5\u4f5c\u6d41\u7a0b</p>\n</li>\n<li>\n<p>[ ] <strong>\u5904\u7406\u7ba1\u7ebf</strong></p>\n</li>\n<li>\u5728\u7ebf\u6027\u8272\u5f69\u7a7a\u95f4\u8fdb\u884c\u8ba1\u7b97</li>\n<li>\u6b63\u786e\u5904\u7406gamma\u53d8\u6362</li>\n<li>\u4fdd\u6301\u8db3\u591f\u7684\u4f4d\u6df1\u5ea6\uff08\u81f3\u5c1116\u4f4d\uff09</li>\n<li>\n<p>\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u8272\u5f69\u7a7a\u95f4\u8f6c\u6362</p>\n</li>\n<li>\n<p>[ ] <strong>\u8f93\u51fa\u4f18\u5316</strong></p>\n</li>\n<li>\u9488\u5bf9\u76ee\u6807\u8bbe\u5907\u8fdb\u884c\u8272\u5f69\u6620\u5c04</li>\n<li>\u5b9e\u65bd\u8f6f\u6253\u6837\u6d41\u7a0b</li>\n<li>\u9a8c\u8bc1\u8272\u5f69\u51c6\u786e\u6027</li>\n<li>\u5904\u7406\u8d85\u8272\u57df\u989c\u8272</li>\n</ul>\n<h3 id=\"hdr_1\">HDR\u5de5\u4f5c\u6d41\u7a0b</h3>\n<ul>\n<li>[ ] <strong>\u56fe\u50cf\u91c7\u96c6</strong></li>\n<li>\u4f7f\u7528\u5305\u56f4\u66dd\u5149\u62cd\u6444\u591a\u5f20\u56fe\u50cf</li>\n<li>\u786e\u4fdd\u573a\u666f\u9759\u6b62\u6216\u8fdb\u884c\u8fd0\u52a8\u8865\u507f</li>\n<li>\u9009\u62e9\u5408\u9002\u7684\u66dd\u5149\u95f4\u9694\uff08\u901a\u5e382EV\uff09</li>\n<li>\n<p>\u907f\u514d\u955c\u5934\u5149\u6655\u548c\u53cd\u5c04</p>\n</li>\n<li>\n<p>[ ] <strong>HDR\u5408\u6210</strong></p>\n</li>\n<li>\u4f30\u8ba1\u76f8\u673a\u54cd\u5e94\u66f2\u7ebf</li>\n<li>\u4f7f\u7528\u52a0\u6743\u5e73\u5747\u5408\u6210HDR\u56fe\u50cf</li>\n<li>\u5904\u7406\u9971\u548c\u50cf\u7d20\u548c\u566a\u58f0</li>\n<li>\n<p>\u9a8c\u8bc1\u52a8\u6001\u8303\u56f4\u8986\u76d6</p>\n</li>\n<li>\n<p>[ ] <strong>\u8272\u8c03\u6620\u5c04</strong></p>\n</li>\n<li>\u9009\u62e9\u9002\u5408\u573a\u666f\u7684\u6620\u5c04\u7b97\u6cd5</li>\n<li>\u4fdd\u7559\u5c40\u90e8\u5bf9\u6bd4\u5ea6\u548c\u7ec6\u8282</li>\n<li>\u907f\u514d\u8fc7\u5ea6\u5904\u7406\u548c\u4f2a\u5f71</li>\n<li>\u8003\u8651\u827a\u672f\u610f\u56fe\u548c\u89c2\u770b\u6761\u4ef6</li>\n</ul>\n<h3 id=\"_16\">\u6027\u80fd\u4f18\u5316</h3>\n<ul>\n<li>[ ] <strong>\u7b97\u6cd5\u4f18\u5316</strong></li>\n<li>\u4f7f\u7528\u67e5\u627e\u8868(LUT)\u52a0\u901f\u8272\u5f69\u53d8\u6362</li>\n<li>\u5b9e\u65bd\u591a\u7ebf\u7a0b\u5e76\u884c\u5904\u7406</li>\n<li>\u5229\u7528SIMD\u6307\u4ee4\u96c6</li>\n<li>\n<p>\u7f13\u5b58\u9891\u7e41\u8bbf\u95ee\u7684\u6570\u636e</p>\n</li>\n<li>\n<p>[ ] <strong>\u5185\u5b58\u7ba1\u7406</strong></p>\n</li>\n<li>\u4f7f\u7528\u5206\u5757\u5904\u7406\u5927\u56fe\u50cf</li>\n<li>\u5b9e\u65bd\u5185\u5b58\u6c60\u51cf\u5c11\u5206\u914d\u5f00\u9500</li>\n<li>\u4f18\u5316\u6570\u636e\u5e03\u5c40\u63d0\u9ad8\u7f13\u5b58\u547d\u4e2d\u7387</li>\n<li>\n<p>\u53ca\u65f6\u91ca\u653e\u4e0d\u9700\u8981\u7684\u8d44\u6e90</p>\n</li>\n<li>\n<p>[ ] <strong>\u8d28\u91cf\u63a7\u5236</strong></p>\n</li>\n<li>\u5efa\u7acb\u5ba2\u89c2\u8d28\u91cf\u8bc4\u4ef7\u6307\u6807</li>\n<li>\u8fdb\u884c\u4e3b\u89c2\u89c6\u89c9\u8bc4\u4f30</li>\n<li>\u8bb0\u5f55\u5904\u7406\u53c2\u6570\u548c\u5143\u6570\u636e</li>\n<li>\u5b9e\u65bd\u7248\u672c\u63a7\u5236\u548c\u56de\u6eaf\u673a\u5236</li>\n</ul>"
  },
  "../chapter4.md": {
    "hash": "a8d0ab70c1081b5177af6b6b7d60b4b0",
    "content": "<h1 id=\"4\">\u7b2c4\u7ae0\uff1a\u7740\u8272\u57fa\u7840</h1>\n<p>\u5728\u524d\u9762\u7684\u7ae0\u8282\u4e2d\uff0c\u6211\u4eec\u5b66\u4e60\u4e86\u5982\u4f55\u5c06\u4e09\u7ef4\u51e0\u4f55\u5bf9\u8c61\u6295\u5f71\u5230\u4e8c\u7ef4\u5c4f\u5e55\u5e76\u8fdb\u884c\u5149\u6805\u5316\u3002\u7136\u800c\uff0c\u4ec5\u6709\u51e0\u4f55\u5f62\u72b6\u662f\u4e0d\u591f\u7684\u2014\u2014\u6211\u4eec\u9700\u8981\u4e3a\u8fd9\u4e9b\u5f62\u72b6\u8d4b\u4e88\u771f\u5b9e\u7684\u5916\u89c2\u3002\u672c\u7ae0\u5c06\u4ecb\u7ecd\u7740\u8272\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u5305\u62ec\u5149\u7167\u6a21\u578b\u3001\u7740\u8272\u9891\u7387\u4ee5\u53ca\u7eb9\u7406\u6620\u5c04\u7684\u57fa\u672c\u6982\u5ff5\u3002\u8fd9\u4e9b\u5185\u5bb9\u6784\u6210\u4e86\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u521b\u5efa\u903c\u771f\u56fe\u50cf\u7684\u6838\u5fc3\u57fa\u7840\u3002</p>\n<h2 id=\"41\">4.1 \u5149\u7167\u4e0e\u57fa\u672c\u7740\u8272\u6a21\u578b</h2>\n<h3 id=\"411\">4.1.1 \u5149\u7684\u7269\u7406\u57fa\u7840</h3>\n<p>\u5149\u662f\u7535\u78c1\u6ce2\uff0c\u5728\u56fe\u5f62\u5b66\u4e2d\u6211\u4eec\u4e3b\u8981\u5173\u6ce8\u53ef\u89c1\u5149\u8c31\uff08\u6ce2\u957f\u7ea6380-780\u7eb3\u7c73\uff09\u3002\u5149\u4e0e\u7269\u4f53\u8868\u9762\u7684\u76f8\u4e92\u4f5c\u7528\u51b3\u5b9a\u4e86\u6211\u4eec\u6240\u770b\u5230\u7684\u989c\u8272\u548c\u660e\u6697\u3002</p>\n<p><strong>\u5149\u7684\u57fa\u672c\u5c5e\u6027\uff1a</strong></p>\n<ul>\n<li>\u5f3a\u5ea6\uff08Intensity\uff09\uff1a\u5149\u7684\u80fd\u91cf\u5927\u5c0f\uff0c\u901a\u5e38\u7528\u8f90\u5c04\u5ea6\u91cf\u5b66\u4e2d\u7684\u8f90\u7167\u5ea6\uff08Irradiance\uff09\u6216\u8f90\u4eae\u5ea6\uff08Radiance\uff09\u8868\u793a</li>\n<li>\u65b9\u5411\uff08Direction\uff09\uff1a\u5149\u4f20\u64ad\u7684\u65b9\u5411\uff0c\u5728\u5c40\u90e8\u5149\u7167\u6a21\u578b\u4e2d\u5047\u8bbe\u4e3a\u76f4\u7ebf\u4f20\u64ad</li>\n<li>\u989c\u8272\uff08Color\uff09\uff1a\u7531\u5149\u8c31\u5206\u5e03\u51b3\u5b9a\uff0c\u5b9e\u8df5\u4e2d\u5e38\u7528RGB\u4e09\u901a\u9053\u8fd1\u4f3c</li>\n<li>\u504f\u632f\uff08Polarization\uff09\uff1a\u7535\u78c1\u6ce2\u7684\u632f\u52a8\u65b9\u5411\uff0c\u5728\u9ad8\u7ea7\u6e32\u67d3\u4e2d\u7528\u4e8e\u8868\u73b0\u67d0\u4e9b\u6750\u8d28\u7279\u6027</li>\n</ul>\n<p><strong>\u8f90\u5c04\u5ea6\u91cf\u5b66\u57fa\u7840\uff1a</strong>\n\u7406\u89e3\u5149\u7167\u8ba1\u7b97\u9700\u8981\u638c\u63e1\u51e0\u4e2a\u5173\u952e\u7684\u8f90\u5c04\u5ea6\u91cf\u5b66\u6982\u5ff5\uff1a</p>\n<ol>\n<li>\n<p><strong>\u8f90\u5c04\u901a\u91cf\uff08Radiant Flux\uff09</strong>\uff1a$\\Phi$\uff0c\u5355\u4f4d\u65f6\u95f4\u5185\u901a\u8fc7\u8868\u9762\u7684\u603b\u80fd\u91cf\uff0c\u5355\u4f4d\uff1a\u74e6\u7279(W)\n   $$\\Phi = \\frac{dQ}{dt}$$</p>\n</li>\n<li>\n<p><strong>\u8f90\u7167\u5ea6\uff08Irradiance\uff09</strong>\uff1a$E$\uff0c\u5355\u4f4d\u9762\u79ef\u63a5\u6536\u7684\u8f90\u5c04\u901a\u91cf\uff0c\u5355\u4f4d\uff1a$W/m^2$\n$$E = \\frac{d\\Phi}{dA}$$</p>\n</li>\n<li>\n<p><strong>\u8f90\u5c04\u5f3a\u5ea6\uff08Radiant Intensity\uff09</strong>\uff1a$I$\uff0c\u70b9\u5149\u6e90\u5728\u7279\u5b9a\u65b9\u5411\u4e0a\u7684\u529f\u7387\uff0c\u5355\u4f4d\uff1a$W/sr$\n$$I = \\frac{d\\Phi}{d\\omega}$$</p>\n</li>\n<li>\n<p><strong>\u8f90\u4eae\u5ea6\uff08Radiance\uff09</strong>\uff1a$L$\uff0c\u6700\u91cd\u8981\u7684\u91cf\uff0c\u63cf\u8ff0\u5149\u7ebf\u7684\"\u4eae\u5ea6\"\uff0c\u5355\u4f4d\uff1a$W/(m^2 \\cdot sr)$\n$$L = \\frac{d^2\\Phi}{dA \\cos\\theta \\, d\\omega}$$\n<strong>\u5149\u4e0e\u8868\u9762\u7684\u76f8\u4e92\u4f5c\u7528\uff1a</strong>\n\u5f53\u5149\u7ebf\u5230\u8fbe\u7269\u4f53\u8868\u9762\u65f6\uff0c\u4f1a\u53d1\u751f\u4ee5\u4e0b\u73b0\u8c61\uff1a</p>\n</li>\n<li>\n<p><strong>\u53cd\u5c04\uff08Reflection\uff09</strong>\uff1a\u5149\u7ebf\u4ece\u8868\u9762\u5f39\u56de\uff0c\u5206\u4e3a\u955c\u9762\u53cd\u5c04\u548c\u6f2b\u53cd\u5c04\n   - \u955c\u9762\u53cd\u5c04\uff1a\u9075\u5faa\u53cd\u5c04\u5b9a\u5f8b\uff0c\u5165\u5c04\u89d2\u7b49\u4e8e\u53cd\u5c04\u89d2\n   - \u6f2b\u53cd\u5c04\uff1a\u5149\u7ebf\u5411\u5404\u4e2a\u65b9\u5411\u5747\u5300\u6563\u5c04\n   - \u5149\u6cfd\u53cd\u5c04\uff1a\u4ecb\u4e8e\u4e24\u8005\u4e4b\u95f4\uff0c\u6709\u65b9\u5411\u6027\u4f46\u4e0d\u5b8c\u5168\u955c\u9762</p>\n</li>\n<li>\n<p><strong>\u6298\u5c04\uff08Refraction\uff09</strong>\uff1a\u5149\u7ebf\u7a7f\u900f\u8868\u9762\u8fdb\u5165\u7269\u4f53\u5185\u90e8\uff0c\u9075\u5faa\u65af\u6d85\u5c14\u5b9a\u5f8b\n$$n_1 \\sin\\theta_1 = n_2 \\sin\\theta_2$$\n\u5176\u4e2d$n_1, n_2$\u4e3a\u4ecb\u8d28\u7684\u6298\u5c04\u7387</p>\n</li>\n<li>\n<p><strong>\u5438\u6536\uff08Absorption\uff09</strong>\uff1a\u90e8\u5206\u5149\u80fd\u88ab\u6750\u8d28\u5438\u6536\u8f6c\u5316\u4e3a\u70ed\u80fd\n   - \u9075\u5faa\u6bd4\u5c14-\u6717\u4f2f\u5b9a\u5f8b\uff1a$I(x) = I_0 e^{-\\sigma_a x}$\n   - $\\sigma_a$\u4e3a\u5438\u6536\u7cfb\u6570\uff0c$x$\u4e3a\u4f20\u64ad\u8ddd\u79bb</p>\n</li>\n<li>\n<p><strong>\u6563\u5c04\uff08Scattering\uff09</strong>\uff1a\u5149\u7ebf\u5728\u4ecb\u8d28\u5185\u90e8\u53d1\u751f\u591a\u6b21\u53cd\u5c04\u548c\u6298\u5c04\n   - \u745e\u5229\u6563\u5c04\uff1a\u7c92\u5b50\u5c3a\u5bf8\u8fdc\u5c0f\u4e8e\u6ce2\u957f\uff08\u5929\u7a7a\u4e3a\u84dd\u8272\u7684\u539f\u56e0\uff09\n   - \u7c73\u6c0f\u6563\u5c04\uff1a\u7c92\u5b50\u5c3a\u5bf8\u4e0e\u6ce2\u957f\u76f8\u5f53\uff08\u4e91\u548c\u96fe\u7684\u5916\u89c2\uff09</p>\n</li>\n</ol>\n<p><strong>\u83f2\u6d85\u5c14\u6548\u5e94\uff08Fresnel Effect\uff09\uff1a</strong>\n\u53cd\u5c04\u7387\u968f\u5165\u5c04\u89d2\u53d8\u5316\u7684\u73b0\u8c61\uff0c\u7531\u83f2\u6d85\u5c14\u65b9\u7a0b\u63cf\u8ff0\uff1a</p>\n<p>\u5bf9\u4e8e\u975e\u504f\u632f\u5149\u7684\u53cd\u5c04\u7387\uff1a\n$$F(\\theta) = \\frac{1}{2}(F_\\parallel^2 + F_\\perp^2)$$\n\u5176\u4e2d\uff1a\n$$F_\\parallel = \\frac{n_2 \\cos\\theta_i - n_1 \\cos\\theta_t}{n_2 \\cos\\theta_i + n_1 \\cos\\theta_t}$$\n$$F_\\perp = \\frac{n_1 \\cos\\theta_i - n_2 \\cos\\theta_t}{n_1 \\cos\\theta_i + n_2 \\cos\\theta_t}$$\nSchlick\u8fd1\u4f3c\uff08\u5e38\u7528\u4e8e\u5b9e\u65f6\u6e32\u67d3\uff09\uff1a\n$$F(\\theta) = F_0 + (1 - F_0)(1 - \\cos\\theta)^5$$\n\u5176\u4e2d$F_0$\u662f\u5782\u76f4\u5165\u5c04\u65f6\u7684\u53cd\u5c04\u7387\u3002</p>\n<p>\u5728\u57fa\u672c\u7740\u8272\u6a21\u578b\u4e2d\uff0c\u6211\u4eec\u4e3b\u8981\u5173\u6ce8\u53cd\u5c04\u73b0\u8c61\uff0c\u5c06\u5176\u7b80\u5316\u4e3a\u6f2b\u53cd\u5c04\u548c\u955c\u9762\u53cd\u5c04\u4e24\u4e2a\u5206\u91cf\u3002</p>\n<h3 id=\"412-lambertian\">4.1.2 Lambertian\u53cd\u5c04\u6a21\u578b</h3>\n<p>\u6700\u7b80\u5355\u7684\u53cd\u5c04\u6a21\u578b\u662fLambertian\uff08\u6717\u4f2f\uff09\u53cd\u5c04\uff0c\u63cf\u8ff0\u4e86\u5b8c\u5168\u6f2b\u53cd\u5c04\u8868\u9762\u7684\u884c\u4e3a\u3002\u8fd9\u79cd\u8868\u9762\u5c06\u5165\u5c04\u5149\u5747\u5300\u5730\u6563\u5c04\u5230\u5404\u4e2a\u65b9\u5411\uff0c\u770b\u8d77\u6765\u540c\u6837\u660e\u4eae\uff0c\u4e0e\u89c2\u5bdf\u89d2\u5ea6\u65e0\u5173\u3002</p>\n<p><strong>\u6717\u4f2f\u4f59\u5f26\u5b9a\u5f8b\uff1a</strong>\n$$I = I_0 \\cos\\theta = I_0 (\\mathbf{n} \\cdot \\mathbf{l})$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$I$ \u662f\u53cd\u5c04\u5149\u5f3a\u5ea6</li>\n<li>$I_0$ \u662f\u5165\u5c04\u5149\u5f3a\u5ea6  </li>\n<li>$\\theta$ \u662f\u8868\u9762\u6cd5\u7ebf\u4e0e\u5149\u7ebf\u65b9\u5411\u7684\u5939\u89d2</li>\n<li>$\\mathbf{n}$ \u662f\u5f52\u4e00\u5316\u7684\u8868\u9762\u6cd5\u7ebf\uff08\u6307\u5411\u8868\u9762\u5916\u90e8\uff09</li>\n<li>$\\mathbf{l}$ \u662f\u5f52\u4e00\u5316\u7684\u5149\u7ebf\u65b9\u5411\uff08\u4ece\u8868\u9762\u6307\u5411\u5149\u6e90\uff09</li>\n</ul>\n<p><strong>\u7269\u7406\u89e3\u91ca\uff1a</strong>\n\u4f59\u5f26\u9879$\\cos\\theta$\u53cd\u6620\u4e86\u6709\u6548\u7167\u5c04\u9762\u79ef\u7684\u53d8\u5316\u3002\u5f53\u5149\u7ebf\u5782\u76f4\u5165\u5c04\u65f6\uff08$\\theta = 0$\uff09\uff0c\u5355\u4f4d\u9762\u79ef\u63a5\u6536\u6700\u591a\u80fd\u91cf\uff1b\u5f53\u5149\u7ebf\u5e73\u884c\u4e8e\u8868\u9762\u65f6\uff08$\\theta = 90\u00b0$\uff09\uff0c\u6ca1\u6709\u80fd\u91cf\u5230\u8fbe\u8868\u9762\u3002</p>\n<p>\u4ece\u5fae\u89c2\u89d2\u5ea6\u7406\u89e3\uff1a</p>\n<ul>\n<li>\u7c97\u7cd9\u8868\u9762\u7531\u65e0\u6570\u5fae\u5c0f\u9762\u5143\u7ec4\u6210\uff0c\u671d\u5411\u968f\u673a\u5206\u5e03</li>\n<li>\u6bcf\u4e2a\u5fae\u9762\u5143\u90fd\u662f\u5b8c\u7f8e\u955c\u9762\uff0c\u4f46\u6574\u4f53\u8868\u73b0\u4e3a\u6f2b\u53cd\u5c04</li>\n<li>\u4f59\u5f26\u9879\u53cd\u6620\u4e86\u671d\u5411\u5149\u6e90\u7684\u5fae\u9762\u5143\u6bd4\u4f8b</li>\n</ul>\n<p><strong>BRDF\u5f62\u5f0f\uff1a</strong>\nLambertian\u53cd\u5c04\u7684\u53cc\u5411\u53cd\u5c04\u5206\u5e03\u51fd\u6570\uff08BRDF\uff09\u4e3a\u5e38\u6570\uff1a\n$$f_r = \\frac{\\rho}{\\pi}$$\n\u5176\u4e2d$\\rho$\u662f\u53cd\u7167\u7387\uff08albedo\uff09\uff0c\u8868\u793a\u8868\u9762\u53cd\u5c04\u7684\u80fd\u91cf\u6bd4\u4f8b\u3002\u9664\u4ee5$\\pi$\u662f\u4e3a\u4e86\u6ee1\u8db3\u80fd\u91cf\u5b88\u6052\uff1a\n$$\\int_{\\Omega} f_r \\cos\\theta \\, d\\omega = \\int_0^{2\\pi} \\int_0^{\\pi/2} \\frac{\\rho}{\\pi} \\cos\\theta \\sin\\theta \\, d\\theta \\, d\\phi = \\rho$$\n<strong>\u6f2b\u53cd\u5c04\u7684\u6e32\u67d3\u65b9\u7a0b\uff1a</strong>\n\u5bf9\u4e8e\u5355\u4e2a\u5149\u6e90\uff0c\u51fa\u5c04\u8f90\u4eae\u5ea6\u4e3a\uff1a\n$$L_o(\\mathbf{x}, \\omega_o) = f_r L_i(\\mathbf{x}, \\omega_i) (\\mathbf{n} \\cdot \\omega_i)$$\n\u5c55\u5f00\u540e\uff1a\n$$L_o = \\frac{\\rho}{\\pi} L_i \\max(0, \\mathbf{n} \\cdot \\mathbf{l})$$\n<strong>\u5b9e\u9645\u5e94\u7528\u8003\u8651\uff1a</strong></p>\n<ul>\n<li>\u9700\u8981clamp\u8d1f\u503c\uff1a$\\max(0, \\mathbf{n} \\cdot \\mathbf{l})$\uff0c\u907f\u514d\u80cc\u9762\u7167\u660e</li>\n<li>\u53cc\u9762\u6750\u8d28\u9700\u8981\u7279\u6b8a\u5904\u7406\uff1a$|\\mathbf{n} \\cdot \\mathbf{l}|$</li>\n<li>\u53ef\u4ee5\u4e58\u4ee5\u6750\u8d28\u7684\u6f2b\u53cd\u5c04\u7cfb\u6570$k_d$\u548c\u989c\u8272$\\mathbf{c}_d$\u5f97\u5230\u6700\u7ec8\u989c\u8272</li>\n</ul>\n<p><strong>\u9ad8\u7ea7\u6269\u5c55\uff1a</strong></p>\n<ol>\n<li>\n<p><strong>Oren-Nayar\u6a21\u578b</strong>\uff1a\u8003\u8651\u8868\u9762\u7c97\u7cd9\u5ea6\u7684\u6539\u8fdb\u6a21\u578b\n$$f_r = \\frac{\\rho}{\\pi}(A + B \\max(0, \\cos(\\phi_i - \\phi_o)) \\sin\\alpha \\tan\\beta)$$\n\u5176\u4e2d$A = 1 - 0.5\\frac{\\sigma^2}{\\sigma^2 + 0.33}$\uff0c$B = 0.45\\frac{\\sigma^2}{\\sigma^2 + 0.09}$\uff0c$\\sigma$\u662f\u8868\u9762\u7c97\u7cd9\u5ea6</p>\n</li>\n<li>\n<p><strong>\u6b21\u8868\u9762\u6563\u5c04\uff08Subsurface Scattering\uff09</strong>\uff1a\n   - \u5149\u7ebf\u8fdb\u5165\u6750\u8d28\u5185\u90e8\u6563\u5c04\u540e\u5c04\u51fa\n   - \u5e38\u89c1\u4e8e\u76ae\u80a4\u3001\u8721\u3001\u5927\u7406\u77f3\u7b49\u534a\u900f\u660e\u6750\u8d28\n   - \u9700\u8981\u8003\u8651\u5149\u7ebf\u5165\u5c04\u70b9\u548c\u51fa\u5c04\u70b9\u7684\u8ddd\u79bb</p>\n</li>\n<li>\n<p><strong>\u9884\u79ef\u5206\u76ae\u80a4\u7740\u8272</strong>\uff1a\u4f7f\u7528\u67e5\u627e\u8868\uff08LUT\uff09\u5b58\u50a8\u4e0d\u540c\u89d2\u5ea6\u7684\u6563\u5c04\u7ed3\u679c</p>\n</li>\n</ol>\n<h3 id=\"413-phong\">4.1.3 Phong\u5149\u7167\u6a21\u578b</h3>\n<p>Phong\u5149\u7167\u6a21\u578b\u662f\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u6700\u7ecf\u5178\u7684\u5c40\u90e8\u5149\u7167\u6a21\u578b\uff0c\u7531Bui Tuong Phong\u4e8e1975\u5e74\u63d0\u51fa\u3002\u5b83\u901a\u8fc7\u4e09\u4e2a\u5206\u91cf\u7684\u53e0\u52a0\u6765\u8fd1\u4f3c\u771f\u5b9e\u4e16\u754c\u7684\u5149\u7167\u6548\u679c\uff1a\n$$I = I_a + I_d + I_s$$</p>\n<ol>\n<li><strong>\u73af\u5883\u5149\uff08Ambient\uff09\uff1a</strong>\n$$I_a = k_a I_{a,light}$$\n\u73af\u5883\u5149\u6a21\u62df\u95f4\u63a5\u5149\u7167\uff0c\u662f\u5bf9\u5168\u5c40\u5149\u7167\u7684\u7c97\u7cd9\u8fd1\u4f3c\u3002\u5b83\u786e\u4fdd\u573a\u666f\u4e2d\u6ca1\u6709\u5b8c\u5168\u9ed1\u6697\u7684\u533a\u57df\uff0c\u63d0\u4f9b\u57fa\u7840\u4eae\u5ea6\u3002</li>\n</ol>\n<p>\u7269\u7406\u610f\u4e49\uff1a</p>\n<ul>\n<li>\u771f\u5b9e\u4e16\u754c\u4e2d\uff0c\u5149\u7ebf\u4f1a\u5728\u8868\u9762\u95f4\u591a\u6b21\u53cd\u5f39</li>\n<li>\u73af\u5883\u5149\u662f\u8fd9\u79cd\u590d\u6742\u76f8\u4e92\u4f5c\u7528\u7684\u7b80\u5316</li>\n<li>\u73b0\u4ee3\u6e32\u67d3\u4e2d\u5e38\u7528\u73af\u5883\u8d34\u56fe\u6216\u7403\u8c10\u51fd\u6570\u4ee3\u66ff</li>\n</ul>\n<ol start=\"2\">\n<li>\n<p><strong>\u6f2b\u53cd\u5c04\uff08Diffuse\uff09\uff1a</strong>\n$$I_d = k_d I_{light} \\max(0, \\mathbf{n} \\cdot \\mathbf{l})$$\n\u57fa\u4e8eLambertian\u53cd\u5c04\u6a21\u578b\uff0c\u8868\u793a\u7c97\u7cd9\u8868\u9762\u7684\u53cd\u5c04\u7279\u6027\u3002\u8fd9\u662f\u7269\u4f53\u7684\u4e3b\u8981\u989c\u8272\u6765\u6e90\u3002</p>\n</li>\n<li>\n<p><strong>\u955c\u9762\u53cd\u5c04\uff08Specular\uff09\uff1a</strong>\n$$I_s = k_s I_{light} \\max(0, \\mathbf{r} \\cdot \\mathbf{v})^p$$\n\u6a21\u62df\u5149\u6ed1\u8868\u9762\u7684\u9ad8\u5149\u6548\u679c\u3002\u53cd\u5c04\u5411\u91cf$\\mathbf{r}$\u901a\u8fc7\u955c\u9762\u53cd\u5c04\u5b9a\u5f8b\u8ba1\u7b97\uff1a\n$$\\mathbf{r} = 2(\\mathbf{n} \\cdot \\mathbf{l})\\mathbf{n} - \\mathbf{l}$$\n<strong>\u63a8\u5bfc\u53cd\u5c04\u5411\u91cf\u516c\u5f0f\uff1a</strong>\n\u8bbe\u5165\u5c04\u5411\u91cf\u4e3a$-\\mathbf{l}$\uff0c\u6cd5\u7ebf\u4e3a$\\mathbf{n}$\uff1a</p>\n</li>\n<li>\n<p>\u5c06$-\\mathbf{l}$\u5206\u89e3\u4e3a\u5e73\u884c\u548c\u5782\u76f4\u4e8e$\\mathbf{n}$\u7684\u5206\u91cf</p>\n</li>\n<li>\u5e73\u884c\u5206\u91cf\uff1a$(-\\mathbf{l} \\cdot \\mathbf{n})\\mathbf{n}$</li>\n<li>\u5782\u76f4\u5206\u91cf\uff1a$-\\mathbf{l} - (-\\mathbf{l} \\cdot \\mathbf{n})\\mathbf{n}$</li>\n<li>\u53cd\u5c04\u65f6\uff0c\u5e73\u884c\u5206\u91cf\u53cd\u5411\uff0c\u5782\u76f4\u5206\u91cf\u4e0d\u53d8</li>\n<li>$\\mathbf{r} = -(-\\mathbf{l} \\cdot \\mathbf{n})\\mathbf{n} + [-\\mathbf{l} - (-\\mathbf{l} \\cdot \\mathbf{n})\\mathbf{n}]$</li>\n<li>\u7b80\u5316\u5f97\uff1a$\\mathbf{r} = 2(\\mathbf{n} \\cdot \\mathbf{l})\\mathbf{n} - \\mathbf{l}$</li>\n</ol>\n<p><strong>\u53c2\u6570\u8bf4\u660e\uff1a</strong></p>\n<ul>\n<li>$k_a, k_d, k_s$\uff1a\u6750\u8d28\u7cfb\u6570\uff0c\u6ee1\u8db3\u80fd\u91cf\u5b88\u6052\u65f6\u901a\u5e38$k_a + k_d + k_s \\leq 1$</li>\n<li>$p$\uff1a\u955c\u9762\u53cd\u5c04\u6307\u6570\uff08Shininess\uff09\uff0c\u5178\u578b\u503c\uff1a</li>\n<li>\u7c97\u7cd9\u8868\u9762\uff1a1-10</li>\n<li>\u5851\u6599\uff1a10-100</li>\n<li>\u91d1\u5c5e\uff1a100-1000</li>\n<li>\u955c\u9762\uff1a1000+</li>\n<li>$\\mathbf{v}$\uff1a\u5f52\u4e00\u5316\u7684\u89c2\u5bdf\u65b9\u5411\uff08\u4ece\u8868\u9762\u6307\u5411\u76f8\u673a\uff09</li>\n</ul>\n<p><strong>\u955c\u9762\u53cd\u5c04\u7684\u5fae\u9762\u5143\u7406\u8bba\u89e3\u91ca\uff1a</strong></p>\n<ul>\n<li>\u8868\u9762\u7531\u8bb8\u591a\u5fae\u5c0f\u955c\u9762\u7ec4\u6210</li>\n<li>\u53ea\u6709\u6cd5\u7ebf\u6070\u597d\u5728$\\mathbf{l}$\u548c$\\mathbf{v}$\u4e2d\u95f4\u7684\u5fae\u9762\u5143\u624d\u80fd\u5c06\u5149\u53cd\u5c04\u5230\u89c2\u5bdf\u8005</li>\n<li>\u6307\u6570$p$\u63a7\u5236\u5fae\u9762\u5143\u6cd5\u7ebf\u5206\u5e03\u7684\u96c6\u4e2d\u7a0b\u5ea6</li>\n<li>\u9ad8$p$\u503c\u8868\u793a\u5206\u5e03\u96c6\u4e2d\uff0c\u4ea7\u751f\u5c0f\u800c\u4eae\u7684\u9ad8\u5149</li>\n</ul>\n<p><strong>RGB\u989c\u8272\u6269\u5c55\uff1a</strong>\n\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u6bcf\u4e2a\u989c\u8272\u901a\u9053\u72ec\u7acb\u8ba1\u7b97\uff1a\n$$\\mathbf{I}_{RGB} = k_a \\mathbf{c}_a \\odot \\mathbf{I}_{a,light} + k_d \\mathbf{c}_d \\odot \\mathbf{I}_{light} (\\mathbf{n} \\cdot \\mathbf{l}) + k_s \\mathbf{c}_s \\odot \\mathbf{I}_{light} (\\mathbf{r} \\cdot \\mathbf{v})^p$$\n\u5176\u4e2d$\\odot$\u8868\u793a\u9010\u5143\u7d20\u4e58\u6cd5\uff0c$\\mathbf{c}_a, \\mathbf{c}_d, \\mathbf{c}_s$\u5206\u522b\u662f\u73af\u5883\u5149\u3001\u6f2b\u53cd\u5c04\u548c\u955c\u9762\u53cd\u5c04\u989c\u8272\u3002</p>\n<p><strong>Phong\u6a21\u578b\u7684\u5c40\u9650\u6027\uff1a</strong></p>\n<ol>\n<li>\n<p><strong>\u975e\u7269\u7406\u51c6\u786e</strong>\uff1a\n   - \u4e0d\u9075\u5faa\u80fd\u91cf\u5b88\u6052\n   - \u955c\u9762\u53cd\u5c04\u9879\u4e0d\u6ee1\u8db3\u4e92\u6613\u6027\uff08reciprocity\uff09\n   - \u65e0\u6cd5\u51c6\u786e\u6a21\u62df\u7c97\u7cd9\u8868\u9762\u7684\u955c\u9762\u53cd\u5c04</p>\n</li>\n<li>\n<p><strong>\u63a0\u5c04\u89d2\u95ee\u9898</strong>\uff1a\n   - \u5728\u63a0\u5c04\u89d2\u4e0b\uff0c\u955c\u9762\u53cd\u5c04\u5f3a\u5ea6\u4e0b\u964d\u8fc7\u5feb\n   - \u771f\u5b9e\u6750\u8d28\u5728\u63a0\u5c04\u89d2\u4e0b\u53cd\u5c04\u7387\u589e\u52a0\uff08\u83f2\u6d85\u5c14\u6548\u5e94\uff09</p>\n</li>\n<li>\n<p><strong>\u6750\u8d28\u8868\u73b0\u529b\u6709\u9650</strong>\uff1a\n   - \u65e0\u6cd5\u8868\u73b0\u83f2\u6d85\u5c14\u6548\u5e94\n   - \u5bf9\u5404\u5411\u5f02\u6027\u6750\u8d28\uff08\u5982\u62c9\u4e1d\u91d1\u5c5e\uff09\u65e0\u80fd\u4e3a\u529b\n   - \u4e0d\u652f\u6301\u5206\u5c42\u6750\u8d28\uff08\u5982\u6c7d\u8f66\u6f06\uff09</p>\n</li>\n<li>\n<p><strong>\u9ad8\u5149\u5f62\u72b6\u5355\u4e00</strong>\uff1a\n   - \u53ea\u80fd\u4ea7\u751f\u5706\u5f62\u9ad8\u5149\n   - \u65e0\u6cd5\u8868\u73b0\u62c9\u957f\u6216\u5176\u4ed6\u5f62\u72b6\u7684\u9ad8\u5149</p>\n</li>\n</ol>\n<h3 id=\"414-blinn-phong\">4.1.4 Blinn-Phong\u6a21\u578b</h3>\n<p>Blinn-Phong\u662fPhong\u6a21\u578b\u7684\u6539\u8fdb\u7248\u672c\uff0c\u7531Jim Blinn\u4e8e1977\u5e74\u63d0\u51fa\u3002\u6838\u5fc3\u6539\u8fdb\u662f\u4f7f\u7528\u534a\u89d2\u5411\u91cf\uff08halfway vector\uff09\u4ee3\u66ff\u53cd\u5c04\u5411\u91cf\uff1a\n$$\\mathbf{h} = \\frac{\\mathbf{l} + \\mathbf{v}}{||\\mathbf{l} + \\mathbf{v}||_2}$$\n\u955c\u9762\u53cd\u5c04\u9879\u53d8\u4e3a\uff1a\n$$I_s = k_s I_{light} \\max(0, \\mathbf{n} \\cdot \\mathbf{h})^p$$\n<strong>\u7269\u7406\u89e3\u91ca\uff1a</strong>\n\u534a\u89d2\u5411\u91cf$\\mathbf{h}$\u4ee3\u8868\u4e86\u5fae\u8868\u9762\u6cd5\u7ebf\u7684\u7edf\u8ba1\u5206\u5e03\u3002\u5f53$\\mathbf{n} \\cdot \\mathbf{h}$\u8f83\u5927\u65f6\uff0c\u610f\u5473\u7740\u6709\u66f4\u591a\u7684\u5fae\u8868\u9762\u671d\u5411\u80fd\u591f\u5c06\u5149\u7ebf\u53cd\u5c04\u5230\u89c2\u5bdf\u8005\u3002</p>\n<p><strong>\u5fae\u9762\u5143\u7406\u8bba\u6df1\u5165\uff1a</strong></p>\n<ul>\n<li>\u5b8c\u7f8e\u955c\u9762\u53cd\u5c04\u53d1\u751f\u5728\u5fae\u9762\u5143\u6cd5\u7ebf\u7b49\u4e8e$\\mathbf{h}$\u65f6</li>\n<li>$(\\mathbf{n} \\cdot \\mathbf{h})^p$\u8fd1\u4f3c\u5fae\u9762\u5143\u6cd5\u7ebf\u5206\u5e03\u51fd\u6570</li>\n<li>\u8fd9\u662f\u540e\u6765Cook-Torrance BRDF\u7684\u524d\u8eab</li>\n</ul>\n<p><strong>\u6570\u5b66\u5173\u7cfb\u63a8\u5bfc\uff1a</strong>\n\u8bbe$\\theta$\u4e3a$\\mathbf{n}$\u4e0e$\\mathbf{h}$\u7684\u5939\u89d2\uff0c$\\alpha$\u4e3a$\\mathbf{r}$\u4e0e$\\mathbf{v}$\u7684\u5939\u89d2\uff1a\n$$\\cos\\alpha = \\mathbf{r} \\cdot \\mathbf{v} = 2\\cos^2\\theta - 1$$\n\u56e0\u6b64\uff1a\n$$(\\mathbf{r} \\cdot \\mathbf{v})^{p_{Phong}} = (2\\cos^2\\theta - 1)^{p_{Phong}} \\approx (\\cos\\theta)^{4p_{Phong}} = (\\mathbf{n} \\cdot \\mathbf{h})^{4p_{Phong}}$$\n\u8fd9\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48$p_{Blinn} \\approx 4p_{Phong}$\u3002</p>\n<p><strong>\u4f18\u70b9\uff1a</strong></p>\n<ul>\n<li>\u8ba1\u7b97\u66f4\u9ad8\u6548\uff08\u907f\u514d\u8ba1\u7b97\u53cd\u5c04\u5411\u91cf\uff09</li>\n<li>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u66f4\u7b26\u5408\u7269\u7406\u89c4\u5f8b</li>\n<li>\u5904\u7406\u63a0\u5c04\u89d2\u65f6\u8868\u73b0\u66f4\u597d</li>\n<li>\u5f53\u5149\u6e90\u548c\u89c6\u70b9\u90fd\u5728\u65e0\u7a77\u8fdc\u65f6\uff0c$\\mathbf{h}$\u4e3a\u5e38\u91cf</li>\n</ul>\n<p><strong>\u5b9e\u73b0\u7ec6\u8282\uff1a</strong></p>\n<ul>\n<li>\u9700\u8981\u68c0\u67e5$\\mathbf{l} + \\mathbf{v}$\u662f\u5426\u4e3a\u96f6\u5411\u91cf\uff08\u5149\u6e90\u5728\u89c6\u70b9\u540e\u65b9\uff09</li>\n<li>\u534a\u89d2\u5411\u91cf\u7684\u8ba1\u7b97\u53ef\u4ee5\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u5b8c\u6210\u5e76\u63d2\u503c</li>\n<li>\u73b0\u4ee3\u5b9e\u65f6\u6e32\u67d3\u51e0\u4e4e\u90fd\u4f7f\u7528Blinn-Phong\u800c\u975e\u539f\u59cbPhong</li>\n</ul>\n<p><strong>\u6539\u8fdb\u7684\u5f52\u4e00\u5316Blinn-Phong\uff1a</strong>\n\u4e3a\u4e86\u66f4\u597d\u7684\u80fd\u91cf\u5b88\u6052\uff0c\u53ef\u4ee5\u4f7f\u7528\u5f52\u4e00\u5316\u7248\u672c\uff1a\n$$I_s = \\frac{p + 8}{8\\pi} k_s I_{light} \\max(0, \\mathbf{n} \\cdot \\mathbf{h})^p$$\n\u5f52\u4e00\u5316\u56e0\u5b50\u786e\u4fdd\u955c\u9762\u53cd\u5c04\u74e3\u7684\u79ef\u5206\u4e3a$k_s$\u3002</p>\n<p><strong>\u5404\u5411\u5f02\u6027\u6269\u5c55\uff1a</strong>\n\u5bf9\u4e8e\u5404\u5411\u5f02\u6027\u6750\u8d28\uff0c\u53ef\u4ee5\u5c06\u6807\u91cf\u6307\u6570$p$\u6269\u5c55\u4e3a\u4e24\u4e2a\u65b9\u5411\u7684\u6307\u6570\uff1a\n$$I_s = k_s I_{light} \\max(0, \\mathbf{n} \\cdot \\mathbf{h})^{p_u \\cos^2\\phi + p_v \\sin^2\\phi}$$\n\u5176\u4e2d$\\phi$\u662f\u534a\u89d2\u5411\u91cf\u5728\u5207\u5e73\u9762\u4e0a\u7684\u6295\u5f71\u4e0e\u4e3b\u5207\u7ebf\u65b9\u5411\u7684\u5939\u89d2\u3002</p>\n<h3 id=\"415\">4.1.5 \u591a\u5149\u6e90\u5904\u7406</h3>\n<p>\u5b9e\u9645\u573a\u666f\u4e2d\u901a\u5e38\u6709\u591a\u4e2a\u5149\u6e90\uff0c\u603b\u5149\u7167\u662f\u6240\u6709\u5149\u6e90\u8d21\u732e\u7684\u53e0\u52a0\uff1a\n$$I_{total} = I_a + \\sum_{i=1}^{n} (I_{d,i} + I_{s,i})$$\n\u6ce8\u610f\u73af\u5883\u5149\u901a\u5e38\u53ea\u8ba1\u7b97\u4e00\u6b21\uff0c\u800c\u975e\u6bcf\u4e2a\u5149\u6e90\u90fd\u6709\u72ec\u7acb\u7684\u73af\u5883\u5149\u5206\u91cf\u3002</p>\n<p><strong>\u5149\u6e90\u7c7b\u578b\uff1a</strong></p>\n<ol>\n<li><strong>\u70b9\u5149\u6e90\uff08Point Light\uff09</strong>\n\u4ece\u4e00\u70b9\u5411\u6240\u6709\u65b9\u5411\u53d1\u51fa\u5149\u7ebf\uff0c\u5f3a\u5ea6\u968f\u8ddd\u79bb\u8870\u51cf\uff1a\n$$I(d) = \\frac{I_0}{d^2}$$\n<strong>\u7269\u7406\u6b63\u786e\u7684\u8870\u51cf\uff1a</strong></li>\n</ol>\n<ul>\n<li>\u9075\u5faa\u5e73\u65b9\u53cd\u6bd4\u5b9a\u5f8b\uff1a\u80fd\u91cf\u5728\u7403\u9762\u4e0a\u5747\u5300\u5206\u5e03</li>\n<li>\u7403\u9762\u9762\u79ef$A = 4\\pi d^2$\uff0c\u6545\u5355\u4f4d\u9762\u79ef\u80fd\u91cf$\\propto 1/d^2$</li>\n</ul>\n<p>\u5b9e\u8df5\u4e2d\u5e38\u7528\u66f4\u7075\u6d3b\u7684\u8870\u51cf\u516c\u5f0f\u907f\u514d\u9664\u96f6\u548c\u8fc7\u5ea6\u8870\u51cf\uff1a\n$$f_{att} = \\frac{1}{k_c + k_l d + k_q d^2}$$\n\u5176\u4e2d$k_c$\uff08\u5e38\u6570\u9879\uff09\u3001$k_l$\uff08\u7ebf\u6027\u9879\uff09\u3001$k_q$\uff08\u4e8c\u6b21\u9879\uff09\u662f\u8870\u51cf\u7cfb\u6570\u3002</p>\n<p><strong>\u6539\u8fdb\u7684\u8870\u51cf\u6a21\u578b\uff1a</strong>\n$$f_{att} = \\frac{1}{\\max(d, r_{min})^2}$$\n\u5176\u4e2d$r_{min}$\u662f\u5149\u6e90\u7684\u7269\u7406\u534a\u5f84\uff0c\u907f\u514d\u8fd1\u8ddd\u79bb\u7684\u65e0\u9650\u4eae\u5ea6\u3002</p>\n<ol start=\"2\">\n<li><strong>\u65b9\u5411\u5149\uff08Directional Light\uff09</strong>\n\u6a21\u62df\u65e0\u9650\u8fdc\u7684\u5149\u6e90\uff08\u5982\u592a\u9633\uff09\uff1a</li>\n</ol>\n<ul>\n<li>\u6240\u6709\u4f4d\u7f6e\u7684\u5149\u7ebf\u65b9\u5411\u76f8\u540c\uff1a$\\mathbf{l} = \\text{constant}$</li>\n<li>\u65e0\u8870\u51cf\uff1a$f_{att} = 1$</li>\n<li>\u9002\u5408\u5ba4\u5916\u573a\u666f\u7684\u4e3b\u5149\u6e90</li>\n<li>\u53ef\u4ea7\u751f\u5e73\u884c\u9634\u5f71</li>\n</ul>\n<p><strong>\u7ea7\u8054\u9634\u5f71\u8d34\u56fe\uff08Cascaded Shadow Maps\uff09\uff1a</strong></p>\n<ul>\n<li>\u5c06\u89c6\u9525\u4f53\u5206\u6210\u591a\u4e2a\u5c42\u7ea7</li>\n<li>\u6bcf\u5c42\u4f7f\u7528\u4e0d\u540c\u5206\u8fa8\u7387\u7684\u9634\u5f71\u8d34\u56fe</li>\n<li>\u8fd1\u5904\u9ad8\u5206\u8fa8\u7387\uff0c\u8fdc\u5904\u4f4e\u5206\u8fa8\u7387</li>\n</ul>\n<ol start=\"3\">\n<li><strong>\u805a\u5149\u706f\uff08Spot Light\uff09</strong>\n\u5177\u6709\u4f4d\u7f6e\u3001\u65b9\u5411\u548c\u7167\u5c04\u89d2\u5ea6\u7684\u5149\u6e90\uff1a\n$$I = I_0 \\cdot f_{spot}(\\theta) \\cdot f_{att}(d)$$\n\u805a\u5149\u8870\u51cf\u51fd\u6570\uff1a\n$$f_{spot}(\\theta) = \\begin{cases}\n(\\cos\\theta)^{f} &amp; \\text{if } \\cos\\theta &gt; \\cos\\theta_{outer} \\\n\\text{smooth}(\\theta) &amp; \\text{if } \\cos\\theta_{outer} \\geq \\cos\\theta &gt; \\cos\\theta_{inner} \\\n0 &amp; \\text{otherwise}\n\\end{cases}$$\n<strong>\u5e73\u6ed1\u8fc7\u6e21\u51fd\u6570\uff1a</strong>\n\u4f7f\u7528Hermite\u63d2\u503c\u5b9e\u73b0\u8f6f\u8fb9\u7f18\uff1a\n$$\\text{smooth}(\\theta) = \\text{smoothstep}(\\cos\\theta_{outer}, \\cos\\theta_{inner}, \\cos\\theta)$$\n$$\\text{smoothstep}(a, b, x) = t^2(3 - 2t), \\quad t = \\frac{x - a}{b - a}$$\n<strong>\u6295\u5f71\u7eb9\u7406\u805a\u5149\u706f\uff1a</strong></li>\n</ol>\n<ul>\n<li>\u4f7f\u7528\u7eb9\u7406\u8c03\u5236\u5149\u5f3a\u5206\u5e03</li>\n<li>\u53ef\u5b9e\u73b0\u590d\u6742\u56fe\u6848\u6295\u5f71\uff08\u5982\u821e\u53f0\u706f\u5149\uff09</li>\n<li>\u7eb9\u7406\u5750\u6807\u4ece\u5149\u6e90\u7a7a\u95f4\u6295\u5f71\u77e9\u9635\u8ba1\u7b97</li>\n</ul>\n<ol start=\"4\">\n<li><strong>\u9762\u5149\u6e90\uff08Area Light\uff09</strong>\n\u771f\u5b9e\u4e16\u754c\u7684\u5149\u6e90\u90fd\u6709\u4e00\u5b9a\u9762\u79ef\uff0c\u4f46\u7cbe\u786e\u8ba1\u7b97\u9700\u8981\u79ef\u5206\u3002</li>\n</ol>\n<p><strong>\u89e3\u6790\u89e3\uff08\u4ec5\u9650\u7b80\u5355\u51e0\u4f55\uff09\uff1a</strong>\n\u77e9\u5f62\u9762\u5149\u6e90\u5bf9\u70b9\u7684\u8f90\u7167\u5ea6\uff1a\n$$E = \\int_A \\frac{L \\cos\\theta_i \\cos\\theta_o}{r^2} dA$$\n\u5bf9\u4e8e\u5747\u5300\u53d1\u5149\u7684\u77e9\u5f62\uff0c\u5b58\u5728\u95ed\u5f0f\u89e3\uff08\u4f7f\u7528\u8fb9\u754c\u79ef\u5206\uff09\u3002</p>\n<p><strong>\u8fd1\u4f3c\u65b9\u6cd5\uff1a</strong></p>\n<ol>\n<li>\n<p><strong>\u591a\u70b9\u8fd1\u4f3c</strong>\uff1a\n   - \u5c06\u9762\u5149\u6e90\u79bb\u6563\u4e3a$N$\u4e2a\u70b9\u5149\u6e90\n   - \u6743\u91cd\u6839\u636e\u9762\u79ef\u5143\u5206\u914d\n   - \u8ba1\u7b97\u590d\u6742\u5ea6\uff1a$O(N)$</p>\n</li>\n<li>\n<p><strong>\u7ebf\u6027\u53d8\u6362\u7403\u9762\u5149\u6e90\uff08LTCs\uff09</strong>\uff1a\n   - \u5c06\u590d\u6742BRDF\u53d8\u6362\u4e3a\u4f59\u5f26\u5206\u5e03\n   - \u4f7f\u7528\u9884\u8ba1\u7b97\u7684\u67e5\u627e\u8868\n   - \u5b9e\u65f6\u6027\u80fd\u4f18\u79c0</p>\n</li>\n<li>\n<p><strong>\u7403\u8c10\u51fd\u6570\u8fd1\u4f3c</strong>\uff1a\n   - \u5c06\u5149\u6e90\u6295\u5f71\u5230SH\u57fa\u51fd\u6570\n   - \u9002\u5408\u4f4e\u9891\u5149\u7167\n   - \u7cfb\u6570\u9884\u8ba1\u7b97</p>\n</li>\n<li>\n<p><strong>\u73af\u5883\u5149\u7167\uff08Environment Lighting\uff09</strong>\n\u4f7f\u7528\u73af\u5883\u8d34\u56fe\u8868\u793a\u6765\u81ea\u6240\u6709\u65b9\u5411\u7684\u5149\u7167\uff1a</p>\n</li>\n</ol>\n<p><strong>\u91cd\u8981\u6027\u91c7\u6837\uff1a</strong></p>\n<ul>\n<li>\u6839\u636e\u73af\u5883\u8d34\u56fe\u4eae\u5ea6\u5206\u5e03\u91c7\u6837</li>\n<li>\u51cf\u5c11\u566a\u58f0\uff0c\u63d0\u9ad8\u6536\u655b\u901f\u5ea6</li>\n<li>\u9884\u8ba1\u7b97CDF\u7528\u4e8e\u5feb\u901f\u91c7\u6837</li>\n</ul>\n<p><strong>\u9884\u6ee4\u6ce2\u73af\u5883\u8d34\u56fe\uff1a</strong></p>\n<ul>\n<li>\u4e0d\u540c\u7c97\u7cd9\u5ea6\u7ea7\u522b\u7684\u9884\u6ee4\u6ce2</li>\n<li>\u5b58\u50a8\u5728mipmap\u94fe\u4e2d</li>\n<li>\u5b9e\u65f6\u67e5\u8be2\uff0c\u65e0\u9700\u8fd0\u884c\u65f6\u79ef\u5206</li>\n</ul>\n<p><strong>\u6027\u80fd\u4f18\u5316\u7b56\u7565\uff1a</strong></p>\n<ol>\n<li>\n<p><strong>\u5149\u6e90\u5254\u9664</strong>\uff1a\n   - \u89c6\u9525\u5254\u9664\uff1a\u4e22\u5f03\u89c6\u91ce\u5916\u5149\u6e90\n   - \u8ddd\u79bb\u5254\u9664\uff1a\u5ffd\u7565\u8d85\u8fc7\u6700\u5927\u5f71\u54cd\u8ddd\u79bb\u7684\u5149\u6e90\n   - \u906e\u6321\u5254\u9664\uff1a\u4f7f\u7528\u5c42\u6b21Z\u7f13\u51b2\uff08Hi-Z\uff09</p>\n</li>\n<li>\n<p><strong>\u5ef6\u8fdf\u7740\u8272\uff08Deferred Shading\uff09</strong>\uff1a\n   - \u51e0\u4f55\u590d\u6742\u5ea6\u4e0e\u5149\u6e90\u6570\u91cf\u89e3\u8026\n   - G-Buffer\u5b58\u50a8\u51e0\u4f55\u5c5e\u6027\n   - \u5149\u7167\u4ee5\u5c4f\u5e55\u7a7a\u95f4\u5904\u7406</p>\n</li>\n<li>\n<p><strong>\u5149\u6e90\u5206\u7ea7\uff08Light Hierarchy\uff09</strong>\uff1a\n   - \u4e3b\u5149\u6e90\uff1a\u5b8c\u6574\u8ba1\u7b97\n   - \u6b21\u8981\u5149\u6e90\uff1a\u7b80\u5316BRDF\n   - \u73af\u5883\u5149\u6e90\uff1a\u9884\u79ef\u5206\u8fd1\u4f3c</p>\n</li>\n<li>\n<p><strong>\u5149\u7167\u70d8\u7119\uff08Light Baking\uff09</strong>\uff1a\n   - \u9759\u6001\u5149\u6e90\u9884\u8ba1\u7b97\n   - \u5b58\u50a8\u5728\u5149\u7167\u8d34\u56fe\u6216\u63a2\u9488\n   - \u8fd0\u884c\u65f6\u4ec5\u5904\u7406\u52a8\u6001\u5149\u6e90</p>\n</li>\n<li>\n<p><strong>Tiled/Clustered Shading</strong>\uff1a\n   - \u5c06\u5c4f\u5e55/\u89c6\u9525\u5206\u5757\n   - \u6bcf\u5757\u7ef4\u62a4\u5149\u6e90\u5217\u8868\n   - \u51cf\u5c11\u5149\u6e90\u904d\u5386\u5f00\u9500</p>\n</li>\n</ol>\n<h2 id=\"42\">4.2 \u7740\u8272\u9891\u7387\u4e0e\u56fe\u5f62\u7ba1\u7ebf</h2>\n<h3 id=\"421\">4.2.1 \u7740\u8272\u9891\u7387\u7684\u6982\u5ff5</h3>\n<p>\u7740\u8272\u9891\u7387\uff08Shading Frequency\uff09\u51b3\u5b9a\u4e86\u5728\u6e32\u67d3\u7ba1\u7ebf\u7684\u54ea\u4e2a\u9636\u6bb5\u8ba1\u7b97\u5149\u7167\u3002\u4e0d\u540c\u7684\u7740\u8272\u9891\u7387\u5728\u8d28\u91cf\u548c\u6027\u80fd\u4e4b\u95f4\u505a\u51fa\u4e0d\u540c\u7684\u6743\u8861\u3002</p>\n<ol>\n<li>\n<p><strong>\u5e73\u9762\u7740\u8272\uff08Flat Shading\uff09</strong>\n- \u6bcf\u4e2a\u4e09\u89d2\u5f62\u4f7f\u7528\u5355\u4e00\u6cd5\u7ebf\uff08\u901a\u5e38\u4e3a\u9762\u6cd5\u7ebf\uff09\n- \u8ba1\u7b97\u4e00\u6b21\u5149\u7167\uff0c\u6574\u4e2a\u4e09\u89d2\u5f62\u4f7f\u7528\u76f8\u540c\u989c\u8272\n- \u4f18\u70b9\uff1a\u8ba1\u7b97\u5feb\u901f\uff0c\u9002\u5408\u4f4e\u591a\u8fb9\u5f62\u98ce\u683c\u6216\u8fdc\u8ddd\u79bbLOD\n- \u7f3a\u70b9\uff1a\u4ea7\u751f\u660e\u663e\u7684\u591a\u8fb9\u5f62\u8fb9\u754c\uff08\u9a6c\u8d6b\u5e26\uff09\n- \u5e94\u7528\uff1aCAD\u8f6f\u4ef6\u3001\u4f4e\u591a\u8fb9\u5f62\u827a\u672f\u98ce\u683c</p>\n</li>\n<li>\n<p><strong>Gouraud\u7740\u8272\uff08\u9876\u70b9\u7740\u8272\uff09</strong>\nHenri Gouraud\u4e8e1971\u5e74\u63d0\u51fa\uff1a</p>\n</li>\n</ol>\n<ul>\n<li>\u5728\u9876\u70b9\u5904\u8ba1\u7b97\u5149\u7167\uff08\u4f7f\u7528\u9876\u70b9\u6cd5\u7ebf\uff09</li>\n<li>\u4e09\u89d2\u5f62\u5185\u90e8\u901a\u8fc7\u63d2\u503c\u989c\u8272\u5f97\u5230\u6700\u7ec8\u7ed3\u679c</li>\n<li>\u9876\u70b9\u6cd5\u7ebf\u901a\u5e38\u662f\u76f8\u90bb\u9762\u6cd5\u7ebf\u7684\u5e73\u5747</li>\n<li>\u4f18\u70b9\uff1a\u6bd4\u5e73\u9762\u7740\u8272\u5e73\u6ed1\uff0c\u8ba1\u7b97\u6548\u7387\u8f83\u9ad8</li>\n<li>\u7f3a\u70b9\uff1a</li>\n<li>\u9ad8\u5149\u53ef\u80fd\u5931\u771f\uff08\u9876\u70b9\u6ca1\u6709\u9ad8\u5149\u65f6\u6574\u4e2a\u4e09\u89d2\u5f62\u90fd\u6ca1\u6709\uff09</li>\n<li>\u4e0d\u80fd\u6b63\u786e\u5904\u7406\u975e\u7ebf\u6027\u5149\u7167\u6548\u679c</li>\n</ul>\n<ol start=\"3\">\n<li><strong>Phong\u7740\u8272\uff08\u50cf\u7d20\u7740\u8272/\u7247\u6bb5\u7740\u8272\uff09</strong>\nBui Tuong Phong\u540c\u65f6\u63d0\u51fa\uff1a</li>\n</ol>\n<ul>\n<li>\u63d2\u503c\u6cd5\u7ebf\u800c\u975e\u989c\u8272</li>\n<li>\u5728\u6bcf\u4e2a\u50cf\u7d20\u5904\u8ba1\u7b97\u5149\u7167</li>\n<li>\u4f18\u70b9\uff1a</li>\n<li>\u9ad8\u8d28\u91cf\u7684\u5149\u7167\u6548\u679c</li>\n<li>\u6b63\u786e\u5904\u7406\u9ad8\u5149\u548c\u975e\u7ebf\u6027\u6548\u679c</li>\n<li>\u652f\u6301\u9010\u50cf\u7d20\u7684\u6cd5\u7ebf\u8d34\u56fe</li>\n<li>\u7f3a\u70b9\uff1a\u8ba1\u7b97\u91cf\u5927\uff08\u73b0\u4ee3GPU\u5df2\u89e3\u51b3\uff09</li>\n</ul>\n<p><strong>\u9009\u62e9\u6807\u51c6\uff1a</strong></p>\n<ul>\n<li>\u4f4e\u591a\u8fb9\u5f62\u6a21\u578b + \u9ad8\u8d28\u91cf\u7740\u8272 = \u9519\u8bef\u7684\u9009\u62e9</li>\n<li>\u9ad8\u591a\u8fb9\u5f62\u6a21\u578b + Gouraud\u7740\u8272 = \u53ef\u80fd\u8db3\u591f</li>\n<li>\u73b0\u4ee3\u5b9e\u8df5\uff1a\u51e0\u4e4e\u603b\u662f\u4f7f\u7528Phong\u7740\u8272\uff08\u7247\u6bb5\u7740\u8272\u5668\uff09</li>\n</ul>\n<h3 id=\"422\">4.2.2 \u6cd5\u7ebf\u63d2\u503c</h3>\n<p>\u5728Phong\u7740\u8272\u4e2d\uff0c\u9700\u8981\u63d2\u503c\u6cd5\u7ebf\u800c\u975e\u989c\u8272\u3002\u8fd9\u662f\u5b9e\u73b0\u9ad8\u8d28\u91cf\u5149\u7167\u7684\u5173\u952e\u3002</p>\n<p><strong>\u91cd\u5fc3\u5750\u6807\u63d2\u503c\uff1a</strong>\n$$\\mathbf{n} = \\alpha \\mathbf{n}_1 + \\beta \\mathbf{n}_2 + \\gamma \\mathbf{n}_3$$\n<strong>\u4e3a\u4ec0\u4e48\u9700\u8981\u91cd\u65b0\u5f52\u4e00\u5316\uff1a</strong>\n\u7ebf\u6027\u63d2\u503c\u4e0d\u4fdd\u6301\u5411\u91cf\u957f\u5ea6\u3002\u8003\u8651\u4e24\u4e2a\u76f8\u4e92\u5782\u76f4\u7684\u5355\u4f4d\u6cd5\u7ebf$\\mathbf{n}_1 = (1,0,0)$\u548c$\\mathbf{n}_2 = (0,1,0)$\uff0c\u5b83\u4eec\u7684\u4e2d\u70b9\u63d2\u503c\uff1a\n$$\\mathbf{n}_{mid} = 0.5\\mathbf{n}_1 + 0.5\\mathbf{n}_2 = (0.5, 0.5, 0) \\Rightarrow ||\\mathbf{n}_{mid}|| = \\frac{1}{\\sqrt{2}} &lt; 1$$\n\u56e0\u6b64\u5fc5\u987b\u91cd\u65b0\u5f52\u4e00\u5316\uff1a\n$$\\mathbf{n}_{normalized} = \\frac{\\mathbf{n}}{||\\mathbf{n}||_2}$$\n<strong>\u6cd5\u7ebf\u63d2\u503c\u7684\u51e0\u4f55\u610f\u4e49\uff1a</strong></p>\n<ul>\n<li>\u7ebf\u6027\u63d2\u503c\u5728\u5207\u5e73\u9762\u4e0a\u8fdb\u884c</li>\n<li>\u5f52\u4e00\u5316\u5c06\u7ed3\u679c\u6295\u5f71\u56de\u5355\u4f4d\u7403\u9762</li>\n<li>\u7ed3\u679c\u662f\u7403\u9762\u4e0a\u7684\u6700\u77ed\u8def\u5f84\uff08\u5927\u5706\u5f27\uff09\u7684\u8fd1\u4f3c</li>\n</ul>\n<p><strong>\u4f18\u5316\u6280\u5de7\uff1a</strong></p>\n<ol>\n<li>\n<p><strong>\u5feb\u901f\u5f52\u4e00\u5316\u8fd1\u4f3c\uff1a</strong>\n$$\\mathbf{n}_{approx} \\approx \\mathbf{n} \\cdot (1.5 - 0.5 \\cdot \\mathbf{n} \\cdot \\mathbf{n})$$\n\u57fa\u4e8e\u725b\u987f-\u62c9\u592b\u900a\u8fed\u4ee3\uff0c\u5f53$||\\mathbf{n}||$\u63a5\u8fd11\u65f6\u975e\u5e38\u51c6\u786e</p>\n</li>\n<li>\n<p><strong>\u56db\u5143\u6570\u63d2\u503c\uff1a</strong>\n   \u5bf9\u4e8e\u5927\u89d2\u5ea6\u65cb\u8f6c\uff0c\u53ef\u4ee5\u4f7f\u7528\u56db\u5143\u6570\u8868\u793a\u6cd5\u7ebf\u65b9\u5411\uff0c\u4f7f\u7528SLERP\u63d2\u503c</p>\n</li>\n</ol>\n<h3 id=\"423\">4.2.3 \u900f\u89c6\u6821\u6b63\u63d2\u503c</h3>\n<p>\u5728\u900f\u89c6\u6295\u5f71\u4e0b\uff0c\u5c4f\u5e55\u7a7a\u95f4\u7684\u7ebf\u6027\u63d2\u503c\u4e0d\u7b49\u4e8e3D\u7a7a\u95f4\u7684\u7ebf\u6027\u63d2\u503c\u3002\u8fd9\u662f\u56e0\u4e3a\u900f\u89c6\u6295\u5f71\u662f\u975e\u7ebf\u6027\u53d8\u6362\u3002</p>\n<p><strong>\u95ee\u9898\u7684\u6839\u6e90\uff1a</strong>\n\u8003\u8651\u4e00\u6761\u7a7a\u95f43D\u7ebf\u6bb5\uff0c\u5176\u7aef\u70b9\u5728\u4e0d\u540c\u6df1\u5ea6\u3002\u900f\u89c6\u6295\u5f71\u540e\uff1a</p>\n<ul>\n<li>3D\u7a7a\u95f4\u7684\u4e2d\u70b9\u4e0d\u6620\u5c04\u5230\u5c4f\u5e55\u7a7a\u95f4\u7684\u4e2d\u70b9</li>\n<li>\u8fdc\u5904\u7684\u90e8\u5206\u88ab\u538b\u7f29\uff0c\u8fd1\u5904\u7684\u90e8\u5206\u88ab\u62c9\u4f38</li>\n</ul>\n<p><strong>\u900f\u89c6\u6821\u6b63\u516c\u5f0f\u63a8\u5bfc\uff1a</strong>\n\u900f\u89c6\u6295\u5f71\u4e2d\uff0c\u5c4f\u5e55\u5750\u6807\u4e0e3D\u5750\u6807\u7684\u5173\u7cfb\uff1a\n$$x_s = \\frac{x}{z}, \\quad y_s = \\frac{y}{z}$$\n\u5bf9\u4e8e\u5c5e\u6027$A$\uff0c\u6b63\u786e\u7684\u63d2\u503c\u662f\uff1a\n$$\\frac{1}{z} = \\alpha \\frac{1}{z_1} + \\beta \\frac{1}{z_2} + \\gamma \\frac{1}{z_3}$$</p>\n<p>$$A = \\frac{\\alpha \\frac{A_1}{z_1} + \\beta \\frac{A_2}{z_2} + \\gamma \\frac{A_3}{z_3}}{\\alpha \\frac{1}{z_1} + \\beta \\frac{1}{z_2} + \\gamma \\frac{1}{z_3}}$$\n<strong>\u5b9e\u73b0\u7ec6\u8282\uff1a</strong></p>\n<ol>\n<li>\u73b0\u4ee3GPU\u81ea\u52a8\u5904\u7406\u900f\u89c6\u6821\u6b63</li>\n<li>\u9700\u8981\u5b58\u50a8$1/z$\u503c\uff08\u901a\u5e38\u5728\u6df1\u5ea6\u7f13\u51b2\u4e2d\uff09</li>\n<li>\u6240\u6709\u9876\u70b9\u5c5e\u6027\u90fd\u9700\u8981\u900f\u89c6\u6821\u6b63\uff1a\n   - \u7eb9\u7406\u5750\u6807\n   - \u6cd5\u7ebf\u5411\u91cf\n   - \u989c\u8272\u503c\n   - \u4efb\u4f55\u81ea\u5b9a\u4e49\u5c5e\u6027</li>\n</ol>\n<p><strong>\u6ca1\u6709\u900f\u89c6\u6821\u6b63\u7684\u540e\u679c\uff1a</strong></p>\n<ul>\n<li>\u7eb9\u7406\u626d\u66f2\uff08\u7279\u522b\u662f\u5730\u9762\u3001\u5899\u58c1\uff09</li>\n<li>\u5149\u7167\u4e0d\u6b63\u786e</li>\n<li>\u52a8\u753b\u4e2d\u51fa\u73b0\u201c\u6e38\u6cf3\u201d\u6548\u679c</li>\n</ul>\n<h3 id=\"424\">4.2.4 \u73b0\u4ee3\u56fe\u5f62\u7ba1\u7ebf\u4e2d\u7684\u7740\u8272</h3>\n<p>\u73b0\u4ee3GPU\u4f7f\u7528\u53ef\u7f16\u7a0b\u7740\u8272\u5668\uff0c\u63d0\u4f9b\u4e86\u7075\u6d3b\u7684\u6e32\u67d3\u7ba1\u7ebf\uff1a</p>\n<ol>\n<li>\n<p><strong>\u9876\u70b9\u7740\u8272\u5668\uff08Vertex Shader\uff09</strong>\n- \u8f93\u5165\uff1a\u9876\u70b9\u5c5e\u6027\uff08\u4f4d\u7f6e\u3001\u6cd5\u7ebf\u3001UV\u7b49\uff09\n- \u4e3b\u8981\u4efb\u52a1\uff1a\n  - \u6a21\u578b\u89c6\u56fe\u6295\u5f71\u53d8\u6362\uff08MVP\uff09\n  - \u9876\u70b9\u52a8\u753b\uff08\u9aa8\u9abc\u3001\u53d8\u5f62\uff09\n  - \u8ba1\u7b97\u4e16\u754c\u7a7a\u95f4\u5750\u6807\u548c\u6cd5\u7ebf\n  - \u4f20\u9012\u5c5e\u6027\u5230\u7247\u6bb5\u7740\u8272\u5668\n- \u8f93\u51fa\uff1a\u88c1\u526a\u7a7a\u95f4\u5750\u6807\u548c\u5c5e\u6027</p>\n</li>\n<li>\n<p><strong>\u7247\u6bb5\u7740\u8272\u5668\uff08Fragment/Pixel Shader\uff09</strong>\n- \u8f93\u5165\uff1a\u63d2\u503c\u540e\u7684\u9876\u70b9\u5c5e\u6027\n- \u4e3b\u8981\u4efb\u52a1\uff1a\n  - \u5149\u7167\u8ba1\u7b97\uff08Phong/Blinn-Phong/PBR\uff09\n  - \u7eb9\u7406\u91c7\u6837\u548c\u6df7\u5408\n  - \u6cd5\u7ebf\u8d34\u56fe\u5e94\u7528\n  - \u540e\u671f\u5904\u7406\u6548\u679c\n- \u8f93\u51fa\uff1a\u50cf\u7d20\u989c\u8272\uff08RGBA\uff09</p>\n</li>\n<li>\n<p><strong>\u5ef6\u8fdf\u7740\u8272\uff08Deferred Shading\uff09</strong></p>\n</li>\n</ol>\n<p><em>\u51e0\u4f55\u901a\u9053\uff1a</em></p>\n<ul>\n<li>\u6e32\u67d3\u5230G-Buffer\uff08\u51e0\u4f55\u7f13\u51b2\uff09\uff1a</li>\n<li>\u6cd5\u7ebf\uff08\u4e16\u754c\u7a7a\u95f4\u6216\u89c6\u56fe\u7a7a\u95f4\uff09</li>\n<li>\u6f2b\u53cd\u5c04\u989c\u8272</li>\n<li>\u955c\u9762\u53cd\u5c04\u53c2\u6570</li>\n<li>\u6df1\u5ea6\u503c</li>\n<li>\u6750\u8d28ID\u6216\u5176\u4ed6\u5c5e\u6027</li>\n</ul>\n<p><em>\u5149\u7167\u901a\u9053\uff1a</em></p>\n<ul>\n<li>\u5bf9\u6bcf\u4e2a\u5149\u6e90\uff1a</li>\n<li>\u6e32\u67d3\u5149\u6e90\u5f71\u54cd\u8303\u56f4\uff08\u5149\u7167\u4f53\u79ef\uff09</li>\n<li>\u4eceG-Buffer\u8bfb\u53d6\u6570\u636e</li>\n<li>\u8ba1\u7b97\u5149\u7167\u8d21\u732e</li>\n<li>\u7d2f\u52a0\u5230\u6700\u7ec8\u56fe\u50cf</li>\n</ul>\n<p><em>\u4f18\u7f3a\u70b9\u5bf9\u6bd4\uff1a</em></p>\n<p>| \u7279\u6027 | \u524d\u5411\u7740\u8272 | \u5ef6\u8fdf\u7740\u8272 |</p>\n<table>\n<thead>\n<tr>\n<th>\u7279\u6027</th>\n<th>\u524d\u5411\u7740\u8272</th>\n<th>\u5ef6\u8fdf\u7740\u8272</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\u5149\u7167\u8ba1\u7b97\u590d\u6742\u5ea6</td>\n<td>O(lights \u00d7 fragments)</td>\n<td>O(lights + fragments)</td>\n</tr>\n<tr>\n<td>\u5185\u5b58\u5e26\u5bbd</td>\n<td>\u4f4e</td>\n<td>\u9ad8\uff08G-Buffer\uff09</td>\n</tr>\n<tr>\n<td>\u900f\u660e\u7269\u4f53</td>\n<td>\u652f\u6301</td>\n<td>\u4e0d\u652f\u6301</td>\n</tr>\n<tr>\n<td>\u6297\u952f\u9f7f</td>\n<td>MSAA\u53ef\u7528</td>\n<td>MSAA\u6210\u672c\u9ad8</td>\n</tr>\n<tr>\n<td>\u6750\u8d28\u7075\u6d3b\u6027</td>\n<td>\u9ad8</td>\n<td>\u53d7\u9650\u4e8eG-Buffer</td>\n</tr>\n</tbody>\n</table>\n<ol start=\"4\">\n<li><strong>Tile-Based Deferred Rendering (TBDR)</strong>\n- \u5c06\u5c4f\u5e55\u5206\u6210\u5c0f\u5757\uff08tiles\uff09\n- \u6bcf\u4e2a\u5757\u7ef4\u62a4\u5f71\u54cd\u5b83\u7684\u5149\u6e90\u5217\u8868\n- \u7ed3\u5408\u4e86\u524d\u5411\u548c\u5ef6\u8fdf\u7740\u8272\u7684\u4f18\u70b9\n- \u9002\u5408\u79fb\u52a8GPU\u67b6\u6784</li>\n</ol>\n<h2 id=\"43\">4.3 \u7eb9\u7406\u6620\u5c04\u57fa\u7840</h2>\n<h3 id=\"431\">4.3.1 \u7eb9\u7406\u6620\u5c04\u7684\u6982\u5ff5</h3>\n<p>\u7eb9\u7406\u6620\u5c04\uff08Texture Mapping\uff09\u662fEdwin Catmull\u4e8e1974\u5e74\u9996\u6b21\u63d0\u51fa\u7684\u6280\u672f\uff0c\u901a\u8fc7\u5c062D\u56fe\u50cf\u6620\u5c04\u52303D\u8868\u9762\u6765\u589e\u52a0\u89c6\u89c9\u7ec6\u8282\uff0c\u800c\u65e0\u9700\u589e\u52a0\u51e0\u4f55\u590d\u6742\u5ea6\u3002</p>\n<p><strong>\u6838\u5fc3\u601d\u60f3\uff1a</strong></p>\n<ul>\n<li>\u51e0\u4f55\u63d0\u4f9b\u5f62\u72b6\uff0c\u7eb9\u7406\u63d0\u4f9b\u7ec6\u8282</li>\n<li>\u5c06\u590d\u6742\u7684\u8868\u9762\u7ec6\u8282\u201c\u8d34\u201d\u5230\u7b80\u5355\u51e0\u4f55\u4f53\u4e0a</li>\n<li>\u53ef\u4ee5\u6620\u5c04\u7684\u4e0d\u4ec5\u662f\u989c\u8272\uff0c\u8fd8\u6709\u6cd5\u7ebf\u3001\u9ad8\u5ea6\u3001\u7c97\u7cd9\u5ea6\u7b49</li>\n</ul>\n<p><strong>\u57fa\u672c\u6d41\u7a0b\uff1a</strong></p>\n<ol>\n<li><strong>\u53c2\u6570\u5316</strong>\uff1a\u4e3a3D\u6a21\u578b\u7684\u6bcf\u4e2a\u9876\u70b9\u6307\u5b9a\u7eb9\u7406\u5750\u6807$(u,v)$</li>\n<li><strong>\u63d2\u503c</strong>\uff1a\u5149\u6805\u5316\u65f6\u63d2\u503c\u7eb9\u7406\u5750\u6807\uff08\u9700\u8981\u900f\u89c6\u6821\u6b63\uff09</li>\n<li><strong>\u91c7\u6837</strong>\uff1a\u4f7f\u7528\u63d2\u503c\u540e\u7684\u5750\u6807\u4ece\u7eb9\u7406\u56fe\u50cf\u4e2d\u91c7\u6837</li>\n<li><strong>\u5e94\u7528</strong>\uff1a\u5c06\u91c7\u6837\u7ed3\u679c\u7528\u4e8e\u7740\u8272\u8ba1\u7b97</li>\n</ol>\n<p><strong>\u7eb9\u7406\u7684\u6570\u5b66\u5b9a\u4e49\uff1a</strong>\n\u7eb9\u7406\u662f\u4e00\u4e2a\u51fd\u6570$T: \\mathbb{R}^2 \\rightarrow \\mathbb{R}^n$\uff0c\u5176\u4e2d\uff1a</p>\n<ul>\n<li>\u8f93\u5165\uff1a2D\u7eb9\u7406\u5750\u6807$(u,v)$</li>\n<li>\u8f93\u51fa\uff1a$n$\u7ef4\u5c5e\u6027\uff08\u989c\u8272\u3001\u6cd5\u7ebf\u3001\u6750\u8d28\u53c2\u6570\u7b49\uff09</li>\n</ul>\n<p><strong>\u7eb9\u7406\u6620\u5c04\u7684\u4f18\u52bf\uff1a</strong></p>\n<ol>\n<li><strong>\u5185\u5b58\u6548\u7387</strong>\uff1a2D\u56fe\u50cf\u6bd43D\u51e0\u4f55\u7b80\u5355\u5f97\u591a</li>\n<li><strong>\u7f16\u8f91\u65b9\u4fbf</strong>\uff1a\u53ef\u4ee5\u4f7f\u7528\u6210\u719f\u7684\u56fe\u50cf\u7f16\u8f91\u5de5\u5177</li>\n<li><strong>\u91cd\u7528\u6027</strong>\uff1a\u540c\u4e00\u7eb9\u7406\u53ef\u5e94\u7528\u4e8e\u591a\u4e2a\u6a21\u578b</li>\n<li><strong>LOD\u652f\u6301</strong>\uff1aMipmap\u7b49\u6280\u672f\u63d0\u4f9b\u81ea\u52a8\u7ec6\u8282\u5c42\u6b21</li>\n</ol>\n<h3 id=\"432\">4.3.2 \u7eb9\u7406\u5750\u6807\u7cfb\u7edf</h3>\n<p><strong>UV\u5750\u6807\uff1a</strong></p>\n<ul>\n<li>$u$\uff1a\u6a2a\u5411\u5750\u6807\uff0c\u901a\u5e38\u8303\u56f4$[0,1]$\uff08\u4e5f\u79f0\u4e3as\u5750\u6807\uff09</li>\n<li>$v$\uff1a\u7eb5\u5411\u5750\u6807\uff0c\u901a\u5e38\u8303\u56f4$[0,1]$\uff08\u4e5f\u79f0\u4e3at\u5750\u6807\uff09</li>\n<li>\u539f\u70b9\u4f4d\u7f6e\uff1a</li>\n<li>OpenGL\uff1a\u5de6\u4e0b\u89d2$(0,0)$</li>\n<li>DirectX\uff1a\u5de6\u4e0a\u89d2$(0,0)$</li>\n</ul>\n<p><strong>\u7eb9\u7406\u5750\u6807\u7684\u83b7\u53d6\u65b9\u5f0f\uff1a</strong></p>\n<ol>\n<li>\n<p><strong>\u624b\u52a8\u6307\u5b9a</strong>\n- \u7f8e\u672f\u5e08\u5728\u5efa\u6a21\u8f6f\u4ef6\u4e2d\u7cbe\u786e\u8bbe\u7f6e\n- \u9002\u5408\u590d\u6742\u6a21\u578b\u548c\u827a\u672f\u6548\u679c\n- \u9700\u8981\u4e13\u4e1a\u6280\u80fd\u548c\u7ecf\u9a8c</p>\n</li>\n<li>\n<p><strong>\u53c2\u6570\u5316\u6620\u5c04</strong></p>\n</li>\n</ol>\n<p><em>\u5e73\u9762\u6620\u5c04\uff1a</em>\n$$u = \\frac{x - x_{min}}{x_{max} - x_{min}}, \\quad v = \\frac{y - y_{min}}{y_{max} - y_{min}}$$\n<em>\u7403\u9762\u6620\u5c04\uff1a</em>\n$$u = \\frac{1}{2\\pi}\\arctan\\left(\\frac{y}{x}\\right) + 0.5$$\n$$v = \\frac{1}{\\pi}\\arccos\\left(\\frac{z}{r}\\right)$$\n<em>\u5706\u67f1\u6620\u5c04\uff1a</em>\n$$u = \\frac{1}{2\\pi}\\arctan\\left(\\frac{y}{x}\\right) + 0.5$$\n$$v = \\frac{z - z_{min}}{z_{max} - z_{min}}$$\n<em>\u7acb\u65b9\u4f53\u6620\u5c04\uff1a</em>\n\u6839\u636e\u6cd5\u7ebf\u65b9\u5411\u9009\u62e9\u516d\u4e2a\u9762\u4e4b\u4e00\uff0c\u7136\u540e\u8fdb\u884c\u5e73\u9762\u6620\u5c04</p>\n<ol start=\"3\">\n<li><strong>\u81ea\u52a8UV\u5c55\u5f00</strong>\n- <strong>\u76ee\u6807</strong>\uff1a\u6700\u5c0f\u5316\u626d\u66f2\uff0c\u6700\u5927\u5316\u5229\u7528\u7387\n- <strong>\u5e38\u7528\u7b97\u6cd5</strong>\uff1a\n  - LSCM (Least Squares Conformal Maps)\n  - ABF (Angle Based Flattening)\n  - ARAP (As-Rigid-As-Possible)\n- <strong>\u8d28\u91cf\u6307\u6807</strong>\uff1a\n  - \u89d2\u5ea6\u626d\u66f2\uff1a$\\sum(\\theta_{3D} - \\theta_{2D})^2$\n  - \u9762\u79ef\u626d\u66f2\uff1a$\\sum(A_{3D} - A_{2D})^2$\n  - \u62c9\u4f38\u7387\uff1a$\\max(\\sigma_1/\\sigma_2)$</li>\n</ol>\n<p><strong>UV\u5c9b\uff08UV Islands\uff09\uff1a</strong></p>\n<ul>\n<li>\u590d\u6742\u6a21\u578b\u901a\u5e38\u88ab\u5207\u5272\u6210\u591a\u4e2aUV\u5c9b</li>\n<li>\u5207\u7f1d\u4f4d\u7f6e\u7684\u9009\u62e9\u5f88\u91cd\u8981\uff1a</li>\n<li>\u9690\u85cf\u5728\u4e0d\u663e\u773c\u7684\u5730\u65b9</li>\n<li>\u6cbf\u7740\u81ea\u7136\u8fb9\u754c\uff08\u5982\u8863\u670d\u7f1d\u5408\u7ebf\uff09</li>\n<li>\u907f\u514d\u9ad8\u66f2\u7387\u533a\u57df</li>\n</ul>\n<h3 id=\"433\">4.3.3 \u7eb9\u7406\u91c7\u6837</h3>\n<p>\u7eb9\u7406\u91c7\u6837\u662f\u6839\u636e\u7eb9\u7406\u5750\u6807\u4ece\u7eb9\u7406\u56fe\u50cf\u4e2d\u83b7\u53d6\u989c\u8272\u503c\u7684\u8fc7\u7a0b\u3002\u4e0d\u540c\u7684\u91c7\u6837\u65b9\u6cd5\u5728\u8d28\u91cf\u548c\u6027\u80fd\u4e4b\u95f4\u505a\u51fa\u4e0d\u540c\u6743\u8861\u3002</p>\n<p><strong>\u6700\u8fd1\u90bb\u91c7\u6837\uff08Nearest Neighbor/Point Sampling\uff09\uff1a</strong></p>\n<pre class=\"codehilite\"><code>u_pixel = round(u * (width - 1))\nv_pixel = round(v * (height - 1))\ncolor = texture[u_pixel, v_pixel]\n</code></pre>\n\n<ul>\n<li>\u4f18\u70b9\uff1a\u5feb\u901f\uff0c\u4fdd\u6301\u50cf\u7d20\u5316\u6548\u679c\uff0c\u9002\u5408\u50cf\u7d20\u827a\u672f\u98ce\u683c</li>\n<li>\u7f3a\u70b9\uff1a\u4ea7\u751f\u952f\u9f7f\uff0c\u653e\u5927\u65f6\u51fa\u73b0\u5757\u72b6\u4f2a\u5f71</li>\n<li>\u5e94\u7528\uff1aMinecraft\u7b49\u50cf\u7d20\u98ce\u683c\u6e38\u620f</li>\n</ul>\n<p><strong>\u53cc\u7ebf\u6027\u63d2\u503c\uff08Bilinear Interpolation\uff09\uff1a</strong></p>\n<p>\u8ba1\u7b97\u6b65\u9aa4\uff1a</p>\n<ol>\n<li>\n<p>\u627e\u5230\u56db\u4e2a\u6700\u8fd1\u7eb9\u7d20\uff1a\n   <code>u_coord = u * (width - 1)\n   v_coord = v * (height - 1)\n   u0 = floor(u_coord), u1 = u0 + 1\n   v0 = floor(v_coord), v1 = v0 + 1</code></p>\n</li>\n<li>\n<p>\u8ba1\u7b97\u5206\u6570\u90e8\u5206\uff1a\n   <code>s = u_coord - u0\n   t = v_coord - v0</code></p>\n</li>\n<li>\n<p>\u53cc\u7ebf\u6027\u63d2\u503c\uff1a\n$$c = (1-s)(1-t)c_{00} + s(1-t)c_{10} + (1-s)t c_{01} + st c_{11}$$\n\u53ef\u4ee5\u5206\u89e3\u4e3a\u4e24\u6b21\u7ebf\u6027\u63d2\u503c\uff1a</p>\n</li>\n</ol>\n<ul>\n<li>\u6c34\u5e73\u65b9\u5411\uff1a$c_0 = (1-s)c_{00} + s c_{10}$\uff0c$c_1 = (1-s)c_{01} + s c_{11}$</li>\n<li>\u5782\u76f4\u65b9\u5411\uff1a$c = (1-t)c_0 + t c_1$</li>\n</ul>\n<p><strong>\u53cc\u4e09\u6b21\u63d2\u503c\uff08Bicubic Interpolation\uff09\uff1a</strong>\n\u4f7f\u752816\u4e2a\u6700\u8fd1\u7eb9\u7d20\uff084\u00d74\u7f51\u683c\uff09\uff0c\u901a\u8fc7\u4e09\u6b21\u591a\u9879\u5f0f\u63d2\u503c\uff1a\n$$c(s,t) = \\sum_{i=-1}^{2}\\sum_{j=-1}^{2} c_{ij} \\cdot h(s-i) \\cdot h(t-j)$$\n\u5176\u4e2d$h(x)$\u662fCatmull-Rom\u6838\u51fd\u6570\uff1a\n$$h(x) = \\begin{cases}\n1.5|x|^3 - 2.5|x|^2 + 1 &amp; |x| \\leq 1 \\\n-0.5|x|^3 + 2.5|x|^2 - 4|x| + 2 &amp; 1 &lt; |x| \\leq 2 \\\n0 &amp; |x| &gt; 2\n\\end{cases}$$</p>\n<ul>\n<li>\u4f18\u70b9\uff1a\u66f4\u5e73\u6ed1\u7684\u7ed3\u679c\uff0c\u9002\u5408\u9ad8\u8d28\u91cf\u653e\u5927</li>\n<li>\u7f3a\u70b9\uff1a\u8ba1\u7b97\u6210\u672c\u9ad8\uff0c\u53ef\u80fd\u4ea7\u751f\u632f\u94c3\uff08ringing\uff09</li>\n</ul>\n<h3 id=\"434\">4.3.4 \u7eb9\u7406\u653e\u5927\u4e0e\u7f29\u5c0f</h3>\n<p>\u7eb9\u7406\u91c7\u6837\u7684\u6838\u5fc3\u6311\u6218\u662f\u5904\u7406\u7eb9\u7406\u5206\u8fa8\u7387\u4e0e\u5c4f\u5e55\u5206\u8fa8\u7387\u4e0d\u5339\u914d\u7684\u60c5\u51b5\u3002</p>\n<p><strong>\u653e\u5927\uff08Magnification\uff09\u95ee\u9898\uff1a</strong></p>\n<p><em>\u73b0\u8c61\uff1a</em></p>\n<ul>\n<li>\u7eb9\u7406\u5206\u8fa8\u7387\u4f4e\u4e8e\u5c4f\u5e55\u91c7\u6837\u7387</li>\n<li>\u4e00\u4e2a\u7eb9\u7d20\u8986\u76d6\u591a\u4e2a\u50cf\u7d20</li>\n<li>\u51fa\u73b0\u5757\u72b6\u6216\u6a21\u7cca\u4f2a\u5f71</li>\n</ul>\n<p><em>\u89e3\u51b3\u65b9\u6848\uff1a</em></p>\n<ol>\n<li><strong>\u53cc\u7ebf\u6027\u63d2\u503c</strong>\uff1a\u57fa\u672c\u9009\u62e9\uff0c\u5e73\u6ed1\u4f46\u6a21\u7cca</li>\n<li><strong>\u53cc\u4e09\u6b21\u63d2\u503c</strong>\uff1a\u66f4\u9ad8\u8d28\u91cf\uff0c\u4f46\u8ba1\u7b97\u6602\u8d35</li>\n<li><strong>\u8d85\u5206\u8fa8\u7387\u6280\u672f</strong>\uff1a\n   - ESRGAN\u7b49\u6df1\u5ea6\u5b66\u4e60\u65b9\u6cd5\n   - \u5b9e\u65f6\u8d85\u5206\uff08DLSS\u3001FSR\uff09</li>\n</ol>\n<p><strong>\u7f29\u5c0f\uff08Minification\uff09\u95ee\u9898\uff1a</strong></p>\n<p><em>\u73b0\u8c61\uff1a</em></p>\n<ul>\n<li>\u7eb9\u7406\u5206\u8fa8\u7387\u9ad8\u4e8e\u5c4f\u5e55\u91c7\u6837\u7387</li>\n<li>\u591a\u4e2a\u7eb9\u7d20\u6620\u5c04\u5230\u4e00\u4e2a\u50cf\u7d20</li>\n<li>\u51fa\u73b0\u8d70\u6837\uff08aliasing\uff09\u548c\u6469\u5c14\u7eb9\uff08moir\u00e9 patterns\uff09</li>\n</ul>\n<p><em>\u8d70\u6837\u7684\u6839\u6e90\uff1a</em>\n\u6839\u636e\u5948\u594e\u65af\u7279\u91c7\u6837\u5b9a\u7406\uff0c\u91c7\u6837\u9891\u7387\u5fc5\u987b\u81f3\u5c11\u662f\u4fe1\u53f7\u6700\u9ad8\u9891\u7387\u7684\u4e24\u500d\uff1a\n$$f_s &gt; 2 f_{max}$$\n\u5f53\u7eb9\u7406\u88ab\u7f29\u5c0f\u65f6\uff0c\u9ad8\u9891\u7ec6\u8282\u8d85\u8fc7\u4e86\u5c4f\u5e55\u91c7\u6837\u7387\u7684\u5948\u594e\u65af\u7279\u9650\u5236\u3002</p>\n<p><em>\u89e3\u51b3\u65b9\u6848\uff1a</em></p>\n<ol>\n<li><strong>\u8d85\u91c7\u6837</strong>\uff1a\u589e\u52a0\u91c7\u6837\u7387\uff0c\u4f46\u6210\u672c\u9ad8</li>\n<li><strong>\u9884\u6ee4\u6ce2</strong>\uff1a\u5728\u91c7\u6837\u524d\u53bb\u9664\u9ad8\u9891\u5206\u91cf</li>\n<li><strong>Mipmap</strong>\uff1a\u9884\u8ba1\u7b97\u7684\u591a\u5206\u8fa8\u7387\u7eb9\u7406\u91d1\u5b57\u5854</li>\n</ol>\n<p><strong>\u7eb9\u7406\u8fc7\u6ee4\u6a21\u5f0f\u8bbe\u7f6e\uff1a</strong></p>\n<pre class=\"codehilite\"><code>GL_TEXTURE_MIN_FILTER: // \u7f29\u5c0f\u65f6\n  - GL_NEAREST\n  - GL_LINEAR\n  - GL_NEAREST_MIPMAP_NEAREST\n  - GL_LINEAR_MIPMAP_LINEAR\n\nGL_TEXTURE_MAG_FILTER: // \u653e\u5927\u65f6\n  - GL_NEAREST\n  - GL_LINEAR\n</code></pre>\n\n<h3 id=\"435-mipmap\">4.3.5 Mipmap\u6280\u672f</h3>\n<p>Mipmap\uff08\u6765\u81ea\u62c9\u4e01\u8bed\"multum in parvo\"\uff0c\u610f\u4e3a\"\u5c0f\u4e2d\u89c1\u5927\"\uff09\u662fLance Williams\u4e8e1983\u5e74\u63d0\u51fa\u7684\u9884\u6ee4\u6ce2\u6280\u672f\u3002</p>\n<p><strong>Mipmap\u6784\u5efa\uff1a</strong></p>\n<ol>\n<li>\n<p><strong>\u91d1\u5b57\u5854\u7ed3\u6784</strong>\uff1a\n   - Level 0\uff1a\u539f\u59cb\u7eb9\u7406\uff08$n \\times n$\uff09\n   - Level 1\uff1a$n/2 \\times n/2$\n   - Level 2\uff1a$n/4 \\times n/4$\n   - ...\n   - Level $\\log_2(n)$\uff1a$1 \\times 1$</p>\n</li>\n<li>\n<p><strong>\u5185\u5b58\u5f00\u9500</strong>\uff1a\n$$\\text{Total} = n^2 + \\frac{n^2}{4} + \\frac{n^2}{16} + ... = \\frac{4}{3}n^2$$\n\u53ea\u589e\u52a033%\u7684\u5b58\u50a8\u7a7a\u95f4</p>\n</li>\n<li>\n<p><strong>\u751f\u6210\u65b9\u6cd5</strong>\uff1a\n   - \u7b80\u5355\u5e73\u5747\uff1a\u6bcf2\u00d72\u50cf\u7d20\u5e73\u5747\u4e3a1\u4e2a\n   - \u9ad8\u8d28\u91cf\u6ee4\u6ce2\uff1a\u4f7f\u7528Lanczos\u6216Mitchell\u6ee4\u6ce2\u5668</p>\n</li>\n</ol>\n<p><strong>Mipmap\u7ea7\u522b\u9009\u62e9\uff1a</strong></p>\n<p><em>\u57fa\u672c\u601d\u60f3\uff1a</em>\n\u9009\u62e9\u4f7f\u5f97\u7eb9\u7d20\u4e0e\u50cf\u7d201:1\u5bf9\u5e94\u7684\u7ea7\u522b\u3002</p>\n<p><em>\u8ba1\u7b97\u516c\u5f0f\uff1a</em>\n$$L = \\log_2\\left(\\max\\left(\\sqrt{\\left(\\frac{\\partial u}{\\partial x}\\right)^2 + \\left(\\frac{\\partial v}{\\partial x}\\right)^2} \\cdot width, \\sqrt{\\left(\\frac{\\partial u}{\\partial y}\\right)^2 + \\left(\\frac{\\partial v}{\\partial y}\\right)^2} \\cdot height\\right)\\right)$$\n<em>\u5b9e\u9645\u5b9e\u73b0\uff1a</em></p>\n<ul>\n<li>\u4f7f\u7528\u5dee\u5206\u8fd1\u4f3c\u504f\u5bfc\u6570</li>\n<li>GPU\u786c\u4ef6\u81ea\u52a8\u8ba1\u7b97</li>\n<li>\u53ef\u4ee5\u52a0\u4e0aLOD bias\u8c03\u6574</li>\n</ul>\n<p><strong>\u4e09\u7ebf\u6027\u63d2\u503c\uff08Trilinear Interpolation\uff09\uff1a</strong></p>\n<p>\u5f53$L$\u4e0d\u662f\u6574\u6570\u65f6\uff0c\u5728\u76f8\u90bb\u4e24\u4e2amipmap\u7ea7\u522b\u4e4b\u95f4\u63d2\u503c\uff1a</p>\n<ol>\n<li>\n<p>\u8ba1\u7b97\u4e24\u4e2a\u7ea7\u522b\uff1a\n   <code>L0 = floor(L)\n   L1 = L0 + 1\n   frac = L - L0</code></p>\n</li>\n<li>\n<p>\u5728\u6bcf\u4e2a\u7ea7\u522b\u8fdb\u884c\u53cc\u7ebf\u6027\u63d2\u503c\uff1a\n   <code>color0 = bilinear_sample(mipmap[L0], u, v)\n   color1 = bilinear_sample(mipmap[L1], u, v)</code></p>\n</li>\n<li>\n<p>\u7ea7\u522b\u95f4\u63d2\u503c\uff1a\n   <code>final_color = (1 - frac) * color0 + frac * color1</code></p>\n</li>\n</ol>\n<p><strong>Mipmap\u7684\u5c40\u9650\u6027\uff1a</strong></p>\n<ol>\n<li><strong>\u8fc7\u5ea6\u6a21\u7cca</strong>\uff1a\u5404\u5411\u540c\u6027\u5047\u8bbe\u5bfc\u81f4\u659c\u89c6\u89d2\u6a21\u7cca</li>\n<li><strong>\u65b9\u5757\u4f2a\u5f71</strong>\uff1a\u4e0d\u540c\u7ea7\u522b\u4e4b\u95f4\u7684\u8fc7\u6e21\u53ef\u80fd\u53ef\u89c1</li>\n<li><strong>\u5185\u5b58\u5e26\u5bbd</strong>\uff1a\u9700\u8981\u8bbf\u95ee\u591a\u4e2a\u7ea7\u522b</li>\n</ol>\n<p><strong>\u5404\u5411\u5f02\u6027\u8fc7\u6ee4\uff08Anisotropic Filtering\uff09\uff1a</strong></p>\n<p><em>\u95ee\u9898\uff1a</em>\nMipmap\u5047\u8bbe\u7eb9\u7406\u5728\u4e24\u4e2a\u65b9\u5411\u4e0a\u5747\u5300\u7f29\u653e\uff0c\u4f46\u5b9e\u9645\u4e0a\uff1a</p>\n<ul>\n<li>\u5730\u9762\u548c\u5899\u58c1\u5728\u659c\u89c6\u89d2\u4e0b\u975e\u5747\u5300\u538b\u7f29</li>\n<li>\u9700\u8981\u692d\u5706\u5f62\u800c\u975e\u5706\u5f62\u7684\u91c7\u6837\u533a\u57df</li>\n</ul>\n<p><em>\u89e3\u51b3\u65b9\u6848\uff1a</em></p>\n<ol>\n<li><strong>Ripmap</strong>\uff1a\u5404\u5411\u5f02\u6027mipmap\uff0c\u5b58\u50a8\u4e0d\u540c\u957f\u5bbd\u6bd4</li>\n<li><strong>EWA\u6ee4\u6ce2</strong>\uff1a\u692d\u5706\u52a0\u6743\u5e73\u5747</li>\n<li><strong>\u786c\u4ef6AF</strong>\uff1a\u6cbf\u5404\u5411\u5f02\u6027\u65b9\u5411\u591a\u6b21\u91c7\u6837</li>\n</ol>\n<p><em>\u5404\u5411\u5f02\u6027\u7ea7\u522b\uff1a</em></p>\n<ul>\n<li>2x AF\uff1a2\u4e2a\u6837\u672c</li>\n<li>4x AF\uff1a4\u4e2a\u6837\u672c</li>\n<li>16x AF\uff1a16\u4e2a\u6837\u672c\uff08\u73b0\u4ee3\u6807\u51c6\uff09</li>\n</ul>\n<h3 id=\"436\">4.3.6 \u7eb9\u7406\u5e94\u7528</h3>\n<p>\u7eb9\u7406\u4e0d\u4ec5\u53ef\u4ee5\u5b58\u50a8\u989c\u8272\uff0c\u8fd8\u53ef\u4ee5\u5b58\u50a8\u5404\u79cd\u8868\u9762\u5c5e\u6027\u3002\u73b0\u4ee3\u6e32\u67d3\u4e2d\u5e38\u7528\u591a\u5f20\u7eb9\u7406\u6765\u5b9a\u4e49\u590d\u6742\u6750\u8d28\u3002</p>\n<ol>\n<li>\n<p><strong>\u6f2b\u53cd\u5c04\u8d34\u56fe\uff08Diffuse/Albedo Map\uff09\uff1a</strong>\n- \u5b58\u50a8\u57fa\u7840\u989c\u8272\uff0c\u4e0d\u5305\u542b\u5149\u7167\u4fe1\u606f\n- \u901a\u5e38\u4e3asRGB\u683c\u5f0f\n- \u5e94\u7528\uff1a$\\mathbf{c}_d = \\text{texture}(u, v)$\n- PBR\u4e2d\u79f0\u4e3aAlbedo\uff0c\u8868\u793a\u53cd\u7167\u7387</p>\n</li>\n<li>\n<p><strong>\u6cd5\u7ebf\u8d34\u56fe\uff08Normal Map\uff09\uff1a</strong></p>\n</li>\n</ol>\n<p><em>\u5207\u7ebf\u7a7a\u95f4\u6cd5\u7ebf\u8d34\u56fe\uff1a</em></p>\n<ul>\n<li>RGB\u901a\u9053\u5b58\u50a8\u5207\u7ebf\u7a7a\u95f4\u6cd5\u7ebf</li>\n<li>\u7ea2\u8272(R)\uff1a\u53f3\u65b9\u5411(+X)</li>\n<li>\u7eff\u8272(G)\uff1a\u4e0a\u65b9\u5411(+Y)</li>\n<li>\u84dd\u8272(B)\uff1a\u5916\u65b9\u5411(+Z)</li>\n<li>\u8f6c\u6362\uff1a$\\mathbf{n}_{tangent} = 2 \\cdot \\text{texture}(u,v) - 1$</li>\n</ul>\n<p><em>\u4e16\u754c\u7a7a\u95f4\u6cd5\u7ebf\u8d34\u56fe\uff1a</em></p>\n<ul>\n<li>\u76f4\u63a5\u5b58\u50a8\u4e16\u754c\u7a7a\u95f4\u6cd5\u7ebf</li>\n<li>\u4e0d\u9700\u8981TBN\u77e9\u9635\u8f6c\u6362</li>\n<li>\u4f46\u4e0d\u80fd\u91cd\u7528\u4e8e\u4e0d\u540c\u671d\u5411\u7684\u8868\u9762</li>\n</ul>\n<ol start=\"3\">\n<li><strong>\u51f9\u51f8\u8d34\u56fe\uff08Bump Map\uff09\uff1a</strong>\n- \u7070\u5ea6\u56fe\uff0c\u5b58\u50a8\u9ad8\u5ea6\u504f\u79fb\n- \u901a\u8fc7\u6709\u9650\u5dee\u5206\u8ba1\u7b97\u6cd5\u7ebf\u6270\u52a8\uff1a\n$$\\mathbf{n}_{new} = \\mathbf{n} + k \\cdot (\\frac{\\partial h}{\\partial u} \\mathbf{T} + \\frac{\\partial h}{\\partial v} \\mathbf{B})$$</li>\n</ol>\n<ul>\n<li>\u4f18\u70b9\uff1a\u5355\u901a\u9053\uff0c\u8282\u7701\u5185\u5b58</li>\n<li>\u7f3a\u70b9\uff1a\u9700\u8981\u5b9e\u65f6\u8ba1\u7b97\u6cd5\u7ebf</li>\n</ul>\n<ol start=\"4\">\n<li>\n<p><strong>\u4f4d\u79fb\u8d34\u56fe\uff08Displacement Map\uff09\uff1a</strong>\n- \u771f\u6b63\u6539\u53d8\u51e0\u4f55\u4f4d\u7f6e\n- \u9700\u8981\u7ec6\u5206\u66f2\u9762\u652f\u6301\n- \u5e94\u7528\uff1a$\\mathbf{p}_{new} = \\mathbf{p} + h(u,v) \\cdot \\mathbf{n}$</p>\n</li>\n<li>\n<p><strong>\u73af\u5883\u8d34\u56fe\uff08Environment Map\uff09\uff1a</strong></p>\n</li>\n</ol>\n<p><em>\u7acb\u65b9\u4f53\u8d34\u56fe\uff08Cube Map\uff09\uff1a</em></p>\n<ul>\n<li>6\u4e2a\u9762\uff0c\u6bcf\u4e2a90\u00b0\u89c6\u91ce</li>\n<li>\u6839\u636e\u65b9\u5411\u5411\u91cf\u9009\u62e9\u9762\u548cUV</li>\n<li>\u786c\u4ef6\u652f\u6301\u597d\uff0c\u65e0\u626d\u66f2</li>\n</ul>\n<p><em>\u7403\u9762\u8d34\u56fe\uff08Sphere Map\uff09\uff1a</em></p>\n<ul>\n<li>\u5355\u5f20\u56fe\u50cf\uff0c\u7ecf\u7eac\u5ea6\u6620\u5c04</li>\n<li>\u6781\u70b9\u626d\u66f2\u4e25\u91cd</li>\n<li>\u8f6c\u6362\uff1a$(u,v) = (\\frac{\\theta}{2\\pi}, \\frac{\\phi}{\\pi})$</li>\n</ul>\n<p><em>\u53cc\u629b\u7269\u9762\u8d34\u56fe\uff08Dual-Paraboloid\uff09\uff1a</em></p>\n<ul>\n<li>\u4e24\u5f20\u56fe\u50cf\uff0c\u5206\u522b\u8868\u793a\u534a\u7403</li>\n<li>\u8d28\u91cf\u4ecb\u4e8e\u7acb\u65b9\u4f53\u548c\u7403\u9762\u4e4b\u95f4</li>\n</ul>\n<ol start=\"6\">\n<li>\n<p><strong>PBR\u7eb9\u7406\u7ec4\uff1a</strong>\n- <strong>Base Color</strong>\uff1a\u57fa\u7840\u989c\u8272\n- <strong>Metallic</strong>\uff1a\u91d1\u5c5e\u5ea6(0-1)\n- <strong>Roughness</strong>\uff1a\u7c97\u7cd9\u5ea6(0-1)\n- <strong>Normal</strong>\uff1a\u6cd5\u7ebf\u8d34\u56fe\n- <strong>AO</strong>\uff1a\u73af\u5883\u906e\u853d\n- <strong>Height/Displacement</strong>\uff1a\u9ad8\u5ea6\u4fe1\u606f</p>\n</li>\n<li>\n<p><strong>\u7279\u6b8a\u6548\u679c\u7eb9\u7406\uff1a</strong>\n- <strong>Light Map</strong>\uff1a\u9884\u8ba1\u7b97\u5149\u7167\n- <strong>Shadow Map</strong>\uff1a\u9634\u5f71\u4fe1\u606f\n- <strong>Gloss Map</strong>\uff1a\u955c\u9762\u53cd\u5c04\u5f3a\u5ea6\n- <strong>Emission Map</strong>\uff1a\u81ea\u53d1\u5149\n- <strong>Opacity Map</strong>\uff1a\u900f\u660e\u5ea6</p>\n</li>\n</ol>\n<h2 id=\"_1\">\u672c\u7ae0\u5c0f\u7ed3</h2>\n<p>\u672c\u7ae0\u4ecb\u7ecd\u4e86\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u7740\u8272\u7684\u57fa\u7840\u77e5\u8bc6\uff1a</p>\n<p><strong>\u6838\u5fc3\u6982\u5ff5\uff1a</strong></p>\n<ol>\n<li>\n<p><strong>\u5149\u7167\u6a21\u578b</strong>\uff1a\n   - Lambertian\u53cd\u5c04\uff1a$I = I_0 (\\mathbf{n} \\cdot \\mathbf{l})$\n   - Phong\u6a21\u578b\uff1a$I = I_a + I_d + I_s$\n   - Blinn-Phong\u6539\u8fdb\uff1a\u4f7f\u7528\u534a\u89d2\u5411\u91cf$\\mathbf{h}$</p>\n</li>\n<li>\n<p><strong>\u7740\u8272\u9891\u7387</strong>\uff1a\n   - \u5e73\u9762\u7740\u8272\uff1a\u6bcf\u4e2a\u4e09\u89d2\u5f62\u4e00\u4e2a\u989c\u8272\n   - Gouraud\u7740\u8272\uff1a\u9876\u70b9\u8ba1\u7b97\uff0c\u5185\u90e8\u63d2\u503c\n   - Phong\u7740\u8272\uff1a\u50cf\u7d20\u7ea7\u8ba1\u7b97\uff0c\u63d2\u503c\u6cd5\u7ebf</p>\n</li>\n<li>\n<p><strong>\u7eb9\u7406\u6620\u5c04</strong>\uff1a\n   - UV\u5750\u6807\u7cfb\u7edf\uff1a$(u,v) \\in [0,1]^2$\n   - \u91c7\u6837\u65b9\u6cd5\uff1a\u6700\u8fd1\u90bb\u3001\u53cc\u7ebf\u6027\u63d2\u503c\n   - Mipmap\uff1a\u89e3\u51b3\u7eb9\u7406\u7f29\u5c0f\u95ee\u9898\n   - \u5404\u5411\u5f02\u6027\u8fc7\u6ee4\uff1a\u5904\u7406\u975e\u5747\u5300\u7f29\u653e</p>\n</li>\n</ol>\n<p><strong>\u5173\u952e\u516c\u5f0f\uff1a</strong></p>\n<ul>\n<li>\u53cd\u5c04\u5411\u91cf\uff1a$\\mathbf{r} = 2(\\mathbf{n} \\cdot \\mathbf{l})\\mathbf{n} - \\mathbf{l}$</li>\n<li>\u534a\u89d2\u5411\u91cf\uff1a$\\mathbf{h} = \\frac{\\mathbf{l} + \\mathbf{v}}{||\\mathbf{l} + \\mathbf{v}||_2}$</li>\n<li>\u900f\u89c6\u6821\u6b63\u63d2\u503c\uff1a$A = \\frac{\\sum \\alpha_i \\frac{A_i}{z_i}}{\\sum \\alpha_i \\frac{1}{z_i}}$</li>\n<li>Mipmap\u7ea7\u522b\uff1a$L = \\log_2 \\max(||\\frac{\\partial \\mathbf{u}}{\\partial x}||, ||\\frac{\\partial \\mathbf{u}}{\\partial y}||)$</li>\n</ul>\n<h2 id=\"_2\">\u7ec3\u4e60\u9898</h2>\n<h3 id=\"_3\">\u57fa\u7840\u9898</h3>\n<p><strong>\u7ec3\u4e604.1\uff1aPhong\u5149\u7167\u8ba1\u7b97</strong>\n\u7ed9\u5b9a\uff1a</p>\n<ul>\n<li>\u8868\u9762\u6cd5\u7ebf $\\mathbf{n} = (0, 1, 0)$</li>\n<li>\u5149\u7ebf\u65b9\u5411 $\\mathbf{l} = \\frac{1}{\\sqrt{2}}(1, 1, 0)$</li>\n<li>\u89c2\u5bdf\u65b9\u5411 $\\mathbf{v} = (0, 0, 1)$</li>\n<li>\u6750\u8d28\u53c2\u6570\uff1a$k_a = 0.1$, $k_d = 0.7$, $k_s = 0.2$, $p = 32$</li>\n<li>\u5149\u6e90\u5f3a\u5ea6\uff1a$I_{light} = 1.0$, $I_{a,light} = 0.2$</li>\n</ul>\n<p>\u8ba1\u7b97Phong\u6a21\u578b\u4e0b\u7684\u6700\u7ec8\u989c\u8272\u5f3a\u5ea6\u3002</p>\n<p><em>Hint: \u5206\u522b\u8ba1\u7b97\u73af\u5883\u5149\u3001\u6f2b\u53cd\u5c04\u548c\u955c\u9762\u53cd\u5c04\u5206\u91cf\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<ol>\n<li>\n<p>\u73af\u5883\u5149\uff1a$I_a = k_a I_{a,light} = 0.1 \\times 0.2 = 0.02$</p>\n</li>\n<li>\n<p>\u6f2b\u53cd\u5c04\uff1a\n   - $\\mathbf{n} \\cdot \\mathbf{l} = (0,1,0) \\cdot \\frac{1}{\\sqrt{2}}(1,1,0) = \\frac{1}{\\sqrt{2}}$\n   - $I_d = k_d I_{light} (\\mathbf{n} \\cdot \\mathbf{l}) = 0.7 \\times 1.0 \\times \\frac{1}{\\sqrt{2}} \\approx 0.495$</p>\n</li>\n<li>\n<p>\u955c\u9762\u53cd\u5c04\uff1a\n   - $\\mathbf{r} = 2(\\mathbf{n} \\cdot \\mathbf{l})\\mathbf{n} - \\mathbf{l} = 2 \\times \\frac{1}{\\sqrt{2}}(0,1,0) - \\frac{1}{\\sqrt{2}}(1,1,0) = \\frac{1}{\\sqrt{2}}(-1,1,0)$\n   - $\\mathbf{r} \\cdot \\mathbf{v} = \\frac{1}{\\sqrt{2}}(-1,1,0) \\cdot (0,0,1) = 0$\n   - $I_s = k_s I_{light} (\\mathbf{r} \\cdot \\mathbf{v})^p = 0$</p>\n</li>\n</ol>\n<p>\u603b\u5f3a\u5ea6\uff1a$I = I_a + I_d + I_s = 0.02 + 0.495 + 0 = 0.515$</p>\n</details>\n<p><strong>\u7ec3\u4e604.2\uff1a\u900f\u89c6\u6821\u6b63\u63d2\u503c</strong>\n\u4e09\u89d2\u5f62\u9876\u70b9\u7684\u5c4f\u5e55\u5750\u6807\u548c\u6df1\u5ea6\u503c\u4e3a\uff1a</p>\n<ul>\n<li>$P_1 = (0, 0)$, $z_1 = 2$, \u7eb9\u7406\u5750\u6807 $u_1 = 0$</li>\n<li>$P_2 = (1, 0)$, $z_2 = 4$, \u7eb9\u7406\u5750\u6807 $u_2 = 1$</li>\n<li>$P_3 = (0, 1)$, $z_3 = 4$, \u7eb9\u7406\u5750\u6807 $u_3 = 0$</li>\n</ul>\n<p>\u8ba1\u7b97\u70b9$(0.5, 0.25)$\u5904\u7684\u900f\u89c6\u6821\u6b63\u7eb9\u7406\u5750\u6807\u3002</p>\n<p><em>Hint: \u5148\u8ba1\u7b97\u91cd\u5fc3\u5750\u6807\uff0c\u7136\u540e\u5e94\u7528\u900f\u89c6\u6821\u6b63\u516c\u5f0f\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<ol>\n<li>\n<p>\u91cd\u5fc3\u5750\u6807\uff1a$(0.5, 0.25)$\u5bf9\u5e94$\\alpha = 0.25$, $\\beta = 0.5$, $\\gamma = 0.25$</p>\n</li>\n<li>\n<p>\u900f\u89c6\u6821\u6b63\uff1a\n   - $\\frac{1}{z} = 0.25 \\times \\frac{1}{2} + 0.5 \\times \\frac{1}{4} + 0.25 \\times \\frac{1}{4} = 0.125 + 0.125 + 0.0625 = 0.3125$\n   - $z = \\frac{1}{0.3125} = 3.2$</p>\n</li>\n<li>\n<p>\u7eb9\u7406\u5750\u6807\uff1a\n   - $u = \\frac{0.25 \\times \\frac{0}{2} + 0.5 \\times \\frac{1}{4} + 0.25 \\times \\frac{0}{4}}{0.3125} = \\frac{0.125}{0.3125} = 0.4$</p>\n</li>\n</ol>\n</details>\n<p><strong>\u7ec3\u4e604.3\uff1aMipmap\u7ea7\u522b\u8ba1\u7b97</strong>\n\u5728\u5c4f\u5e55\u7a7a\u95f4\u4e2d\uff0c\u7eb9\u7406\u5750\u6807\u7684\u504f\u5bfc\u6570\u4e3a\uff1a</p>\n<ul>\n<li>$\\frac{\\partial u}{\\partial x} = 0.01$, $\\frac{\\partial v}{\\partial x} = 0.02$</li>\n<li>$\\frac{\\partial u}{\\partial y} = 0.03$, $\\frac{\\partial v}{\\partial y} = 0.01$</li>\n</ul>\n<p>\u7eb9\u7406\u5927\u5c0f\u4e3a$1024 \\times 1024$\u3002\u8ba1\u7b97\u5e94\u8be5\u4f7f\u7528\u7684mipmap\u7ea7\u522b\u3002</p>\n<p><em>Hint: \u4f7f\u7528\u7ed9\u5b9a\u7684mipmap\u7ea7\u522b\u516c\u5f0f\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<ol>\n<li>\n<p>\u8ba1\u7b97\u7eb9\u7406\u7a7a\u95f4\u4e2d\u7684\u504f\u5bfc\u6570\uff08\u4e58\u4ee5\u7eb9\u7406\u5927\u5c0f\uff09\uff1a\n   - $\\frac{\\partial s}{\\partial x} = 0.01 \\times 1024 = 10.24$\n   - $\\frac{\\partial t}{\\partial x} = 0.02 \\times 1024 = 20.48$\n   - $\\frac{\\partial s}{\\partial y} = 0.03 \\times 1024 = 30.72$\n   - $\\frac{\\partial t}{\\partial y} = 0.01 \\times 1024 = 10.24$</p>\n</li>\n<li>\n<p>\u8ba1\u7b97\u68af\u5ea6\u957f\u5ea6\uff1a\n   - $||\\nabla_x|| = \\sqrt{10.24^2 + 20.48^2} = \\sqrt{524.29} \\approx 22.9$\n   - $||\\nabla_y|| = \\sqrt{30.72^2 + 10.24^2} = \\sqrt{1048.58} \\approx 32.4$</p>\n</li>\n<li>\n<p>Mipmap\u7ea7\u522b\uff1a\n   - $L = \\log_2(32.4) \\approx 5.02$\n   - \u4f7f\u7528\u7ea7\u522b5\uff08\u6216\u57285\u548c6\u4e4b\u95f4\u63d2\u503c\uff09</p>\n</li>\n</ol>\n</details>\n<h3 id=\"_4\">\u6311\u6218\u9898</h3>\n<p><strong>\u7ec3\u4e604.4\uff1a\u534a\u7403\u79ef\u5206</strong>\n\u8bc1\u660e\uff1a\u5bf9\u4e8e\u5b8c\u5168\u6f2b\u53cd\u5c04\u7684Lambertian\u8868\u9762\uff0c\u5f53\u5165\u5c04\u5149\u5728\u534a\u7403\u4e0a\u5747\u5300\u5206\u5e03\u65f6\uff0c\u53cd\u5c04\u7684\u603b\u80fd\u91cf\u4e3a$\\pi$\u500d\u7684\u8868\u9762\u53cd\u5c04\u7387\u3002</p>\n<p><em>Hint: \u5728\u534a\u7403\u4e0a\u5bf9$\\cos\\theta$\u8fdb\u884c\u79ef\u5206\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u8bbe\u8868\u9762\u53cd\u5c04\u7387\u4e3a$\\rho$\uff0c\u5165\u5c04\u8f90\u5c04\u5ea6\u4e3a\u5e38\u6570$L_i$\u3002</p>\n<p>\u53cd\u5c04\u7684\u603b\u80fd\u91cf\uff1a\n$$E = \\int_{\\Omega} \\rho L_i \\cos\\theta \\, d\\omega$$\n\u5728\u7403\u5750\u6807\u7cfb\u4e2d\uff1a\n$$E = \\rho L_i \\int_0^{2\\pi} \\int_0^{\\pi/2} \\cos\\theta \\sin\\theta \\, d\\theta \\, d\\phi$$\n\u8ba1\u7b97\u79ef\u5206\uff1a\n$$\\int_0^{\\pi/2} \\cos\\theta \\sin\\theta \\, d\\theta = \\int_0^{\\pi/2} \\frac{1}{2}\\sin(2\\theta) \\, d\\theta = \\frac{1}{2}$$\n\u56e0\u6b64\uff1a\n$$E = \\rho L_i \\times 2\\pi \\times \\frac{1}{2} = \\pi \\rho L_i$$\n\u8bc1\u6bd5\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e604.5\uff1a\u6cd5\u7ebf\u8d34\u56fe\u7684\u5207\u7ebf\u7a7a\u95f4</strong>\n\u7ed9\u5b9a\u4e09\u89d2\u5f62\u9876\u70b9\uff1a</p>\n<ul>\n<li>$P_1 = (0,0,0)$, $UV_1 = (0,0)$</li>\n<li>$P_2 = (1,0,0)$, $UV_2 = (1,0)$</li>\n<li>$P_3 = (0,1,1)$, $UV_3 = (0,1)$</li>\n</ul>\n<p>\u8ba1\u7b97\u5207\u7ebf\u7a7a\u95f4\u7684TBN\u77e9\u9635\u3002</p>\n<p><em>Hint: \u4f7f\u7528\u8fb9\u5411\u91cf\u548cUV\u5dee\u503c\u6784\u5efa\u7ebf\u6027\u65b9\u7a0b\u7ec4\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<ol>\n<li>\n<p>\u8ba1\u7b97\u8fb9\u5411\u91cf\uff1a\n   - $\\mathbf{e}_1 = P_2 - P_1 = (1,0,0)$\n   - $\\mathbf{e}_2 = P_3 - P_1 = (0,1,1)$\n   - $\\Delta u_1 = 1, \\Delta v_1 = 0$\n   - $\\Delta u_2 = 0, \\Delta v_2 = 1$</p>\n</li>\n<li>\n<p>\u5207\u7ebf\u548c\u526f\u5207\u7ebf\u6ee1\u8db3\uff1a\n$$\\begin{bmatrix} \\mathbf{e}_1 \\ \\mathbf{e}_2 \\end{bmatrix} = \\begin{bmatrix} \\Delta u_1 &amp; \\Delta v_1 \\ \\Delta u_2 &amp; \\Delta v_2 \\end{bmatrix} \\begin{bmatrix} \\mathbf{T} \\ \\mathbf{B} \\end{bmatrix}$$</p>\n</li>\n<li>\n<p>\u6c42\u89e3\u5f97\uff1a\n   - $\\mathbf{T} = (1,0,0)$\n   - $\\mathbf{B} = (0,1,1)$</p>\n</li>\n<li>\n<p>\u6cd5\u7ebf\uff1a\n   - $\\mathbf{N} = \\mathbf{T} \\times \\mathbf{B} = (0,-1,1)$\n   - \u5f52\u4e00\u5316\uff1a$\\mathbf{N} = \\frac{1}{\\sqrt{2}}(0,-1,1)$</p>\n</li>\n<li>\n<p>TBN\u77e9\u9635\uff1a\n$$TBN = \\begin{bmatrix} 1 &amp; 0 &amp; 0 \\ 0 &amp; \\frac{1}{\\sqrt{2}} &amp; -\\frac{1}{\\sqrt{2}} \\ 0 &amp; \\frac{1}{\\sqrt{2}} &amp; \\frac{1}{\\sqrt{2}} \\end{bmatrix}$$</p>\n</li>\n</ol>\n</details>\n<p><strong>\u7ec3\u4e604.6\uff1a\u80fd\u91cf\u5b88\u6052\u7ea6\u675f</strong>\n\u5bf9\u4e8e\u7269\u7406\u771f\u5b9e\u7684BRDF\uff0c\u8bc1\u660eBlinn-Phong\u6a21\u578b\u4e0d\u6ee1\u8db3\u80fd\u91cf\u5b88\u6052\u3002\u63d0\u51fa\u4e00\u79cd\u5f52\u4e00\u5316\u65b9\u6848\u3002</p>\n<p><em>Hint: \u8003\u8651BRDF\u7684\u534a\u7403\u79ef\u5206\u5e94\u5c0f\u4e8e\u7b49\u4e8e1\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>Blinn-Phong\u7684\u955c\u9762\u53cd\u5c04\u9879\uff1a\n$$f_s = \\frac{k_s}{4} (\\mathbf{n} \\cdot \\mathbf{h})^p$$\n\u534a\u7403\u79ef\u5206\uff1a\n$$\\int_{\\Omega} f_s \\cos\\theta_i \\, d\\omega_i$$\n\u8fd9\u4e2a\u79ef\u5206\u4e0e$p$\u6709\u5173\uff0c\u5f53$p$\u8f83\u5c0f\u65f6\u53ef\u80fd\u5927\u4e8e1\uff0c\u8fdd\u53cd\u80fd\u91cf\u5b88\u6052\u3002</p>\n<p>\u5f52\u4e00\u5316\u65b9\u6848\uff1a\n$$f_s = \\frac{p + 2}{2\\pi} k_s (\\mathbf{n} \\cdot \\mathbf{h})^p$$\n\u8fd9\u786e\u4fdd\u4e86\uff1a\n$$\\int_{\\Omega} f_s \\cos\\theta_i \\, d\\omega_i \\leq k_s \\leq 1$$</p>\n</details>\n<p><strong>\u7ec3\u4e604.7\uff1a\u5404\u5411\u5f02\u6027\u7eb9\u7406\u8fc7\u6ee4</strong>\n\u63a8\u5bfc\u5404\u5411\u5f02\u6027\u8fc7\u6ee4\u4e2d\u692d\u5706\u53c2\u6570\u7684\u8ba1\u7b97\u65b9\u6cd5\uff0c\u7ed9\u5b9a\u7eb9\u7406\u5750\u6807\u7684\u96c5\u53ef\u6bd4\u77e9\u9635\uff1a\n$$J = \\begin{bmatrix} \\frac{\\partial u}{\\partial x} &amp; \\frac{\\partial u}{\\partial y} \\ \\frac{\\partial v}{\\partial x} &amp; \\frac{\\partial v}{\\partial y} \\end{bmatrix}$$\n<em>Hint: \u8003\u8651\u5355\u4f4d\u5706\u5728\u7eb9\u7406\u7a7a\u95f4\u4e2d\u7684\u53d8\u5f62\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u5c4f\u5e55\u7a7a\u95f4\u7684\u5355\u4f4d\u5706\u6620\u5c04\u5230\u7eb9\u7406\u7a7a\u95f4\u5f62\u6210\u692d\u5706\u3002\u692d\u5706\u7531$J^TJ$\u7684\u7279\u5f81\u503c\u548c\u7279\u5f81\u5411\u91cf\u51b3\u5b9a\u3002</p>\n<ol>\n<li>\n<p>\u8ba1\u7b97$M = J^TJ$\uff1a\n$$M = \\begin{bmatrix} \\left(\\frac{\\partial u}{\\partial x}\\right)^2 + \\left(\\frac{\\partial u}{\\partial y}\\right)^2 &amp; \\frac{\\partial u}{\\partial x}\\frac{\\partial v}{\\partial x} + \\frac{\\partial u}{\\partial y}\\frac{\\partial v}{\\partial y} \\ \\frac{\\partial u}{\\partial x}\\frac{\\partial v}{\\partial x} + \\frac{\\partial u}{\\partial y}\\frac{\\partial v}{\\partial y} &amp; \\left(\\frac{\\partial v}{\\partial x}\\right)^2 + \\left(\\frac{\\partial v}{\\partial y}\\right)^2 \\end{bmatrix}$$</p>\n</li>\n<li>\n<p>\u7279\u5f81\u503c$\\lambda_1, \\lambda_2$\u7ed9\u51fa\u692d\u5706\u7684\u957f\u77ed\u8f74\uff1a\n   - \u957f\u8f74\uff1a$a = \\sqrt{\\lambda_{\\max}}$\n   - \u77ed\u8f74\uff1a$b = \\sqrt{\\lambda_{\\min}}$</p>\n</li>\n<li>\n<p>\u5404\u5411\u5f02\u6027\u6bd4\uff1a$r = \\frac{a}{b} = \\sqrt{\\frac{\\lambda_{\\max}}{\\lambda_{\\min}}}$</p>\n</li>\n<li>\n<p>\u91c7\u6837\u6570\u91cf\uff1a$n = \\min(\\lceil r \\rceil, \\text{max_anisotropy})$</p>\n</li>\n</ol>\n</details>\n<p><strong>\u7ec3\u4e604.8\uff1aPhong\u63d2\u503c\u7684\u975e\u7ebf\u6027\u6548\u5e94</strong>\n\u8003\u8651\u4e00\u4e2a\u7403\u9762\u4e0a\u7684\u4e09\u89d2\u5f62\uff0c\u5176\u4e09\u4e2a\u9876\u70b9\u7684\u6cd5\u7ebf\u5206\u522b\u6307\u5411\u5916\u3002\u5206\u6790\u5728Phong\u7740\u8272\u4e0b\uff0c\u4e09\u89d2\u5f62\u5185\u90e8\u63d2\u503c\u6cd5\u7ebf\u7684\u957f\u5ea6\u53d8\u5316\uff0c\u5e76\u8ba8\u8bba\u5bf9\u5149\u7167\u8ba1\u7b97\u7684\u5f71\u54cd\u3002</p>\n<p><em>Hint: \u8003\u8651\u6cd5\u7ebf\u63d2\u503c\u540e\u7684\u957f\u5ea6\u4e0d\u518d\u4e3a1\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u8bbe\u4e09\u4e2a\u9876\u70b9\u7684\u5355\u4f4d\u6cd5\u7ebf\u4e3a$\\mathbf{n}_1, \\mathbf{n}_2, \\mathbf{n}_3$\u3002</p>\n<p>\u63d2\u503c\u6cd5\u7ebf\uff1a\n$$\\mathbf{n} = \\alpha \\mathbf{n}_1 + \\beta \\mathbf{n}_2 + \\gamma \\mathbf{n}_3$$\n\u957f\u5ea6\uff1a\n$$||\\mathbf{n}||^2 = \\alpha^2 + \\beta^2 + \\gamma^2 + 2\\alpha\\beta(\\mathbf{n}_1 \\cdot \\mathbf{n}_2) + 2\\beta\\gamma(\\mathbf{n}_2 \\cdot \\mathbf{n}_3) + 2\\alpha\\gamma(\\mathbf{n}_1 \\cdot \\mathbf{n}_3)$$</p>\n<p>\u7531\u4e8e$\\mathbf{n}_i \\cdot \\mathbf{n}_j &lt; 1$\uff08\u9876\u70b9\u6cd5\u7ebf\u4e0d\u5e73\u884c\uff09\uff0c\u4e14$\\alpha^2 + \\beta^2 + \\gamma^2 &lt; 1$\uff08\u9664\u975e\u5728\u9876\u70b9\uff09\uff0c\u6240\u4ee5$||\\mathbf{n}|| &lt; 1$\u3002</p>\n<p>\u5f71\u54cd\uff1a</p>\n<ol>\n<li>\u672a\u5f52\u4e00\u5316\u7684\u6cd5\u7ebf\u5bfc\u81f4\u5149\u7167\u53d8\u6697</li>\n<li>\u4e09\u89d2\u5f62\u4e2d\u5fc3\u6700\u6697\uff08\u6cd5\u7ebf\u6700\u77ed\uff09</li>\n<li>\u5fc5\u987b\u5728\u50cf\u7d20\u7740\u8272\u5668\u4e2d\u91cd\u65b0\u5f52\u4e00\u5316</li>\n</ol>\n<p>\u8fd9\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48Phong\u7740\u8272\u6bd4Gouraud\u7740\u8272\u8ba1\u7b97\u91cf\u5927\u4f46\u6548\u679c\u66f4\u597d\u3002</p>\n</details>\n<h2 id=\"_5\">\u5e38\u89c1\u9677\u9631\u4e0e\u9519\u8bef</h2>\n<h3 id=\"1\">1. \u6cd5\u7ebf\u65b9\u5411\u9519\u8bef</h3>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1a\u6cd5\u7ebf\u6307\u5411\u5185\u90e8\u5bfc\u81f4\u5149\u7167\u53cd\u8f6c</li>\n<li><strong>\u8c03\u8bd5</strong>\uff1a\u68c0\u67e5$\\mathbf{n} \\cdot \\mathbf{l}$\u7684\u7b26\u53f7\uff0c\u4f7f\u7528<code>max(0, dot)</code></li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u786e\u4fdd\u6cd5\u7ebf\u59cb\u7ec8\u6307\u5411\u5916\u90e8\uff0c\u8003\u8651\u53cc\u9762\u5149\u7167</li>\n</ul>\n<h3 id=\"2\">2. \u672a\u5f52\u4e00\u5316\u7684\u5411\u91cf</h3>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1a\u8ba1\u7b97\u70b9\u79ef\u65f6\u4f7f\u7528\u672a\u5f52\u4e00\u5316\u7684\u5411\u91cf</li>\n<li><strong>\u75c7\u72b6</strong>\uff1a\u5149\u7167\u5f3a\u5ea6\u5f02\u5e38\uff0c\u9ad8\u5149\u4f4d\u7f6e\u9519\u8bef</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u5728\u8ba1\u7b97\u524d\u59cb\u7ec8\u5f52\u4e00\u5316\u65b9\u5411\u5411\u91cf</li>\n</ul>\n<h3 id=\"3\">3. \u900f\u89c6\u63d2\u503c\u9519\u8bef</h3>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1a\u76f4\u63a5\u5728\u5c4f\u5e55\u7a7a\u95f4\u63d2\u503c3D\u5c5e\u6027</li>\n<li><strong>\u75c7\u72b6</strong>\uff1a\u7eb9\u7406\u626d\u66f2\uff0c\u7279\u522b\u662f\u5728\u5927\u4e09\u89d2\u5f62\u4e0a</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u4f7f\u7528\u900f\u89c6\u6821\u6b63\u63d2\u503c\u516c\u5f0f</li>\n</ul>\n<h3 id=\"4-mipmap\">4. Mipmap\u8fb9\u754c\u4f2a\u5f71</h3>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1amipmap\u7ea7\u522b\u7a81\u53d8\u5bfc\u81f4\u53ef\u89c1\u8fb9\u754c</li>\n<li><strong>\u75c7\u72b6</strong>\uff1a\u7eb9\u7406\u51fa\u73b0\u660e\u663e\u7684\u8fc7\u6e21\u7ebf</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u4f7f\u7528\u4e09\u7ebf\u6027\u63d2\u503c\u800c\u975e\u53cc\u7ebf\u6027</li>\n</ul>\n<h3 id=\"5\">5. \u4f3d\u9a6c\u6821\u6b63\u9057\u6f0f</h3>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1a\u5728\u7ebf\u6027\u7a7a\u95f4\u8ba1\u7b97\u4f46\u663e\u793a\u65f6\u672a\u6821\u6b63</li>\n<li><strong>\u75c7\u72b6</strong>\uff1a\u56fe\u50cf\u8fc7\u6697\u6216\u8fc7\u4eae</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u6e32\u67d3\u5230\u7ebf\u6027\u7a7a\u95f4\uff0c\u663e\u793a\u65f6\u5e94\u7528\u4f3d\u9a6c\u6821\u6b63</li>\n</ul>\n<h3 id=\"6\">6. \u7eb9\u7406\u5750\u6807\u8d8a\u754c</h3>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1aUV\u5750\u6807\u8d85\u51fa$[0,1]$\u8303\u56f4</li>\n<li><strong>\u75c7\u72b6</strong>\uff1a\u7eb9\u7406\u91cd\u590d\u3001\u955c\u50cf\u6216\u5939\u7d27</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u6b63\u786e\u8bbe\u7f6e\u7eb9\u7406\u5305\u88c5\u6a21\u5f0f\uff08wrap/clamp/mirror\uff09</li>\n</ul>\n<h2 id=\"_6\">\u6700\u4f73\u5b9e\u8df5\u68c0\u67e5\u6e05\u5355</h2>\n<h3 id=\"_7\">\u5149\u7167\u8ba1\u7b97</h3>\n<ul>\n<li>[ ] \u6240\u6709\u65b9\u5411\u5411\u91cf\u90fd\u5df2\u5f52\u4e00\u5316</li>\n<li>[ ] \u4f7f\u7528<code>max(0, dot)</code>\u907f\u514d\u8d1f\u503c\u5149\u7167</li>\n<li>[ ] \u8003\u8651\u4e86\u5149\u6e90\u8870\u51cf\uff08\u70b9\u5149\u6e90\uff09</li>\n<li>[ ] \u6b63\u786e\u5904\u7406\u80cc\u9762\uff08\u53cc\u9762\u5149\u7167\u6216\u5254\u9664\uff09</li>\n<li>[ ] \u907f\u514d\u5728\u9876\u70b9\u7740\u8272\u5668\u8ba1\u7b97\u9ad8\u9891\u5149\u7167\u6548\u679c</li>\n</ul>\n<h3 id=\"_8\">\u7740\u8272\u7ba1\u7ebf</h3>\n<ul>\n<li>[ ] \u6839\u636e\u9700\u6c42\u9009\u62e9\u5408\u9002\u7684\u7740\u8272\u9891\u7387</li>\n<li>[ ] \u4f7f\u7528\u900f\u89c6\u6821\u6b63\u63d2\u503c</li>\n<li>[ ] \u5728\u7247\u6bb5\u7740\u8272\u5668\u4e2d\u91cd\u65b0\u5f52\u4e00\u5316\u63d2\u503c\u540e\u7684\u6cd5\u7ebf</li>\n<li>[ ] \u8003\u8651\u4f7f\u7528\u5ef6\u8fdf\u7740\u8272\u4f18\u5316\u591a\u5149\u6e90\u573a\u666f</li>\n<li>[ ] \u6b63\u786e\u8bbe\u7f6e\u548c\u4f7f\u7528\u6df1\u5ea6\u6d4b\u8bd5</li>\n</ul>\n<h3 id=\"_9\">\u7eb9\u7406\u6620\u5c04</h3>\n<ul>\n<li>[ ] UV\u5750\u6807\u5728\u5408\u7406\u8303\u56f4\u5185</li>\n<li>[ ] \u9009\u62e9\u5408\u9002\u7684\u8fc7\u6ee4\u6a21\u5f0f</li>\n<li>[ ] \u4e3a\u7f29\u5c0f\u60c5\u51b5\u751f\u6210mipmap</li>\n<li>[ ] \u8003\u8651\u5404\u5411\u5f02\u6027\u8fc7\u6ee4\u63d0\u5347\u8d28\u91cf</li>\n<li>[ ] \u7eb9\u7406\u683c\u5f0f\u9002\u5408\u7528\u9014\uff08sRGB/\u7ebf\u6027\uff09</li>\n<li>[ ] \u5408\u7406\u8bbe\u7f6e\u7eb9\u7406\u5305\u88c5\u6a21\u5f0f</li>\n</ul>\n<h3 id=\"_10\">\u6027\u80fd\u4f18\u5316</h3>\n<ul>\n<li>[ ] \u907f\u514d\u5728\u7247\u6bb5\u7740\u8272\u5668\u4e2d\u7684\u5206\u652f</li>\n<li>[ ] \u9884\u8ba1\u7b97\u53ef\u4ee5\u5728\u9876\u70b9\u7740\u8272\u5668\u5b8c\u6210\u7684\u5185\u5bb9</li>\n<li>[ ] \u4f7f\u7528\u7eb9\u7406\u7f13\u5b58\u53cb\u597d\u7684\u8bbf\u95ee\u6a21\u5f0f</li>\n<li>[ ] \u8003\u8651LOD\uff08\u7ec6\u8282\u5c42\u6b21\uff09\u51cf\u5c11\u8fdc\u5904\u7269\u4f53\u7684\u8ba1\u7b97</li>\n<li>[ ] \u5408\u7406\u4f7f\u7528\u65e9\u671f\u6df1\u5ea6\u6d4b\u8bd5\uff08Early-Z\uff09</li>\n</ul>"
  },
  "../chapter9.md": {
    "hash": "ab60c260426691b4e7a1ce5d27a7e028",
    "content": "<h1 id=\"9\">\u7b2c9\u7ae0\uff1a\u6750\u8d28\u4e0e\u5916\u89c2</h1>\n<p>\u6750\u8d28\u4e0e\u5916\u89c2\u5efa\u6a21\u662f\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u8fde\u63a5\u7269\u7406\u4e16\u754c\u4e0e\u865a\u62df\u6e32\u67d3\u7684\u5173\u952e\u6865\u6881\u3002\u672c\u7ae0\u5c06\u6df1\u5165\u63a2\u8ba8\u5982\u4f55\u7528\u6570\u5b66\u6a21\u578b\u63cf\u8ff0\u771f\u5b9e\u4e16\u754c\u4e2d\u5149\u4e0e\u7269\u8d28\u7684\u76f8\u4e92\u4f5c\u7528\uff0c\u4ece\u57fa\u7840\u7684BRDF\u7406\u8bba\u5230\u590d\u6742\u7684\u5916\u89c2\u73b0\u8c61\u3002\u5bf9\u4e8eAI\u79d1\u5b66\u5bb6\u800c\u8a00\uff0c\u7406\u89e3\u8fd9\u4e9b\u6a21\u578b\u4e0d\u4ec5\u6709\u52a9\u4e8e\u4f20\u7edf\u6e32\u67d3\uff0c\u66f4\u662f\u795e\u7ecf\u6e32\u67d3\u3001\u53ef\u5fae\u6e32\u67d3\u7b49\u65b0\u5174\u9886\u57df\u7684\u7406\u8bba\u57fa\u7840\u3002</p>\n<p>\u672c\u7ae0\u5b66\u4e60\u76ee\u6807\uff1a</p>\n<ul>\n<li>\u638c\u63e1BRDF/BSDF\u7684\u6570\u5b66\u6846\u67b6\u548c\u7269\u7406\u7ea6\u675f</li>\n<li>\u7406\u89e3\u5fae\u8868\u9762\u7406\u8bba\u53ca\u5176\u5728\u73b0\u4ee3\u6e32\u67d3\u4e2d\u7684\u5e94\u7528</li>\n<li>\u5b66\u4e60\u590d\u6742\u5916\u89c2\u73b0\u8c61\u7684\u5efa\u6a21\u65b9\u6cd5</li>\n<li>\u4e86\u89e3\u6750\u8d28\u8868\u793a\u5728\u673a\u5668\u5b66\u4e60\u4e2d\u7684\u5e94\u7528\u524d\u666f</li>\n</ul>\n<h2 id=\"91-brdfbsdf\">9.1 BRDF/BSDF\u7406\u8bba</h2>\n<h3 id=\"911-brdf\">9.1.1 \u8f90\u5c04\u5ea6\u91cf\u5b66\u56de\u987e\u4e0eBRDF\u5b9a\u4e49</h3>\n<p>\u53cc\u5411\u53cd\u5c04\u5206\u5e03\u51fd\u6570\uff08Bidirectional Reflectance Distribution Function, BRDF\uff09\u63cf\u8ff0\u4e86\u5149\u7ebf\u5982\u4f55\u4ece\u7269\u4f53\u8868\u9762\u53cd\u5c04\u3002\u56de\u987e\u8f90\u5c04\u5ea6\u91cf\u5b66\u57fa\u7840\uff1a</p>\n<p><strong>\u8f90\u5c04\u901a\u91cf\uff08Radiant Flux\uff09</strong>\uff1a$\\Phi$\uff0c\u5355\u4f4d\u65f6\u95f4\u5185\u7684\u8f90\u5c04\u80fd\u91cf\uff0c\u5355\u4f4d\uff1a\u74e6\u7279(W)</p>\n<p><strong>\u8f90\u7167\u5ea6\uff08Irradiance\uff09</strong>\uff1a$E = \\frac{d\\Phi}{dA}$\uff0c\u5355\u4f4d\u9762\u79ef\u63a5\u6536\u7684\u8f90\u5c04\u901a\u91cf\uff0c\u5355\u4f4d\uff1a$\\text{W/m}^2$</p>\n<p><strong>\u8f90\u5c04\u5ea6\uff08Radiance\uff09</strong>\uff1a$L = \\frac{d^2\\Phi}{dA \\cos\\theta d\\omega}$\uff0c\u5355\u4f4d\u9762\u79ef\u3001\u5355\u4f4d\u7acb\u4f53\u89d2\u7684\u8f90\u5c04\u901a\u91cf\uff0c\u5355\u4f4d\uff1a$\\text{W/(m}^2\\cdot\\text{sr)}$</p>\n<p><strong>\u8f90\u5c04\u5f3a\u5ea6\uff08Radiant Intensity\uff09</strong>\uff1a$I = \\frac{d\\Phi}{d\\omega}$\uff0c\u5355\u4f4d\u7acb\u4f53\u89d2\u7684\u8f90\u5c04\u901a\u91cf\uff0c\u5355\u4f4d\uff1a$\\text{W/sr}$</p>\n<p><strong>\u5173\u952e\u6d1e\u5bdf</strong>\uff1a\u8f90\u5c04\u5ea6$L$\u662f\u552f\u4e00\u5728\u771f\u7a7a\u4e2d\u6cbf\u76f4\u7ebf\u4f20\u64ad\u4fdd\u6301\u4e0d\u53d8\u7684\u91cf\uff0c\u8fd9\u4f7f\u5176\u6210\u4e3a\u5149\u7ebf\u8ffd\u8e2a\u7684\u7406\u60f3\u7269\u7406\u91cf\u3002</p>\n<p>BRDF\u7684\u6b63\u5f0f\u5b9a\u4e49\uff1a</p>\n<p>$$f_r(\\omega_i, \\omega_o) = \\frac{dL_o(\\omega_o)}{dE_i(\\omega_i)} = \\frac{dL_o(\\omega_o)}{L_i(\\omega_i)\\cos\\theta_i d\\omega_i}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$\\omega_i$\uff1a\u5165\u5c04\u65b9\u5411\uff08\u6307\u5411\u8868\u9762\u5916\uff09</li>\n<li>$\\omega_o$\uff1a\u51fa\u5c04\u65b9\u5411\uff08\u6307\u5411\u8868\u9762\u5916\uff09</li>\n<li>$L_i$\uff1a\u5165\u5c04\u8f90\u5c04\u5ea6</li>\n<li>$L_o$\uff1a\u51fa\u5c04\u8f90\u5c04\u5ea6</li>\n<li>$\\theta_i$\uff1a\u5165\u5c04\u89d2\uff08\u4e0e\u6cd5\u7ebf\u5939\u89d2\uff09</li>\n</ul>\n<p><strong>\u7b49\u4ef7\u5b9a\u4e49</strong>\uff1a\u4ece\u6563\u5c04\u622a\u9762\u89d2\u5ea6\n$$f_r(\\omega_i, \\omega_o) = \\frac{1}{\\cos\\theta_i} \\frac{d\\sigma_s(\\omega_i \\to \\omega_o)}{d\\omega_o}$$\n\u5176\u4e2d$d\\sigma_s$\u662f\u5fae\u5206\u6563\u5c04\u622a\u9762\u3002</p>\n<p><strong>\u7269\u7406\u76f4\u89c9</strong>\uff1aBRDF\u63cf\u8ff0\u4e86\u4e00\u4e2a\u5fae\u5206\u5149\u675f\u5982\u4f55\u88ab\u8868\u9762\"\u91cd\u65b0\u5206\u914d\"\u5230\u5404\u4e2a\u51fa\u5c04\u65b9\u5411\u3002\u5b83\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u6982\u7387\u5bc6\u5ea6\u51fd\u6570\u7684\u5149\u5b66\u7c7b\u6bd4\uff0c\u4f46\u5e26\u6709$\\cos\\theta_i$\u9879\u7684\u51e0\u4f55\u56e0\u5b50\u3002</p>\n<p><strong>\u4e0e\u6982\u7387\u7684\u7c7b\u6bd4</strong>\uff1a\u5982\u679c\u5b9a\u4e49\u6563\u5c04\u6982\u7387\u5bc6\u5ea6$p(\\omega_o | \\omega_i)$\uff0c\u5219\uff1a\n$$f_r(\\omega_i, \\omega_o) = \\rho(\\omega_i) \\frac{p(\\omega_o | \\omega_i)}{\\cos\\theta_o}$$\n\u5176\u4e2d$\\rho(\\omega_i)$\u662f\u65b9\u5411\u53cd\u7167\u7387\u3002</p>\n<p><strong>\u5355\u4f4d\u5206\u6790</strong>\uff1aBRDF\u7684\u5355\u4f4d\u662f$\\text{sr}^{-1}$\uff08\u7403\u9762\u5ea6\u7684\u5012\u6570\uff09\uff0c\u8fd9\u53ef\u4ee5\u4ece\u5b9a\u4e49\u5f0f\u63a8\u5bfc\uff1a\n$$[f_r] = \\frac{[\\text{W/(m}^2\\cdot\\text{sr)}]}{[\\text{W/(m}^2\\cdot\\text{sr)}] \\cdot 1 \\cdot [\\text{sr}]} = [\\text{sr}^{-1}]$$\n<strong>\u53cd\u5c04\u65b9\u7a0b</strong>\uff1a\u7ed9\u5b9a\u5165\u5c04\u5149\u573a\uff0c\u51fa\u5c04\u8f90\u5c04\u5ea6\u901a\u8fc7\u53cd\u5c04\u65b9\u7a0b\u8ba1\u7b97\uff1a\n$$L_o(\\omega_o) = \\int_{\\Omega} f_r(\\omega_i, \\omega_o) L_i(\\omega_i) \\cos\\theta_i d\\omega_i$$\n\u8fd9\u662f\u6e32\u67d3\u65b9\u7a0b\u7684\u6838\u5fc3\u7ec4\u6210\u90e8\u5206\uff0c\u4e5f\u662f\u6240\u6709\u57fa\u4e8e\u7269\u7406\u7684\u6e32\u67d3\u7b97\u6cd5\u7684\u57fa\u7840\u3002</p>\n<p><strong>\u5c40\u90e8\u5750\u6807\u7cfb\u5b9a\u4e49</strong>\uff1a</p>\n<ul>\n<li><strong>\u5207\u7a7a\u95f4\uff08Tangent Space\uff09</strong>\uff1a\u4ee5\u8868\u9762\u70b9\u4e3a\u539f\u70b9\uff0c\u6cd5\u7ebf$\\mathbf{n}$\u4e3az\u8f74\uff0c\u5207\u5411\u91cf$\\mathbf{t}$\u4e3ax\u8f74\uff0c\u526f\u5207\u5411\u91cf$\\mathbf{b} = \\mathbf{n} \\times \\mathbf{t}$\u4e3ay\u8f74</li>\n<li><strong>\u7403\u5750\u6807\u8868\u793a</strong>\uff1a$\\omega = (\\sin\\theta\\cos\\phi, \\sin\\theta\\sin\\phi, \\cos\\theta)$</li>\n<li><strong>\u7acb\u4f53\u89d2\u5fae\u5143</strong>\uff1a$d\\omega = \\sin\\theta d\\theta d\\phi$</li>\n</ul>\n<p><strong>BRDF\u7684\u53ef\u89c6\u5316</strong>\uff1a</p>\n<ol>\n<li><strong>\u5207\u7247\u56fe</strong>\uff1a\u56fa\u5b9a$\\omega_i$\uff0c\u7ed8\u5236$f_r(\\omega_i, \\omega_o)$\u968f$\\omega_o$\u7684\u53d8\u5316</li>\n<li><strong>\u6781\u5750\u6807\u56fe</strong>\uff1a\u5728\u5207\u5e73\u9762\u4e0a\u663e\u793aBRDF\u503c\u7684\u7b49\u9ad8\u7ebf</li>\n<li><strong>\u7403\u9762\u56fe</strong>\uff1a\u5728\u5355\u4f4d\u7403\u4e0a\u7528\u989c\u8272\u7f16\u7801BRDF\u503c</li>\n<li><strong>\u77e9\u9635\u56fe</strong>\uff1a\u5c064D\u51fd\u6570\u79bb\u6563\u5316\u4e3a2D\u77e9\u9635\u7684\u96c6\u5408</li>\n</ol>\n<p><strong>\u6d4b\u91cfvs\u89e3\u6790\u6a21\u578b</strong>\uff1a</p>\n<ul>\n<li><strong>\u6d4b\u91cfBRDF</strong>\uff1a\u901a\u8fc7\u5b9e\u9a8c\u8bbe\u5907\u83b7\u5f97\uff0c\u51c6\u786e\u4f46\u6570\u636e\u91cf\u5927</li>\n<li><strong>\u89e3\u6790BRDF</strong>\uff1a\u57fa\u4e8e\u7269\u7406\u539f\u7406\u7684\u6570\u5b66\u6a21\u578b\uff0c\u7d27\u51d1\u4f46\u53ef\u80fd\u4e0d\u591f\u51c6\u786e</li>\n<li><strong>\u6df7\u5408\u65b9\u6cd5</strong>\uff1a\u7528\u89e3\u6790\u6a21\u578b\u62df\u5408\u6d4b\u91cf\u6570\u636e\uff0c\u5e73\u8861\u51c6\u786e\u6027\u548c\u6548\u7387</li>\n</ul>\n<h3 id=\"912-brdf\">9.1.2 BRDF\u7684\u6570\u5b66\u6027\u8d28</h3>\n<p>BRDF\u5fc5\u987b\u6ee1\u8db3\u4ee5\u4e0b\u7269\u7406\u7ea6\u675f\uff1a</p>\n<p><strong>1. \u975e\u8d1f\u6027\uff08Non-negativity\uff09</strong>\uff1a\n$$f_r(\\omega_i, \\omega_o) \\geq 0$$\n\u7269\u7406\u610f\u4e49\uff1a\u80fd\u91cf\u4e0d\u80fd\u4e3a\u8d1f\uff0c\u8868\u9762\u4e0d\u80fd\"\u5438\u6536\"\u540e\u53d1\u51fa\u8d1f\u5149\u3002</p>\n<p><strong>\u6570\u5b66\u540e\u679c</strong>\uff1aBRDF\u5b9a\u4e49\u4e86\u534a\u7403\u4e0a\u7684\u4e00\u4e2a\u6b63\u6d4b\u5ea6\uff0c\u53ef\u4ee5\u7528\u6d4b\u5ea6\u8bba\u5de5\u5177\u5206\u6790\u3002</p>\n<p><strong>2. \u4e92\u6613\u6027\uff08Helmholtz Reciprocity\uff09</strong>\uff1a\n$$f_r(\\omega_i, \\omega_o) = f_r(\\omega_o, \\omega_i)$$\n\u8fd9\u4e00\u6027\u8d28\u6e90\u4e8e\u5149\u8def\u53ef\u9006\u539f\u7406\uff0c\u5728\u5b9e\u9645\u6e32\u67d3\u4e2d\u53ef\u7528\u4e8e\u4f18\u5316\u8ba1\u7b97\u3002\u4e92\u6613\u6027\u7684\u6df1\u5c42\u542b\u4e49\u6765\u81ea\u4e8e\u65f6\u95f4\u53cd\u6f14\u5bf9\u79f0\u6027\u548c\u6d1b\u4f26\u5179\u4e92\u6613\u5b9a\u7406\u3002</p>\n<p><strong>\u8bc1\u660e\u601d\u8def</strong>\uff1a</p>\n<ol>\n<li>\u9ea6\u514b\u65af\u97e6\u65b9\u7a0b\u7ec4\u5728\u65f6\u95f4\u53cd\u6f14\u4e0b\u7684\u5bf9\u79f0\u6027</li>\n<li>\u8fb9\u754c\u6761\u4ef6\u7684\u65f6\u95f4\u53cd\u6f14\u4e0d\u53d8\u6027</li>\n<li>\u683c\u6797\u51fd\u6570\u7684\u5bf9\u79f0\u6027\uff1a$G(\\mathbf{r}_1, \\mathbf{r}_2) = G(\\mathbf{r}_2, \\mathbf{r}_1)$</li>\n<li>\u5b8f\u89c2BRDF\u7ee7\u627f\u5fae\u89c2\u7535\u78c1\u573a\u7684\u5bf9\u79f0\u6027</li>\n</ol>\n<p><strong>\u5b9e\u9645\u5e94\u7528</strong>\uff1a\u5728\u53cc\u5411\u8def\u5f84\u8ffd\u8e2a\u4e2d\uff0c\u4e92\u6613\u6027\u5141\u8bb8\u6211\u4eec\u4ea4\u6362\u5149\u7ebf\u65b9\u5411\u800c\u4e0d\u6539\u53d8\u8d21\u732e\uff0c\u8fd9\u5bf9\u4e8e\u8fde\u63a5\u5149\u8def\u81f3\u5173\u91cd\u8981\u3002</p>\n<p><strong>\u7834\u574f\u4e92\u6613\u6027\u7684\u60c5\u51b5</strong>\uff1a</p>\n<ul>\n<li>\u78c1\u5149\u6750\u6599\uff08\u6cd5\u62c9\u7b2c\u6548\u5e94\uff09</li>\n<li>\u975e\u7ebf\u6027\u5149\u5b66\u6750\u6599</li>\n<li>\u8367\u5149\u6750\u6599\uff08\u6ce2\u957f\u6539\u53d8\uff09</li>\n</ul>\n<p><strong>3. \u80fd\u91cf\u5b88\u6052\uff08Energy Conservation\uff09</strong>\uff1a\n$$\\int_{\\Omega} f_r(\\omega_i, \\omega_o) \\cos\\theta_o d\\omega_o \\leq 1$$\n\u5bf9\u4e8e\u4efb\u610f\u5165\u5c04\u65b9\u5411\uff0c\u53cd\u5c04\u7684\u603b\u80fd\u91cf\u4e0d\u80fd\u8d85\u8fc7\u5165\u5c04\u80fd\u91cf\u3002</p>\n<p><strong>\u4e25\u683c\u5f62\u5f0f</strong>\uff08\u8003\u8651\u900f\u5c04\uff09\uff1a\n$$\\int_{\\Omega^+} f_r(\\omega_i, \\omega_o) \\cos\\theta_o d\\omega_o + \\int_{\\Omega^-} f_t(\\omega_i, \\omega_o) \\cos\\theta_o d\\omega_o + \\alpha(\\omega_i) = 1$$\n\u5176\u4e2d$\\alpha(\\omega_i)$\u662f\u5438\u6536\u7387\uff0c$\\Omega^+$\u548c$\\Omega^-$\u5206\u522b\u662f\u4e0a\u4e0b\u534a\u7403\u3002</p>\n<p><strong>\u65b9\u5411\u53cd\u7167\u7387\uff08Directional Albedo\uff09</strong>\uff1a\n$$\\rho(\\omega_i) = \\int_{\\Omega} f_r(\\omega_i, \\omega_o) \\cos\\theta_o d\\omega_o$$\n\u8fd9\u8868\u793a\u4ece\u65b9\u5411$\\omega_i$\u5165\u5c04\u7684\u5149\u88ab\u53cd\u5c04\u7684\u603b\u6bd4\u4f8b\u3002</p>\n<p><strong>\u534a\u7403\u53cd\u7167\u7387\uff08Hemispherical Albedo\uff09</strong>\uff1a\n$$\\rho_{hh} = \\frac{1}{\\pi} \\int_{\\Omega_i} \\int_{\\Omega_o} f_r(\\omega_i, \\omega_o) \\cos\\theta_i \\cos\\theta_o d\\omega_i d\\omega_o$$\n<strong>\u767d\u7089\u6d4b\u8bd5\uff08White Furnace Test\uff09</strong>\uff1a\n\u5728\u5747\u5300\u7167\u660e\u73af\u5883\u4e2d\uff0c\u8868\u9762\u53cd\u5c04\u7684\u603b\u80fd\u91cf\u5e94\u7b49\u4e8e\u5165\u5c04\u80fd\u91cf\u4e58\u4ee5\u53cd\u7167\u7387\uff1a\n$$L_o = \\rho_{hh} \\cdot L_{\\text{env}}$$</p>\n<p><strong>4. \u7ebf\u6027\u6027\uff08Linearity\uff09</strong>\uff1a\nBRDF\u5bf9\u5165\u5c04\u5149\u5f3a\u5ea6\u662f\u7ebf\u6027\u7684\uff0c\u8fd9\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u5c06\u590d\u6742\u5149\u7167\u5206\u89e3\u4e3a\u7b80\u5355\u5149\u6e90\u7684\u53e0\u52a0\u3002\u6570\u5b66\u8868\u8ff0\uff1a\n$$L_o = \\int f_r L_i \\cos\\theta_i d\\omega_i = \\int f_r (L_{i1} + L_{i2}) \\cos\\theta_i d\\omega_i = L_{o1} + L_{o2}$$\n<strong>\u53e0\u52a0\u539f\u7406\u7684\u5e94\u7528</strong>\uff1a</p>\n<ul>\n<li>\u591a\u5149\u6e90\u6e32\u67d3\uff1a$L_o = \\sum_k L_o^{(k)}$</li>\n<li>\u73af\u5883\u5149\u5206\u89e3\uff1a\u7403\u8c10\u51fd\u6570\u3001\u5c0f\u6ce2\u7b49</li>\n<li>\u5149\u7167\u70d8\u7119\uff1a\u9884\u8ba1\u7b97\u9759\u6001\u5149\u7167</li>\n</ul>\n<p><strong>5. \u5e73\u6ed1\u6027\u4e0e\u8fde\u7eed\u6027</strong>\uff1a\n\u7269\u7406BRDF\u901a\u5e38\u662f\u8fde\u7eed\u7684\uff08\u9664\u4e86\u955c\u9762\u53cd\u5c04\u7684\u72c4\u62c9\u514b\u03b4\u51fd\u6570\uff09\uff0c\u8fd9\u4fdd\u8bc1\u4e86\u6e32\u67d3\u7ed3\u679c\u7684\u89c6\u89c9\u8fde\u7eed\u6027\u3002</p>\n<p><strong>\u6570\u5b66\u523b\u753b</strong>\uff1a</p>\n<ul>\n<li><strong>Lipschitz\u8fde\u7eed\u6027</strong>\uff1a$|f_r(\\omega_1) - f_r(\\omega_2)| \\leq L|\\omega_1 - \\omega_2|$</li>\n<li><strong>\u53ef\u5fae\u6027</strong>\uff1a\u5927\u591a\u6570\u4f4d\u7f6e\u53ef\u5fae\uff0c\u5728\u63a0\u5c04\u89d2\u53ef\u80fd\u6709\u5947\u5f02\u6027</li>\n<li><strong>\u7d27\u652f\u6491\u6027</strong>\uff1a\u8bb8\u591aBRDF\u5728\u8fdc\u79bb\u955c\u9762\u53cd\u5c04\u65b9\u5411\u65f6\u5feb\u901f\u8870\u51cf</li>\n</ul>\n<p><strong>6. \u5bf9\u79f0\u6027\uff08Symmetry\uff09</strong>\uff1a\n\u5404\u5411\u540c\u6027\u6750\u8d28\u7684BRDF\u5177\u6709\u65cb\u8f6c\u5bf9\u79f0\u6027\uff1a\n$$f_r(R\\omega_i, R\\omega_o) = f_r(\\omega_i, \\omega_o)$$\n\u5bf9\u4e8e\u4efb\u610f\u7ed5\u6cd5\u7ebf\u7684\u65cb\u8f6c$R$\u3002</p>\n<p><strong>\u7b80\u5316\u5f62\u5f0f</strong>\uff1a\u5404\u5411\u540c\u6027BRDF\u53ef\u8868\u793a\u4e3a\u4e09\u4e2a\u89d2\u5ea6\u7684\u51fd\u6570\uff1a\n$$f_r(\\omega_i, \\omega_o) = f_r(\\theta_i, \\theta_o, \\phi_o - \\phi_i)$$\n<strong>\u8fdb\u4e00\u6b65\u7b80\u5316</strong>\uff1a\u8bb8\u591a\u6a21\u578b\u53ea\u4f9d\u8d56\u4e8e\uff1a</p>\n<ul>\n<li>$\\omega_i \\cdot \\omega_o$\uff08\u70b9\u79ef\uff09</li>\n<li>$\\omega_i \\cdot \\mathbf{n}$\u548c$\\omega_o \\cdot \\mathbf{n}$\uff08\u4e0e\u6cd5\u7ebf\u5939\u89d2\uff09</li>\n<li>$\\omega_h \\cdot \\mathbf{n}$\uff08\u534a\u7a0b\u5411\u91cf\u4e0e\u6cd5\u7ebf\u5939\u89d2\uff09</li>\n</ul>\n<p><strong>7. \u6b63\u5b9a\u6027\uff08Positive Definiteness\uff09</strong>\uff1a\nBRDF\u5b9a\u4e49\u7684\u79ef\u5206\u7b97\u5b50\u662f\u6b63\u5b9a\u7684\uff1a\n$$\\int_{\\Omega_i} \\int_{\\Omega_o} g(\\omega_i) f_r(\\omega_i, \\omega_o) g(\\omega_o) \\cos\\theta_i \\cos\\theta_o d\\omega_i d\\omega_o \\geq 0$$\n\u5bf9\u4e8e\u4efb\u610f\u51fd\u6570$g$\u3002</p>\n<p><strong>8. \u6e10\u8fd1\u884c\u4e3a\uff08Asymptotic Behavior\uff09</strong>\uff1a\n\u63a0\u5c04\u89d2\u5904\u7684\u884c\u4e3a\u5bf9\u5916\u89c2\u81f3\u5173\u91cd\u8981\uff1a</p>\n<ul>\n<li><strong>\u63a0\u5c04\u89d2\u53d8\u4eae</strong>\uff1a\u8bb8\u591a\u6750\u8d28\u5728$\\theta \\to 90\u00b0$\u65f6\u53cd\u5c04\u589e\u5f3a</li>\n<li><strong>\u51e0\u4f55\u8870\u51cf</strong>\uff1a$\\cos\\theta$\u56e0\u5b50\u5bfc\u81f4\u6709\u6548\u53cd\u5c04\u51cf\u5f31</li>\n<li><strong>\u5e73\u8861\u6548\u5e94</strong>\uff1a\u5b9e\u9645\u89c2\u5bdf\u5230\u7684\u4eae\u5ea6\u53d6\u51b3\u4e8e\u4e24\u8005\u7684\u7ade\u4e89</li>\n</ul>\n<h3 id=\"913-brdfbsdf\">9.1.3 \u4eceBRDF\u5230BSDF\uff1a\u900f\u5c04\u4e0e\u6563\u5c04</h3>\n<p>\u53cc\u5411\u6563\u5c04\u5206\u5e03\u51fd\u6570\uff08Bidirectional Scattering Distribution Function, BSDF\uff09\u662fBRDF\u7684\u63a8\u5e7f\uff0c\u5305\u542b\u4e86\u53cd\u5c04\u548c\u900f\u5c04\uff1a\n$$f_s(\\omega_i, \\omega_o) = f_r(\\omega_i, \\omega_o) + f_t(\\omega_i, \\omega_o)$$\n\u5176\u4e2d$f_t$\u662f\u53cc\u5411\u900f\u5c04\u5206\u5e03\u51fd\u6570\uff08BTDF\uff09\u3002</p>\n<p><strong>\u5750\u6807\u7cfb\u7ea6\u5b9a</strong>\uff1a</p>\n<ul>\n<li>\u6cd5\u7ebf$\\mathbf{n}$\u59cb\u7ec8\u6307\u5411\"\u5916\u4fa7\"\uff08\u6298\u5c04\u7387\u8f83\u5c0f\u7684\u4e00\u4fa7\uff09</li>\n<li>\u5165\u5c04\u548c\u51fa\u5c04\u65b9\u5411\u90fd\u6307\u5411\u8868\u9762\u5916</li>\n<li>\u5bf9\u4e8e\u900f\u5c04\uff0c$\\omega_i \\cdot \\mathbf{n} &gt; 0$\u800c$\\omega_o \\cdot \\mathbf{n} &lt; 0$</li>\n</ul>\n<p><strong>\u5e7f\u4e49\u6563\u5c04\u65b9\u7a0b</strong>\uff1a\n$$L_o(\\mathbf{x}, \\omega_o) = \\int_{\\Omega^+} f_r(\\omega_i, \\omega_o) L_i(\\omega_i) |\\cos\\theta_i| d\\omega_i + \\int_{\\Omega^-} f_t(\\omega_i, \\omega_o) L_i(\\omega_i) |\\cos\\theta_i| d\\omega_i$$\n\u5176\u4e2d$\\Omega^+$\u548c$\\Omega^-$\u5206\u522b\u8868\u793a\u4e0a\u534a\u7403\u548c\u4e0b\u534a\u7403\u3002</p>\n<p>\u5bf9\u4e8e\u900f\u5c04\uff0c\u9700\u8981\u8003\u8651\u6298\u5c04\u5b9a\u5f8b\uff08Snell's Law\uff09\uff1a\n$$\\eta_i \\sin\\theta_i = \\eta_t \\sin\\theta_t$$\n\u5176\u4e2d$\\eta_i$\u548c$\\eta_t$\u5206\u522b\u662f\u5165\u5c04\u548c\u900f\u5c04\u4ecb\u8d28\u7684\u6298\u5c04\u7387\u3002</p>\n<p><strong>\u77e2\u91cf\u5f62\u5f0f\u7684\u6298\u5c04\u5b9a\u5f8b</strong>\uff1a\n$$\\eta_i (\\omega_i - (\\omega_i \\cdot \\mathbf{n})\\mathbf{n}) = \\eta_t (\\omega_t - (\\omega_t \\cdot \\mathbf{n})\\mathbf{n})$$\n\u8fd9\u8868\u660e\u5207\u5411\u5206\u91cf\u6309\u6298\u5c04\u7387\u6bd4\u4f8b\u7f29\u653e\u3002</p>\n<p><strong>\u6298\u5c04\u65b9\u5411\u8ba1\u7b97</strong>\uff1a\n\u7ed9\u5b9a\u5165\u5c04\u65b9\u5411$\\omega_i$\u548c\u8868\u9762\u6cd5\u7ebf$\\mathbf{n}$\uff0c\u6298\u5c04\u65b9\u5411$\\omega_t$\u4e3a\uff1a\n$$\\omega_t = \\frac{\\eta_i}{\\eta_t}\\omega_i + \\left(\\frac{\\eta_i}{\\eta_t}\\cos\\theta_i - \\sqrt{1 - \\left(\\frac{\\eta_i}{\\eta_t}\\right)^2(1 - \\cos^2\\theta_i)}\\right)\\mathbf{n}$$\n<strong>\u6570\u503c\u7a33\u5b9a\u6027</strong>\uff1a\u5224\u522b\u5f0f$D = 1 - (\\eta_i/\\eta_t)^2(1 - \\cos^2\\theta_i)$</p>\n<ul>\n<li>\u82e5$D &lt; 0$\uff1a\u53d1\u751f\u5168\u5185\u53cd\u5c04</li>\n<li>\u82e5$D \\geq 0$\uff1a\u6b63\u5e38\u6298\u5c04</li>\n</ul>\n<p><strong>\u4e34\u754c\u89d2\u4e0e\u5168\u5185\u53cd\u5c04</strong>\uff1a\n\u5f53\u5149\u4ece\u5149\u5bc6\u4ecb\u8d28\u5c04\u5411\u5149\u758f\u4ecb\u8d28\u65f6\uff08$\\eta_i &gt; \\eta_t$\uff09\uff0c\u5b58\u5728\u4e34\u754c\u89d2\uff1a\n$$\\theta_c = \\arcsin\\left(\\frac{\\eta_t}{\\eta_i}\\right)$$\n\u5f53$\\theta_i &gt; \\theta_c$\u65f6\uff0c\u53d1\u751f\u5168\u5185\u53cd\u5c04\uff0c\u6b64\u65f6BTDF\u4e3a0\uff0c\u6240\u6709\u80fd\u91cf\u90fd\u88ab\u53cd\u5c04\u3002</p>\n<p><strong>\u5168\u5185\u53cd\u5c04\u7684\u5e94\u7528</strong>\uff1a</p>\n<ul>\n<li>\u5149\u7ea4\u901a\u4fe1\uff1a\u5229\u7528\u5168\u5185\u53cd\u5c04\u4f20\u8f93\u4fe1\u53f7</li>\n<li>\u94bb\u77f3\u5207\u5272\uff1a\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u89d2\u5ea6\u4f7f\u5149\u7ebf\u5728\u5185\u90e8\u591a\u6b21\u53cd\u5c04</li>\n<li>\u6c34\u4e0b\u89c2\u5bdf\uff1a\u4ece\u6c34\u4e0b\u770b\u5929\u7a7a\u7684\"\u5706\u7a97\"\u73b0\u8c61</li>\n</ul>\n<p><strong>BTDF\u7684\u7279\u6b8a\u6027\u8d28</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5e7f\u4e49\u4e92\u6613\u6027</strong>\uff1a\u7531\u4e8e\u6298\u5c04\u7387\u4e0d\u540c\uff0cBTDF\u4e0d\u6ee1\u8db3\u7b80\u5355\u7684\u4e92\u6613\u6027\uff0c\u800c\u662f\uff1a\n$$\\eta_i^2 f_t(\\omega_i, \\omega_o) = \\eta_t^2 f_t(\\omega_o, \\omega_i)$$\n<strong>\u63a8\u5bfc</strong>\uff1a\u4ece\u8f90\u5c04\u5ea6\u4f20\u8f93\u7684\u53ef\u9006\u6027\u548c\u7acb\u4f53\u89d2\u53d8\u6362\u5f97\u51fa\u3002</p>\n</li>\n<li>\n<p><strong>\u96c5\u53ef\u6bd4\u884c\u5217\u5f0f</strong>\uff1a\u4ece\u7acb\u4f53\u89d2\u5230\u7acb\u4f53\u89d2\u7684\u53d8\u6362\u9700\u8981\u8003\u8651\u6298\u5c04\u5bfc\u81f4\u7684\u7acb\u4f53\u89d2\u538b\u7f29/\u6269\u5c55\uff1a\n$$\\frac{d\\omega_t}{d\\omega_i} = \\frac{\\eta_t^2}{\\eta_i^2} \\frac{\\cos\\theta_t}{\\cos\\theta_i}$$\n<strong>\u51e0\u4f55\u89e3\u91ca</strong>\uff1a\u5149\u675f\u622a\u9762\u79ef\u7684\u53d8\u5316\u548c\u4f20\u64ad\u65b9\u5411\u7684\u6539\u53d8\u3002</p>\n</li>\n<li>\n<p><strong>\u8f90\u5c04\u5ea6\u4e0d\u53d8\u6027\u7834\u574f</strong>\uff1a\u4e0d\u540c\u4e8e\u53cd\u5c04\uff0c\u6298\u5c04\u65f6\u8f90\u5c04\u5ea6\u4f1a\u6539\u53d8\uff1a\n$$L_t = \\frac{\\eta_t^2}{\\eta_i^2} L_i$$\n\u8fd9\u662f\u56e0\u4e3a\u5149\u901f\u5728\u4e0d\u540c\u4ecb\u8d28\u4e2d\u4e0d\u540c\u3002</p>\n</li>\n</ol>\n<p><strong>\u7406\u60f3\u6298\u5c04BTDF</strong>\uff1a\n\u5bf9\u4e8e\u7406\u60f3\u5149\u6ed1\u8868\u9762\uff1a\n$$f_t(\\omega_i, \\omega_o) = \\frac{(1 - F(\\omega_i))}{\\eta_t^2} \\frac{|\\mathbf{n} \\cdot \\omega_t|}{|\\mathbf{n} \\cdot \\omega_i|} \\delta(\\omega_o - \\omega_t)$$\n\u5176\u4e2d$F(\\omega_i)$\u662f\u83f2\u6d85\u5c14\u53cd\u5c04\u7387\uff0c$(1-F)$\u662f\u900f\u5c04\u7387\u3002</p>\n<p><strong>\u7c97\u7cd9\u6298\u5c04\u8868\u9762</strong>\uff1a\n\u5bf9\u4e8e\u7c97\u7cd9\u900f\u660e\u8868\u9762\uff08\u5982\u78e8\u7802\u73bb\u7483\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528\u5fae\u8868\u9762\u7406\u8bba\uff1a\n$$f_t(\\omega_i, \\omega_o) = \\frac{|\\mathbf{n} \\cdot \\omega_i| |\\mathbf{n} \\cdot \\omega_o|}{|\\omega_i \\cdot \\mathbf{h}| |\\omega_o \\cdot \\mathbf{h}|} \\frac{\\eta_o^2}{\\eta_i^2} \\frac{(1-F(\\omega_i, \\mathbf{h})) D(\\mathbf{h}) G(\\omega_i, \\omega_o)}{|\\mathbf{n} \\cdot \\omega_i| |\\mathbf{n} \\cdot \\omega_o|}$$\n\u5176\u4e2d\u534a\u7a0b\u5411\u91cf$\\mathbf{h}$\u9700\u8981\u8003\u8651\u6298\u5c04\uff1a\n$$\\mathbf{h} = -\\frac{\\eta_i \\omega_i + \\eta_o \\omega_o}{|\\eta_i \\omega_i + \\eta_o \\omega_o|}$$\n<strong>\u4f53\u79ef\u6563\u5c04\u4e0eBSSDF</strong>\uff1a\n\u5f53\u6563\u5c04\u53d1\u751f\u5728\u6750\u8d28\u5185\u90e8\u65f6\uff0c\u9700\u8981\u5f15\u5165\u53cc\u5411\u6563\u5c04\u8868\u9762\u5206\u5e03\u51fd\u6570\uff08BSSDF\uff09\uff1a\n$$S(\\mathbf{x}_i, \\omega_i, \\mathbf{x}_o, \\omega_o)$$\n\u63cf\u8ff0\u4ece\u4f4d\u7f6e$\\mathbf{x}_i$\u5165\u5c04\u7684\u5149\u5982\u4f55\u5728\u4f4d\u7f6e$\\mathbf{x}_o$\u51fa\u5c04\u3002</p>\n<p><strong>\u8584\u5c42\u8fd1\u4f3c</strong>\uff1a\n\u5bf9\u4e8e\u8584\u5c42\u534a\u900f\u660e\u6750\u8d28\uff0c\u53ef\u4ee5\u5c06BSSDF\u7b80\u5316\u4e3a\u4fee\u6b63\u7684BSDF\uff1a\n$$f_s^{\\text{thin}}(\\omega_i, \\omega_o) = f_s^{\\text{surface}}(\\omega_i, \\omega_o) + T(\\omega_i) \\cdot f_s^{\\text{volume}} \\cdot T(\\omega_o)$$\n\u5176\u4e2d$T$\u662f\u900f\u5c04\u51fd\u6570\uff0c$f_s^{\\text{volume}}$\u63cf\u8ff0\u4f53\u79ef\u5185\u7684\u6563\u5c04\u3002</p>\n<h3 id=\"914-brdf\">9.1.4 \u7403\u8c10\u51fd\u6570\u4e0eBRDF\u8868\u793a</h3>\n<p>\u7403\u8c10\u51fd\u6570\uff08Spherical Harmonics, SH\uff09\u63d0\u4f9b\u4e86\u5728\u7403\u9762\u4e0a\u8868\u793a\u51fd\u6570\u7684\u6b63\u4ea4\u57fa\uff1a\n$$Y_l^m(\\theta, \\phi) = \\sqrt{\\frac{2l+1}{4\\pi}\\frac{(l-|m|)!}{(l+|m|)!}} P_l^{|m|}(\\cos\\theta) e^{im\\phi}$$\n\u5176\u4e2d$P_l^m$\u662f\u5173\u8054\u52d2\u8ba9\u5fb7\u591a\u9879\u5f0f\u3002</p>\n<p><strong>\u5b9e\u6570\u7403\u8c10\u51fd\u6570</strong>\uff1a\n\u5728\u56fe\u5f62\u5b66\u4e2d\u901a\u5e38\u4f7f\u7528\u5b9e\u6570\u5f62\u5f0f\uff1a\n$$Y_{lm} = \\begin{cases}\n\\sqrt{2} \\cdot \\text{Re}(Y_l^{|m|}) &amp; m &gt; 0 \\\nY_l^0 &amp; m = 0 \\\n\\sqrt{2} \\cdot \\text{Im}(Y_l^{|m|}) &amp; m &lt; 0\n\\end{cases}$$\n<strong>\u524d\u51e0\u9636\u7403\u8c10\u51fd\u6570</strong>\uff08\u5b9e\u6570\u5f62\u5f0f\uff09\uff1a</p>\n<ul>\n<li>$Y_{00} = \\frac{1}{2\\sqrt{\\pi}}$ \uff08\u5e38\u6570\u9879\uff09</li>\n<li>$Y_{1,-1} = \\sqrt{\\frac{3}{4\\pi}} y$ </li>\n<li>$Y_{10} = \\sqrt{\\frac{3}{4\\pi}} z$</li>\n<li>$Y_{11} = \\sqrt{\\frac{3}{4\\pi}} x$</li>\n<li>$Y_{2,-2} = \\frac{1}{2}\\sqrt{\\frac{15}{\\pi}} xy$</li>\n<li>$Y_{2,-1} = \\frac{1}{2}\\sqrt{\\frac{15}{\\pi}} yz$</li>\n<li>$Y_{20} = \\frac{1}{4}\\sqrt{\\frac{5}{\\pi}} (3z^2 - 1)$</li>\n<li>$Y_{21} = \\frac{1}{2}\\sqrt{\\frac{15}{\\pi}} xz$</li>\n<li>$Y_{22} = \\frac{1}{4}\\sqrt{\\frac{15}{\\pi}} (x^2 - y^2)$</li>\n</ul>\n<p><strong>\u6b63\u4ea4\u6027</strong>\uff1a\n$$\\int_{\\mathcal{S}^2} Y_{lm}(\\omega) Y_{l'm'}(\\omega) d\\omega = \\delta_{ll'}\\delta_{mm'}$$\n<strong>BRDF\u7684\u7403\u8c10\u5c55\u5f00</strong>\uff1a\n\u7531\u4e8eBRDF\u662f\u56db\u7ef4\u51fd\u6570\uff0c\u9700\u8981\u66f4\u590d\u6742\u7684\u8868\u793a\u3002</p>\n<p><strong>\u65b9\u6cd5\u4e00\uff1a\u5207\u7247\u6295\u5f71</strong>\n\u56fa\u5b9a\u5165\u5c04\u65b9\u5411$\\omega_i$\uff0c\u5c06BRDF\u6295\u5f71\u5230\u7403\u8c10\u57fa\uff1a\n$$f_r(\\omega_i, \\omega_o) = \\sum_{l=0}^{\\infty} \\sum_{m=-l}^{l} a_{lm}(\\omega_i) Y_{lm}(\\omega_o)$$\n\u5176\u4e2d\u7cfb\u6570\uff1a\n$$a_{lm}(\\omega_i) = \\int_{\\mathcal{S}^2} f_r(\\omega_i, \\omega_o) Y_{lm}(\\omega_o) d\\omega_o$$\n<strong>\u65b9\u6cd5\u4e8c\uff1a\u53cc\u7403\u8c10\u5c55\u5f00</strong>\n\u4f7f\u7528\u7403\u9762\u4e0a\u7684\u5f20\u91cf\u79ef\uff1a\n$$f_r(\\omega_i, \\omega_o) = \\sum_{l_1,m_1} \\sum_{l_2,m_2} c_{l_1m_1,l_2m_2} Y_{l_1m_1}(\\omega_i) Y_{l_2m_2}(\\omega_o)$$\n\u5b58\u50a8\u9700\u6c42\uff1a$(l_{max}+1)^4$\u4e2a\u7cfb\u6570\u3002</p>\n<p><strong>\u65b9\u6cd5\u4e09\uff1a\u65cb\u8f6c\u4e0d\u53d8\u5206\u89e3</strong>\n\u5bf9\u4e8e\u5404\u5411\u540c\u6027BRDF\uff0c\u5229\u7528Clebsch-Gordan\u7cfb\u6570\uff1a\n$$f_r(\\omega_i, \\omega_o) = \\sum_{l=0}^{\\infty} a_l \\sum_{m=-l}^{l} Y_{lm}(\\omega_i) Y_{lm}^<em>(\\omega_o)$$\n\u8fd9\u5229\u7528\u4e86\u52a0\u6cd5\u5b9a\u7406\uff1a\n$$P_l(\\omega_i \\cdot \\omega_o) = \\frac{4\\pi}{2l+1} \\sum_{m=-l}^{l} Y_{lm}(\\omega_i) Y_{lm}^</em>(\\omega_o)$$\n<strong>Zonal Harmonics\u8868\u793a</strong>\uff1a\n\u5f53BRDF\u53ea\u4f9d\u8d56\u4e8e\u76f8\u5bf9\u89d2\u5ea6\u65f6\uff1a\n$$f_r(\\cos\\theta) = \\sum_{l=0}^{\\infty} \\hat{f}_l P_l(\\cos\\theta)$$\n\u5176\u4e2d$\\theta$\u662f$\\omega_i$\u548c$\\omega_o$\u4e4b\u95f4\u7684\u5939\u89d2\uff0c\u7cfb\u6570\uff1a\n$$\\hat{f}_l = \\frac{2l+1}{2} \\int_{-1}^{1} f_r(x) P_l(x) dx$$\n<strong>\u9891\u7387\u5206\u6790</strong>\uff1a</p>\n<ul>\n<li><strong>\u4f4e\u9891\u5206\u91cf</strong>\uff08$l \\leq 2$\uff09\uff1a\u6355\u83b7\u6574\u4f53\u5f62\u72b6\u548c\u6f2b\u53cd\u5c04</li>\n<li><strong>\u4e2d\u9891\u5206\u91cf</strong>\uff08$2 &lt; l \\leq 8$\uff09\uff1a\u8f6f\u9ad8\u5149\u548c\u5149\u6cfd</li>\n<li><strong>\u9ad8\u9891\u5206\u91cf</strong>\uff08$l &gt; 8$\uff09\uff1a\u9510\u5229\u9ad8\u5149\u548c\u7ec6\u8282</li>\n</ul>\n<p><strong>\u622a\u65ad\u8bef\u5dee\u5206\u6790</strong>\uff1a\n\u622a\u65ad\u5230$l_{max}$\u9636\u7684\u5747\u65b9\u8bef\u5dee\uff1a\n$$\\epsilon^2 = \\sum_{l=l_{max}+1}^{\\infty} \\sum_{m=-l}^{l} |a_{lm}|^2$$\n\u5bf9\u4e8e\u5e26\u9650\u51fd\u6570\uff0c\u8bef\u5dee\u968f$l_{max}$\u6307\u6570\u8870\u51cf\u3002</p>\n<p><strong>\u65cb\u8f6c\u64cd\u4f5c</strong>\uff1a\n\u7403\u8c10\u51fd\u6570\u5728\u65cb\u8f6c\u4e0b\u7684\u53d8\u6362\uff1a\n$$Y_{lm}(R\\omega) = \\sum_{m'=-l}^{l} D_{mm'}^l(R) Y_{lm'}(\\omega)$$\n\u5176\u4e2d$D^l$\u662fWigner D-\u77e9\u9635\u3002</p>\n<p><strong>\u5377\u79ef\u5b9a\u7406</strong>\uff1a\n\u7403\u9762\u5377\u79ef\u5728\u7403\u8c10\u57df\u53d8\u4e3a\u4e58\u6cd5\uff1a\n$$(f * g)_{lm} = \\sqrt{\\frac{4\\pi}{2l+1}} f_{l0} g_{lm}$$\n\u8fd9\u4f7f\u5f97\u73af\u5883\u5149\u7167\u7684\u8ba1\u7b97\u5927\u5927\u7b80\u5316\u3002</p>\n<p><strong>\u5b9e\u9645\u5e94\u7528\u4e2d\u7684\u6280\u5de7</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5e26\u5bbd\u9650\u5236</strong>\uff1a\n   - Lambertian\uff1a3\u9636\u8db3\u591f\uff089\u4e2a\u7cfb\u6570\uff09\n   - Phong\u5149\u7167\uff1a\u9700\u89815-7\u9636\n   - \u955c\u9762\u53cd\u5c04\uff1a\u9700\u8981\u6781\u9ad8\u9636\u6216\u5176\u4ed6\u8868\u793a</p>\n</li>\n<li>\n<p><strong>\u8d1f\u503c\u5904\u7406</strong>\uff1a\n   - \u4f7f\u7528\u5e73\u65b9\u7403\u8c10\u51fd\u6570\n   - \u6dfb\u52a0\u5e38\u6570\u504f\u79fb\n   - \u5c40\u90e8\u652f\u6491\u57fa\u51fd\u6570</p>\n</li>\n<li>\n<p><strong>\u538b\u7f29\u5b58\u50a8</strong>\uff1a\n   - \u5229\u7528\u5bf9\u79f0\u6027\u51cf\u5c11\u7cfb\u6570\n   - \u91cf\u5316\u4f4e\u91cd\u8981\u6027\u7cfb\u6570\n   - \u7a00\u758f\u8868\u793a\u9ad8\u9891\u5206\u91cf</p>\n</li>\n</ol>\n<p><strong>\u4e0e\u5176\u4ed6\u57fa\u51fd\u6570\u7684\u6bd4\u8f83</strong>\uff1a</p>\n<ul>\n<li><strong>Haar\u5c0f\u6ce2</strong>\uff1a\u66f4\u597d\u7684\u5c40\u90e8\u652f\u6491\uff0c\u9002\u5408\u9ad8\u9891</li>\n<li><strong>\u7403\u9762\u9ad8\u65af</strong>\uff1a\u76f4\u89c2\u7684lobe\u8868\u793a\uff0c\u6613\u4e8e\u91cd\u8981\u6027\u91c7\u6837</li>\n<li><strong>Von Mises-Fisher\u5206\u5e03</strong>\uff1a\u7edf\u8ba1\u89e3\u91ca\u6e05\u6670</li>\n</ul>\n<p><strong>PRT\u4e2d\u7684\u5e94\u7528</strong>\uff1a\n\u4f20\u8f93\u7b97\u5b50$T$\u5c06\u5165\u5c04\u5149\u7167$L_{in}$\u6620\u5c04\u5230\u51fa\u5c04\u8f90\u5c04\u5ea6\uff1a\n$$L_{out} = T \\cdot L_{in}$$\n\u5728\u7403\u8c10\u57fa\u4e0b\uff0c$T$\u662f\u4e00\u4e2a\u77e9\u9635\uff0c\u53ef\u9884\u8ba1\u7b97\u5e76\u5b9e\u65f6\u5e94\u7528\u3002</p>\n<h3 id=\"915-brdf\">9.1.5 BRDF\u7684\u6d4b\u91cf\u4e0e\u62df\u5408</h3>\n<p><strong>\u6d4b\u91cf\u8bbe\u5907</strong>\uff1a\u6d4b\u89d2\u5149\u5ea6\u8ba1\uff08Gonioreflectometer\uff09\u901a\u8fc7\u673a\u68b0\u81c2\u63a7\u5236\u5149\u6e90\u548c\u68c0\u6d4b\u5668\u4f4d\u7f6e\uff0c\u7cfb\u7edf\u5730\u6d4b\u91cf\u4e0d\u540c\u89d2\u5ea6\u7ec4\u5408\u4e0b\u7684\u53cd\u5c04\u7387\u3002</p>\n<p><strong>\u6d4b\u91cf\u539f\u7406</strong>\uff1a</p>\n<ol>\n<li><strong>\u7edd\u5bf9\u6d4b\u91cf</strong>\uff1a\u4f7f\u7528\u5df2\u77e5\u53cd\u5c04\u7387\u7684\u6807\u51c6\u677f\u6821\u51c6</li>\n<li><strong>\u76f8\u5bf9\u6d4b\u91cf</strong>\uff1a\u6d4b\u91cf\u76f8\u5bf9\u4e8e\u53c2\u8003\u6750\u8d28\u7684\u53cd\u5c04\u7387</li>\n<li><strong>HDR\u6355\u83b7</strong>\uff1a\u591a\u6b21\u66dd\u5149\u8986\u76d6\u5927\u52a8\u6001\u8303\u56f4</li>\n</ol>\n<p><strong>\u5178\u578b\u6d4b\u91cf\u88c5\u7f6e</strong>\uff1a</p>\n<ul>\n<li><strong>3\u8f74\u7cfb\u7edf</strong>\uff1a\u6837\u54c1\u65cb\u8f6c + \u5149\u6e90\u81c2 + \u68c0\u6d4b\u5668\u81c2</li>\n<li><strong>4\u8f74\u7cfb\u7edf</strong>\uff1a\u589e\u52a0\u6837\u54c1\u503e\u659c\uff0c\u66f4\u597d\u8986\u76d6\u63a0\u5c04\u89d2</li>\n<li><strong>\u56fe\u50cf\u5f0f</strong>\uff1a\u4f7f\u7528\u66f2\u9762\u955c\u6216\u591a\u76f8\u673a\u9635\u5217\u52a0\u901f\u6d4b\u91cf</li>\n</ul>\n<p><strong>\u6d4b\u91cf\u6311\u6218</strong>\uff1a</p>\n<ul>\n<li><strong>\u9ad8\u7ef4\u5ea6</strong>\uff1a4D\u51fd\u6570\u9700\u8981\u5927\u91cf\u91c7\u6837\uff08\u5178\u578b\u9700\u8981$10^6$\u4ee5\u4e0a\u6d4b\u91cf\u70b9\uff09</li>\n<li><strong>\u52a8\u6001\u8303\u56f4</strong>\uff1a\u4ece\u6f2b\u53cd\u5c04\u5230\u955c\u9762\u53cd\u5c04\u8de8\u8d8a\u591a\u4e2a\u6570\u91cf\u7ea7</li>\n<li><strong>\u63a0\u5c04\u89d2</strong>\uff1a\u63a5\u8fd190\u00b0\u65f6\u6d4b\u91cf\u56f0\u96be\u4f46\u89c6\u89c9\u91cd\u8981</li>\n<li><strong>\u65f6\u95f4\u6210\u672c</strong>\uff1a\u5b8c\u6574\u6d4b\u91cf\u53ef\u80fd\u9700\u8981\u6570\u5c0f\u65f6\u5230\u6570\u5929</li>\n<li><strong>\u6837\u54c1\u5236\u5907</strong>\uff1a\u9700\u8981\u5e73\u5766\u3001\u5747\u5300\u3001\u7a33\u5b9a\u7684\u8868\u9762</li>\n<li><strong>\u504f\u632f\u6548\u5e94</strong>\uff1a\u67d0\u4e9b\u6750\u8d28\u9700\u8981\u8003\u8651\u504f\u632f</li>\n</ul>\n<p><strong>\u91c7\u6837\u7b56\u7565</strong>\uff1a</p>\n<ol>\n<li><strong>\u5747\u5300\u91c7\u6837</strong>\uff1a\u7b80\u5355\u4f46\u4f4e\u6548</li>\n<li><strong>\u81ea\u9002\u5e94\u91c7\u6837</strong>\uff1a\u5728\u53d8\u5316\u5267\u70c8\u533a\u57df\u52a0\u5bc6</li>\n<li><strong>\u91cd\u8981\u6027\u91c7\u6837</strong>\uff1a\u57fa\u4e8e\u9884\u671fBRDF\u5f62\u72b6</li>\n<li><strong>\u538b\u7f29\u611f\u77e5</strong>\uff1a\u5229\u7528\u7a00\u758f\u6027\u51cf\u5c11\u91c7\u6837</li>\n</ol>\n<p><strong>\u6570\u636e\u5904\u7406\u6d41\u7a0b</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>\u539f\u59cb\u6d4b\u91cf \u2192 \u566a\u58f0\u8fc7\u6ee4 \u2192 \u5750\u6807\u53d8\u6362 \u2192 \u63d2\u503c/\u5916\u63a8 \u2192 \u9a8c\u8bc1\n</code></pre>\n\n<p><strong>\u5750\u6807\u53c2\u6570\u5316</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u534a\u89d2\u53c2\u6570\u5316</strong>\uff1a$(\\theta_h, \\phi_h, \\theta_d, \\phi_d)$\n   - \u4f18\u70b9\uff1a\u66f4\u597d\u5730\u6355\u83b7\u955c\u9762\u5cf0\n   - \u7f3a\u70b9\uff1a\u96c5\u53ef\u6bd4\u53d8\u6362\u590d\u6742</p>\n</li>\n<li>\n<p><strong>Rusinkiewicz\u53c2\u6570\u5316</strong>\uff1a\u57fa\u4e8e\u534a\u7a0b\u5411\u91cf\u548c\u5dee\u5206\u89d2\n   - \u66f4\u5747\u5300\u7684\u91c7\u6837\u5206\u5e03\n   - \u81ea\u7136\u7684\u5404\u5411\u540c\u6027/\u5404\u5411\u5f02\u6027\u5206\u79bb</p>\n</li>\n</ol>\n<p><strong>\u6570\u636e\u8868\u793a</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u8868\u683c\u5f62\u5f0f</strong>\uff1a\u76f4\u63a5\u5b58\u50a8\u6d4b\u91cf\u6570\u636e\n   - \u5b58\u50a8\u683c\u5f0f\uff1a\u901a\u5e3890\u00d790\u00d7180\u00d74\uff08\u89d2\u5ea6\u00d7\u89d2\u5ea6\u00d7\u89d2\u5ea6\u00d7RGB\uff09\n   - \u63d2\u503c\u65b9\u6cd5\uff1a\u4e09\u7ebf\u6027\u3001\u4e09\u6b21\u6837\u6761\u3001RBF\n   - \u538b\u7f29\u6280\u672f\uff1aPCA\u3001\u5c0f\u6ce2\u3001\u5f20\u91cf\u5206\u89e3</p>\n</li>\n<li>\n<p><strong>\u89e3\u6790\u6a21\u578b\u62df\u5408</strong>\uff1a\n   - <strong>\u5355lobe\u6a21\u578b</strong>\uff1aCook-Torrance\u3001Ward\u3001Lafortune\n   - <strong>\u591alobe\u6a21\u578b</strong>\uff1a\u6df7\u5408\u591a\u4e2a\u57fa\u672cBRDF\n   - <strong>\u6570\u636e\u9a71\u52a8\u6a21\u578b</strong>\uff1a\u4f7f\u7528\u6d4b\u91cf\u6570\u636e\u8bad\u7ec3</p>\n</li>\n<li>\n<p><strong>\u57fa\u51fd\u6570\u5206\u89e3</strong>\uff1a\n   - <strong>\u7403\u8c10\u51fd\u6570</strong>\uff1a\u4f4e\u9891\u6210\u5206\n   - <strong>\u5c0f\u6ce2\u57fa</strong>\uff1a\u591a\u5206\u8fa8\u7387\u8868\u793a\n   - <strong>Zernike\u591a\u9879\u5f0f</strong>\uff1a\u5706\u57df\u4e0a\u7684\u6b63\u4ea4\u57fa\n   - <strong>\u6df7\u5408\u8868\u793a</strong>\uff1a\u4f4e\u9891\u7528SH\uff0c\u9ad8\u9891\u7528\u5176\u4ed6</p>\n</li>\n</ol>\n<p><strong>\u6570\u636e\u5e93\u4e0e\u6807\u51c6</strong>\uff1a</p>\n<ul>\n<li><strong>MERL BRDF\u6570\u636e\u5e93</strong>\uff1a100\u79cd\u6750\u8d28\uff0c\u5bc6\u96c6\u91c7\u6837\uff0890\u00d790\u00d7180\uff09</li>\n<li><strong>UTIA\u6570\u636e\u5e93</strong>\uff1a\u5305\u542b\u5404\u5411\u5f02\u6027\u6750\u8d28\uff0c\u7a00\u758f\u91c7\u6837</li>\n<li><strong>RGL-EPFL</strong>\uff1a\u9ad8\u5206\u8fa8\u7387\uff0c\u5305\u542b\u504f\u632f\u4fe1\u606f</li>\n<li><strong>Disney BRDF\u6570\u636e\u96c6</strong>\uff1a\u751f\u4ea7\u7ea7\u6750\u8d28\u53c2\u8003</li>\n<li><strong>BRDF\u6570\u636e\u4ea4\u6362\u683c\u5f0f</strong>\uff1aOpenEXR\u6269\u5c55\u3001ASTM\u6807\u51c6</li>\n</ul>\n<p><strong>\u62df\u5408\u65b9\u6cd5</strong>\uff1a</p>\n<p><strong>1. \u975e\u7ebf\u6027\u6700\u5c0f\u4e8c\u4e58</strong>\uff1a\n$$\\min_{\\theta} \\sum_{i} w_i \\left(\\log f_r^{\\text{measured}}(\\omega_{i}) - \\log f_r^{\\text{model}}(\\omega_{i}; \\theta)\\right)^2$$\n\u4f7f\u7528\u5bf9\u6570\u7a7a\u95f4\u51cf\u5c11\u52a8\u6001\u8303\u56f4\u5f71\u54cd\u3002</p>\n<p><strong>\u4f18\u5316\u7b97\u6cd5</strong>\uff1a</p>\n<ul>\n<li>Levenberg-Marquardt\uff1a\u7a33\u5065\u4f46\u53ef\u80fd\u9677\u5165\u5c40\u90e8\u6781\u5c0f</li>\n<li>\u5168\u5c40\u4f18\u5316\uff1a\u6a21\u62df\u9000\u706b\u3001\u9057\u4f20\u7b97\u6cd5</li>\n<li>\u591a\u8d77\u70b9\u7b56\u7565\uff1a\u4ece\u591a\u4e2a\u521d\u503c\u5f00\u59cb</li>\n</ul>\n<p><strong>2. \u6700\u5927\u4f3c\u7136\u4f30\u8ba1</strong>\uff1a\n\u5047\u8bbe\u6d4b\u91cf\u566a\u58f0\u6a21\u578b\uff08\u5982\u9ad8\u65af\u566a\u58f0\uff09\uff1a\n$$p(y_i | \\mu_i) = \\frac{1}{\\sqrt{2\\pi\\sigma^2}} \\exp\\left(-\\frac{(y_i - \\mu_i)^2}{2\\sigma^2}\\right)$$\n\u5bf9\u6570\u4f3c\u7136\uff1a\n$$\\log \\mathcal{L} = -\\frac{1}{2\\sigma^2} \\sum_i (y_i - f_r(\\omega_i; \\theta))^2 + \\text{const}$$</p>\n<p><strong>3. \u8d1d\u53f6\u65af\u63a8\u65ad</strong>\uff1a\n\u5f15\u5165\u53c2\u6570\u5148\u9a8c$p(\\theta)$\uff1a</p>\n<ul>\n<li>\u7269\u7406\u7ea6\u675f\u4f5c\u4e3a\u5148\u9a8c\uff08\u5982\u80fd\u91cf\u5b88\u6052\uff09</li>\n<li>\u5e73\u6ed1\u6027\u5148\u9a8c\uff08\u5982\u9ad8\u65af\u8fc7\u7a0b\uff09</li>\n<li>\u7a00\u758f\u6027\u5148\u9a8c\uff08\u5982Laplace\u5206\u5e03\uff09</li>\n</ul>\n<p>\u540e\u9a8c\u91c7\u6837\u65b9\u6cd5\uff1a</p>\n<ul>\n<li>MCMC\uff08Markov Chain Monte Carlo\uff09</li>\n<li>\u53d8\u5206\u63a8\u65ad</li>\n<li>\u8fd1\u4f3c\u8d1d\u53f6\u65af\u8ba1\u7b97\uff08ABC\uff09</li>\n</ul>\n<p><strong>4. \u673a\u5668\u5b66\u4e60\u65b9\u6cd5</strong>\uff1a\n- <strong>\u795e\u7ecf\u7f51\u7edc</strong>\uff1a\u76f4\u63a5\u5b66\u4e60\u6d4b\u91cf\u5230\u53c2\u6570\u7684\u6620\u5c04\n- <strong>\u9ad8\u65af\u8fc7\u7a0b</strong>\uff1a\u975e\u53c2\u6570\u5316BRDF\u8868\u793a\n- <strong>\u6d41\u5f62\u5b66\u4e60</strong>\uff1a\u53d1\u73b0BRDF\u7a7a\u95f4\u7684\u4f4e\u7ef4\u7ed3\u6784</p>\n<p><strong>\u62df\u5408\u8d28\u91cf\u8bc4\u4f30</strong>\uff1a</p>\n<p><strong>\u6570\u503c\u8bef\u5dee\u5ea6\u91cf</strong>\uff1a</p>\n<ul>\n<li><strong>RMS\u8bef\u5dee</strong>\uff1a$\\sqrt{\\frac{1}{N}\\sum_i (f_r^{\\text{measured}} - f_r^{\\text{model}})^2}$</li>\n<li><strong>\u76f8\u5bf9\u8bef\u5dee</strong>\uff1a$\\frac{|f_r^{\\text{measured}} - f_r^{\\text{model}}|}{f_r^{\\text{measured}} + \\epsilon}$</li>\n<li><strong>\u5bf9\u6570\u8bef\u5dee</strong>\uff1a$|\\log f_r^{\\text{measured}} - \\log f_r^{\\text{model}}|$</li>\n</ul>\n<p><strong>\u611f\u77e5\u8bef\u5dee\u5ea6\u91cf</strong>\uff1a</p>\n<ul>\n<li><strong>\u56fe\u50cf\u7a7a\u95f4\u8bef\u5dee</strong>\uff1a\u6e32\u67d3\u53c2\u8003\u56fe\u50cf\u6bd4\u8f83</li>\n<li><strong>\u611f\u77e5\u5ea6\u91cf</strong>\uff1aSSIM\u3001HDR-VDP</li>\n<li><strong>\u5173\u952e\u7279\u5f81\u4fdd\u6301</strong>\uff1a\u9ad8\u5149\u5f62\u72b6\u3001\u989c\u8272\u504f\u79fb</li>\n</ul>\n<p><strong>\u9a8c\u8bc1\u65b9\u6cd5</strong>\uff1a</p>\n<ol>\n<li><strong>\u4ea4\u53c9\u9a8c\u8bc1</strong>\uff1a\u7559\u51fa\u6d4b\u8bd5\u96c6</li>\n<li><strong>\u767d\u7089\u6d4b\u8bd5</strong>\uff1a\u68c0\u67e5\u80fd\u91cf\u5b88\u6052</li>\n<li><strong>\u4e92\u6613\u6027\u6d4b\u8bd5</strong>\uff1a\u9a8c\u8bc1\u7269\u7406\u6b63\u786e\u6027</li>\n<li><strong>\u5916\u63a8\u6d4b\u8bd5</strong>\uff1a\u672a\u6d4b\u91cf\u89d2\u5ea6\u7684\u9884\u6d4b</li>\n</ol>\n<p><strong>\u5b9e\u65f6\u91cd\u5efa\u6280\u672f</strong>\uff1a</p>\n<ul>\n<li><strong>GPU\u52a0\u901f\u63d2\u503c</strong>\uff1a\u5229\u7528\u7eb9\u7406\u786c\u4ef6</li>\n<li><strong>\u9884\u8ba1\u7b97\u8f90\u5c04\u5ea6\u56fe</strong>\uff1a\u4e0d\u540c\u5149\u7167\u4e0b\u7684\u5916\u89c2</li>\n<li><strong>\u795e\u7ecf\u7f51\u7edc\u63a8\u65ad</strong>\uff1a\u5b9e\u65f6\u8bc4\u4f30\u5b66\u4e60\u7684BRDF</li>\n</ul>\n<p><strong>\u672a\u6765\u65b9\u5411</strong>\uff1a</p>\n<ul>\n<li><strong>\u5149\u8c31BRDF</strong>\uff1a\u5b8c\u6574\u6ce2\u957f\u4f9d\u8d56\u6027</li>\n<li><strong>\u65f6\u53d8BRDF</strong>\uff1a\u8001\u5316\u3001\u6e29\u5ea6\u6548\u5e94</li>\n<li><strong>\u7a7a\u95f4\u53d8\u5316BRDF</strong>\uff1aSVBRDF\u6d4b\u91cf</li>\n<li><strong>\u504f\u632fBRDF</strong>\uff1aMueller\u77e9\u9635\u8868\u793a</li>\n</ul>\n<h2 id=\"92\">9.2 \u9ad8\u7ea7\u6750\u8d28\u6a21\u578b</h2>\n<h3 id=\"921-microfacet-theory\">9.2.1 \u5fae\u8868\u9762\u7406\u8bba\uff08Microfacet Theory\uff09</h3>\n<p>\u5fae\u8868\u9762\u7406\u8bba\u5c06\u7c97\u7cd9\u8868\u9762\u5efa\u6a21\u4e3a\u5927\u91cf\u5fae\u5c0f\u955c\u9762\u7684\u7edf\u8ba1\u5206\u5e03\u3002\u6838\u5fc3\u601d\u60f3\uff1a\u5b8f\u89c2BRDF\u662f\u5fae\u89c2\u51e0\u4f55\u7684\u7edf\u8ba1\u5e73\u5747\u3002</p>\n<p><strong>\u57fa\u672c\u5047\u8bbe</strong>\uff1a</p>\n<ol>\n<li>\u8868\u9762\u7531\u5fae\u5c0f\u7684\u7406\u60f3\u955c\u9762\u7ec4\u6210</li>\n<li>\u5fae\u8868\u9762\u5c3a\u5ea6\u8fdc\u5927\u4e8e\u5149\u6ce2\u957f\uff08\u51e0\u4f55\u5149\u5b66\u6709\u6548\uff09</li>\n<li>\u5fae\u8868\u9762\u5c3a\u5ea6\u8fdc\u5c0f\u4e8e\u50cf\u7d20\uff08\u7edf\u8ba1\u5e73\u5747\u6709\u610f\u4e49\uff09</li>\n<li>\u6bcf\u4e2a\u5fae\u8868\u9762\u662f\u5b8c\u7f8e\u955c\u9762\uff08\u83f2\u6d85\u5c14\u53cd\u5c04\uff09</li>\n</ol>\n<p><strong>\u5fae\u8868\u9762BRDF\u63a8\u5bfc</strong>\uff1a\n\u4ece\u5fae\u89c2\u5230\u5b8f\u89c2\u7684\u7edf\u8ba1\u8fc7\u7a0b\uff1a</p>\n<ol>\n<li>\u53ea\u6709\u6cd5\u7ebf\u4e3a$\\omega_h$\u7684\u5fae\u8868\u9762\u80fd\u5c06\u5149\u4ece$\\omega_i$\u53cd\u5c04\u5230$\\omega_o$</li>\n<li>\u9700\u8981\u8003\u8651\u5fae\u8868\u9762\u7684\u53ef\u89c1\u6027\uff08\u906e\u853d\u548c\u9634\u5f71\uff09</li>\n<li>\u79ef\u5206\u6240\u6709\u8d21\u732e\u7684\u5fae\u8868\u9762</li>\n</ol>\n<p><strong>Cook-Torrance\u6a21\u578b</strong>\uff1a\n$$f_r(\\omega_i, \\omega_o) = \\frac{D(\\omega_h) G(\\omega_i, \\omega_o) F(\\omega_i, \\omega_h)}{4 \\cos\\theta_i \\cos\\theta_o}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$D$\uff1a\u6cd5\u7ebf\u5206\u5e03\u51fd\u6570\uff08Normal Distribution Function\uff09</li>\n<li>$G$\uff1a\u51e0\u4f55\u906e\u853d\u51fd\u6570\uff08Geometry Function\uff09</li>\n<li>$F$\uff1a\u83f2\u6d85\u5c14\u9879\uff08Fresnel Term\uff09</li>\n<li>$\\omega_h$\uff1a\u534a\u7a0b\u5411\u91cf\uff08Half Vector\uff09\uff0c$\\omega_h = \\frac{\\omega_i + \\omega_o}{|\\omega_i + \\omega_o|}$</li>\n</ul>\n<p><strong>\u5206\u6bcd\u7684\u7269\u7406\u610f\u4e49</strong>\uff1a\n$4 \\cos\\theta_i \\cos\\theta_o$\u9879\u6765\u81ea\u4e8e\uff1a</p>\n<ul>\n<li>\u5fae\u8868\u9762\u79ef\u5206\u5230\u5b8f\u89c2\u8868\u9762\u79ef\u7684\u96c5\u53ef\u6bd4\u53d8\u6362</li>\n<li>\u5c06\u5fae\u5206\u7acb\u4f53\u89d2\u8f6c\u6362\u4e3a\u5fae\u5206\u9762\u79ef</li>\n<li>\u786e\u4fdd\u80fd\u91cf\u5b88\u6052</li>\n</ul>\n<p><strong>\u5fae\u8868\u9762\u6a21\u578b\u7684\u4f18\u52bf</strong>\uff1a</p>\n<ol>\n<li>\u7269\u7406\u57fa\u7840\u624e\u5b9e</li>\n<li>\u53c2\u6570\u76f4\u89c2\uff08\u7c97\u7cd9\u5ea6\u3001\u6298\u5c04\u7387\uff09</li>\n<li>\u80fd\u91cf\u5b88\u6052\uff08\u6b63\u786e\u5b9e\u73b0\u65f6\uff09</li>\n<li>\u53ef\u6269\u5c55\uff08\u5404\u5411\u5f02\u6027\u3001\u591a\u6b21\u6563\u5c04\u7b49\uff09</li>\n</ol>\n<h3 id=\"922-d\">9.2.2 \u6cd5\u7ebf\u5206\u5e03\u51fd\u6570\uff08D\u9879\uff09</h3>\n<p>\u6cd5\u7ebf\u5206\u5e03\u51fd\u6570$D(\\omega_h)$\u63cf\u8ff0\u4e86\u5fae\u8868\u9762\u6cd5\u7ebf\u7684\u7edf\u8ba1\u5206\u5e03\uff0c\u5fc5\u987b\u6ee1\u8db3\u5f52\u4e00\u5316\u6761\u4ef6\uff1a\n$$\\int_{\\Omega} D(\\omega_h) \\cos\\theta_h d\\omega_h = 1$$\n\u8fd9\u786e\u4fdd\u4e86\u5fae\u8868\u9762\u7684\u6295\u5f71\u9762\u79ef\u7b49\u4e8e\u5b8f\u89c2\u8868\u9762\u9762\u79ef\u3002</p>\n<p><strong>\u7269\u7406\u610f\u4e49</strong>\uff1a</p>\n<ul>\n<li>$D(\\omega_h)$\u8868\u793a\u6cd5\u7ebf\u4e3a$\\omega_h$\u7684\u5fae\u8868\u9762\u7684\u9762\u79ef\u5bc6\u5ea6</li>\n<li>$D(\\omega_h) \\cos\\theta_h$\u662f\u6295\u5f71\u5230\u5b8f\u89c2\u8868\u9762\u7684\u9762\u79ef\u5bc6\u5ea6</li>\n<li>\u79ef\u5206\u4e3a1\u4fdd\u8bc1\u4e86\u9762\u79ef\u5b88\u6052</li>\n</ul>\n<p><strong>Beckmann\u5206\u5e03</strong>\uff1a\n$$D_{\\text{Beckmann}}(\\omega_h) = \\frac{1}{\\pi \\alpha^2 \\cos^4\\theta_h} \\exp\\left(-\\frac{\\tan^2\\theta_h}{\\alpha^2}\\right)$$\n\u5176\u4e2d$\\alpha$\u662f\u7c97\u7cd9\u5ea6\u53c2\u6570\u3002</p>\n<p><strong>\u7279\u6027</strong>\uff1a</p>\n<ul>\n<li>\u57fa\u4e8e\u9ad8\u65af\u5206\u5e03\u7684\u659c\u7387\u7edf\u8ba1</li>\n<li>\u5728$\\alpha \\to 0$\u65f6\u6536\u655b\u5230\u03b4\u51fd\u6570\uff08\u5b8c\u7f8e\u955c\u9762\uff09</li>\n<li>\u8ba1\u7b97\u6210\u672c\u76f8\u5bf9\u8f83\u9ad8\uff08\u6307\u6570\u51fd\u6570\uff09</li>\n</ul>\n<p><strong>GGX/Trowbridge-Reitz\u5206\u5e03</strong>\uff1a\n$$D_{\\text{GGX}}(\\omega_h) = \\frac{\\alpha^2}{\\pi ((\\alpha^2 - 1)\\cos^2\\theta_h + 1)^2}$$\nGGX\u5206\u5e03\u5177\u6709\u66f4\u957f\u7684\u5c3e\u90e8\uff0c\u80fd\u66f4\u597d\u5730\u6a21\u62df\u771f\u5b9e\u6750\u8d28\u7684\u9ad8\u5149\u3002</p>\n<p><strong>GGX vs Beckmann</strong>\uff1a</p>\n<ul>\n<li>GGX\u6709\u66f4\u957f\u7684\u5c3e\u90e8\uff08\u91cd\u5c3e\u5206\u5e03\uff09</li>\n<li>\u66f4\u771f\u5b9e\u7684\u9ad8\u5149\u5f62\u72b6</li>\n<li>\u66f4\u597d\u7684\u63a0\u5c04\u89d2\u8868\u73b0</li>\n<li>\u8ba1\u7b97\u6548\u7387\u66f4\u9ad8</li>\n</ul>\n<p><strong>\u5404\u5411\u5f02\u6027\u6269\u5c55</strong>\uff1a\n\u5bf9\u4e8e\u5404\u5411\u5f02\u6027\u6750\u8d28\uff0c\u4f7f\u7528\u4e24\u4e2a\u7c97\u7cd9\u5ea6\u53c2\u6570$\\alpha_x$\u548c$\\alpha_y$\uff1a\n$$D_{\\text{aniso}}(\\omega_h) = \\frac{1}{\\pi \\alpha_x \\alpha_y} \\frac{1}{(\\frac{h_x^2}{\\alpha_x^2} + \\frac{h_y^2}{\\alpha_y^2} + h_z^2)^2}$$\n\u5176\u4e2d$(h_x, h_y, h_z)$\u662f\u534a\u7a0b\u5411\u91cf\u5728\u5207\u7a7a\u95f4\u7684\u5750\u6807\u3002</p>\n<p><strong>\u5176\u4ed6\u5206\u5e03</strong>\uff1a</p>\n<ol>\n<li><strong>Phong\u5206\u5e03</strong>\uff08\u5df2\u8fc7\u65f6\uff09\uff1a$D = \\frac{n+2}{2\\pi}\\cos^n\\theta_h$</li>\n<li><strong>Berry\u5206\u5e03</strong>\uff1a\u8003\u8651\u81ea\u76f8\u5173\u957f\u5ea6\u7684\u7269\u7406\u6a21\u578b</li>\n<li><strong>ABC\u5206\u5e03</strong>\uff1a\u7edf\u4e00\u6846\u67b6\uff0c\u53ef\u8c03\u8282\u5206\u5e03\u5f62\u72b6</li>\n</ol>\n<p><strong>\u7c97\u7cd9\u5ea6\u53c2\u6570\u6620\u5c04</strong>\uff1a\n\u5b9e\u8df5\u4e2d\u5e38\u7528\u611f\u77e5\u7ebf\u6027\u7684\u7c97\u7cd9\u5ea6\uff1a\n$$\\alpha = \\text{roughness}^2$$\n\u8fd9\u4f7f\u5f97\u53c2\u6570\u8c03\u8282\u66f4\u76f4\u89c2\u3002</p>\n<h3 id=\"923-g\">9.2.3 \u51e0\u4f55\u906e\u853d\u51fd\u6570\uff08G\u9879\uff09</h3>\n<p>\u51e0\u4f55\u51fd\u6570\u63cf\u8ff0\u4e86\u5fae\u8868\u9762\u95f4\u7684\u76f8\u4e92\u906e\u853d\u548c\u9634\u5f71\u6548\u5e94\u3002</p>\n<p><strong>\u7269\u7406\u610f\u4e49</strong>\uff1a</p>\n<ul>\n<li><strong>\u906e\u853d\uff08Masking\uff09</strong>\uff1a\u5165\u5c04\u5149\u88ab\u5176\u4ed6\u5fae\u8868\u9762\u6321\u4f4f</li>\n<li><strong>\u9634\u5f71\uff08Shadowing\uff09</strong>\uff1a\u51fa\u5c04\u5149\u88ab\u5176\u4ed6\u5fae\u8868\u9762\u6321\u4f4f</li>\n<li>$G \\in [0,1]$\u8868\u793a\u672a\u88ab\u906e\u6321\u7684\u6bd4\u4f8b</li>\n</ul>\n<p><strong>Smith\u6a21\u578b</strong>\uff1a\n$$G(\\omega_i, \\omega_o) = G_1(\\omega_i) G_1(\\omega_o)$$\n\u5176\u4e2d$G_1$\u662f\u5355\u5411\u906e\u853d\u51fd\u6570\u3002</p>\n<p><strong>\u5047\u8bbe</strong>\uff1a</p>\n<ul>\n<li>\u906e\u853d\u548c\u9634\u5f71\u7edf\u8ba1\u72ec\u7acb\uff08\u8fd1\u4f3c\uff09</li>\n<li>\u5fae\u8868\u9762\u9ad8\u5ea6\u4e0e\u6cd5\u7ebf\u65b9\u5411\u65e0\u5173</li>\n<li>\u9002\u7528\u4e8e\u5404\u5411\u540c\u6027\u7c97\u7cd9\u8868\u9762</li>\n</ul>\n<p><strong>GGX\u7684Smith-G1</strong>\uff1a\n$$G_1(\\omega) = \\frac{2\\cos\\theta}{1 + \\sqrt{1 + \\alpha^2 \\tan^2\\theta}}$$\n<strong>\u63a8\u5bfc\u601d\u8def</strong>\uff1a</p>\n<ol>\n<li>\u5047\u8bbe\u5fae\u8868\u9762\u9ad8\u5ea6\u670d\u4ece\u6b63\u6001\u5206\u5e03</li>\n<li>\u4f7f\u7528\u5c04\u7ebf\u4e0e\u968f\u673a\u7c97\u7cd9\u8868\u9762\u76f8\u4ea4\u7684\u7edf\u8ba1\u7406\u8bba</li>\n<li>\u5f97\u51fa\u53ef\u89c1\u6027\u7684\u89e3\u6790\u8868\u8fbe\u5f0f</li>\n</ol>\n<p><strong>\u9ad8\u5ea6\u76f8\u5173\u906e\u853d\uff08Height-Correlated Masking-Shadowing\uff09</strong>\uff1a\n\u8003\u8651\u5165\u5c04\u548c\u51fa\u5c04\u65b9\u5411\u7684\u76f8\u5173\u6027\uff1a\n$$G(\\omega_i, \\omega_o) = \\frac{1}{1 + \\Lambda(\\omega_i) + \\Lambda(\\omega_o)}$$\n\u5176\u4e2d$\\Lambda$\u662f\u8f85\u52a9\u51fd\u6570\uff1a\n$$\\Lambda(\\omega) = \\frac{-1 + \\sqrt{1 + \\alpha^2 \\tan^2\\theta}}{2}$$\n<strong>\u76f8\u5173\u6027\u7684\u91cd\u8981\u6027</strong>\uff1a</p>\n<ul>\n<li>\u72ec\u7acb\u5047\u8bbe\uff08\u5206\u79bb\u5f0f\uff09\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u8fc7\u4e8e\u4fdd\u5b88</li>\n<li>\u9ad8\u5ea6\u76f8\u5173\u6a21\u578b\u66f4\u51c6\u786e\uff0c\u7279\u522b\u662f\u5728\u63a0\u5c04\u89d2</li>\n<li>\u8ba1\u7b97\u6210\u672c\u76f8\u8fd1</li>\n</ul>\n<p><strong>\u5176\u4ed6G\u51fd\u6570</strong>\uff1a</p>\n<ol>\n<li><strong>Cook-Torrance G</strong>\uff1a$G = \\min(1, \\frac{2n \\cdot h \\cdot n \\cdot v}{v \\cdot h}, \\frac{2n \\cdot h \\cdot n \\cdot l}{v \\cdot h})$</li>\n<li><strong>Kelemen G</strong>\uff1a$G = \\frac{n \\cdot l \\cdot n \\cdot v}{v \\cdot h}$\uff08\u5feb\u901f\u8fd1\u4f3c\uff09</li>\n<li><strong>V-cavity\u6a21\u578b</strong>\uff1a\u57fa\u4e8eV\u5f62\u51f9\u69fd\u7684\u7b80\u5316\u6a21\u578b</li>\n</ol>\n<p><strong>\u5b9e\u7528\u8fd1\u4f3c</strong>\uff1a\nSchlick-GGX\u8fd1\u4f3c\uff08\u7528\u4e8e\u5b9e\u65f6\u6e32\u67d3\uff09\uff1a\n$$G_{\\text{Schlick}}(\\omega) = \\frac{\\cos\\theta}{\\cos\\theta(1-k) + k}$$\n\u5176\u4e2d$k = \\frac{(\\text{roughness}+1)^2}{8}$\uff08\u76f4\u63a5\u5149\u7167\uff09\u6216$k = \\frac{\\text{roughness}^2}{2}$\uff08IBL\uff09\u3002</p>\n<h3 id=\"924-fior\">9.2.4 \u83f2\u6d85\u5c14\u53cd\u5c04\uff08F\u9879\uff09\u4e0e\u590d\u6742IOR</h3>\n<p>\u83f2\u6d85\u5c14\u65b9\u7a0b\u63cf\u8ff0\u4e86\u53cd\u5c04\u7387\u968f\u5165\u5c04\u89d2\u7684\u53d8\u5316\u3002</p>\n<p><strong>Schlick\u8fd1\u4f3c</strong>\uff1a\n$$F_{\\text{Schlick}}(\\omega_i, \\omega_h) = F_0 + (1 - F_0)(1 - \\cos\\theta_i)^5$$\n\u5176\u4e2d$F_0$\u662f\u5782\u76f4\u5165\u5c04\u65f6\u7684\u53cd\u5c04\u7387\uff1a\n$$F_0 = \\left(\\frac{\\eta_1 - \\eta_2}{\\eta_1 + \\eta_2}\\right)^2$$\n<strong>\u590d\u6570\u6298\u5c04\u7387</strong>\uff1a\n\u5bf9\u4e8e\u5bfc\u4f53\uff0c\u6298\u5c04\u7387\u662f\u590d\u6570$\\tilde{\\eta} = \\eta + i\\kappa$\uff0c\u5176\u4e2d$\\kappa$\u662f\u6d88\u5149\u7cfb\u6570\u3002</p>\n<p>\u5b8c\u6574\u7684\u83f2\u6d85\u5c14\u65b9\u7a0b\uff08\u975e\u6781\u5316\u5149\uff09\uff1a\n$$F = \\frac{1}{2}(F_s + F_p)$$\n\u5176\u4e2d$F_s$\u548c$F_p$\u5206\u522b\u662fs\u504f\u632f\u548cp\u504f\u632f\u7684\u53cd\u5c04\u7387\u3002</p>\n<p><strong>\u8272\u6563\u6548\u5e94</strong>\uff1a\n\u6298\u5c04\u7387\u968f\u6ce2\u957f\u53d8\u5316\uff0c\u53ef\u7528Cauchy\u65b9\u7a0b\u6216Sellmeier\u65b9\u7a0b\u5efa\u6a21\uff1a\n$$\\eta(\\lambda) = A + \\frac{B}{\\lambda^2} + \\frac{C}{\\lambda^4}$$</p>\n<h3 id=\"925-bsdf\">9.2.5 \u5206\u5c42\u6750\u8d28\u4e0eBSDF\u7ec4\u5408</h3>\n<p>\u73b0\u5b9e\u6750\u8d28\u5e38\u7531\u591a\u5c42\u7ec4\u6210\uff0c\u5982\u6c7d\u8f66\u6f06\uff08\u5e95\u6f06+\u91d1\u5c5e\u6f06+\u6e05\u6f06\uff09\u3002</p>\n<p><strong>\u5c42\u95f4\u591a\u6b21\u53cd\u5c04</strong>\uff1a\n\u8bbe\u4e0a\u5c42BSDF\u4e3a$f_1$\uff0c\u900f\u5c04\u7387\u4e3a$T_1$\uff0c\u4e0b\u5c42BSDF\u4e3a$f_2$\uff0c\u5219\u7ec4\u5408BSDF\uff1a\n$$f_{\\text{combined}} = f_1 + \\frac{T_1^{\\downarrow} f_2 T_1^{\\uparrow}}{1 - f_2 * R_1}$$\n\u5176\u4e2d$*$\u8868\u793a\u5377\u79ef\uff0c$R_1$\u662f\u4e0a\u5c42\u7684\u53cd\u5c04\u7b97\u5b50\u3002</p>\n<p><strong>\u80fd\u91cf\u8865\u507f</strong>\uff1a\n\u5fae\u8868\u9762\u6a21\u578b\u53ef\u80fd\u4e22\u5931\u591a\u6b21\u6563\u5c04\u80fd\u91cf\uff0c\u9700\u8981\u8865\u507f\u9879\uff1a\n$$f_r^{\\text{ms}} = \\frac{(1-E(\\omega_i))(1-E(\\omega_o))}{\\pi(1-E_{\\text{avg}})} F_{\\text{avg}}$$\n\u5176\u4e2d$E(\\omega)$\u662f\u65b9\u5411\u53cd\u7167\u7387\uff0c$E_{\\text{avg}}$\u662f\u5e73\u5747\u53cd\u7167\u7387\u3002</p>\n<h2 id=\"93\">9.3 \u590d\u6742\u5916\u89c2\u5efa\u6a21</h2>\n<h3 id=\"931\">9.3.1 \u5404\u5411\u5f02\u6027\u6750\u8d28</h3>\n<p>\u5404\u5411\u5f02\u6027\u6750\u8d28\u7684\u53cd\u5c04\u7279\u6027\u4f9d\u8d56\u4e8e\u8868\u9762\u7684\u5207\u5411\u91cf\u65b9\u5411\u3002</p>\n<p><strong>\u62c9\u4e1d\u91d1\u5c5e</strong>\uff1a\n\u5fae\u8868\u9762\u6cbf\u7279\u5b9a\u65b9\u5411\u6392\u5217\uff0c\u4f7f\u7528\u5404\u5411\u5f02\u6027\u6cd5\u7ebf\u5206\u5e03\uff1a\n$$D_{\\text{aniso}}(\\omega_h) = \\frac{1}{\\pi \\alpha_t \\alpha_b} \\frac{1}{\\left(\\frac{(\\omega_h \\cdot \\mathbf{t})^2}{\\alpha_t^2} + \\frac{(\\omega_h \\cdot \\mathbf{b})^2}{\\alpha_b^2} + (\\omega_h \\cdot \\mathbf{n})^2\\right)^2}$$\n\u5176\u4e2d$\\mathbf{t}$\u548c$\\mathbf{b}$\u662f\u5207\u5411\u91cf\u548c\u526f\u5207\u5411\u91cf\u3002</p>\n<p><strong>\u7ec7\u7269\u6750\u8d28</strong>\uff1a\n\u7ea4\u7ef4\u7ed3\u6784\u5bfc\u81f4\u590d\u6742\u7684\u6563\u5c04\u884c\u4e3a\uff0c\u5e38\u7528\u4e13\u95e8\u7684BRDF\u6a21\u578b\u5982Ashikhmin-Shirley\u6216\u5fae\u5706\u67f1\u6a21\u578b\u3002</p>\n<p><strong>\u5934\u53d1\u6e32\u67d3</strong>\uff1a\nMarschner\u6a21\u578b\u5c06\u5934\u53d1\u6563\u5c04\u5206\u89e3\u4e3a\u4e09\u4e2a\u5206\u91cf\uff1a</p>\n<ul>\n<li>R\uff1a\u8868\u9762\u53cd\u5c04</li>\n<li>TT\uff1a\u7a7f\u900f-\u7a7f\u900f</li>\n<li>TRT\uff1a\u7a7f\u900f-\u53cd\u5c04-\u7a7f\u900f</li>\n</ul>\n<p>\u6bcf\u4e2a\u5206\u91cf\u6709\u4e0d\u540c\u7684\u7eb5\u5411\u548c\u65b9\u4f4d\u6563\u5c04\u51fd\u6570\u3002</p>\n<h3 id=\"932\">9.3.2 \u6b21\u8868\u9762\u6563\u5c04\uff08\u76ae\u80a4\u3001\u7389\u77f3\u3001\u725b\u5976\uff09</h3>\n<p>\u6b21\u8868\u9762\u6563\u5c04\uff08Subsurface Scattering, SSS\uff09\u63cf\u8ff0\u5149\u7ebf\u8fdb\u5165\u534a\u900f\u660e\u6750\u8d28\u5185\u90e8\uff0c\u7ecf\u591a\u6b21\u6563\u5c04\u540e\u4ece\u4e0d\u540c\u4f4d\u7f6e\u5c04\u51fa\u7684\u73b0\u8c61\u3002</p>\n<p><strong>BSSRDF</strong>\uff08\u53cc\u5411\u6b21\u8868\u9762\u6563\u5c04\u53cd\u5c04\u5206\u5e03\u51fd\u6570\uff09\uff1a\n$$L_o(\\mathbf{x}_o, \\omega_o) = \\int_A \\int_{\\Omega} S(\\mathbf{x}_i, \\omega_i, \\mathbf{x}_o, \\omega_o) L_i(\\mathbf{x}_i, \\omega_i) \\cos\\theta_i d\\omega_i dA$$\n\u5176\u4e2d$S$\u662fBSSRDF\uff0c\u63cf\u8ff0\u4ece\u4f4d\u7f6e$\\mathbf{x}_i$\u5165\u5c04\u7684\u5149\u5982\u4f55\u5f71\u54cd\u4f4d\u7f6e$\\mathbf{x}_o$\u7684\u51fa\u5c04\u3002</p>\n<p><strong>\u5076\u6781\u5b50\u8fd1\u4f3c\uff08Dipole Approximation\uff09</strong>\uff1a\n$$R_d(r) = \\frac{\\alpha'}{4\\pi} \\left[\\frac{z_r(1+\\sigma_{tr}d_r)e^{-\\sigma_{tr}d_r}}{d_r^3} + \\frac{z_v(1+\\sigma_{tr}d_v)e^{-\\sigma_{tr}d_v}}{d_v^3}\\right]$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$r$\uff1a\u8868\u9762\u8ddd\u79bb</li>\n<li>$\\sigma_{tr} = \\sqrt{3\\sigma_a(\\sigma_a + \\sigma_s')}$\uff1a\u6709\u6548\u4f20\u8f93\u7cfb\u6570</li>\n<li>$\\alpha' = \\sigma_s' / \\sigma_{tr}$\uff1a\u7ea6\u5316\u53cd\u7167\u7387</li>\n<li>$d_r, d_v$\uff1a\u5230\u5b9e\u6e90\u548c\u865a\u6e90\u7684\u8ddd\u79bb</li>\n</ul>\n<p><strong>\u591a\u6781\u5b50\u65b9\u6cd5</strong>\uff1a\n\u5bf9\u4e8e\u8584\u5c42\u6750\u8d28\uff0c\u9700\u8981\u8003\u8651\u591a\u6b21\u5185\u53cd\u5c04\uff0c\u4f7f\u7528\u591a\u4e2a\u955c\u50cf\u6e90\u3002</p>\n<p><strong>\u91cf\u5316\u6563\u5c04\uff08Quantized Diffusion\uff09</strong>\uff1a\n\u5c06\u8fde\u7eed\u6269\u6563\u8fc7\u7a0b\u79bb\u6563\u5316\uff0c\u9002\u5408GPU\u5b9e\u73b0\uff1a\n$$u(r,t+\\Delta t) = \\sum_{i} G(r-r_i, \\Delta t) u(r_i, t)$$</p>\n<h3 id=\"933\">9.3.3 \u53c2\u4e0e\u4ecb\u8d28\u4e0e\u4f53\u79ef\u6e32\u67d3</h3>\n<p>\u53c2\u4e0e\u4ecb\u8d28\uff08\u70df\u96fe\u3001\u4e91\u3001\u5927\u6c14\uff09\u4e2d\u7684\u5149\u4f20\u8f93\u7531\u8f90\u5c04\u4f20\u8f93\u65b9\u7a0b\uff08RTE\uff09\u63cf\u8ff0\uff1a\n$$(\\omega \\cdot \\nabla) L(\\mathbf{x}, \\omega) = -\\sigma_t(\\mathbf{x}) L(\\mathbf{x}, \\omega) + \\sigma_s(\\mathbf{x}) \\int_{\\Omega} p(\\omega', \\omega) L(\\mathbf{x}, \\omega') d\\omega' + \\sigma_a(\\mathbf{x}) L_e(\\mathbf{x}, \\omega)$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$\\sigma_t = \\sigma_a + \\sigma_s$\uff1a\u6d88\u5149\u7cfb\u6570</li>\n<li>$\\sigma_a$\uff1a\u5438\u6536\u7cfb\u6570</li>\n<li>$\\sigma_s$\uff1a\u6563\u5c04\u7cfb\u6570</li>\n<li>$p(\\omega', \\omega)$\uff1a\u76f8\u51fd\u6570</li>\n</ul>\n<p><strong>\u76f8\u51fd\u6570</strong>\uff1a\nHenyey-Greenstein\u76f8\u51fd\u6570\u5e7f\u6cdb\u7528\u4e8e\u5404\u5411\u5f02\u6027\u6563\u5c04\uff1a\n$$p_{HG}(\\cos\\theta) = \\frac{1}{4\\pi} \\frac{1 - g^2}{(1 + g^2 - 2g\\cos\\theta)^{3/2}}$$\n\u5176\u4e2d$g \\in [-1, 1]$\u662f\u5404\u5411\u5f02\u6027\u53c2\u6570\u3002</p>\n<p><strong>\u4f53\u79ef\u6e32\u67d3\u79ef\u5206</strong>\uff1a\n$$L(\\mathbf{x}, \\omega) = \\int_0^d T(0,t) \\sigma_s(\\mathbf{x}+t\\omega) L_i(\\mathbf{x}+t\\omega, \\omega) dt + T(0,d) L_{\\text{background}}$$\n\u5176\u4e2d\u900f\u5c04\u7387$T(a,b) = \\exp\\left(-\\int_a^b \\sigma_t(\\mathbf{x}+s\\omega) ds\\right)$</p>\n<h3 id=\"934\">9.3.4 \u6ce2\u52a8\u5149\u5b66\u6548\u5e94</h3>\n<p>\u5f53\u51e0\u4f55\u7279\u5f81\u63a5\u8fd1\u5149\u6ce2\u957f\u65f6\uff0c\u9700\u8003\u8651\u6ce2\u52a8\u5149\u5b66\u6548\u5e94\u3002</p>\n<p><strong>\u8584\u819c\u5e72\u6d89</strong>\uff1a\n\u5bf9\u4e8e\u539a\u5ea6$d$\u7684\u8584\u819c\uff0c\u53cd\u5c04\u7387\uff1a\n$$R(\\lambda) = \\frac{r_1^2 + r_2^2 + 2r_1r_2\\cos(2\\beta)}{1 + r_1^2r_2^2 + 2r_1r_2\\cos(2\\beta)}$$\n\u5176\u4e2d$\\beta = 2\\pi nd\\cos\\theta_t / \\lambda$\uff0c$r_1, r_2$\u662f\u754c\u9762\u53cd\u5c04\u7cfb\u6570\u3002</p>\n<p><strong>\u884d\u5c04\u5149\u6805</strong>\uff1a\n\u5149\u6805\u65b9\u7a0b\uff1a\n$$d(\\sin\\theta_i + \\sin\\theta_o) = m\\lambda$$\n\u5176\u4e2d$d$\u662f\u5149\u6805\u5468\u671f\uff0c$m$\u662f\u884d\u5c04\u7ea7\u6b21\u3002</p>\n<p><strong>\u7ed3\u6784\u8272</strong>\uff1a\n\u8774\u8776\u7fc5\u8180\u3001CD\u7b49\u7684\u8679\u5f69\u6548\u5e94\u6e90\u4e8e\u5fae\u7ed3\u6784\u7684\u884d\u5c04\u548c\u5e72\u6d89\u3002\u53ef\u7528FDTD\uff08\u65f6\u57df\u6709\u9650\u5dee\u5206\uff09\u6216\u4e25\u683c\u8026\u5408\u6ce2\u5206\u6790\uff08RCWA\uff09\u6a21\u62df\u3002</p>\n<h3 id=\"935\">9.3.5 \u6570\u636e\u9a71\u52a8\u7684\u5916\u89c2\u5efa\u6a21</h3>\n<p><strong>BTF\uff08\u53cc\u5411\u7eb9\u7406\u51fd\u6570\uff09</strong>\uff1a\n$$\\text{BTF}(u,v,\\omega_i,\\omega_o) \\in \\mathbb{R}^{m \\times n \\times k^2 \\times 3}$$\n\u6355\u83b7\u7a7a\u95f4\u53d8\u5316\u7684\u6750\u8d28\u5c5e\u6027\uff0c\u9700\u8981\u5927\u91cf\u5b58\u50a8\u548c\u91c7\u6837\u3002</p>\n<p><strong>\u795e\u7ecf\u6750\u8d28\u8868\u793a</strong>\uff1a\n\u4f7f\u7528\u795e\u7ecf\u7f51\u7edc\u8868\u793aBRDF\uff1a\n$$f_r = \\text{MLP}(\\omega_i, \\omega_o; \\theta)$$\n\u4f18\u52bf\uff1a</p>\n<ul>\n<li>\u7d27\u51d1\u8868\u793a</li>\n<li>\u8fde\u7eed\u53ef\u5fae</li>\n<li>\u6613\u4e8e\u4f18\u5316\u548c\u7f16\u8f91</li>\n</ul>\n<p><strong>\u53ef\u5fae\u6e32\u67d3\u4e0e\u6750\u8d28\u53cd\u6f14</strong>\uff1a\n\u901a\u8fc7\u68af\u5ea6\u4e0b\u964d\u4f18\u5316\u6750\u8d28\u53c2\u6570\uff1a\n$$\\mathcal{L} = |I_{\\text{rendered}}(\\theta) - I_{\\text{target}}|^2$$\n\u4f7f\u7528\u81ea\u52a8\u5fae\u5206\u6846\u67b6\u8ba1\u7b97$\\frac{\\partial \\mathcal{L}}{\\partial \\theta}$\u3002</p>\n<h2 id=\"_1\">\u672c\u7ae0\u5c0f\u7ed3</h2>\n<p>\u672c\u7ae0\u6df1\u5165\u63a2\u8ba8\u4e86\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u6750\u8d28\u4e0e\u5916\u89c2\u7684\u6570\u5b66\u5efa\u6a21\uff1a</p>\n<p><strong>\u6838\u5fc3\u6982\u5ff5</strong>\uff1a</p>\n<ul>\n<li>BRDF\u5b9a\u4e49\uff1a$f_r(\\omega_i, \\omega_o) = \\frac{dL_o(\\omega_o)}{L_i(\\omega_i)\\cos\\theta_i d\\omega_i}$</li>\n<li>\u7269\u7406\u7ea6\u675f\uff1a\u975e\u8d1f\u6027\u3001\u4e92\u6613\u6027\u3001\u80fd\u91cf\u5b88\u6052</li>\n<li>\u5fae\u8868\u9762\u6a21\u578b\uff1a$f_r = \\frac{D \\cdot G \\cdot F}{4 \\cos\\theta_i \\cos\\theta_o}$</li>\n</ul>\n<p><strong>\u5173\u952e\u516c\u5f0f</strong>\uff1a</p>\n<ul>\n<li>GGX\u6cd5\u7ebf\u5206\u5e03\uff1a$D_{GGX} = \\frac{\\alpha^2}{\\pi ((\\alpha^2 - 1)\\cos^2\\theta_h + 1)^2}$</li>\n<li>Smith\u906e\u853d\u51fd\u6570\uff1a$G = G_1(\\omega_i) G_1(\\omega_o)$</li>\n<li>Schlick\u83f2\u6d85\u5c14\u8fd1\u4f3c\uff1a$F = F_0 + (1 - F_0)(1 - \\cos\\theta)^5$</li>\n<li>\u8f90\u5c04\u4f20\u8f93\u65b9\u7a0b\uff1a$(\\omega \\cdot \\nabla) L = -\\sigma_t L + \\sigma_s \\int p(\\omega', \\omega) L d\\omega' + \\sigma_a L_e$</li>\n</ul>\n<p><strong>\u9ad8\u7ea7\u6280\u672f</strong>\uff1a</p>\n<ul>\n<li>\u5404\u5411\u5f02\u6027\u6750\u8d28\u5efa\u6a21\uff08\u62c9\u4e1d\u91d1\u5c5e\u3001\u7ec7\u7269\u3001\u5934\u53d1\uff09</li>\n<li>\u6b21\u8868\u9762\u6563\u5c04\uff08\u5076\u6781\u5b50\u8fd1\u4f3c\u3001\u91cf\u5316\u6269\u6563\uff09</li>\n<li>\u53c2\u4e0e\u4ecb\u8d28\u6e32\u67d3\uff08\u76f8\u51fd\u6570\u3001\u4f53\u79ef\u79ef\u5206\uff09</li>\n<li>\u6ce2\u52a8\u5149\u5b66\u6548\u5e94\uff08\u8584\u819c\u5e72\u6d89\u3001\u884d\u5c04\u5149\u6805\uff09</li>\n<li>\u6570\u636e\u9a71\u52a8\u65b9\u6cd5\uff08BTF\u3001\u795e\u7ecf\u6750\u8d28\uff09</li>\n</ul>\n<p><strong>\u5b9e\u8df5\u8981\u70b9</strong>\uff1a</p>\n<ul>\n<li>\u9009\u62e9\u5408\u9002\u7684BRDF\u6a21\u578b\u9700\u6743\u8861\u7269\u7406\u51c6\u786e\u6027\u548c\u8ba1\u7b97\u6548\u7387</li>\n<li>\u80fd\u91cf\u5b88\u6052\u662f\u4fdd\u8bc1\u6e32\u67d3\u6b63\u786e\u6027\u7684\u5173\u952e</li>\n<li>\u590d\u6742\u6750\u8d28\u5e38\u9700\u7ec4\u5408\u591a\u79cd\u6a21\u578b</li>\n<li>\u53ef\u5fae\u6e32\u67d3\u4e3a\u6750\u8d28\u83b7\u53d6\u548c\u7f16\u8f91\u63d0\u4f9b\u65b0\u9014\u5f84</li>\n</ul>\n<h2 id=\"_2\">\u7ec3\u4e60\u9898</h2>\n<h3 id=\"_3\">\u57fa\u7840\u9898</h3>\n<p><strong>\u4e60\u98989.1</strong> \u8bc1\u660eBRDF\u7684\u4e92\u6613\u6027\u539f\u7406\u3002\u4ece\u9ea6\u514b\u65af\u97e6\u65b9\u7a0b\u7ec4\u51fa\u53d1\uff0c\u8bf4\u660e\u4e3a\u4ec0\u4e48$f_r(\\omega_i, \\omega_o) = f_r(\\omega_o, \\omega_i)$\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u8003\u8651\u65f6\u95f4\u53cd\u6f14\u5bf9\u79f0\u6027\u548c\u6d1b\u4f26\u5179\u4e92\u6613\u5b9a\u7406\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u4ece\u9ea6\u514b\u65af\u97e6\u65b9\u7a0b\u7ec4\u7684\u65f6\u95f4\u53cd\u6f14\u5bf9\u79f0\u6027\u51fa\u53d1\uff1a</p>\n<ol>\n<li>\u7535\u78c1\u573a\u6ee1\u8db3\uff1a$\\mathbf{E}(-t) = \\mathbf{E}(t)$\uff0c$\\mathbf{B}(-t) = -\\mathbf{B}(t)$</li>\n<li>\u5761\u5370\u5ef7\u77e2\u91cf\uff1a$\\mathbf{S} = \\mathbf{E} \\times \\mathbf{H}$\u5728\u65f6\u95f4\u53cd\u6f14\u4e0b\u6539\u53d8\u65b9\u5411</li>\n<li>\u5149\u8def\u53ef\u9006\uff1a\u82e5\u5149\u7ebf\u53ef\u4eceA\u5230B\uff0c\u5219\u5fc5\u53ef\u4eceB\u5230A</li>\n<li>\u5728\u7ebf\u6027\u3001\u975e\u78c1\u6027\u4ecb\u8d28\u4e2d\uff0c\u6563\u5c04\u77e9\u9635\u6ee1\u8db3\u4e92\u6613\u6027</li>\n<li>BRDF\u4f5c\u4e3a\u6563\u5c04\u7684\u5b8f\u89c2\u63cf\u8ff0\u7ee7\u627f\u6b64\u6027\u8d28</li>\n</ol>\n<p>\u56e0\u6b64$f_r(\\omega_i, \\omega_o) = f_r(\\omega_o, \\omega_i)$\u3002</p>\n</details>\n<p><strong>\u4e60\u98989.2</strong> \u7ed9\u5b9a\u7c97\u7cd9\u5ea6$\\alpha = 0.3$\u7684GGX\u5206\u5e03\uff0c\u8ba1\u7b97\u6cd5\u7ebf\u4e0e\u534a\u7a0b\u5411\u91cf\u5939\u89d2\u4e3a30\u00b0\u65f6\u7684$D$\u503c\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u76f4\u63a5\u4ee3\u5165GGX\u516c\u5f0f\u8ba1\u7b97\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>$\\theta_h = 30\u00b0 = \\pi/6$\uff0c$\\cos\\theta_h = \\sqrt{3}/2$</p>\n<p>\u4ee3\u5165GGX\u516c\u5f0f\uff1a\n$$D = \\frac{\\alpha^2}{\\pi ((\\alpha^2 - 1)\\cos^2\\theta_h + 1)^2}$$\n$$= \\frac{0.09}{\\pi ((0.09 - 1) \\cdot 0.75 + 1)^2}$$\n$$= \\frac{0.09}{\\pi ((-0.91) \\cdot 0.75 + 1)^2}$$\n$$= \\frac{0.09}{\\pi (0.3175)^2}$$\n$$\u2248 0.284$$</p>\n</details>\n<p><strong>\u4e60\u98989.3</strong> \u8ba1\u7b97\u7a7a\u6c14\uff08$\\eta_1 = 1$\uff09\u5230\u73bb\u7483\uff08$\\eta_2 = 1.5$\uff09\u754c\u9762\u7684\u83f2\u6d85\u5c14\u53cd\u5c04\u7387$F_0$\u3002\u4f7f\u7528\u6b64\u503c\uff0c\u8ba1\u7b97\u5165\u5c04\u89d2\u4e3a60\u00b0\u65f6\u7684Schlick\u8fd1\u4f3c\u503c\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u5148\u8ba1\u7b97$F_0$\uff0c\u518d\u4f7f\u7528Schlick\u516c\u5f0f\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u5782\u76f4\u5165\u5c04\u53cd\u5c04\u7387\uff1a\n$$F_0 = \\left(\\frac{\\eta_1 - \\eta_2}{\\eta_1 + \\eta_2}\\right)^2 = \\left(\\frac{1 - 1.5}{1 + 1.5}\\right)^2 = \\left(\\frac{-0.5}{2.5}\\right)^2 = 0.04$$\n\u5165\u5c04\u89d260\u00b0\u65f6\uff0c$\\cos\\theta_i = 0.5$\uff1a\n$$F = F_0 + (1 - F_0)(1 - \\cos\\theta_i)^5$$\n$$= 0.04 + 0.96 \\times 0.5^5$$\n$$= 0.04 + 0.96 \\times 0.03125$$\n$$= 0.04 + 0.03 = 0.07$$</p>\n</details>\n<p><strong>\u4e60\u98989.4</strong> \u5bf9\u4e8eHenyey-Greenstein\u76f8\u51fd\u6570\uff0c\u5f53$g = 0.8$\u65f6\uff0c\u8ba1\u7b97\u524d\u5411\u6563\u5c04\uff08$\\theta = 0\u00b0$\uff09\u548c\u540e\u5411\u6563\u5c04\uff08$\\theta = 180\u00b0$\uff09\u7684\u76f8\u51fd\u6570\u503c\u4e4b\u6bd4\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u4ee3\u5165HG\u76f8\u51fd\u6570\u516c\u5f0f\uff0c\u6ce8\u610f$\\cos(0\u00b0) = 1$\uff0c$\\cos(180\u00b0) = -1$\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>HG\u76f8\u51fd\u6570\uff1a$p_{HG}(\\cos\\theta) = \\frac{1}{4\\pi} \\frac{1 - g^2}{(1 + g^2 - 2g\\cos\\theta)^{3/2}}$</p>\n<p>\u524d\u5411\u6563\u5c04\uff08$\\cos\\theta = 1$\uff09\uff1a\n$$p_{HG}(1) = \\frac{1}{4\\pi} \\frac{1 - 0.64}{(1 + 0.64 - 1.6)^{3/2}} = \\frac{1}{4\\pi} \\frac{0.36}{0.04^{3/2}} = \\frac{1}{4\\pi} \\frac{0.36}{0.008} = \\frac{45}{4\\pi}$$\n\u540e\u5411\u6563\u5c04\uff08$\\cos\\theta = -1$\uff09\uff1a\n$$p_{HG}(-1) = \\frac{1}{4\\pi} \\frac{0.36}{(1 + 0.64 + 1.6)^{3/2}} = \\frac{1}{4\\pi} \\frac{0.36}{3.24^{3/2}} = \\frac{1}{4\\pi} \\frac{0.36}{5.832} \u2248 \\frac{0.0617}{4\\pi}$$\n\u6bd4\u503c\uff1a$\\frac{p_{HG}(1)}{p_{HG}(-1)} = \\frac{45}{0.0617} \u2248 729$</p>\n</details>\n<h3 id=\"_4\">\u6311\u6218\u9898</h3>\n<p><strong>\u4e60\u98989.5</strong> \u63a8\u5bfc\u5404\u5411\u5f02\u6027GGX\u5206\u5e03\u7684\u5f52\u4e00\u5316\u6761\u4ef6\u3002\u8bc1\u660e\uff1a\n$$\\int_{\\Omega} D_{aniso}(\\omega_h) \\cos\\theta_h d\\omega_h = 1$$\n<em>\u63d0\u793a\uff1a\u4f7f\u7528\u7403\u5750\u6807\u7cfb\uff0c\u5c06$\\omega_h$\u5206\u89e3\u4e3a\u5207\u7a7a\u95f4\u5750\u6807\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u8bbe\u5207\u7a7a\u95f4\u5750\u6807\u7cfb\uff0c$\\omega_h = (h_x, h_y, h_z)$\uff0c\u5176\u4e2d$h_x = \\sin\\theta\\cos\\phi$\uff0c$h_y = \\sin\\theta\\sin\\phi$\uff0c$h_z = \\cos\\theta$\u3002</p>\n<p>\u5404\u5411\u5f02\u6027GGX\uff1a\n$$D_{aniso} = \\frac{1}{\\pi \\alpha_x \\alpha_y} \\frac{1}{(\\frac{h_x^2}{\\alpha_x^2} + \\frac{h_y^2}{\\alpha_y^2} + h_z^2)^2}$$\n\u79ef\u5206\uff1a\n$$\\int_0^{2\\pi} \\int_0^{\\pi/2} D_{aniso} \\cos\\theta \\sin\\theta d\\theta d\\phi$$\n\u4ee4$u = \\sin^2\\theta$\uff0c\u5219\uff1a\n$$= \\frac{1}{\\pi \\alpha_x \\alpha_y} \\int_0^{2\\pi} \\int_0^1 \\frac{1-u}{2(a(\\phi)u + (1-u))^2} du d\\phi$$\n\u5176\u4e2d$a(\\phi) = \\frac{\\cos^2\\phi}{\\alpha_x^2} + \\frac{\\sin^2\\phi}{\\alpha_y^2} - 1$\u3002</p>\n<p>\u7ecf\u8fc7\u590d\u6742\u79ef\u5206\uff08\u4f7f\u7528\u7559\u6570\u5b9a\u7406\u6216\u6570\u503c\u9a8c\u8bc1\uff09\uff0c\u7ed3\u679c\u4e3a1\u3002</p>\n</details>\n<p><strong>\u4e60\u98989.6</strong> \u8bbe\u8ba1\u4e00\u4e2aBRDF\u6a21\u578b\uff0c\u540c\u65f6\u5177\u6709\u6f2b\u53cd\u5c04\u3001\u955c\u9762\u53cd\u5c04\u548c\u9006\u53cd\u5c04\uff08retroreflection\uff09\u7279\u6027\u3002\u7ed9\u51fa\u6570\u5b66\u8868\u8fbe\u5f0f\u5e76\u8bc1\u660e\u6ee1\u8db3\u80fd\u91cf\u5b88\u6052\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u8003\u8651\u5c06\u591a\u4e2aBRDF\u5206\u91cf\u7ebf\u6027\u7ec4\u5408\uff0c\u9006\u53cd\u5c04\u53ef\u7528\u7a84\u9ad8\u65af\u5206\u5e03\u5728$\\omega_o = -\\omega_i$\u9644\u8fd1\u5efa\u6a21\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u7ec4\u5408BRDF\uff1a\n$$f_r = k_d f_d + k_s f_s + k_r f_r$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>\u6f2b\u53cd\u5c04\uff1a$f_d = \\frac{1}{\\pi}$</li>\n<li>\u955c\u9762\u53cd\u5c04\uff1a$f_s = \\frac{D \\cdot G \\cdot F}{4 \\cos\\theta_i \\cos\\theta_o}$\uff08\u5fae\u8868\u9762\u6a21\u578b\uff09</li>\n<li>\u9006\u53cd\u5c04\uff1a$f_r = \\frac{A}{\\cos\\theta_i} \\exp\\left(-\\frac{|\\omega_o + \\omega_i|^2}{2\\sigma^2}\\right)$</li>\n</ul>\n<p>\u80fd\u91cf\u5b88\u6052\u8981\u6c42\uff1a</p>\n<ol>\n<li>$k_d + k_s + k_r \\leq 1$</li>\n<li>\u5bf9\u9006\u53cd\u5c04\u9879\uff0c\u9700\u8981\uff1a$A = \\frac{1}{2\\pi\\sigma^2(1-e^{-2/\\sigma^2})}$</li>\n</ol>\n<p>\u9a8c\u8bc1\uff1a\n$$\\int_{\\Omega} f_r \\cos\\theta_o d\\omega_o = k_d + k_s + k_r \\int_{\\Omega} \\frac{A}{\\cos\\theta_i} \\exp(...) \\cos\\theta_o d\\omega_o$$\n\u901a\u8fc7\u9002\u5f53\u9009\u62e9$\\sigma$\u548c\u5f52\u4e00\u5316\u5e38\u6570$A$\uff0c\u53ef\u4fdd\u8bc1\u603b\u53cd\u5c04\u7387\u4e0d\u8d85\u8fc71\u3002</p>\n</details>\n<p><strong>\u4e60\u98989.7</strong> \u63a8\u5bfc\u8584\u819c\u5e72\u6d89\u7684\u53cd\u5c04\u5149\u8c31\uff0c\u8003\u8651\u591a\u6b21\u5185\u53cd\u5c04\u3002\u89e3\u91ca\u4e3a\u4ec0\u4e48\u80a5\u7682\u6ce1\u5448\u73b0\u5f69\u8679\u8272\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u4f7f\u7528\u5149\u7a0b\u5dee\u548c\u590d\u632f\u5e45\u53e0\u52a0\uff0c\u8003\u8651\u76f8\u4f4d\u5173\u7cfb\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u8bbe\u8584\u819c\u539a\u5ea6$d$\uff0c\u6298\u5c04\u7387$n$\uff0c\u5165\u5c04\u89d2$\\theta_i$\uff0c\u6298\u5c04\u89d2$\\theta_t$\u3002</p>\n<p>\u5149\u7a0b\u5dee\uff1a$\\Delta = 2nd\\cos\\theta_t$</p>\n<p>\u8003\u8651\u591a\u6b21\u53cd\u5c04\uff0c\u603b\u53cd\u5c04\u632f\u5e45\uff1a\n$$r_{total} = r_1 + \\frac{t_1 t_1' r_2 e^{i\\delta}}{1 - r_1' r_2 e^{i\\delta}}$$\n\u5176\u4e2d$\\delta = 4\\pi nd\\cos\\theta_t / \\lambda$\u3002</p>\n<p>\u53cd\u5c04\u7387\uff1a\n$$R = |r_{total}|^2 = \\frac{r_1^2 + r_2^2 + 2r_1r_2\\cos\\delta}{1 + r_1^2r_2^2 + 2r_1r_2\\cos\\delta}$$</p>\n<p>\u5f69\u8679\u8272\u539f\u56e0\uff1a</p>\n<ol>\n<li>\u4e0d\u540c\u6ce2\u957f\u6709\u4e0d\u540c\u7684\u76f8\u4f4d\u5dee$\\delta$</li>\n<li>\u76f8\u957f\u5e72\u6d89\u6761\u4ef6\uff1a$\\Delta = m\\lambda$\uff08\u4eae\u7eb9\uff09</li>\n<li>\u76f8\u6d88\u5e72\u6d89\u6761\u4ef6\uff1a$\\Delta = (m+1/2)\\lambda$\uff08\u6697\u7eb9\uff09</li>\n<li>\u8584\u819c\u539a\u5ea6\u53d8\u5316\u5bfc\u81f4\u4e0d\u540c\u4f4d\u7f6e\u5f3a\u5316\u4e0d\u540c\u989c\u8272</li>\n<li>\u89c2\u5bdf\u89d2\u5ea6\u53d8\u5316\u4e5f\u6539\u53d8\u5149\u7a0b\u5dee\uff0c\u4ea7\u751f\u989c\u8272\u53d8\u5316</li>\n</ol>\n</details>\n<p><strong>\u4e60\u98989.8</strong> \u5206\u6790\u795e\u7ecf\u7f51\u7edc\u8868\u793aBRDF\u7684\u4f18\u7f3a\u70b9\u3002\u8bbe\u8ba1\u4e00\u4e2a\u4fdd\u8bc1\u7269\u7406\u7ea6\u675f\uff08\u4e92\u6613\u6027\u3001\u80fd\u91cf\u5b88\u6052\uff09\u7684\u7f51\u7edc\u67b6\u6784\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u8003\u8651\u5982\u4f55\u5728\u7f51\u7edc\u7ed3\u6784\u6216\u635f\u5931\u51fd\u6570\u4e2d\u7f16\u7801\u7269\u7406\u7ea6\u675f\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u795e\u7ecfBRDF\u4f18\u7f3a\u70b9\uff1a</p>\n<p>\u4f18\u70b9\uff1a</p>\n<ul>\n<li>\u7d27\u51d1\u8868\u793a\u590d\u6742BRDF</li>\n<li>\u8fde\u7eed\u53ef\u5fae\uff0c\u9002\u5408\u4f18\u5316</li>\n<li>\u53ef\u5b66\u4e60\u672a\u77e5\u6750\u8d28</li>\n<li>\u6613\u4e8e\u63d2\u503c\u548c\u7f16\u8f91</li>\n</ul>\n<p>\u7f3a\u70b9\uff1a</p>\n<ul>\n<li>\u96be\u4ee5\u4fdd\u8bc1\u7269\u7406\u7ea6\u675f</li>\n<li>\u9700\u8981\u5927\u91cf\u8bad\u7ec3\u6570\u636e</li>\n<li>\u63a8\u7406\u8ba1\u7b97\u6210\u672c</li>\n<li>\u7f3a\u4e4f\u53ef\u89e3\u91ca\u6027</li>\n</ul>\n<p>\u7269\u7406\u7ea6\u675f\u67b6\u6784\u8bbe\u8ba1\uff1a</p>\n<ol>\n<li>\n<p><strong>\u4e92\u6613\u6027</strong>\uff1a\u4f7f\u7528\u5bf9\u79f0\u8f93\u5165\u7f16\u7801\n   <code>input = sort([\u03c9_i, \u03c9_o]) \u6216 input = [\u03c9_i + \u03c9_o, |\u03c9_i - \u03c9_o|]</code></p>\n</li>\n<li>\n<p><strong>\u80fd\u91cf\u5b88\u6052</strong>\uff1a\u8f93\u51fa\u5c42\u5f52\u4e00\u5316\n   <code>f_r_raw = MLP(input)\n   albedo = \u222bf_r_raw cos\u03b8 d\u03c9 (\u9884\u8ba1\u7b97\u6216\u5b66\u4e60)\n   f_r = f_r_raw / max(1, albedo)</code></p>\n</li>\n<li>\n<p><strong>\u975e\u8d1f\u6027</strong>\uff1a\u4f7f\u7528ReLU\u6216Softplus\u6fc0\u6d3b</p>\n</li>\n<li>\n<p><strong>\u635f\u5931\u51fd\u6570</strong>\uff1a\n   <code>L = L_data + \u03bb_1 L_reciprocity + \u03bb_2 L_energy\n   L_reciprocity = |f_r(\u03c9_i,\u03c9_o) - f_r(\u03c9_o,\u03c9_i)|\u00b2\n   L_energy = max(0, \u222bf_r cos\u03b8 d\u03c9 - 1)\u00b2</code></p>\n</li>\n<li>\n<p><strong>\u67b6\u6784\u793a\u4f8b</strong>\uff1a\n   - \u8f93\u5165\uff1a6D\uff08\u4e24\u4e2a\u65b9\u5411\uff09\u2192 4D\uff08\u5bf9\u79f0\u7f16\u7801\uff09\n   - \u9690\u85cf\u5c42\uff1a[128, 256, 256, 128]\uff0c\u4f7f\u7528SIREN\u6fc0\u6d3b\n   - \u8f93\u51fa\uff1aRGB\u503c\uff0c\u7ecf\u8fc7\u7269\u7406\u7ea6\u675f\u5904\u7406</p>\n</li>\n</ol>\n</details>\n<h2 id=\"gotchas\">\u5e38\u89c1\u9677\u9631\u4e0e\u9519\u8bef (Gotchas)</h2>\n<h3 id=\"1-brdf\">1. BRDF\u5b9e\u73b0\u9519\u8bef</h3>\n<p><strong>\u9519\u8bef</strong>\uff1a\u5fd8\u8bb0\u534a\u7a0b\u5411\u91cf\u5f52\u4e00\u5316</p>\n<pre class=\"codehilite\"><code>half = wi + wo  // \u9519\u8bef\uff01\n</code></pre>\n\n<p><strong>\u6b63\u786e</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>half = normalize(wi + wo)\n</code></pre>\n\n<p><strong>\u9519\u8bef</strong>\uff1a\u6df7\u6dc6\u89d2\u5ea6\u5b9a\u4e49</p>\n<ul>\n<li>$\\theta_h$\u662f\u534a\u7a0b\u5411\u91cf\u4e0e\u6cd5\u7ebf\u5939\u89d2</li>\n<li>$\\theta_i$\u662f\u5165\u5c04\u65b9\u5411\u4e0e\u6cd5\u7ebf\u5939\u89d2</li>\n<li>$\\theta_d$\u662f\u5165\u5c04\u65b9\u5411\u4e0e\u534a\u7a0b\u5411\u91cf\u5939\u89d2\uff08\u7528\u4e8e\u83f2\u6d85\u5c14\uff09</li>\n</ul>\n<h3 id=\"2\">2. \u80fd\u91cf\u5b88\u6052\u8fdd\u53cd</h3>\n<p><strong>\u9677\u9631</strong>\uff1a\u5fae\u8868\u9762BRDF\u53ef\u80fd\u8d85\u8fc71</p>\n<ul>\n<li>\u539f\u56e0\uff1a\u63a0\u5c04\u89d2\u65f6G\u9879\u4e0d\u8db3</li>\n<li>\u89e3\u51b3\uff1a\u4f7f\u7528\u6539\u8fdb\u7684G\u51fd\u6570\u6216\u80fd\u91cf\u8865\u507f</li>\n</ul>\n<p><strong>\u9677\u9631</strong>\uff1a\u591a\u5c42\u6750\u8d28\u80fd\u91cf\u7d2f\u52a0\u9519\u8bef</p>\n<ul>\n<li>\u9519\u8bef\uff1a\u76f4\u63a5\u76f8\u52a0\u5404\u5c42BRDF</li>\n<li>\u6b63\u786e\uff1a\u8003\u8651\u5c42\u95f4\u591a\u6b21\u53cd\u5c04</li>\n</ul>\n<h3 id=\"3\">3. \u6570\u503c\u7a33\u5b9a\u6027\u95ee\u9898</h3>\n<p><strong>GGX\u5728$\\alpha = 0$\u65f6\u7684\u5947\u5f02\u6027</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>// \u9519\u8bef\uff1a\u76f4\u63a5\u4f7f\u7528alpha\nD = alpha^2 / (pi * denominator^2)\n\n// \u6b63\u786e\uff1a\u94b3\u5236\u6700\u5c0f\u503c\nalpha = max(0.001, roughness^2)\n</code></pre>\n\n<p><strong>\u83f2\u6d85\u5c14\u8ba1\u7b97\u7684\u8fb9\u754c\u60c5\u51b5</strong>\uff1a</p>\n<ul>\n<li>\u5168\u5185\u53cd\u5c04\u65f6\u9700\u7279\u6b8a\u5904\u7406</li>\n<li>\u590d\u6570IOR\u7684\u5e73\u65b9\u6839\u9700\u9009\u62e9\u6b63\u786e\u5206\u652f</li>\n</ul>\n<h3 id=\"4\">4. \u91c7\u6837\u6548\u7387\u95ee\u9898</h3>\n<p><strong>\u9519\u8bef</strong>\uff1a\u4f7f\u7528\u5747\u5300\u91c7\u6837\u8ba1\u7b97BRDF\u79ef\u5206</p>\n<ul>\n<li>\u95ee\u9898\uff1a\u6536\u655b\u6781\u6162\uff0c\u566a\u58f0\u5927</li>\n<li>\u89e3\u51b3\uff1a\u4f7f\u7528\u91cd\u8981\u6027\u91c7\u6837</li>\n</ul>\n<p><strong>\u9519\u8bef</strong>\uff1a\u5ffd\u7565\u591a\u91cd\u91cd\u8981\u6027\u91c7\u6837\uff08MIS\uff09</p>\n<ul>\n<li>\u95ee\u9898\uff1a\u67d0\u4e9b\u60c5\u51b5\u4e0b\u65b9\u5dee\u5f88\u5927</li>\n<li>\u89e3\u51b3\uff1a\u7ec4\u5408BRDF\u91c7\u6837\u548c\u5149\u6e90\u91c7\u6837</li>\n</ul>\n<h3 id=\"5\">5. \u7269\u7406\u51c6\u786e\u6027\u9519\u8bef</h3>\n<p><strong>\u6df7\u6dc6\u8f90\u5c04\u5ea6\u91cf\u5355\u4f4d</strong>\uff1a</p>\n<ul>\n<li>Radiance: W/(m\u00b2\u00b7sr)</li>\n<li>Irradiance: W/m\u00b2</li>\n<li>BRDF: 1/sr</li>\n</ul>\n<p><strong>\u5ffd\u7565\u8272\u6563</strong>\uff1a</p>\n<ul>\n<li>\u94bb\u77f3\u3001\u68f1\u955c\u7b49\u6750\u8d28\u5fc5\u987b\u8003\u8651\u8272\u6563</li>\n<li>\u81f3\u5c11\u5bf9RGB\u4e09\u901a\u9053\u4f7f\u7528\u4e0d\u540cIOR</li>\n</ul>\n<h3 id=\"6\">6. \u6027\u80fd\u4f18\u5316\u9677\u9631</h3>\n<p><strong>\u9884\u8ba1\u7b97\u9519\u8bef</strong>\uff1a</p>\n<ul>\n<li>LUT\u91c7\u6837\u4e0d\u8db3\u5bfc\u81f4\u5931\u771f</li>\n<li>\u63d2\u503c\u65b9\u6cd5\u9009\u62e9\u4e0d\u5f53</li>\n</ul>\n<p><strong>\u7740\u8272\u5668\u7cbe\u5ea6\u95ee\u9898</strong>\uff1a</p>\n<ul>\n<li>\u534a\u7cbe\u5ea6\u6d6e\u70b9\u53ef\u80fd\u5bfc\u81f4\u660e\u663e\u8bef\u5dee</li>\n<li>\u7279\u522b\u662f\u5728\u8ba1\u7b97very rough\u6750\u8d28\u65f6</li>\n</ul>\n<h2 id=\"_5\">\u6700\u4f73\u5b9e\u8df5\u68c0\u67e5\u6e05\u5355</h2>\n<h3 id=\"_6\">\u8bbe\u8ba1\u9636\u6bb5</h3>\n<ul>\n<li>[ ] \u660e\u786e\u6750\u8d28\u7684\u7269\u7406\u7279\u6027\uff08\u91d1\u5c5e/\u7535\u4ecb\u8d28\u3001\u5404\u5411\u540c\u6027/\u5f02\u6027\uff09</li>\n<li>[ ] \u786e\u5b9a\u6240\u9700\u7684\u5916\u89c2\u7279\u5f81\uff08\u5149\u6cfd\u5ea6\u3001\u989c\u8272\u3001\u7eb9\u7406\uff09</li>\n<li>[ ] \u8bc4\u4f30\u6027\u80fd\u9700\u6c42vs\u8d28\u91cf\u9700\u6c42</li>\n<li>[ ] \u8003\u8651\u662f\u5426\u9700\u8981\u827a\u672f\u53ef\u63a7\u6027</li>\n</ul>\n<h3 id=\"_7\">\u5b9e\u73b0\u9636\u6bb5</h3>\n<ul>\n<li>[ ] \u9a8c\u8bc1BRDF\u6ee1\u8db3\u4e92\u6613\u6027</li>\n<li>[ ] \u68c0\u67e5\u80fd\u91cf\u5b88\u6052\uff08\u767d\u7089\u6d4b\u8bd5\uff09</li>\n<li>[ ] \u5b9e\u73b0\u91cd\u8981\u6027\u91c7\u6837</li>\n<li>[ ] \u5904\u7406\u6570\u503c\u7a33\u5b9a\u6027\u8fb9\u754c\u60c5\u51b5</li>\n<li>[ ] \u6dfb\u52a0\u80fd\u91cf\u8865\u507f\u9879\uff08\u5982\u9700\u8981\uff09</li>\n</ul>\n<h3 id=\"_8\">\u9a8c\u8bc1\u9636\u6bb5</h3>\n<ul>\n<li>[ ] \u4e0e\u53c2\u8003\u5b9e\u73b0\u5bf9\u6bd4\uff08\u5982Mitsuba\u3001PBRT\uff09</li>\n<li>[ ] \u6d4b\u8bd5\u6781\u9650\u53c2\u6570\uff08roughness=0/1\uff09</li>\n<li>[ ] \u9a8c\u8bc1\u4e0d\u540c\u5149\u7167\u6761\u4ef6</li>\n<li>[ ] \u68c0\u67e5\u65f6\u95f4\u76f8\u5173\u6027\uff08\u52a8\u753b\u4e2d\u7684\u95ea\u70c1\uff09</li>\n</ul>\n<h3 id=\"_9\">\u4f18\u5316\u9636\u6bb5</h3>\n<ul>\n<li>[ ] \u5206\u6790\u6027\u80fd\u74f6\u9888</li>\n<li>[ ] \u8003\u8651\u8fd1\u4f3c\u65b9\u6cd5\uff08\u5982Schlick vs\u5b8c\u6574\u83f2\u6d85\u5c14\uff09</li>\n<li>[ ] \u5b9e\u73b0LOD\u7b56\u7565</li>\n<li>[ ] \u9884\u8ba1\u7b97\u53ef\u91cd\u7528\u9879</li>\n</ul>\n<h3 id=\"_10\">\u827a\u672f\u5bb6\u5de5\u4f5c\u6d41</h3>\n<ul>\n<li>[ ] \u63d0\u4f9b\u76f4\u89c2\u7684\u53c2\u6570\uff08\u907f\u514d\u7269\u7406\u5355\u4f4d\uff09</li>\n<li>[ ] \u5b9e\u73b0\u5b9e\u65f6\u9884\u89c8</li>\n<li>[ ] \u63d0\u4f9b\u9884\u8bbe\u6750\u8d28\u5e93</li>\n<li>[ ] \u652f\u6301\u7eb9\u7406\u6620\u5c04\u6240\u6709\u53c2\u6570</li>\n</ul>\n<h3 id=\"_11\">\u6269\u5c55\u6027\u8003\u8651</h3>\n<ul>\n<li>[ ] \u6a21\u5757\u5316\u8bbe\u8ba1\uff08\u6613\u4e8e\u6dfb\u52a0\u65b0BRDF\uff09</li>\n<li>[ ] \u652f\u6301\u6750\u8d28\u5206\u5c42</li>\n<li>[ ] \u8003\u8651\u672a\u6765\u529f\u80fd\uff08\u5982\u5149\u8c31\u6e32\u67d3\uff09</li>\n<li>[ ] \u6587\u6863\u5316\u6240\u6709\u5047\u8bbe\u548c\u9650\u5236</li>\n</ul>"
  },
  "../old.md": {
    "hash": "f74db27e639f7170e6bbc8260f6c9ec6",
    "content": "<p>\u7b2c 1 \u5468   Feb 11  \u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u6982\u8ff0 [\u8bfe\u4ef6]\nFeb 14  \u5411\u91cf\u4e0e\u7ebf\u6027\u4ee3\u6570 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 2 \u7ae0\uff08Miscellaneous Math\uff09\uff1b\u7b2c 5 \u7ae0\uff08Linear Algebra\uff09\n\u7b2c 2 \u5468   Feb 18  \u53d8\u6362\uff08\u4e8c\u7ef4\u4e0e\u4e09\u7ef4\uff09 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 6 \u7ae0\uff08Transformation Matrices\uff09\uff0c\u7b2c 6.1\u30016.3 \u8282\nFeb 21  \u53d8\u6362\uff08\u6a21\u578b\u3001\u89c6\u56fe\u3001\u6295\u5f71\uff09 [\u8bfe\u4ef6] [\u8865\u5145\u6750\u6599]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 6 \u7ae0\uff08Transformation Matrices\uff09\uff0c\u7b2c 6.2\u30016.4\u30016.5 \u8282\uff1b\u7b2c 7 \u7ae0\uff08Viewing\uff09\n\u7b2c 3 \u5468   Feb 25  \u5149\u6805\u5316\uff08\u4e09\u89d2\u5f62\u7684\u79bb\u6563\u5316\uff09 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 3 \u7ae0\uff08Raster Images\uff09, \u7b2c 3.1\u30013.2 \u8282\nFeb 28  \u5149\u6805\u5316\uff08\u6df1\u5ea6\u6d4b\u8bd5\u4e0e\u6297\u952f\u9f7f\uff09 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 8 \u7ae0\uff08The Graphics Pipeline\uff09, \u7b2c 8.2.3 \u8282\uff1b\u7b2c 9 \u7ae0\uff08Signal Processing\uff09\n\u7b2c 4 \u5468   Mar 3   \u7740\u8272\uff08\u5149\u7167\u4e0e\u57fa\u672c\u7740\u8272\u6a21\u578b\uff09 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 10 \u7ae0\uff08Surface Shading\uff09, \u7b2c 10.1 \u8282\nMar 7   \u7740\u8272\uff08\u7740\u8272\u9891\u7387\u3001\u56fe\u5f62\u7ba1\u7ebf\u3001\u7eb9\u7406\u6620\u5c04\uff09 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 10 \u7ae0\uff08Surface Shading\uff09, \u7b2c 10.2 \u8282\uff1b\u7b2c 17 \u7ae0\uff08Using Graphics Hardware\uff09, \u7b2c 17.1 \u8282\n\u7b2c 5 \u5468   Mar 10  \u7740\u8272\uff08\u63d2\u503c\u3001\u9ad8\u7ea7\u7eb9\u7406\u6620\u5c04\uff09 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 11 \u7ae0\uff08Texture Mapping\uff09, \u7b2c 11.1\u300111.2 \u8282\nMar 13  \u51e0\u4f55\uff08\u57fa\u672c\u8868\u793a\u65b9\u6cd5\uff09 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 12 \u7ae0\uff08Data Structures for Graphics\uff09\uff0c\u7b2c 12.1 \u8282\uff1b\u7b2c 22 \u7ae0\uff08Implicit Modeling\uff09\n\u7b2c 6 \u5468   Mar 17  \u51e0\u4f55\uff08\u66f2\u7ebf\u4e0e\u66f2\u9762\uff09 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 15 \u7ae0\uff08Curves\uff09\uff0c\u7b2c 15.1\u300115.2\u300115.3\u300115.6 \u8282\nMar 20  \u51e0\u4f55\uff08\u7f51\u683c\u5904\u7406\uff09\u3001\u9634\u5f71\u56fe [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u65e0\n\u7b2c 7 \u5468   Mar 24  \u5149\u7ebf\u8ffd\u8e2a\uff08\u57fa\u672c\u539f\u7406\uff09 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 4 \u7ae0\uff08Ray Tracing\uff09\nMar 27  \u5149\u7ebf\u8ffd\u8e2a\uff08\u52a0\u901f\u7ed3\u6784\uff09 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 12 \u7ae0\uff08Data Structures for Graphics\uff09\uff0c\u7b2c 12.1\u300112.2\u300112.3 \u8282\n\u7b2c 8 \u5468   Mar 31  \u5149\u7ebf\u8ffd\u8e2a\uff08\u8f90\u5c04\u5ea6\u91cf\u5b66\u3001\u6e32\u67d3\u65b9\u7a0b\u4e0e\u5168\u5c40\u5149\u7167\uff09 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 18 \u7ae0\uff08Light\uff09\uff0c\u7b2c 18.1\u300118.2 \u8282\nApr 5   \u5149\u7ebf\u8ffd\u8e2a\uff08\u8499\u7279\u5361\u6d1b\u79ef\u5206\u4e0e\u8def\u5f84\u8ffd\u8e2a\uff09 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u65e0\n\u7b2c 9 \u5468   Apr 7   \u6750\u8d28\u4e0e\u5916\u89c2 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 24 \u7ae0\uff08Reflection\uff09\uff0c\u7b2c 24.1\u300124.3 \u8282\nApr 10  \u9ad8\u7ea7\u5149\u7ebf\u4f20\u64ad\u4e0e\u590d\u6742\u5916\u89c2\u5efa\u6a21 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u65e0\n\u7b2c 10 \u5468  Apr 14  \u76f8\u673a\u4e0e\u900f\u955c [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u65e0\nApr 17  \u5149\u573a\u3001\u989c\u8272\u4e0e\u611f\u77e5 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 19 \u7ae0\uff08Color\uff09\n\u7b2c 11 \u5468  Apr 21  \u52a8\u753b\u4e0e\u6a21\u62df\uff08\u57fa\u672c\u6982\u5ff5\u3001\u8d28\u70b9\u5f39\u7c27\u7cfb\u7edf\u3001\u8fd0\u52a8\u5b66\uff09 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u7b2c 16 \u7ae0\uff08Computer Animation\uff09\uff0c\u7b2c 16.5 \u8282\nApr 24  \u52a8\u753b\u4e0e\u6a21\u62df\uff08\u6c42\u89e3\u5e38\u5fae\u5206\u65b9\u7a0b\uff0c\u521a\u4f53\u4e0e\u6d41\u4f53\uff09 [\u8bfe\u4ef6]\n\u9605\u8bfb\u6750\u6599\uff1a\u65e0</p>"
  },
  "../index.md": {
    "hash": "0783feda4f8807541f42dc1265c8c964",
    "content": "<h1 id=\"_1\">\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u9ad8\u7ea7\u6559\u7a0b</h1>\n<h2 id=\"_2\">\u76ee\u6807\u8bfb\u8005</h2>\n<p>\u672c\u6559\u7a0b\u9762\u5411\u8d44\u6df1\u7a0b\u5e8f\u5458\u548cAI\u79d1\u5b66\u5bb6\uff0c\u63d0\u4f9b\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u7684\u6df1\u5165\u7406\u89e3\u548c\u5b9e\u8df5\u6307\u5bfc\u3002</p>\n<h2 id=\"_3\">\u6559\u7a0b\u7279\u8272</h2>\n<ul>\n<li>\u6df1\u5165\u7684\u6570\u5b66\u63a8\u5bfc\u548c\u7406\u8bba\u5206\u6790</li>\n<li>\u5927\u91cf\u7ec3\u4e60\u9898\uff08\u542b\u57fa\u7840\u9898\u548c\u6311\u6218\u9898\uff09</li>\n<li>\u5e38\u89c1\u9677\u9631\u4e0e\u8c03\u8bd5\u6280\u5de7</li>\n<li>\u6700\u4f73\u5b9e\u8df5\u68c0\u67e5\u6e05\u5355</li>\n</ul>\n<h2 id=\"_4\">\u7ae0\u8282\u76ee\u5f55</h2>\n<h3 id=\"1\"><a href=\"chapter1.md\">\u7b2c1\u7ae0\uff1a\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u6982\u8ff0\u4e0e\u6570\u5b66\u57fa\u7840</a></h3>\n<p>1.1 \u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u6982\u8ff0\n1.2 \u5411\u91cf\u4e0e\u7ebf\u6027\u4ee3\u6570\n1.3 \u56db\u5143\u6570\u4e0e\u590d\u6570\u5728\u56fe\u5f62\u5b66\u4e2d\u7684\u5e94\u7528</p>\n<h3 id=\"2\"><a href=\"chapter2.md\">\u7b2c2\u7ae0\uff1a\u51e0\u4f55\u53d8\u6362</a></h3>\n<p>2.1 \u4e8c\u7ef4\u4e0e\u4e09\u7ef4\u53d8\u6362\n2.2 \u6a21\u578b\u3001\u89c6\u56fe\u3001\u6295\u5f71\u53d8\u6362\n2.3 \u53d8\u6362\u77e9\u9635\u7684\u7ec4\u5408\u4e0e\u4f18\u5316</p>\n<h3 id=\"3\"><a href=\"chapter3.md\">\u7b2c3\u7ae0\uff1a\u5149\u6805\u5316</a></h3>\n<p>3.1 \u4e09\u89d2\u5f62\u7684\u79bb\u6563\u5316\n3.2 \u6df1\u5ea6\u6d4b\u8bd5\u4e0e\u6297\u952f\u9f7f\n3.3 \u73b0\u4ee3GPU\u5149\u6805\u5316\u7ba1\u7ebf</p>\n<h3 id=\"4\"><a href=\"chapter4.md\">\u7b2c4\u7ae0\uff1a\u7740\u8272\u57fa\u7840</a></h3>\n<p>4.1 \u5149\u7167\u4e0e\u57fa\u672c\u7740\u8272\u6a21\u578b\n4.2 \u7740\u8272\u9891\u7387\u4e0e\u56fe\u5f62\u7ba1\u7ebf\n4.3 \u7eb9\u7406\u6620\u5c04\u57fa\u7840</p>\n<h3 id=\"5\"><a href=\"chapter5.md\">\u7b2c5\u7ae0\uff1a\u9ad8\u7ea7\u7740\u8272\u6280\u672f</a></h3>\n<p>5.1 \u63d2\u503c\u6280\u672f\u8be6\u89e3\n5.2 \u9ad8\u7ea7\u7eb9\u7406\u6620\u5c04\n5.3 \u7a0b\u5e8f\u5316\u7eb9\u7406\u4e0e\u7740\u8272\u5668\u4f18\u5316</p>\n<h3 id=\"6\"><a href=\"chapter6.md\">\u7b2c6\u7ae0\uff1a\u51e0\u4f55\u8868\u793a</a></h3>\n<p>6.1 \u57fa\u672c\u51e0\u4f55\u8868\u793a\u65b9\u6cd5\n6.2 \u66f2\u7ebf\u4e0e\u66f2\u9762\n6.3 \u7f51\u683c\u5904\u7406\u4e0e\u9634\u5f71\u56fe</p>\n<h3 id=\"7\"><a href=\"chapter7.md\">\u7b2c7\u7ae0\uff1a\u5149\u7ebf\u8ffd\u8e2a\u57fa\u7840</a></h3>\n<p>7.1 \u5149\u7ebf\u8ffd\u8e2a\u57fa\u672c\u539f\u7406\n7.2 \u52a0\u901f\u7ed3\u6784\uff08BVH\u3001KD-Tree\uff09\n7.3 \u5149\u7ebf-\u7269\u4f53\u76f8\u4ea4\u7b97\u6cd5\u4f18\u5316</p>\n<h3 id=\"8\"><a href=\"chapter8.md\">\u7b2c8\u7ae0\uff1a\u5168\u5c40\u5149\u7167</a></h3>\n<p>8.1 \u8f90\u5c04\u5ea6\u91cf\u5b66\n8.2 \u6e32\u67d3\u65b9\u7a0b\n8.3 \u8499\u7279\u5361\u6d1b\u79ef\u5206\u4e0e\u8def\u5f84\u8ffd\u8e2a</p>\n<h3 id=\"9\"><a href=\"chapter9.md\">\u7b2c9\u7ae0\uff1a\u6750\u8d28\u4e0e\u5916\u89c2</a></h3>\n<p>9.1 BRDF/BSDF\u7406\u8bba\n9.2 \u9ad8\u7ea7\u6750\u8d28\u6a21\u578b\n9.3 \u590d\u6742\u5916\u89c2\u5efa\u6a21</p>\n<h3 id=\"10\"><a href=\"chapter10.md\">\u7b2c10\u7ae0\uff1a\u6210\u50cf\u7cfb\u7edf</a></h3>\n<p>10.1 \u76f8\u673a\u4e0e\u900f\u955c\u6a21\u578b\n10.2 \u5149\u573a\u7406\u8bba\n10.3 \u989c\u8272\u79d1\u5b66\u4e0e\u611f\u77e5</p>\n<h3 id=\"11\"><a href=\"chapter11.md\">\u7b2c11\u7ae0\uff1a\u52a8\u753b\u4e0e\u7269\u7406\u6a21\u62df</a></h3>\n<p>11.1 \u52a8\u753b\u57fa\u672c\u6982\u5ff5\n11.2 \u8d28\u70b9\u5f39\u7c27\u7cfb\u7edf\u4e0e\u8fd0\u52a8\u5b66\n11.3 \u5e38\u5fae\u5206\u65b9\u7a0b\u6c42\u89e3\n11.4 \u521a\u4f53\u4e0e\u6d41\u4f53\u6a21\u62df</p>\n<h3 id=\"12\"><a href=\"chapter12.md\">\u7b2c12\u7ae0\uff1a\u7269\u8d28\u70b9\u6cd5</a></h3>\n<p>12.1 \u7269\u8d28\u70b9\u6cd5\u57fa\u7840\u7406\u8bba\n12.2 MLS-MPM\uff08\u79fb\u52a8\u6700\u5c0f\u4e8c\u4e58\u7269\u8d28\u70b9\u6cd5\uff09\n12.3 \u9ad8\u7ea7MPM\u6280\u672f\u4e0e\u5e94\u7528</p>\n<h2 id=\"_5\">\u4f7f\u7528\u8bf4\u660e</h2>\n<p>\u6bcf\u7ae0\u5305\u542b\u4ee5\u4e0b\u90e8\u5206\uff1a</p>\n<ol>\n<li><strong>\u5f00\u7bc7\u6bb5\u843d</strong>\uff1a\u7ae0\u8282\u6982\u8ff0\u548c\u5b66\u4e60\u76ee\u6807</li>\n<li><strong>\u6838\u5fc3\u5185\u5bb9</strong>\uff1a\u7406\u8bba\u8bb2\u89e3\u548c\u6570\u5b66\u63a8\u5bfc</li>\n<li><strong>\u672c\u7ae0\u5c0f\u7ed3</strong>\uff1a\u5173\u952e\u6982\u5ff5\u548c\u516c\u5f0f\u603b\u7ed3</li>\n<li><strong>\u7ec3\u4e60\u9898</strong>\uff1a6-8\u9053\u9898\u76ee\uff0c\u5305\u542b\u57fa\u7840\u9898\u548c\u6311\u6218\u9898</li>\n<li><strong>\u5e38\u89c1\u9677\u9631\u4e0e\u9519\u8bef</strong>\uff1a\u8c03\u8bd5\u6280\u5de7\u548c\u6ce8\u610f\u4e8b\u9879</li>\n<li><strong>\u6700\u4f73\u5b9e\u8df5\u68c0\u67e5\u6e05\u5355</strong>\uff1a\u8bbe\u8ba1\u5ba1\u67e5\u8981\u70b9</li>\n</ol>\n<h2 id=\"_6\">\u6570\u5b66\u7b26\u53f7\u7ea6\u5b9a</h2>\n<ul>\n<li>\u5411\u91cf\uff1a\u7c97\u4f53\u5c0f\u5199\u5b57\u6bcd $\\mathbf{v}$</li>\n<li>\u77e9\u9635\uff1a\u7c97\u4f53\u5927\u5199\u5b57\u6bcd $\\mathbf{M}$</li>\n<li>\u6807\u91cf\uff1a\u659c\u4f53 $s$</li>\n<li>\u51fd\u6570\uff1a\u6b63\u4f53 $f(\\cdot)$</li>\n<li>\u96c6\u5408\uff1a\u82b1\u4f53\u5927\u5199 $\\mathcal{S}$</li>\n</ul>\n<h2 id=\"_7\">\u63a8\u8350\u9605\u8bfb\u987a\u5e8f</h2>\n<ul>\n<li><strong>\u57fa\u7840\u8def\u5f84</strong>\uff1a\u7b2c1-3\u7ae0 \u2192 \u7b2c4-5\u7ae0 \u2192 \u7b2c6\u7ae0 \u2192 \u7b2c7-8\u7ae0</li>\n<li><strong>\u5b9e\u65f6\u6e32\u67d3\u8def\u5f84</strong>\uff1a\u7b2c1-5\u7ae0 \u2192 \u7b2c11\u7ae0</li>\n<li><strong>\u79bb\u7ebf\u6e32\u67d3\u8def\u5f84</strong>\uff1a\u7b2c1-2\u7ae0 \u2192 \u7b2c6-10\u7ae0</li>\n</ul>\n<h2 id=\"_8\">\u81f4\u8c22</h2>\n<p>\u672c\u6559\u7a0b\u5185\u5bb9\u7ec4\u7ec7\u53c2\u8003\u4e86\u7ecf\u5178\u7684\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u8bfe\u7a0b\uff0c\u5e76\u9488\u5bf9AI\u65f6\u4ee3\u7684\u9700\u6c42\u8fdb\u884c\u4e86\u66f4\u65b0\u548c\u6269\u5c55\u3002</p>"
  },
  "../chapter8.md": {
    "hash": "371a80f49596e3bbaf5b2a64e210aa20",
    "content": "<h1 id=\"8\">\u7b2c8\u7ae0\uff1a\u5168\u5c40\u5149\u7167</h1>\n<p>\u5168\u5c40\u5149\u7167\uff08Global Illumination\uff09\u662f\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u6700\u5177\u6311\u6218\u6027\u7684\u95ee\u9898\u4e4b\u4e00\u3002\u4e0e\u5c40\u90e8\u5149\u7167\u4e0d\u540c\uff0c\u5168\u5c40\u5149\u7167\u8003\u8651\u4e86\u5149\u7ebf\u5728\u573a\u666f\u4e2d\u7684\u591a\u6b21\u53cd\u5c04\u3001\u6298\u5c04\u548c\u6563\u5c04\uff0c\u80fd\u591f\u751f\u6210\u903c\u771f\u7684\u89c6\u89c9\u6548\u679c\uff0c\u5982\u8f6f\u9634\u5f71\u3001\u989c\u8272\u6e17\u900f\uff08color bleeding\uff09\u3001\u7126\u6563\uff08caustics\uff09\u7b49\u3002\u672c\u7ae0\u5c06\u4ece\u8f90\u5c04\u5ea6\u91cf\u5b66\u7684\u57fa\u7840\u51fa\u53d1\uff0c\u63a8\u5bfc\u6e32\u67d3\u65b9\u7a0b\uff0c\u5e76\u4ecb\u7ecd\u8499\u7279\u5361\u6d1b\u65b9\u6cd5\u5728\u6c42\u89e3\u5168\u5c40\u5149\u7167\u4e2d\u7684\u5e94\u7528\u3002</p>\n<h2 id=\"81\">8.1 \u8f90\u5c04\u5ea6\u91cf\u5b66</h2>\n<p>\u8f90\u5c04\u5ea6\u91cf\u5b66\uff08Radiometry\uff09\u662f\u63cf\u8ff0\u5149\u80fd\u4f20\u64ad\u7684\u7269\u7406\u6846\u67b6\u3002\u7406\u89e3\u8fd9\u4e9b\u6982\u5ff5\u5bf9\u4e8e\u6b63\u786e\u5b9e\u73b0\u57fa\u4e8e\u7269\u7406\u7684\u6e32\u67d3\u81f3\u5173\u91cd\u8981\u3002</p>\n<h3 id=\"811\">8.1.1 \u57fa\u672c\u6982\u5ff5</h3>\n<p>\u8f90\u5c04\u5ea6\u91cf\u5b66\u4e2d\u7684\u7269\u7406\u91cf\u5f62\u6210\u4e86\u4e00\u4e2a\u5c42\u6b21\u7ed3\u6784\uff0c\u4ece\u80fd\u91cf\u5f00\u59cb\uff0c\u9010\u6b65\u5f15\u5165\u65f6\u95f4\u3001\u7a7a\u95f4\u548c\u65b9\u5411\u7684\u5fae\u5206\u3002\u7406\u89e3\u8fd9\u4e9b\u91cf\u4e4b\u95f4\u7684\u5173\u7cfb\u5bf9\u4e8e\u6b63\u786e\u5b9e\u73b0\u57fa\u4e8e\u7269\u7406\u7684\u6e32\u67d3\u81f3\u5173\u91cd\u8981\u3002</p>\n<p><strong>\u8f90\u5c04\u80fd\u91cf\uff08Radiant Energy\uff09</strong></p>\n<ul>\n<li>\u7b26\u53f7\uff1a$Q$</li>\n<li>\u5355\u4f4d\uff1a\u7126\u8033\uff08J\uff09</li>\n<li>\u7269\u7406\u610f\u4e49\uff1a\u5149\u5b50\u643a\u5e26\u7684\u603b\u80fd\u91cf</li>\n<li>\u4e0e\u5149\u5b50\u7684\u5173\u7cfb\uff1a$Q = \\sum_i h\\nu_i$\uff0c\u5176\u4e2d $h$ \u662f\u666e\u6717\u514b\u5e38\u6570\uff0c$\\nu_i$ \u662f\u7b2c $i$ \u4e2a\u5149\u5b50\u7684\u9891\u7387</li>\n<li>\u91cf\u5b50\u529b\u5b66\u89c6\u89d2\uff1a\u6bcf\u4e2a\u5149\u5b50\u80fd\u91cf $E = h\\nu = \\frac{hc}{\\lambda}$</li>\n<li>\u6ce2\u957f\u4e0e\u989c\u8272\uff1a\u53ef\u89c1\u5149\u6ce2\u957f\u8303\u56f4 380-780nm\uff0c\u5bf9\u5e94\u4e0d\u540c\u989c\u8272\u611f\u77e5</li>\n</ul>\n<p><strong>\u8f90\u5c04\u529f\u7387/\u8f90\u5c04\u901a\u91cf\uff08Radiant Power/Flux\uff09</strong></p>\n<ul>\n<li>\u7b26\u53f7\uff1a$\\Phi = \\frac{dQ}{dt}$</li>\n<li>\u5355\u4f4d\uff1a\u74e6\u7279\uff08W\uff09\u6216\u6d41\u660e\uff08lm\uff09</li>\n<li>\u7269\u7406\u610f\u4e49\uff1a\u5355\u4f4d\u65f6\u95f4\u5185\u901a\u8fc7\u67d0\u4e2a\u8868\u9762\u6216\u7a7a\u95f4\u533a\u57df\u7684\u80fd\u91cf</li>\n<li>\u5b9e\u4f8b\uff1a100W\u706f\u6ce1\u6bcf\u79d2\u8f90\u5c04100\u7126\u8033\u7684\u80fd\u91cf</li>\n<li>\u5149\u5ea6\u5b66\u5bf9\u5e94\uff1a\u5149\u901a\u91cf\uff08Luminous Flux\uff09\uff0c\u8003\u8651\u4eba\u773c\u54cd\u5e94\u66f2\u7ebf</li>\n<li>\u5149\u6548\u8f6c\u6362\uff1a\u5178\u578b\u767d\u70bd\u706f\u7ea615 lm/W\uff0cLED\u53ef\u8fbe100+ lm/W</li>\n<li>\u79ef\u5206\u5f62\u5f0f\uff1a$\\Phi = \\int_A \\int_{\\Omega} L(\\mathbf{p}, \\omega) \\cos\\theta \\, d\\omega \\, dA$</li>\n</ul>\n<p><strong>\u8f90\u5c04\u5f3a\u5ea6\uff08Radiant Intensity\uff09</strong></p>\n<ul>\n<li>\u7b26\u53f7\uff1a$I = \\frac{d\\Phi}{d\\omega}$</li>\n<li>\u5355\u4f4d\uff1aW/sr\uff08\u74e6\u7279/\u7403\u9762\u5ea6\uff09</li>\n<li>\u7269\u7406\u610f\u4e49\uff1a\u70b9\u5149\u6e90\u5728\u67d0\u4e2a\u65b9\u5411\u4e0a\u5355\u4f4d\u7acb\u4f53\u89d2\u7684\u529f\u7387</li>\n<li>\u9002\u7528\u6761\u4ef6\uff1a\u5149\u6e90\u5c3a\u5bf8\u8fdc\u5c0f\u4e8e\u5230\u89c2\u5bdf\u70b9\u7684\u8ddd\u79bb\uff08$r \\gg d_{source}$\uff09</li>\n<li>\u4e0e\u70b9\u5149\u6e90\u7684\u5173\u7cfb\uff1a\u5bf9\u4e8e\u5404\u5411\u540c\u6027\u70b9\u5149\u6e90\uff0c$I = \\frac{\\Phi}{4\\pi}$</li>\n<li>\u5b9e\u9645\u5e94\u7528\uff1a\u63cf\u8ff0LED\u3001\u8fdc\u8ddd\u79bb\u6052\u661f\u7b49\u8fd1\u4f3c\u70b9\u5149\u6e90</li>\n<li>\u65b9\u5411\u5206\u5e03\uff1a\u5b9e\u9645\u5149\u6e90\u5e38\u6709\u65b9\u5411\u6027\uff0c\u5982\u805a\u5149\u706f $I(\\theta) = I_0 \\cos^n\\theta$</li>\n<li>\u8ddd\u79bb\u65e0\u5173\u6027\uff1a\u5f3a\u5ea6\u4e0d\u968f\u8ddd\u79bb\u53d8\u5316\uff08\u4f46\u7167\u5ea6\u4f1a\u4ee5 $1/r^2$ \u8870\u51cf\uff09</li>\n</ul>\n<p><strong>\u8f90\u7167\u5ea6\uff08Irradiance\uff09</strong></p>\n<ul>\n<li>\u7b26\u53f7\uff1a$E = \\frac{d\\Phi}{dA}$</li>\n<li>\u5355\u4f4d\uff1aW/m\u00b2</li>\n<li>\u7269\u7406\u610f\u4e49\uff1a\u5355\u4f4d\u9762\u79ef\u63a5\u6536\u5230\u7684\u529f\u7387\uff08\u6240\u6709\u65b9\u5411\u7684\u603b\u548c\uff09</li>\n<li>\u4e0e\u5165\u5c04\u65b9\u5411\u7684\u5173\u7cfb\uff1a$E = \\int_{\\Omega} L_i(\\omega) \\cos\\theta \\, d\\omega$</li>\n<li>\u5b9e\u9645\u6d4b\u91cf\uff1a\u7167\u5ea6\u8ba1\u6d4b\u91cf\u7684\u5c31\u662f\u8f90\u7167\u5ea6\u7684\u5149\u5ea6\u5b66\u5bf9\u5e94\u91cf</li>\n<li>\u592a\u9633\u5e38\u6570\uff1a\u5730\u7403\u5927\u6c14\u5c42\u5916\u7684\u592a\u9633\u8f90\u7167\u5ea6\u7ea6\u4e3a 1361 W/m\u00b2</li>\n<li>\u70b9\u5149\u6e90\u8f90\u7167\u5ea6\uff1a$E = \\frac{I}{r^2} \\cos\\theta$\uff08\u5e73\u65b9\u53cd\u6bd4\u5b9a\u5f8b\uff09</li>\n<li>\u73af\u5883\u5149\u8fd1\u4f3c\uff1a\u5e38\u7528\u5e38\u6570\u8f90\u7167\u5ea6 $E_{ambient}$ \u6a21\u62df\u5929\u7a7a\u5149</li>\n<li>\u534a\u7403\u8f90\u7167\u5ea6\uff1a$E = \\int_{\\Omega^+} L_i \\cos\\theta \\, d\\omega$\uff08\u53ea\u8003\u8651\u4e0a\u534a\u7403\uff09</li>\n</ul>\n<p><strong>\u8f90\u5c04\u51fa\u5c04\u5ea6\uff08Radiant Exitance\uff09</strong></p>\n<ul>\n<li>\u7b26\u53f7\uff1a$M = \\frac{d\\Phi}{dA}$</li>\n<li>\u5355\u4f4d\uff1aW/m\u00b2</li>\n<li>\u7269\u7406\u610f\u4e49\uff1a\u5355\u4f4d\u9762\u79ef\u53d1\u51fa\u7684\u529f\u7387</li>\n<li>\u4e0e\u8f90\u7167\u5ea6\u7684\u533a\u522b\uff1a\u65b9\u5411\u76f8\u53cd\uff0c\u4e00\u4e2a\u63cf\u8ff0\u5165\u5c04\uff0c\u4e00\u4e2a\u63cf\u8ff0\u51fa\u5c04</li>\n<li>\u4e0e\u8f90\u5c04\u5ea6\u7684\u5173\u7cfb\uff1a$M = \\int_{\\Omega} L_o(\\omega) \\cos\\theta \\, d\\omega$</li>\n<li>Lambertian\u53d1\u5c04\u4f53\uff1a$M = \\pi L$\uff08\u5404\u5411\u540c\u6027\u53d1\u5c04\uff09</li>\n<li>Stefan-Boltzmann\u5b9a\u5f8b\uff1a\u9ed1\u4f53 $M = \\sigma T^4$</li>\n<li>\u9762\u5149\u6e90\u5efa\u6a21\uff1a\u7528\u51fa\u5c04\u5ea6\u63cf\u8ff0\u53d1\u5149\u8868\u9762</li>\n</ul>\n<p><strong>\u8f90\u5c04\u5ea6\uff08Radiance\uff09</strong></p>\n<ul>\n<li>\u7b26\u53f7\uff1a$L = \\frac{d^2\\Phi}{dA \\cos\\theta \\, d\\omega}$</li>\n<li>\u5355\u4f4d\uff1aW/(m\u00b2\u00b7sr)</li>\n<li>\u7269\u7406\u610f\u4e49\uff1a\u5355\u4f4d\u9762\u79ef\u3001\u5355\u4f4d\u7acb\u4f53\u89d2\u3001\u5355\u4f4d\u6295\u5f71\u9762\u79ef\u4e0a\u7684\u529f\u7387</li>\n<li>\u6838\u5fc3\u5730\u4f4d\uff1a\u8f90\u5c04\u5ea6\u662f\u6e32\u67d3\u65b9\u7a0b\u7684\u57fa\u672c\u91cf\uff0c\u56e0\u4e3a\uff1a\n  1. \u6cbf\u5149\u7ebf\u4f20\u64ad\u4e0d\u53d8\uff08\u5728\u771f\u7a7a\u4e2d\uff09\n  2. \u76f8\u673a\u4f20\u611f\u5668\u54cd\u5e94\u4e0e\u8f90\u5c04\u5ea6\u6210\u6b63\u6bd4\n  3. \u53ef\u4ee5\u901a\u8fc7\u79ef\u5206\u5f97\u5230\u5176\u4ed6\u6240\u6709\u8f90\u5c04\u5ea6\u91cf\n  4. \u4eba\u773c\u611f\u77e5\u4eae\u5ea6\u76f4\u63a5\u5bf9\u5e94\u8f90\u5c04\u5ea6</li>\n<li>\u4e0e\u5176\u4ed6\u91cf\u7684\u5173\u7cfb\uff1a</li>\n<li>$d\\Phi = L \\, dA \\cos\\theta \\, d\\omega$</li>\n<li>$dE = L \\cos\\theta \\, d\\omega$</li>\n<li>$dI = L \\, dA \\cos\\theta$</li>\n<li>\u5149\u7ebf\u675f\uff08Ray Bundle\uff09\uff1a$d\\Phi = L \\, dA_{\\perp} \\, d\\omega$</li>\n<li>\u5178\u578b\u503c\uff1a\u592a\u9633\u8868\u9762 $\\approx 2 \\times 10^7$ W/(m\u00b2\u00b7sr)</li>\n</ul>\n<h3 id=\"812\">8.1.2 \u8f90\u5c04\u5ea6\u7684\u6027\u8d28</h3>\n<p>\u8f90\u5c04\u5ea6\u662f\u6e32\u67d3\u4e2d\u6700\u91cd\u8981\u7684\u91cf\uff0c\u5177\u6709\u4ee5\u4e0b\u5173\u952e\u6027\u8d28\uff1a</p>\n<ol>\n<li>\n<p><strong>\u65b9\u5411\u6027\u4e0e\u4e94\u7ef4\u51fd\u6570</strong>\n   - \u8f90\u5c04\u5ea6\u662f\u4f4d\u7f6e\u548c\u65b9\u5411\u7684\u51fd\u6570\uff1a$L(\\mathbf{p}, \\omega)$ \u6216 $L(x, y, z, \\theta, \\phi)$\n   - \u8fd9\u662f\u4e00\u4e2a\u4e94\u7ef4\u51fd\u6570\uff083D\u4f4d\u7f6e + 2D\u65b9\u5411\uff09\n   - \u5149\u573a\uff08Light Field\uff09\uff1a\u56fa\u5b9a $z$\uff0c\u5f97\u52304D\u51fd\u6570 $L(x, y, \\theta, \\phi)$\n   - \u73af\u5883\u8d34\u56fe\uff1a\u56fa\u5b9a\u4f4d\u7f6e\uff0c\u5f97\u52302D\u51fd\u6570 $L(\\theta, \\phi)$\n   - \u5168\u5149\u51fd\u6570\uff08Plenoptic Function\uff09\uff1a$L(x, y, z, \\theta, \\phi, \\lambda, t)$ \u5305\u542b\u6ce2\u957f\u548c\u65f6\u95f4\n   - \u5149\u573a\u76f8\u673a\uff1a\u901a\u8fc7\u5fae\u900f\u955c\u9635\u5217\u6355\u6349 4D \u5149\u573a\u4fe1\u606f</p>\n</li>\n<li>\n<p><strong>\u4f20\u64ad\u4e0d\u53d8\u6027\uff08Radiance Invariance\uff09</strong>\n   \u5728\u771f\u7a7a\u6216\u5747\u5300\u4ecb\u8d28\u4e2d\u4f20\u64ad\u65f6\uff0c\u8f90\u5c04\u5ea6\u6cbf\u5149\u7ebf\u4fdd\u6301\u4e0d\u53d8\uff1a\n   $$L(\\mathbf{p}, \\omega) = L(\\mathbf{p} + t\\omega, \\omega), \\quad \\forall t &gt; 0$$\n<strong>\u8bc1\u660e\u601d\u8def</strong>\uff1a\u8003\u8651\u4e24\u4e2a\u5fae\u5206\u9762\u5143\u4e4b\u95f4\u7684\u80fd\u91cf\u4f20\u8f93</p>\n</li>\n</ol>\n<ul>\n<li>\u4ece\u9762\u51431\u53d1\u51fa\uff1a$d\\Phi_1 = L_1 \\, dA_1 \\cos\\theta_1 \\, d\\omega_1$</li>\n<li>\u5230\u8fbe\u9762\u51432\uff1a$d\\Phi_2 = L_2 \\, dA_2 \\cos\\theta_2 \\, d\\omega_2$</li>\n<li>\u7531\u4e8e $d\\omega_1 = \\frac{dA_2 \\cos\\theta_2}{r^2}$ \u548c $d\\omega_2 = \\frac{dA_1 \\cos\\theta_1}{r^2}$</li>\n<li>\u80fd\u91cf\u5b88\u6052\u8981\u6c42\uff1a$d\\Phi_1 = d\\Phi_2$\uff0c\u56e0\u6b64 $L_1 = L_2$</li>\n</ul>\n<p><strong>\u51e0\u4f55\u5149\u5b66\u542b\u4e49</strong>\uff1a</p>\n<ul>\n<li>\u5149\u7ebf\u662f\u8f90\u5c04\u5ea6\u7684\u7279\u5f81\u7ebf</li>\n<li>\u8fd9\u4e2a\u6027\u8d28\u662f\u5c04\u7ebf\u8ddf\u8e2a\u7b97\u6cd5\u7684\u7406\u8bba\u57fa\u7840</li>\n<li>\u5728\u4ecb\u8d28\u754c\u9762\u5904\u4f1a\u53d1\u751f\u53d8\u5316\uff08\u6298\u5c04\u5b9a\u5f8b\uff09</li>\n</ul>\n<ol start=\"3\">\n<li>\n<p><strong>\u7ebf\u6027\u53e0\u52a0\u6027</strong>\n   - \u591a\u4e2a\u5149\u6e90\u7684\u8d21\u732e\u53ef\u4ee5\u7ebf\u6027\u53e0\u52a0\uff1a$L_{total} = \\sum_i L_i$\n   - \u8fd9\u662f\u56e0\u4e3a\u5149\u5b50\u4e4b\u95f4\u4e0d\u76f8\u4e92\u4f5c\u7528\uff08\u5728\u7ebf\u6027\u5149\u5b66\u8303\u56f4\u5185\uff09\n   - \u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u72ec\u7acb\u8ba1\u7b97\u6bcf\u4e2a\u5149\u6e90\u7684\u8d21\u732e\n   - \u975e\u7ebf\u6027\u6548\u5e94\uff1a\u9ad8\u5f3a\u5ea6\u6fc0\u5149\u3001\u53cc\u5149\u5b50\u5438\u6536\u7b49\u7279\u6b8a\u60c5\u51b5\n   - \u6ce2\u52a8\u5149\u5b66\u6548\u5e94\uff1a\u5e72\u6d89\u3001\u884d\u5c04\u9700\u8981\u8003\u8651\u76f8\u4f4d</p>\n</li>\n<li>\n<p><strong>\u4e0e\u76f8\u673a\u54cd\u5e94\u7684\u5173\u7cfb</strong>\n   - \u76f8\u673a\u4f20\u611f\u5668\u7684\u54cd\u5e94\u6b63\u6bd4\u4e8e\u5165\u5c04\u8f90\u5c04\u5ea6\n   - \u50cf\u7d20\u503c $\\propto \\int_{\\text{pixel}} \\int_{\\text{aperture}} L \\cos\\theta \\, dA \\, d\\omega \\, dt$\n   - \u8fd9\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u8f90\u5c04\u5ea6\u662f\u6e32\u67d3\u7684\u6838\u5fc3\u91cf\n   - \u66dd\u5149\u65f6\u95f4\u79ef\u5206\uff1a$E_{sensor} = \\int_0^T L(t) \\, dt$\n   - \u666f\u6df1\u6548\u5e94\uff1a\u5b54\u5f84\u79ef\u5206\u4ea7\u751f\u6a21\u7cca\n   - HDR\u6210\u50cf\uff1a\u6269\u5c55\u8f90\u5c04\u5ea6\u52a8\u6001\u8303\u56f4</p>\n</li>\n<li>\n<p><strong>\u80fd\u91cf\u7ef4\u5ea6\u5206\u6790</strong>\n   - \u68c0\u67e5\u5355\u4f4d\u7684\u4e00\u81f4\u6027\uff1a$[L] = \\frac{[\\Phi]}{[A][\\omega]} = \\frac{W}{m^2 \\cdot sr}$\n   - \u79ef\u5206\u6062\u590d\u529f\u7387\uff1a$\\Phi = \\int_A \\int_{\\Omega} L \\cos\\theta \\, dA \\, d\\omega$\n   - \u5355\u4f4d\u7acb\u4f53\u89d2\u7684\u7269\u7406\u542b\u4e49\uff1a1 sr \u2248 65.5\u00b0\u7684\u5706\u9525\u89d2\n   - \u5168\u7403\u7acb\u4f53\u89d2\uff1a$4\\pi$ sr\uff0c\u534a\u7403 $2\\pi$ sr\n   - \u5c0f\u7acb\u4f53\u89d2\u8fd1\u4f3c\uff1a$\\omega \\approx \\frac{A}{r^2}$ \u5f53 $A \\ll r^2$</p>\n</li>\n<li>\n<p><strong>\u53c2\u4e0e\u4ecb\u8d28\u4e2d\u7684\u8870\u51cf</strong>\n   \u5728\u53c2\u4e0e\u4ecb\u8d28\uff08\u5982\u96fe\u3001\u70df\uff09\u4e2d\uff0c\u8f90\u5c04\u5ea6\u4f1a\u8870\u51cf\uff1a\n$$\\frac{dL}{ds} = -\\sigma_t L + \\sigma_s L_{scattered} + L_{emitted}$$\n\u5176\u4e2d $\\sigma_t$ \u662f\u6d88\u5149\u7cfb\u6570\uff0c$\\sigma_s$ \u662f\u6563\u5c04\u7cfb\u6570</p>\n</li>\n</ol>\n<p><strong>\u4f20\u8f93\u65b9\u7a0b\u7684\u89e3</strong>\uff1a\n$$L(s) = L(0) e^{-\\tau(s)} + \\int_0^s \\sigma_s L_{in}(s') e^{-\\tau(s,s')} ds'$$\n\u5176\u4e2d\u5149\u5b66\u539a\u5ea6 $\\tau(s) = \\int_0^s \\sigma_t(s') ds'$</p>\n<p><strong>\u76f8\u51fd\u6570</strong>\uff1a$p(\\omega_i \\to \\omega_o)$ \u63cf\u8ff0\u6563\u5c04\u65b9\u5411\u5206\u5e03</p>\n<ul>\n<li>Rayleigh\u6563\u5c04\uff1a\u5c0f\u7c92\u5b50\uff0c\u84dd\u5929\u6548\u5e94</li>\n<li>Mie\u6563\u5c04\uff1a\u5927\u7c92\u5b50\uff0c\u4e91\u96fe\u6548\u5e94</li>\n</ul>\n<h3 id=\"813\">8.1.3 \u7acb\u4f53\u89d2\u4e0e\u6295\u5f71\u7acb\u4f53\u89d2</h3>\n<p>\u7acb\u4f53\u89d2\u662f\u4e09\u7ef4\u7a7a\u95f4\u4e2d\u89d2\u5ea6\u7684\u63a8\u5e7f\uff0c\u7406\u89e3\u5b83\u5bf9\u4e8e\u6b63\u786e\u5904\u7406\u65b9\u5411\u79ef\u5206\u81f3\u5173\u91cd\u8981\u3002</p>\n<p><strong>\u7acb\u4f53\u89d2\u7684\u51e0\u4f55\u610f\u4e49</strong></p>\n<ul>\n<li>\u5b9a\u4e49\uff1a\u4ece\u539f\u70b9\u770b\u67d0\u4e2a\u8868\u9762\u5f20\u6210\u7684\"\u89d2\u5ea6\u5927\u5c0f\"</li>\n<li>\u5355\u4f4d\uff1a\u7403\u9762\u5ea6\uff08steradian, sr\uff09</li>\n<li>\u6574\u4e2a\u7403\u9762\u7684\u7acb\u4f53\u89d2\uff1a$4\\pi$ sr</li>\n<li>\u534a\u7403\u7684\u7acb\u4f53\u89d2\uff1a$2\\pi$ sr</li>\n<li>\u8ba1\u7b97\u516c\u5f0f\uff1a$\\omega = \\frac{A}{r^2}$\uff08\u7403\u9762\u4e0a\u9762\u79ef$A$\u9664\u4ee5\u534a\u5f84\u5e73\u65b9\uff09</li>\n<li>\u5e73\u9762\u89d2\u7c7b\u6bd4\uff1a2D\u4e2d\u5f27\u5ea6 $\\theta = \\frac{s}{r}$\uff0c3D\u4e2d\u7acb\u4f53\u89d2 $\\omega = \\frac{A}{r^2}$</li>\n<li>\u76f4\u89c2\u7406\u89e3\uff1a\u5706\u9525\u89d2 $\\omega = 2\\pi(1 - \\cos\\theta)$\uff0c\u5176\u4e2d $\\theta$ \u662f\u534a\u89d2</li>\n<li>\u5355\u4f4d\u7acb\u4f53\u89d2\u7684\u7269\u7406\u5c3a\u5ea6\uff1a1 sr \u2248 65.5\u00b0\u5706\u9525\u89d2\uff0c\u7ea6\u5360\u5168\u7403\u9762\u7684 $\\frac{1}{4\\pi} \\approx 8\\%$</li>\n</ul>\n<p><strong>\u7acb\u4f53\u89d2\u7684\u62d3\u6251\u7ed3\u6784</strong></p>\n<ul>\n<li>\u7403\u9762 $S^2$ \u662f\u4e8c\u7ef4\u6d41\u5f62\uff0c\u5c40\u90e8\u540c\u80da\u4e8e $\\mathbb{R}^2$</li>\n<li>\u53c2\u6570\u5316\u5947\u70b9\uff1a\u7403\u5750\u6807\u5728\u6781\u70b9\u5904\u9000\u5316\uff08$\\sin\\theta = 0$\uff09</li>\n<li>\u66ff\u4ee3\u53c2\u6570\u5316\uff1a\u7acb\u65b9\u4f53\u6620\u5c04\u3001\u516b\u9762\u4f53\u6620\u5c04\u907f\u514d\u5947\u70b9</li>\n<li>Gauss-Bonnet\u5b9a\u7406\uff1a$\\int_{S^2} K \\, dA = 4\\pi$\uff08$K=1/r^2$ \u662f\u9ad8\u65af\u66f2\u7387\uff09</li>\n</ul>\n<p><strong>\u7acb\u4f53\u89d2\u7684\u5fae\u5206\u5f62\u5f0f</strong>\n\u5728\u7403\u5750\u6807\u7cfb $(\\theta, \\phi)$ \u4e2d\uff1a\n$$d\\omega = \\sin\\theta \\, d\\theta \\, d\\phi$$\n\u63a8\u5bfc\uff1a\u7403\u9762\u4e0a\u7684\u5fae\u5206\u9762\u5143</p>\n<ul>\n<li>\u6cbf $\\theta$ \u65b9\u5411\uff1a$r \\, d\\theta$</li>\n<li>\u6cbf $\\phi$ \u65b9\u5411\uff1a$r \\sin\\theta \\, d\\phi$\uff08\u7eac\u5ea6\u5708\u534a\u5f84\u4e3a $r\\sin\\theta$\uff09</li>\n<li>\u9762\u79ef\uff1a$dA = r^2 \\sin\\theta \\, d\\theta \\, d\\phi$</li>\n<li>\u7acb\u4f53\u89d2\uff1a$d\\omega = \\frac{dA}{r^2} = \\sin\\theta \\, d\\theta \\, d\\phi$</li>\n</ul>\n<p><strong>\u5ea6\u91cf\u5f20\u91cf\u89c6\u89d2</strong>\n\u7403\u9762\u4e0a\u7684\u5ea6\u91cf\u5f20\u91cf\uff1a\n$$g = \\begin{pmatrix} 1 &amp; 0 \\ 0 &amp; \\sin^2\\theta \\end{pmatrix}$$\n\u9762\u79ef\u5143\u7d20\uff1a$dA = \\sqrt{\\det(g)} \\, d\\theta \\, d\\phi = \\sin\\theta \\, d\\theta \\, d\\phi$</p>\n<p><strong>\u7b1b\u5361\u5c14\u5750\u6807\u8868\u793a</strong>\uff1a\n\u5bf9\u4e8e\u65b9\u5411\u5411\u91cf $\\omega = (\\omega_x, \\omega_y, \\omega_z)$\uff1a</p>\n<ul>\n<li>$\\omega_x = \\sin\\theta\\cos\\phi$</li>\n<li>$\\omega_y = \\sin\\theta\\sin\\phi$  </li>\n<li>$\\omega_z = \\cos\\theta$</li>\n<li>\u7ea6\u675f\uff1a$\\omega_x^2 + \\omega_y^2 + \\omega_z^2 = 1$</li>\n</ul>\n<p><strong>\u5750\u6807\u8f6c\u6362\u7684\u6570\u503c\u7a33\u5b9a\u6027</strong>\uff1a</p>\n<ul>\n<li>\u907f\u514d $\\arccos$ \u7684\u6570\u503c\u8bef\u5dee\uff1a\u4f7f\u7528 $\\theta = \\text{atan2}(\\sqrt{\\omega_x^2 + \\omega_y^2}, \\omega_z)$</li>\n<li>\u5904\u7406 $\\phi$ \u7684\u5947\u70b9\uff1a\u5f53 $\\sin\\theta \\approx 0$ \u65f6\uff0c$\\phi$ \u4e0d\u786e\u5b9a</li>\n<li>\u56db\u5143\u6570\u8868\u793a\uff1a\u907f\u514d\u4e07\u5411\u9501\u95ee\u9898\uff0c\u7528\u4e8e\u65cb\u8f6c\u63d2\u503c</li>\n<li>\n<p>Rodrigues\u516c\u5f0f\uff1a\u65cb\u8f6c\u5411\u91cf $\\mathbf{v}$ \u7ed5\u8f74 $\\mathbf{k}$ \u89d2\u5ea6 $\\theta$\uff1a\n$$\\mathbf{v}_{rot} = \\mathbf{v}\\cos\\theta + (\\mathbf{k} \\times \\mathbf{v})\\sin\\theta + \\mathbf{k}(\\mathbf{k} \\cdot \\mathbf{v})(1-\\cos\\theta)$$\n<strong>\u534a\u7403\u79ef\u5206</strong>\n$$\\int_{\\Omega} d\\omega = \\int_0^{2\\pi} \\int_0^{\\pi/2} \\sin\\theta \\, d\\theta \\, d\\phi = 2\\pi \\int_0^{\\pi/2} \\sin\\theta \\, d\\theta = 2\\pi[-\\cos\\theta]_0^{\\pi/2} = 2\\pi$$\n<strong>\u5e38\u89c1\u79ef\u5206\u516c\u5f0f</strong>\uff1a</p>\n</li>\n<li>\n<p>\u5168\u7403\uff1a$\\int_{4\\pi} d\\omega = 4\\pi$</p>\n</li>\n<li>\u5706\u9525\uff1a$\\int_{\\theta_0} d\\omega = 2\\pi(1 - \\cos\\theta_0)$</li>\n<li>\u5c0f\u7acb\u4f53\u89d2\u8fd1\u4f3c\uff1a$\\Delta\\omega \\approx \\sin\\theta \\Delta\\theta \\Delta\\phi$</li>\n<li>\u7403\u51a0\uff08spherical cap\uff09\uff1a\u9ad8\u5ea6 $h$ \u7684\u7403\u51a0\u7acb\u4f53\u89d2 $\\omega = 2\\pi h/r$</li>\n<li>\u692d\u5706\u9525\uff1a\u9700\u8981\u692d\u5706\u79ef\u5206\uff0c\u65e0\u95ed\u5f0f\u89e3</li>\n<li>\u4efb\u610f\u591a\u8fb9\u5f62\uff1a\u4f7f\u7528 Girard's theorem\uff0c$\\omega = \\sum_i \\alpha_i - (n-2)\\pi$</li>\n</ul>\n<p><strong>\u7279\u6b8a\u51fd\u6570\u4e0e\u7acb\u4f53\u89d2</strong>\uff1a</p>\n<ul>\n<li>Legendre\u591a\u9879\u5f0f\u5c55\u5f00\uff1a$f(\\theta) = \\sum_{l=0}^{\\infty} a_l P_l(\\cos\\theta)$</li>\n<li>\u7403\u8c10\u51fd\u6570\uff1a$Y_l^m(\\theta, \\phi)$ \u6784\u6210 $L^2(S^2)$ \u7684\u6b63\u4ea4\u57fa</li>\n<li>Zonal harmonics\uff1a\u65cb\u8f6c\u5bf9\u79f0\u51fd\u6570 $f(\\theta) = \\sum_l a_l P_l(\\cos\\theta)$</li>\n<li>\u5feb\u901f\u7403\u8c10\u53d8\u6362\uff1a$O(N^2\\log N)$ \u7b97\u6cd5</li>\n</ul>\n<p><strong>\u6295\u5f71\u7acb\u4f53\u89d2\uff08Projected Solid Angle\uff09</strong>\n$$d\\omega^\\perp = \\cos\\theta \\, d\\omega = \\cos\\theta \\sin\\theta \\, d\\theta \\, d\\phi$$\n\u7269\u7406\u610f\u4e49\uff1a</p>\n<ul>\n<li>\u8003\u8651\u4e86\u8868\u9762\u6cd5\u7ebf\u4e0e\u5165\u5c04\u65b9\u5411\u7684\u5939\u89d2</li>\n<li>Lambert\u4f59\u5f26\u5b9a\u5f8b\u7684\u4f53\u73b0</li>\n<li>\u5782\u76f4\u5165\u5c04\u7684\u8d21\u732e\u6700\u5927\uff0c\u63a0\u5c04\u89d2\u8d21\u732e\u8d8b\u4e8e\u96f6</li>\n<li>\u51e0\u4f55\u89e3\u91ca\uff1a\u5728\u6cd5\u7ebf\u65b9\u5411\u6295\u5f71\u7684\u7acb\u4f53\u89d2</li>\n</ul>\n<p><strong>\u6295\u5f71\u7acb\u4f53\u89d2\u7684\u4e0d\u53d8\u91cf</strong>\uff1a</p>\n<ul>\n<li>\u5f62\u72b6\u56e0\u5b50\uff08Form Factor\uff09\u7684\u4e92\u6613\u6027\uff1a$F_{ij} A_i = F_{ji} A_j$</li>\n<li>Nusselt\u7c7b\u6bd4\uff1a\u6295\u5f71\u7acb\u4f53\u89d2 = \u534a\u7403\u4e0a\u7684\"\u6709\u6548\u9762\u79ef\"</li>\n<li>\u5b88\u6052\u5b9a\u5f8b\uff1a\u5c01\u95ed\u7cfb\u7edf\u4e2d $\\sum_j F_{ij} = 1$</li>\n</ul>\n<p><strong>\u5fae\u5206\u51e0\u4f55\u89c6\u89d2</strong>\uff1a</p>\n<ul>\n<li>\u6295\u5f71\u7b97\u5b50\uff1a$\\mathcal{P}_\\mathbf{n} = I - \\mathbf{n}\\mathbf{n}^T$</li>\n<li>\u7acb\u4f53\u89d2\u7684\u5916\u5fae\u5206\uff1a$d\\omega = \\frac{\\mathbf{r} \\cdot d\\mathbf{A}}{r^3}$</li>\n<li>Stokes\u5b9a\u7406\u5e94\u7528\uff1a$\\oint_{\\partial S} \\mathbf{v} \\cdot d\\mathbf{l} = \\int_S (\\nabla \\times \\mathbf{v}) \\cdot d\\mathbf{A}$</li>\n</ul>\n<p><strong>\u5e94\u7528\u573a\u666f</strong>\uff1a</p>\n<ul>\n<li>\u8f90\u7167\u5ea6\u8ba1\u7b97\uff1a$E = \\int_{\\Omega} L \\cos\\theta \\, d\\omega = \\int_{\\Omega} L \\, d\\omega^\\perp$</li>\n<li>\u5f62\u72b6\u56e0\u5b50\uff08Form Factor\uff09\u8ba1\u7b97</li>\n<li>\u534a\u7403\u91c7\u6837\u6743\u91cd</li>\n</ul>\n<p><strong>\u5173\u952e\u79ef\u5206\u7ed3\u679c</strong></p>\n<ol>\n<li>\u534a\u7403\u4e0a\u7684\u6295\u5f71\u7acb\u4f53\u89d2\u79ef\u5206\uff1a\n$$\\int_{\\Omega} \\cos\\theta \\, d\\omega = \\int_0^{2\\pi} \\int_0^{\\pi/2} \\cos\\theta \\sin\\theta \\, d\\theta \\, d\\phi = \\pi$$\n<strong>\u63a8\u5bfc\u8fc7\u7a0b</strong>\uff1a\n$$\\int_0^{\\pi/2} \\cos\\theta \\sin\\theta \\, d\\theta = \\int_0^{\\pi/2} \\frac{1}{2}\\sin(2\\theta) \\, d\\theta = \\frac{1}{2}$$\n<strong>\u51e0\u4f55\u610f\u4e49</strong>\uff1a\u534a\u7403\u5728\u5176\u5e95\u9762\u7684\u6295\u5f71\u9762\u79ef\u4e3a $\\pi r^2$\uff0c\u9664\u4ee5 $r^2$ \u5f97 $\\pi$</li>\n</ol>\n<p><strong>\u53d8\u5206\u539f\u7406</strong>\uff1a\u6700\u5927\u5316 $\\int f(\\theta) \\cos\\theta \\, d\\omega$ \u7684\u5206\u5e03\u662f $\\delta(\\theta)$\uff08\u6cd5\u7ebf\u65b9\u5411\uff09</p>\n<ol start=\"2\">\n<li>\u4f59\u5f26\u7684$n$\u6b21\u65b9\u79ef\u5206\uff08\u7528\u4e8eBRDF\u5206\u6790\uff09\uff1a\n$$\\int_{\\Omega} \\cos^n\\theta \\, d\\omega = \\frac{2\\pi}{n+1}$$\n<strong>\u63a8\u5bfc</strong>\uff1a\u4f7f\u7528Beta\u51fd\u6570\n$$\\int_0^{\\pi/2} \\cos^n\\theta \\sin\\theta \\, d\\theta = \\int_0^1 u^n \\, du = \\frac{1}{n+1}$$\n<strong>\u7279\u4f8b</strong>\uff1a</li>\n</ol>\n<ul>\n<li>$n=0$: $2\\pi$ \uff08\u534a\u7403\u7acb\u4f53\u89d2\uff09</li>\n<li>$n=1$: $\\pi$ \uff08\u6295\u5f71\u7acb\u4f53\u89d2\uff09</li>\n<li>$n=2$: $\\frac{2\\pi}{3}$ \uff08Phong\u6a21\u578b\u5e38\u7528\uff09</li>\n<li>$n \\to \\infty$: $0$ \uff08\u5b8c\u7f8e\u955c\u9762\uff09</li>\n</ul>\n<p><strong>\u4e00\u822c\u5316</strong>\uff1a\n$$\\int_{\\Omega} \\cos^m\\theta \\sin^n\\theta \\, d\\omega = \\frac{\\pi B(\\frac{m+1}{2}, \\frac{n+1}{2})}{B(\\frac{1}{2}, \\frac{1}{2})}$$\n\u5176\u4e2d $B$ \u662fBeta\u51fd\u6570</p>\n<ol start=\"3\">\n<li>\u7acb\u4f53\u89d2\u4e0e\u9762\u79ef\u7684\u8f6c\u6362\uff1a\n$$d\\omega = \\frac{\\cos\\theta' \\, dA'}{||\\mathbf{p} - \\mathbf{p}'||^2}$$\n\u5176\u4e2d $\\theta'$ \u662f $\\mathbf{p}'$ \u5904\u8868\u9762\u6cd5\u7ebf\u4e0e\u8fde\u7ebf\u7684\u5939\u89d2</li>\n</ol>\n<p><strong>\u53cc\u5411\u5f62\u5f0f</strong>\uff1a\n$$dA \\, d\\omega = \\frac{\\cos\\theta \\cos\\theta' \\, dA \\, dA'}{||\\mathbf{p} - \\mathbf{p}'||^2}$$\n<strong>\u51e0\u4f55\u56e0\u5b50\u7684\u5b8c\u6574\u5f62\u5f0f</strong>\uff1a\n$$G(\\mathbf{p} \\leftrightarrow \\mathbf{p}') = \\frac{\\cos\\theta \\cos\\theta'}{||\\mathbf{p} - \\mathbf{p}'||^2} V(\\mathbf{p} \\leftrightarrow \\mathbf{p}')$$\n<strong>\u9000\u5316\u60c5\u51b5\u5904\u7406</strong>\uff1a</p>\n<ul>\n<li>$\\theta' &gt; \\pi/2$\uff1a\u80cc\u5411\uff0c$G = 0$</li>\n<li>$||\\mathbf{p} - \\mathbf{p}'|| \\to 0$\uff1a\u9700\u8981\u6b63\u5219\u5316</li>\n<li>\u5171\u9762\u60c5\u51b5\uff1a$\\cos\\theta = 0$ \u6216 $\\cos\\theta' = 0$</li>\n</ul>\n<p><strong>\u5b9e\u9645\u5e94\u7528</strong></p>\n<ul>\n<li><strong>\u8f90\u7167\u5ea6\u8ba1\u7b97</strong>\uff1a$E = \\int_{\\Omega} L_i \\cos\\theta \\, d\\omega$</li>\n<li><strong>\u73af\u5883\u8d34\u56fe\u91c7\u6837</strong>\uff1a\u9700\u8981\u8003\u8651 $\\sin\\theta$ \u9879\u8fdb\u884c\u91cd\u8981\u6027\u91c7\u6837</li>\n<li>\u7eac\u5ea6-\u7ecf\u5ea6\u6620\u5c04\uff1a$(u,v) \\to (\\theta,\\phi) = (\\pi v, 2\\pi u)$</li>\n<li>PDF\u8f6c\u6362\uff1a$p(\\theta,\\phi) = \\frac{p(u,v)}{2\\pi^2 \\sin\\theta}$</li>\n<li>\u7acb\u65b9\u4f53\u8d34\u56fe\uff1a\u907f\u514d\u6781\u70b9\u5947\u5f02\u6027\uff0c6\u4e2a\u9762\u5747\u5300\u91c7\u6837</li>\n<li>\u516b\u9762\u4f53\u6620\u5c04\uff1a\u66f4\u5747\u5300\u7684\u91c7\u6837\u5206\u5e03</li>\n<li><strong>\u9762\u5149\u6e90\u91c7\u6837</strong>\uff1a\u4ece\u7acb\u4f53\u89d2\u57df\u8f6c\u6362\u5230\u9762\u79ef\u57df\u8fdb\u884c\u91c7\u6837</li>\n<li>\u5747\u5300\u91c7\u6837\u9762\u79ef\uff1a$p_A = 1/A_{light}$</li>\n<li>\u8f6c\u6362\u5230\u7acb\u4f53\u89d2\uff1a$p_\\omega = p_A \\cdot \\frac{r^2}{\\cos\\theta'}$</li>\n<li>\u7403\u9762\u5149\u6e90\uff1a\u76f4\u63a5\u5728\u7acb\u4f53\u89d2\u57df\u91c7\u6837\u66f4\u9ad8\u6548</li>\n<li>\u7ebf\u6027\u53d8\u6362\u5149\u6e90\uff08Linearly Transformed Cosines\uff09\uff1a\u89e3\u6790\u79ef\u5206</li>\n<li><strong>\u534a\u7403\u5747\u5300\u91c7\u6837</strong>\uff1a</li>\n<li>\u968f\u673a\u53d8\u91cf\uff1a$(\\xi_1, \\xi_2) \\in [0,1]^2$</li>\n<li>\u8f6c\u6362\uff1a$\\theta = \\arccos(\\xi_1)$, $\\phi = 2\\pi\\xi_2$</li>\n<li>PDF: $p(\\omega) = 1/(2\\pi)$</li>\n<li><strong>\u4f59\u5f26\u52a0\u6743\u91c7\u6837</strong>\uff1a</li>\n<li>\u8f6c\u6362\uff1a$\\theta = \\arcsin(\\sqrt{\\xi_1})$, $\\phi = 2\\pi\\xi_2$</li>\n<li>PDF: $p(\\omega) = \\cos\\theta/\\pi$</li>\n<li>Malley's method\uff1a\u5728\u5355\u4f4d\u5706\u76d8\u91c7\u6837\u540e\u6295\u5f71\u5230\u534a\u7403</li>\n</ul>\n<p><strong>\u9ad8\u7ea7\u91c7\u6837\u6280\u672f</strong>\uff1a</p>\n<ul>\n<li><strong>\u7403\u9762\u5206\u5c42\u91c7\u6837</strong>\uff1a\u5c06\u7403\u9762\u5212\u5206\u4e3a\u7b49\u9762\u79ef\u533a\u57df</li>\n<li><strong>\u87ba\u65cb\u91c7\u6837</strong>\uff1aFibonacci\u87ba\u65cb\u63d0\u4f9b\u51c6\u5747\u5300\u5206\u5e03</li>\n<li><strong>\u7403\u9762Voronoi\u56fe</strong>\uff1a\u6700\u4f18\u4f20\u8f93\u7406\u8bba\u5e94\u7528</li>\n<li><strong>\u84dd\u566a\u58f0\u91c7\u6837</strong>\uff1a\u6539\u5584\u89c6\u89c9\u8d28\u91cf\uff0c\u51cf\u5c11\u805a\u96c6</li>\n</ul>\n<h3 id=\"814-brdf\">8.1.4 BRDF\u4e0e\u53cd\u5c04\u65b9\u7a0b</h3>\n<p>\u53cc\u5411\u53cd\u5c04\u5206\u5e03\u51fd\u6570\uff08Bidirectional Reflectance Distribution Function, BRDF\uff09\u662f\u63cf\u8ff0\u8868\u9762\u53cd\u5c04\u7279\u6027\u7684\u6838\u5fc3\u6982\u5ff5\u3002</p>\n<p><strong>BRDF\u7684\u5b9a\u4e49</strong>\n$$f_r(\\omega_i \\to \\omega_o) = \\frac{dL_o(\\omega_o)}{dE(\\omega_i)} = \\frac{dL_o(\\omega_o)}{L_i(\\omega_i) \\cos\\theta_i \\, d\\omega_i}$$\n\u7269\u7406\u89e3\u91ca\uff1a</p>\n<ul>\n<li>\u5165\u5c04\u8f90\u7167\u5ea6\u5f15\u8d77\u7684\u51fa\u5c04\u8f90\u5c04\u5ea6\u53d8\u5316\u7387</li>\n<li>\u5355\u4f4d\uff1a$1/sr$\uff08\u56e0\u4e3a $[L]/[E] = [W/(m^2 \\cdot sr)]/[W/m^2] = 1/sr$\uff09</li>\n<li>\u63cf\u8ff0\u4e86\u6750\u8d28\u7684\u53cd\u5c04\u7279\u6027\uff0c\u4e0e\u51e0\u4f55\u5f62\u72b6\u65e0\u5173</li>\n<li>\u5c40\u90e8\u7ebf\u6027\u5047\u8bbe\uff1a\u8f93\u51fa\u6b63\u6bd4\u4e8e\u8f93\u5165\uff08\u5728\u7ebf\u6027\u5149\u5b66\u8303\u56f4\u5185\uff09</li>\n</ul>\n<p><strong>\u5fae\u89c2\u89e3\u91ca</strong>\uff1a</p>\n<ul>\n<li>BRDF\u63cf\u8ff0\u5927\u91cf\u5fae\u89c2\u4ea4\u4e92\u7684\u7edf\u8ba1\u5e73\u5747</li>\n<li>\u5fae\u8868\u9762\u6a21\u578b\u63d0\u4f9b\u7269\u7406\u57fa\u7840</li>\n<li>\u6ce2\u957f\u4f9d\u8d56\u6027\uff1a$f_r(\\omega_i \\to \\omega_o, \\lambda)$</li>\n<li>\u7a7a\u95f4\u53d8\u5316\uff1aSpatially Varying BRDF (SVBRDF): $f_r(\\mathbf{x}, \\omega_i \\to \\omega_o)$</li>\n</ul>\n<p><strong>\u6563\u5c04\u7406\u8bba\u89c6\u89d2</strong>\uff1a</p>\n<ul>\n<li>\u5149\u5b50\u4e0e\u8868\u9762\u7684\u6563\u5c04\u622a\u9762\uff1a$\\sigma(\\omega_i \\to \\omega_o)$</li>\n<li>BRDF\u4e0e\u6563\u5c04\u622a\u9762\u7684\u5173\u7cfb\uff1a$f_r = \\frac{\\sigma}{\\cos\\theta_i}$</li>\n<li>\u91cf\u5b50\u529b\u5b66\u89e3\u91ca\uff1a\u7535\u5b50\u8dc3\u8fc1\u548c\u5149\u5b50\u91cd\u65b0\u53d1\u5c04</li>\n</ul>\n<p><strong>\u4e00\u822c\u5316\u5230BSDF</strong>\uff1a</p>\n<ul>\n<li>BSDF = BRDF + BTDF\uff08\u53cc\u5411\u6563\u5c04\u5206\u5e03\u51fd\u6570\uff09</li>\n<li>BSSRDF\uff1a\u6b21\u8868\u9762\u6563\u5c04\uff0c$S(\\mathbf{x}_i, \\omega_i \\to \\mathbf{x}_o, \\omega_o)$</li>\n<li>\u5404\u5411\u5f02\u6027\uff1a$f_r(\\theta_i, \\phi_i \\to \\theta_o, \\phi_o)$ \u9700\u8981\u5b8c\u6574\u76844D\u51fd\u6570</li>\n</ul>\n<p><strong>BRDF\u7684\u57fa\u672c\u6027\u8d28</strong></p>\n<ol>\n<li>\n<p><strong>\u975e\u8d1f\u6027</strong>\uff1a$f_r(\\omega_i \\to \\omega_o) \\geq 0$\n   - \u7269\u7406\u610f\u4e49\uff1a\u80fd\u91cf\u4e0d\u80fd\u4e3a\u8d1f\n   - \u6570\u5b66\u7ed3\u679c\uff1a\u6b63\u5b9a\u7b97\u5b50</p>\n</li>\n<li>\n<p><strong>Helmholtz\u4e92\u6613\u6027\uff08Reciprocity\uff09</strong>\uff1a\n$$f_r(\\omega_i \\to \\omega_o) = f_r(\\omega_o \\to \\omega_i)$$</p>\n</li>\n</ol>\n<ul>\n<li>\u7269\u7406\u57fa\u7840\uff1a\u65f6\u95f4\u53cd\u6f14\u5bf9\u79f0\u6027</li>\n<li>\u5b9e\u9645\u610f\u4e49\uff1a\u5149\u8def\u53ef\u9006</li>\n<li>\u5e94\u7528\uff1a\u53cc\u5411\u8def\u5f84\u8ffd\u8e2a\u4e2d\u8def\u5f84\u6743\u91cd\u8ba1\u7b97</li>\n<li>\u6ce8\u610f\uff1a\u78c1\u5149\u6548\u5e94\u4e0b\u4e0d\u6210\u7acb\uff08\u975e\u4e92\u6613\u6750\u6599\uff09</li>\n<li>\u5b9e\u9a8c\u9a8c\u8bc1\uff1a\u4f7f\u7528\u6d4b\u89d2\u5149\u5ea6\u8ba1\u4ea4\u6362\u5165\u5c04\u548c\u89c2\u5bdf\u65b9\u5411</li>\n</ul>\n<ol start=\"3\">\n<li><strong>\u80fd\u91cf\u5b88\u6052\uff08Energy Conservation\uff09</strong>\uff1a\n$$\\rho(\\omega_i) = \\int_{\\Omega^+} f_r(\\omega_i \\to \\omega_o) \\cos\\theta_o \\, d\\omega_o \\leq 1$$</li>\n</ol>\n<ul>\n<li>\u53cd\u5c04\u7684\u80fd\u91cf\u4e0d\u80fd\u8d85\u8fc7\u5165\u5c04\u80fd\u91cf</li>\n<li>\u7b49\u53f7\u6210\u7acb\uff1a\u5b8c\u7f8e\u53cd\u5c04\uff08\u5982\u7406\u60f3\u955c\u9762\uff09</li>\n<li>\u5c0f\u4e8e1\uff1a\u90e8\u5206\u80fd\u91cf\u88ab\u5438\u6536</li>\n<li>\u65b9\u5411\u534a\u7403\u53cd\u5c04\u7387\uff1a$\\rho(\\omega_i)$ \u4f9d\u8d56\u4e8e\u5165\u5c04\u65b9\u5411</li>\n<li>\u534a\u7403-\u534a\u7403\u53cd\u5c04\u7387\uff1a$\\bar{\\rho} = \\frac{1}{\\pi}\\int_{\\Omega^+} \\rho(\\omega_i) \\cos\\theta_i \\, d\\omega_i$</li>\n</ul>\n<p><strong>\u767d\u7089\u6d4b\u8bd5</strong>\uff1a\n   \u5728\u5747\u5300\u5165\u5c04\u7167\u660e\u4e0b\uff0c\u51fa\u5c04\u8f90\u5c04\u5ea6\u5e94\u7b49\u4e8e\u5165\u5c04\u8f90\u5c04\u5ea6\uff1a\n$$L_o = \\int_{\\Omega^+} f_r \\cdot L_i \\cos\\theta_i \\, d\\omega_i = L_i \\int_{\\Omega^+} f_r \\cos\\theta_i \\, d\\omega_i \\leq L_i$$\n<strong>\u5e7f\u4e49\u4e92\u6613\u6027</strong>\uff1a\n$$\\rho(\\omega_o) = \\int_{\\Omega^+} f_r(\\omega_i \\to \\omega_o) \\cos\\theta_i \\, d\\omega_i$$\n\u7531\u4e8eHelmholtz\u4e92\u6613\u6027\uff0c$\\rho(\\omega_o) = \\rho(\\omega_i)$ \u5f53\u4ea4\u6362\u89d2\u8272</p>\n<ol start=\"4\">\n<li>\n<p><strong>\u7ebf\u6027\u6027</strong>\uff1a\n   - BRDF\u5bf9\u5165\u5c04\u5149\u5f3a\u5ea6\u662f\u7ebf\u6027\u7684\n   - \u5141\u8bb8\u53e0\u52a0\u539f\u7406\u7684\u5e94\u7528\n   - \u591a\u5149\u6e90\uff1a$L_o = \\sum_k \\int f_r L_{i,k} \\cos\\theta_i \\, d\\omega_i$\n   - \u5085\u7acb\u53f6\u5206\u89e3\uff1a\u53ef\u4ee5\u5728\u9891\u57df\u5206\u6790BRDF</p>\n</li>\n<li>\n<p><strong>\u5404\u5411\u540c\u6027 vs \u5404\u5411\u5f02\u6027</strong>\uff1a\n   - \u5404\u5411\u540c\u6027\uff1aBRDF\u4e0d\u4f9d\u8d56\u4e8e\u65cb\u8f6c\u89d2 $\\phi$</p>\n<ul>\n<li>\u7b80\u5316\uff1a$f_r(\\theta_i, \\theta_o, |\\phi_i - \\phi_o|)$</li>\n<li>\u53c2\u6570\u5316\uff1a3D\u51fd\u6570\u800c\u975e4D</li>\n<li>\u5404\u5411\u5f02\u6027\uff1a\u5982\u62c9\u4e1d\u91d1\u5c5e\u3001\u7ec7\u7269\u3001\u6728\u6750\u7eb9\u7406</li>\n<li>Ward\u6a21\u578b\uff1a\u692d\u5706\u9ad8\u65af\u5206\u5e03</li>\n<li>\u5207\u7ebf\u7a7a\u95f4\u53c2\u6570\u5316\uff1a\u4f7f\u7528\u5c40\u90e8\u5750\u6807\u7cfb</li>\n</ul>\n</li>\n<li>\n<p><strong>\u6b63\u5b9a\u6027</strong>\uff1a\n   - \u4f5c\u4e3a\u7b97\u5b50\uff0cBRDF\u5fc5\u987b\u662f\u6b63\u5b9a\u7684\n   - \u4fdd\u8bc1\u79ef\u5206\u65b9\u7a0b\u7684\u89e3\u5b58\u5728\u4e14\u552f\u4e00</p>\n</li>\n</ol>\n<p><strong>\u5e38\u89c1BRDF\u6a21\u578b</strong></p>\n<ol>\n<li><strong>Lambertian\uff08\u6f2b\u53cd\u5c04\uff09</strong>\uff1a\n$$f_r = \\frac{\\rho}{\\pi}$$</li>\n</ol>\n<ul>\n<li>$\\rho$\uff1a\u53cd\u5c04\u7387\uff08albedo\uff09\uff0c$0 \\leq \\rho \\leq 1$</li>\n<li>\u5404\u5411\u540c\u6027\uff0c\u4e0e\u65b9\u5411\u65e0\u5173</li>\n<li>\u80fd\u91cf\u5b88\u6052\u9a8c\u8bc1\uff1a$\\int_{\\Omega} \\frac{\\rho}{\\pi} \\cos\\theta \\, d\\omega = \\rho$</li>\n<li>\u5178\u578b\u6750\u8d28\uff1a\u77f3\u818f\u3001\u7c97\u7cd9\u7eb8\u5f20\u3001\u672a\u629b\u5149\u7684\u77f3\u5934</li>\n<li>\u4e3a\u4ec0\u4e48\u9664\u4ee5$\\pi$\uff1a\u4fdd\u8bc1 $\\int \\cos\\theta \\, d\\omega = \\pi$ \u540e\u603b\u53cd\u5c04\u7387\u4e3a $\\rho$</li>\n<li>\u7269\u7406\u57fa\u7840\uff1a\u5b8c\u5168\u7c97\u7cd9\u8868\u9762\uff0c\u5fae\u8868\u9762\u6cd5\u7ebf\u5747\u5300\u5206\u5e03</li>\n<li>\u5c40\u9650\u6027\uff1a\u771f\u5b9e\u4e16\u754c\u4e2d\u6ca1\u6709\u5b8c\u7f8e\u7684Lambertian\u8868\u9762</li>\n</ul>\n<ol start=\"2\">\n<li><strong>\u7406\u60f3\u955c\u9762\u53cd\u5c04</strong>\uff1a\n$$f_r(\\omega_i \\to \\omega_o) = \\frac{\\delta(\\omega_i - R(\\omega_o))}{\\cos\\theta_i}$$</li>\n</ol>\n<ul>\n<li>$R(\\omega_o)$\uff1a\u53cd\u5c04\u65b9\u5411 $R(\\omega_o) = 2(\\mathbf{n} \\cdot \\omega_o)\\mathbf{n} - \\omega_o$</li>\n<li>\u4f7f\u7528Dirac delta\u51fd\u6570\u8868\u793a</li>\n<li>\u79ef\u5206\u540e\uff1a$L_o(\\omega_o) = L_i(R(\\omega_o))$</li>\n<li>\u5b9e\u9645\u5b9e\u73b0\uff1a\u663e\u5f0f\u8ddf\u8e2a\u955c\u9762\u53cd\u5c04\uff0c\u800c\u975e\u91c7\u6837</li>\n<li>Fresnel\u9879\uff1a$F(\\omega_i, \\mathbf{n})$ \u63cf\u8ff0\u53cd\u5c04\u6bd4\u4f8b</li>\n<li>\u5b8c\u6574\u5f62\u5f0f\uff1a$f_r = \\frac{F(\\omega_i, \\mathbf{n})\\delta(\\omega_i - R(\\omega_o))}{\\cos\\theta_i}$</li>\n</ul>\n<ol start=\"3\">\n<li><strong>Phong\u6a21\u578b</strong>\uff08\u7ecf\u9a8c\u6a21\u578b\uff09\uff1a\n$$f_r = \\frac{k_d}{\\pi} + k_s \\frac{n+2}{2\\pi} \\cos^n\\alpha$$</li>\n</ol>\n<ul>\n<li>$\\alpha$\uff1a\u53cd\u5c04\u65b9\u5411\u4e0e\u89c6\u7ebf\u65b9\u5411\u7684\u5939\u89d2</li>\n<li>$n$\uff1a\u5149\u6cfd\u5ea6\u6307\u6570\uff08\u5178\u578b\u503c\uff1a5-1000\uff09</li>\n<li>\u6ce8\u610f\uff1a\u4e0d\u6ee1\u8db3\u80fd\u91cf\u5b88\u6052</li>\n<li>\u4fee\u6b63\u7684Phong\uff1a\u4f7f\u7528\u534a\u5411\u91cf $\\mathbf{h}$ \u4ee3\u66ff\u53cd\u5c04\u5411\u91cf</li>\n<li>\u5f52\u4e00\u5316\u56e0\u5b50 $\\frac{n+2}{2\\pi}$ \u4fdd\u8bc1\u79ef\u5206\u4e3a1</li>\n</ul>\n<p><strong>Blinn-Phong\u6a21\u578b</strong>\uff1a\n$$f_r = \\frac{k_d}{\\pi} + k_s \\frac{n+8}{8\\pi} (\\mathbf{n} \\cdot \\mathbf{h})^n$$</p>\n<ul>\n<li>\u534a\u5411\u91cf\uff1a$\\mathbf{h} = \\frac{\\omega_i + \\omega_o}{||\\omega_i + \\omega_o||}$</li>\n<li>\u66f4\u7269\u7406\u6b63\u786e\uff0c\u8ba1\u7b97\u66f4\u9ad8\u6548</li>\n<li>\u4e0e\u5fae\u8868\u9762\u6a21\u578b\u7684\u8054\u7cfb\uff1a$D(\\mathbf{h}) \\propto (\\mathbf{n} \\cdot \\mathbf{h})^n$</li>\n</ul>\n<ol start=\"4\">\n<li><strong>\u5fae\u8868\u9762\u6a21\u578b\uff08Microfacet\uff09</strong>\uff1a\n$$f_r = \\frac{D(\\mathbf{h}) G(\\omega_i, \\omega_o) F(\\omega_i, \\mathbf{h})}{4 \\cos\\theta_i \\cos\\theta_o}$$</li>\n</ol>\n<ul>\n<li>$D$\uff1a\u6cd5\u7ebf\u5206\u5e03\u51fd\u6570\uff08\u5982GGX\uff09</li>\n<li>$G$\uff1a\u51e0\u4f55\u906e\u853d\u51fd\u6570</li>\n<li>$F$\uff1aFresnel\u9879</li>\n<li>$\\mathbf{h}$\uff1a\u534a\u5411\u91cf $\\mathbf{h} = \\frac{\\omega_i + \\omega_o}{||\\omega_i + \\omega_o||}$</li>\n</ul>\n<p><strong>\u6cd5\u7ebf\u5206\u5e03\u51fd\u6570$D$</strong>\uff1a</p>\n<ul>\n<li>GGX/Trowbridge-Reitz: $D(\\mathbf{h}) = \\frac{\\alpha^2}{\\pi((\\mathbf{n} \\cdot \\mathbf{h})^2(\\alpha^2 - 1) + 1)^2}$<ul>\n<li>\u957f\u5c3e\u5206\u5e03\uff0c\u66f4\u771f\u5b9e\u7684\u9ad8\u5149</li>\n<li>\u53c2\u6570\u8f6c\u6362\uff1a$\\alpha = \\text{roughness}^2$</li>\n</ul>\n</li>\n<li>Beckmann: $D(\\mathbf{h}) = \\frac{1}{\\pi\\alpha^2\\cos^4\\theta_h} e^{-\\frac{\\tan^2\\theta_h}{\\alpha^2}}$<ul>\n<li>\u57fa\u4e8e\u9ad8\u65af\u7edf\u8ba1</li>\n<li>\u8ba1\u7b97\u66f4\u590d\u6742\uff0c\u4f46\u7269\u7406\u57fa\u7840\u6e05\u6670</li>\n</ul>\n</li>\n<li>$\\alpha$\uff1a\u7c97\u7cd9\u5ea6\u53c2\u6570</li>\n</ul>\n<p><strong>\u51e0\u4f55\u906e\u853d\u51fd\u6570$G$</strong>\uff1a</p>\n<ul>\n<li>Smith G\u51fd\u6570\uff1a$G(\\omega_i, \\omega_o) = G_1(\\omega_i) G_1(\\omega_o)$</li>\n<li>$G_1$\u7684GGX\u5f62\u5f0f\uff1a$G_1(\\omega) = \\frac{2(\\mathbf{n} \\cdot \\omega)}{(\\mathbf{n} \\cdot \\omega) + \\sqrt{\\alpha^2 + (1-\\alpha^2)(\\mathbf{n} \\cdot \\omega)^2}}$</li>\n<li>\u9ad8\u5ea6\u76f8\u5173\u5f62\u5f0f\uff1a\u8003\u8651\u906e\u853d-\u9634\u5f71\u76f8\u5173\u6027</li>\n</ul>\n<p><strong>Fresnel\u9879$F$</strong>\uff1a</p>\n<ul>\n<li>Schlick\u8fd1\u4f3c\uff1a$F(\\omega, \\mathbf{h}) = F_0 + (1-F_0)(1-\\omega \\cdot \\mathbf{h})^5$</li>\n<li>$F_0$\uff1a\u5782\u76f4\u5165\u5c04\u65f6\u7684\u53cd\u5c04\u7387</li>\n<li>\u5b8c\u6574Fresnel\u65b9\u7a0b\uff1a\u9700\u8981\u590d\u6298\u5c04\u7387</li>\n</ul>\n<p><strong>\u4e3a\u4ec0\u4e48\u9664\u4ee54</strong>\uff1a</p>\n<ul>\n<li>\u6765\u81ea\u96c5\u53ef\u6bd4\u884c\u5217\u5f0f\u7684\u8f6c\u6362</li>\n<li>$\\frac{\\partial \\omega_h}{\\partial \\omega_o} = \\frac{1}{4(\\omega_i \\cdot \\mathbf{h})}$</li>\n<li>\u4fdd\u8bc1\u4ece\u534a\u5411\u91cf\u5206\u5e03\u5230BRDF\u7684\u6b63\u786e\u6620\u5c04</li>\n</ul>\n<p><strong>\u53cd\u5c04\u65b9\u7a0b\uff08Reflection Equation\uff09</strong>\n$$L_o(\\mathbf{p}, \\omega_o) = L_e(\\mathbf{p}, \\omega_o) + \\int_{\\Omega^+} f_r(\\mathbf{p}, \\omega_i \\to \\omega_o) L_i(\\mathbf{p}, \\omega_i) \\cos\\theta_i \\, d\\omega_i$$\n\u5404\u9879\u542b\u4e49\uff1a</p>\n<ul>\n<li>$L_e$\uff1a\u81ea\u53d1\u5149\u9879\uff08emission\uff09</li>\n<li>$L_i$\uff1a\u5165\u5c04\u8f90\u5c04\u5ea6</li>\n<li>$\\cos\\theta_i$\uff1aLambert\u4f59\u5f26\u9879\uff0c\u51e0\u4f55\u56e0\u5b50</li>\n<li>\u79ef\u5206\u57df $\\Omega^+$\uff1a\u4e0a\u534a\u7403</li>\n</ul>\n<p><strong>\u5206\u5c42\u6750\u8d28\u6a21\u578b</strong>\uff1a</p>\n<ul>\n<li>\u6f2b\u53cd\u5c04\u5c42 + \u955c\u9762\u5c42\uff1a$f_r = f_{diffuse} + f_{specular}$</li>\n<li>\u80fd\u91cf\u5206\u914d\uff1a\u4f7f\u7528Fresnel\u9879\u8c03\u8282</li>\n<li>Disney BRDF\uff1a\u57fa\u4e8e\u827a\u672f\u5bb6\u53cb\u597d\u7684\u53c2\u6570</li>\n<li>\u5206\u5c42\u6a21\u578b\u7684\u4e92\u6613\u6027\uff1a\u6bcf\u5c42\u5355\u72ec\u6ee1\u8db3</li>\n</ul>\n<p><strong>BRDF\u7684\u6d4b\u91cf\u4e0e\u5b58\u50a8</strong></p>\n<ul>\n<li>\u6d4b\u91cf\u8bbe\u5907\uff1a\u6d4b\u89d2\u5149\u5ea6\u8ba1\uff08gonioreflectometer\uff09</li>\n<li>\u673a\u68b0\u81c2\u7cfb\u7edf\uff1a\u7cbe\u786e\u63a7\u5236\u5165\u5c04\u548c\u89c2\u5bdf\u89d2\u5ea6</li>\n<li>\u56fe\u50cf\u57fa\u7684\u6d4b\u91cf\uff1a\u4f7f\u7528\u76f8\u673a\u548c\u7403\u9762\u5149\u6e90</li>\n<li>\u65f6\u95f4\u6210\u672c\uff1a\u5b8c\u6574\u6d4b\u91cf\u4e00\u4e2a\u6750\u8d28\u9700\u8981\u6570\u5c0f\u65f6</li>\n<li>\u5b58\u50a8\u6311\u6218\uff1a4D\u51fd\u6570\uff082D\u5165\u5c04 + 2D\u51fa\u5c04\uff09</li>\n<li>\u79bb\u6563\u5316\uff1a$90 \\times 90 \\times 180 \\times 360$ \u7f51\u683c</li>\n<li>\u5185\u5b58\u9700\u6c42\uff1a\u6bcf\u4e2a\u6750\u8d28\u7ea6100MB</li>\n<li>\u538b\u7f29\u65b9\u6cd5\uff1a</li>\n<li>\u7403\u8c10\u51fd\u6570\uff1a$f_r \\approx \\sum_{l,m} a_{lm} Y_l^m$</li>\n<li>\u5c0f\u6ce2\u5206\u89e3\uff1a\u591a\u5206\u8fa8\u7387\u8868\u793a</li>\n<li>\u56e0\u5b50\u5206\u89e3\uff1a$f_r \\approx \\sum_k u_k(\\omega_i) v_k(\\omega_o)$</li>\n<li>\u795e\u7ecf\u7f51\u7edc\uff1a\u5b66\u4e60\u538b\u7f29\u8868\u793a</li>\n<li>\u6570\u636e\u5e93\uff1a</li>\n<li>MERL BRDF\uff1a100\u79cd\u6750\u8d28\uff0c\u5404\u5411\u540c\u6027</li>\n<li>UTIA BTF\uff1a\u5305\u542b\u7a7a\u95f4\u53d8\u5316</li>\n<li>RGL BRDF\uff1a\u5305\u542b\u5404\u5411\u5f02\u6027\u6750\u6599</li>\n</ul>\n<p><strong>BRDF\u7684\u672a\u6765\u7814\u7a76\u65b9\u5411</strong>\uff1a</p>\n<ul>\n<li>\u6ce2\u52a8\u5149\u5b66BRDF\uff1a\u8003\u8651\u5e72\u6d89\u548c\u884d\u5c04</li>\n<li>\u65f6\u53d8BRDF\uff1a\u6a21\u62df\u8001\u5316\u548c\u98ce\u5316</li>\n<li>\u53c2\u4e0e\u4ecb\u8d28BSSRDF\uff1a\u6b21\u8868\u9762\u6563\u5c04</li>\n<li>\u91cf\u5b50\u5149\u5b66\u6548\u5e94\uff1a\u8d85\u8868\u9762\u548c\u7eb3\u7c73\u6750\u6599</li>\n</ul>\n<h2 id=\"82\">8.2 \u6e32\u67d3\u65b9\u7a0b</h2>\n<h3 id=\"821\">8.2.1 \u6e32\u67d3\u65b9\u7a0b\u7684\u63a8\u5bfc</h3>\n<p>Kajiya\u57281986\u5e74\u63d0\u51fa\u7684\u6e32\u67d3\u65b9\u7a0b\u7edf\u4e00\u4e86\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u7684\u5149\u7167\u8ba1\u7b97\uff0c\u662f\u5168\u5c40\u5149\u7167\u7684\u6570\u5b66\u57fa\u7840\u3002\u8fd9\u4e2a\u65b9\u7a0b\u7684\u7f8e\u5728\u4e8e\u5b83\u7528\u7b80\u6d01\u7684\u6570\u5b66\u5f62\u5f0f\u6355\u6349\u4e86\u5149\u4f20\u8f93\u7684\u590d\u6742\u6027\u3002</p>\n<p><strong>\u4ece\u5c40\u90e8\u5230\u5168\u5c40\u7684\u6f14\u8fdb</strong></p>\n<ol>\n<li><strong>\u5c40\u90e8\u5149\u7167\u6a21\u578b</strong>\uff08\u53ea\u8003\u8651\u76f4\u63a5\u5149\u7167\uff09\uff1a\n$$L_o = L_e + \\sum_{\\text{lights}} f_r \\cdot L_{light} \\cdot \\cos\\theta_i$$\n\u5386\u53f2\u80cc\u666f\uff1a</li>\n</ol>\n<ul>\n<li>1967\u5e74 Phong\u6a21\u578b</li>\n<li>1975\u5e74 Blinn-Phong\u6539\u8fdb</li>\n<li>\u8db3\u4ee5\u5904\u7406\u5b9e\u65f6\u6e32\u67d3\uff0c\u4f46\u7f3a\u4e4f\u771f\u5b9e\u611f</li>\n</ul>\n<ol start=\"2\">\n<li>\n<p><strong>\u95ee\u9898</strong>\uff1a\u5ffd\u7565\u4e86\u95f4\u63a5\u5149\u7167\n   - \u6ca1\u6709\u8f6f\u9634\u5f71\n   - \u6ca1\u6709\u989c\u8272\u6e17\u900f\uff08color bleeding\uff09\n   - \u6ca1\u6709\u955c\u9762\u95f4\u63a5\u53cd\u5c04\n   - \u6ca1\u6709\u7126\u6563\uff08caustics\uff09\n   - \u6ca1\u6709\u73af\u5883\u5149\u906e\u853d\uff08ambient occlusion\uff09</p>\n</li>\n<li>\n<p><strong>\u5173\u952e\u6d1e\u5bdf</strong>\uff1a\u5165\u5c04\u8f90\u5c04\u5ea6\u6765\u81ea\u5176\u4ed6\u8868\u9762\u7684\u51fa\u5c04\u8f90\u5c04\u5ea6\n$$L_i(\\mathbf{p}, \\omega_i) = L_o(\\mathbf{p}', -\\omega_i)$$\n\u5176\u4e2d\uff1a</p>\n</li>\n</ol>\n<ul>\n<li>$\\mathbf{p}'$ \u662f\u5c04\u7ebf $(\\mathbf{p}, \\omega_i)$ \u7684\u7b2c\u4e00\u4e2a\u4ea4\u70b9</li>\n<li>\u5c04\u7ebf\u8ffd\u8e2a\u51fd\u6570\uff1a$\\mathbf{p}' = \\text{raycast}(\\mathbf{p}, \\omega_i)$</li>\n<li>\u8d1f\u53f7\u8868\u793a\u65b9\u5411\u53cd\u8f6c\uff08\u4ece $\\mathbf{p}'$ \u6307\u5411 $\\mathbf{p}$\uff09</li>\n</ul>\n<p><strong>\u5149\u7ebf\u4f20\u64ad\u7684\u62d3\u6251\u6027\u8d28</strong>\uff1a</p>\n<ul>\n<li>\u5149\u7ebf\u662f\u76f8\u7a7a\u95f4\u4e2d\u7684\u6d41\u7ebf</li>\n<li>\u5728\u975e\u5747\u5300\u4ecb\u8d28\u4e2d\u5f2f\u66f2\uff08\u6d77\u5e02\u8703\u697c\u6548\u5e94\uff09</li>\n<li>\u5728\u5f15\u529b\u573a\u4e2d\u5f2f\u66f2\uff08\u5e7f\u4e49\u76f8\u5bf9\u8bba\uff09</li>\n</ul>\n<p><strong>\u5b8c\u6574\u7684\u6e32\u67d3\u65b9\u7a0b</strong></p>\n<p>\u5c06\u5165\u5c04\u8f90\u5c04\u5ea6\u7684\u8868\u8fbe\u5f0f\u4ee3\u5165\u53cd\u5c04\u65b9\u7a0b\uff1a\n$$L_o(\\mathbf{p}, \\omega_o) = L_e(\\mathbf{p}, \\omega_o) + \\int_{\\Omega^+} f_r(\\mathbf{p}, \\omega_i \\to \\omega_o) L_o(\\mathbf{p}', -\\omega_i) \\cos\\theta_i \\, d\\omega_i$$\n\u8fd9\u662f\u4e00\u4e2a<strong>\u9012\u5f52\u79ef\u5206\u65b9\u7a0b</strong>\uff1a</p>\n<ul>\n<li>\u672a\u77e5\u91cf $L_o$ \u540c\u65f6\u51fa\u73b0\u5728\u65b9\u7a0b\u4e24\u8fb9</li>\n<li>\u5728\u4e0d\u540c\u4f4d\u7f6e\u548c\u65b9\u5411\u4e0a\u76f8\u4e92\u8026\u5408</li>\n<li>\u89e3\u6790\u6c42\u89e3\u51e0\u4e4e\u4e0d\u53ef\u80fd</li>\n</ul>\n<p><strong>\u6570\u5b66\u6027\u8d28</strong>\uff1a</p>\n<ul>\n<li>\u8fd9\u662fFredholm\u7b2c\u4e8c\u7c7b\u79ef\u5206\u65b9\u7a0b</li>\n<li>\u89e3\u7684\u5b58\u5728\u6027\u548c\u552f\u4e00\u6027\u7531Banach\u4e0d\u52a8\u70b9\u5b9a\u7406\u4fdd\u8bc1</li>\n<li>\u6536\u655b\u6761\u4ef6\uff1a\u5e73\u5747\u53cd\u5c04\u7387 &lt; 1</li>\n</ul>\n<p><strong>\u7269\u7406\u610f\u4e49</strong>\uff1a</p>\n<ul>\n<li>\u8868\u8fbe\u4e86\u5149\u7684\u591a\u6b21\u53cd\u5c04</li>\n<li>\u7edf\u4e00\u4e86\u5404\u79cd\u5149\u7167\u73b0\u8c61</li>\n<li>\u662f\u80fd\u91cf\u5b88\u6052\u7684\u6570\u5b66\u4f53\u73b0</li>\n</ul>\n<p><strong>\u8fb9\u754c\u6761\u4ef6</strong></p>\n<ol>\n<li>\n<p><strong>\u771f\u7a7a/\u73af\u5883</strong>\uff1a$L_o = L_{env}(\\omega_o)$\n   - \u65e0\u9650\u8fdc\u5904\u7684\u73af\u5883\u5149\n   - HDR\u73af\u5883\u8d34\u56fe\n   - \u5929\u7a7a\u6a21\u578b\uff08\u5982Hosek-Wilkie\uff09</p>\n</li>\n<li>\n<p><strong>\u5149\u6e90\u8868\u9762</strong>\uff1a$L_e &gt; 0$\n   - \u9762\u5149\u6e90\uff1a\u5747\u5300\u6216\u7a7a\u95f4\u53d8\u5316\u7684\u53d1\u5c04\n   - \u6e29\u5ea6\u8f90\u5c04\uff1aPlanck\u5b9a\u5f8b\n   - IES\u5149\u6e90\u6570\u636e</p>\n</li>\n<li>\n<p><strong>\u975e\u53d1\u5149\u8868\u9762</strong>\uff1a$L_e = 0$\n   - \u7edd\u5927\u591a\u6570\u7269\u4f53\u5c5e\u4e8e\u6b64\u7c7b\n   - \u4f46\u53ef\u80fd\u6709\u8367\u5149\u6548\u5e94</p>\n</li>\n<li>\n<p><strong>\u53c2\u4e0e\u4ecb\u8d28\u8fb9\u754c</strong>\uff1a\n   - \u9700\u8981\u8003\u8651\u4f53\u79ef\u6563\u5c04\n   - \u8f90\u5c04\u4f20\u8f93\u65b9\u7a0b\uff08RTE\uff09</p>\n</li>\n</ol>\n<p><strong>\u7b80\u5316\u5f62\u5f0f</strong></p>\n<p>\u5b9a\u4e49\u53cd\u5c04\u7b97\u5b50 $\\mathcal{T}$\uff1a\n$$(\\mathcal{T}L)(\\mathbf{p}, \\omega_o) = \\int_{\\Omega^+} f_r(\\mathbf{p}, \\omega_i \\to \\omega_o) L(\\mathbf{p}', -\\omega_i) \\cos\\theta_i \\, d\\omega_i$$\n\u6e32\u67d3\u65b9\u7a0b\u53d8\u4e3a\uff1a\n$$L = L_e + \\mathcal{T}L$$\n\u8fd9\u662fFredholm\u7b2c\u4e8c\u7c7b\u79ef\u5206\u65b9\u7a0b\u7684\u4e00\u4e2a\u5b9e\u4f8b\u3002</p>\n<p><strong>\u5386\u53f2\u4e0a\u7684\u5176\u4ed6\u5f62\u5f0f</strong>\uff1a</p>\n<ul>\n<li><strong>\u8f90\u5c04\u5ea6\u65b9\u7a0b</strong>\uff08Radiosity\uff09\uff1a\u6f2b\u53cd\u5c04\u8868\u9762\u7684\u7279\u4f8b</li>\n<li><strong>\u4f53\u79ef\u6e32\u67d3\u65b9\u7a0b</strong>\uff1a\u5305\u542b\u53c2\u4e0e\u4ecb\u8d28</li>\n<li><strong>\u6ce2\u52a8\u65b9\u7a0b</strong>\uff1a\u8003\u8651\u5e72\u6d89\u548c\u884d\u5c04</li>\n</ul>\n<h3 id=\"822\">8.2.2 \u79ef\u5206\u7b97\u5b50\u5f62\u5f0f</h3>\n<p>\u6e32\u67d3\u65b9\u7a0b\u53ef\u4ee5\u4f7f\u7528\u7b97\u5b50\u7406\u8bba\u8fdb\u884c\u5206\u6790\uff0c\u8fd9\u63d0\u4f9b\u4e86\u6df1\u5165\u7684\u6570\u5b66\u6d1e\u5bdf\u548c\u6c42\u89e3\u65b9\u6cd5\u3002\u8fd9\u79cd\u5f62\u5f0f\u5316\u4e0d\u4ec5\u4f18\u96c5\uff0c\u800c\u4e14\u4e3a\u6570\u503c\u65b9\u6cd5\u63d0\u4f9b\u4e86\u7406\u8bba\u57fa\u7840\u3002</p>\n<p><strong>\u5149\u4f20\u8f93\u7b97\u5b50\u7684\u5b9a\u4e49</strong></p>\n<p>\u5b9a\u4e49\u7b97\u5b50 $\\mathcal{K}$\uff1a\n$$(\\mathcal{K}L)(\\mathbf{p}, \\omega) = \\int_{\\Omega^+} f_r(\\mathbf{p}, \\omega_i \\to \\omega) L(\\mathbf{p}', -\\omega_i) \\cos\\theta_i \\, d\\omega_i$$\n\u8fd9\u662f\u4e00\u4e2a\u7ebf\u6027\u7b97\u5b50\uff1a</p>\n<ul>\n<li>$\\mathcal{K}(aL_1 + bL_2) = a\\mathcal{K}L_1 + b\\mathcal{K}L_2$</li>\n<li>\u4f5c\u7528\u4e8e\u51fd\u6570\u7a7a\u95f4 $L^2(\\mathcal{M} \\times S^2)$</li>\n<li>\u662f\u7d27\u7b97\u5b50\uff08compact operator\uff09\u5728\u9002\u5f53\u6761\u4ef6\u4e0b</li>\n</ul>\n<p><strong>\u51fd\u6570\u7a7a\u95f4\u7684\u9009\u62e9</strong>\uff1a</p>\n<ul>\n<li>$L^2$\uff1a\u5e73\u65b9\u53ef\u79ef\uff0c\u9002\u5408\u80fd\u91cf\u5206\u6790</li>\n<li>$L^\\infty$\uff1a\u6709\u754c\u51fd\u6570\uff0c\u9002\u5408\u6700\u5927\u503c\u5206\u6790</li>\n<li>Sobolev\u7a7a\u95f4\uff1a\u8003\u8651\u5149\u6ed1\u6027</li>\n</ul>\n<p><strong>\u7b97\u5b50\u65b9\u7a0b</strong></p>\n<p>\u6e32\u67d3\u65b9\u7a0b\u53ef\u5199\u4e3a\uff1a\n$$L = L_e + \\mathcal{K}L$$\n\u6216\u7b49\u4ef7\u5730\uff1a\n$$(I - \\mathcal{K})L = L_e$$\n\u5176\u4e2d $I$ \u662f\u6052\u7b49\u7b97\u5b50\u3002</p>\n<p><strong>Neumann\u7ea7\u6570\u89e3</strong></p>\n<p>\u5f62\u5f0f\u89e3\u4e3a\uff1a\n$$L = (I - \\mathcal{K})^{-1}L_e = \\sum_{n=0}^{\\infty} \\mathcal{K}^n L_e$$\n\u6536\u655b\u6761\u4ef6\uff1a\u8c31\u534a\u5f84 $\\rho(\\mathcal{K}) &lt; 1$</p>\n<ul>\n<li>\u7269\u7406\u610f\u4e49\uff1a\u5e73\u5747\u53cd\u5c04\u7387\u5c0f\u4e8e1</li>\n<li>\u4fdd\u8bc1\u80fd\u91cf\u6700\u7ec8\u8870\u51cf\u4e3a\u96f6</li>\n</ul>\n<p><strong>\u6536\u655b\u901f\u5ea6\u5206\u6790</strong>\uff1a</p>\n<ul>\n<li>\u51e0\u4f55\u6536\u655b\uff1a$||\\mathcal{K}^n|| \\leq \\rho(\\mathcal{K})^n$</li>\n<li>\u5b9e\u9645\u573a\u666f\uff1a$\\rho(\\mathcal{K}) \\approx 0.5-0.8$</li>\n<li>3-5\u6b21\u8fed\u4ee3\u540e\u8bef\u5dee &lt; 1%</li>\n</ul>\n<p><strong>\u8c31\u5206\u89e3</strong>\uff1a</p>\n<ul>\n<li>\u7279\u5f81\u51fd\u6570\uff1a$\\mathcal{K}\\phi_i = \\lambda_i \\phi_i$</li>\n<li>\u5c55\u5f00\uff1a$L = \\sum_i \\frac{\\langle L_e, \\phi_i \\rangle}{1-\\lambda_i} \\phi_i$</li>\n<li>\u4e3b\u7279\u5f81\u503c\u51b3\u5b9a\u6536\u655b\u6027</li>\n</ul>\n<p><strong>\u7269\u7406\u89e3\u91ca</strong></p>\n<p>\u6bcf\u4e00\u9879\u7684\u542b\u4e49\uff1a</p>\n<ul>\n<li>$\\mathcal{K}^0 L_e = L_e$\uff1a\u76f4\u63a5\u770b\u5230\u5149\u6e90</li>\n<li>$\\mathcal{K}^1 L_e$\uff1a\u4e00\u6b21\u53cd\u5c04\uff08\u76f4\u63a5\u5149\u7167\uff09</li>\n<li>$\\mathcal{K}^2 L_e$\uff1a\u4e8c\u6b21\u53cd\u5c04\uff08\u4e00\u6b21\u95f4\u63a5\u5149\u7167\uff09</li>\n<li>$\\mathcal{K}^n L_e$\uff1a$n$\u6b21\u53cd\u5c04</li>\n</ul>\n<p>\u8fd9\u4e5f\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\uff1a</p>\n<ul>\n<li>\u76f4\u63a5\u5149\u7167\u901a\u5e38\u6700\u4eae</li>\n<li>\u968f\u7740\u53cd\u5c04\u6b21\u6570\u589e\u52a0\uff0c\u8d21\u732e\u9010\u6e10\u51cf\u5c0f</li>\n<li>\u5927\u591a\u6570\u573a\u666f3-5\u6b21\u53cd\u5c04\u540e\u53ef\u4ee5\u5ffd\u7565</li>\n</ul>\n<p><strong>\u4e0d\u540c\u573a\u666f\u7684\u53cd\u5c04\u6b21\u6570</strong>\uff1a</p>\n<ul>\n<li>\u5ba4\u5916\u573a\u666f\uff1a2-3\u6b21\u901a\u5e38\u8db3\u591f</li>\n<li>\u5ba4\u5185\u573a\u666f\uff1a5-10\u6b21\u53ef\u80fd\u9700\u8981</li>\n<li>\u7126\u6563\u6548\u679c\uff1a\u53ef\u80fd\u9700\u8981\u66f4\u591a</li>\n</ul>\n<p><strong>\u80fd\u91cf\u5206\u5e03\u7edf\u8ba1</strong>\uff1a</p>\n<ul>\n<li>\u76f4\u63a5\u5149\u7167\uff1a60-80%</li>\n<li>\u4e00\u6b21\u95f4\u63a5\uff1a15-30%</li>\n<li>\u9ad8\u6b21\u95f4\u63a5\uff1a&lt; 10%</li>\n</ul>\n<p><strong>\u7b97\u5b50\u7684\u6838\u51fd\u6570\u8868\u793a</strong></p>\n<p>$\\mathcal{K}$ \u53ef\u4ee5\u7528\u6838\u51fd\u6570\u8868\u793a\uff1a\n$$K(\\mathbf{p} \\to \\mathbf{p}', \\omega \\to \\omega') = f_r(\\mathbf{p}, \\omega' \\to \\omega) \\cos\\theta' G(\\mathbf{p} \\leftrightarrow \\mathbf{p}') \\delta(\\omega' - \\omega_{\\mathbf{p} \\to \\mathbf{p}'})$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$G(\\mathbf{p} \\leftrightarrow \\mathbf{p}')$\uff1a\u51e0\u4f55\u56e0\u5b50</li>\n<li>$\\delta$\uff1aDirac delta\u51fd\u6570\uff0c\u786e\u4fdd\u65b9\u5411\u4e00\u81f4</li>\n</ul>\n<p><strong>\u6838\u51fd\u6570\u7684\u6027\u8d28</strong>\uff1a</p>\n<ul>\n<li>\u5bf9\u79f0\u6027\uff08\u7531\u4e8e\u4e92\u6613\u6027\uff09\uff1a$K(\\mathbf{p} \\to \\mathbf{p}', \\omega \\to \\omega') = K(\\mathbf{p}' \\to \\mathbf{p}, \\omega' \\to \\omega)$</li>\n<li>\u6b63\u5b9a\u6027\uff1a$K \\geq 0$</li>\n<li>\u53ef\u79ef\u6027\uff1a$\\int \\int K &lt; \\infty$ \u5728\u9002\u5f53\u6761\u4ef6\u4e0b</li>\n</ul>\n<p><strong>\u79bb\u6563\u5316\u7684\u6838\u77e9\u9635</strong>\uff1a</p>\n<ul>\n<li>\u6709\u9650\u5143\u65b9\u6cd5\uff1a$K_{ij} = \\langle \\phi_i, \\mathcal{K}\\phi_j \\rangle$</li>\n<li>\u77e9\u9635\u5927\u5c0f\uff1a$N^2$\uff0c\u5176\u4e2d$N$\u662f\u57fa\u51fd\u6570\u4e2a\u6570</li>\n<li>\u7a00\u758f\u6027\uff1a\u5229\u7528\u53ef\u89c1\u6027\u548c\u8ddd\u79bb\u8870\u51cf</li>\n</ul>\n<p><strong>\u8fed\u4ee3\u6c42\u89e3\u65b9\u6cd5</strong></p>\n<ol>\n<li>\n<p><strong>\u56fa\u5b9a\u70b9\u8fed\u4ee3</strong>\uff1a\n$$L^{(k+1)} = L_e + \\mathcal{K}L^{(k)}$$</p>\n</li>\n<li>\n<p><strong>Jacobi\u8fed\u4ee3</strong>\uff1a\n$$L^{(k+1)} = L_e + \\mathcal{K}L^{(k)}$$</p>\n</li>\n<li>\n<p><strong>Gauss-Seidel\u8fed\u4ee3</strong>\uff1a\n   \u66f4\u65b0\u65f6\u7acb\u5373\u4f7f\u7528\u65b0\u503c</p>\n</li>\n</ol>\n<p><strong>\u4e0e\u6709\u9650\u5143\u65b9\u6cd5\u7684\u8054\u7cfb</strong></p>\n<p>\u79bb\u6563\u5316\u540e\uff0c\u6e32\u67d3\u65b9\u7a0b\u53d8\u4e3a\u7ebf\u6027\u7cfb\u7edf\uff1a\n$$(I - K)L = L_e$$\n\u5176\u4e2d $K$ \u662f\u79bb\u6563\u5316\u7684\u4f20\u8f93\u77e9\u9635\u3002</p>\n<h3 id=\"823\">8.2.3 \u8def\u5f84\u79ef\u5206\u5f62\u5f0f</h3>\n<p>\u8def\u5f84\u79ef\u5206\u63d0\u4f9b\u4e86\u53e6\u4e00\u79cd\u7406\u89e3\u6e32\u67d3\u65b9\u7a0b\u7684\u89c6\u89d2\uff0c\u5c06\u5149\u7ebf\u4f20\u8f93\u770b\u4f5c\u8def\u5f84\u7684\u96c6\u5408\u3002</p>\n<p><strong>\u8def\u5f84\u7a7a\u95f4\u7684\u5b9a\u4e49</strong></p>\n<p>\u4e00\u6761\u957f\u5ea6\u4e3a $k$ \u7684\u8def\u5f84\uff1a\n$$\\bar{x} = \\mathbf{x}_0 \\mathbf{x}_1 ... \\mathbf{x}_k$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$\\mathbf{x}_0$\uff1a\u76f8\u673a\u4f4d\u7f6e</li>\n<li>$\\mathbf{x}_k$\uff1a\u5149\u6e90\u4e0a\u7684\u70b9</li>\n<li>$\\mathbf{x}_1, ..., \\mathbf{x}_{k-1}$\uff1a\u4e2d\u95f4\u7684\u53cd\u5c04\u70b9</li>\n</ul>\n<p>\u8def\u5f84\u7a7a\u95f4\uff1a\n$$\\Omega = \\bigcup_{k=2}^{\\infty} \\mathcal{M}^{k+1}$$\n<strong>\u8def\u5f84\u8d21\u732e\u51fd\u6570</strong></p>\n<p>\u4e00\u6761\u8def\u5f84\u7684\u8d21\u732e\uff1a\n$$f(\\bar{x}) = L_e(\\mathbf{x}_k \\to \\mathbf{x}_{k-1}) \\prod_{i=1}^{k-1} f_r(\\mathbf{x}_{i+1} \\to \\mathbf{x}_i \\to \\mathbf{x}_{i-1}) G(\\mathbf{x}_i \\leftrightarrow \\mathbf{x}_{i+1})$$\n\u5206\u89e3\uff1a</p>\n<ol>\n<li><strong>\u53d1\u5c04\u9879</strong>\uff1a$L_e(\\mathbf{x}_k \\to \\mathbf{x}_{k-1})$</li>\n<li><strong>BRDF\u94fe</strong>\uff1a$\\prod f_r$\uff0c\u6bcf\u4e2a\u53cd\u5c04\u70b9\u7684BRDF</li>\n<li><strong>\u51e0\u4f55\u94fe</strong>\uff1a$\\prod G$\uff0c\u70b9\u4e4b\u95f4\u7684\u51e0\u4f55\u5173\u7cfb</li>\n</ol>\n<p><strong>\u51e0\u4f55\u56e0\u5b50\u7684\u8be6\u7ec6\u5206\u6790</strong>\n$$G(\\mathbf{x} \\leftrightarrow \\mathbf{y}) = \\frac{\\cos\\theta_x \\cos\\theta_y}{||\\mathbf{x} - \\mathbf{y}||^2} V(\\mathbf{x} \\leftrightarrow \\mathbf{y})$$\n\u7ec4\u6210\u90e8\u5206\uff1a</p>\n<ol>\n<li>\n<p><strong>\u4f59\u5f26\u9879</strong>\uff1a$\\cos\\theta_x \\cos\\theta_y$\n   - $\\theta_x$\uff1a$\\mathbf{x}$ \u5904\u6cd5\u7ebf\u4e0e\u8fde\u7ebf\u7684\u5939\u89d2\n   - \u4f53\u73b0Lambert\u5b9a\u5f8b</p>\n</li>\n<li>\n<p><strong>\u8ddd\u79bb\u8870\u51cf</strong>\uff1a$1/r^2$\n   - \u7403\u9762\u6ce2\u7684\u51e0\u4f55\u6269\u6563\n   - \u80fd\u91cf\u5b88\u6052\u7684\u4f53\u73b0</p>\n</li>\n<li>\n<p><strong>\u53ef\u89c1\u6027</strong>\uff1a$V(\\mathbf{x} \\leftrightarrow \\mathbf{y}) \\in {0, 1}$\n   - 1\uff1a\u4e24\u70b9\u4e92\u76f8\u53ef\u89c1\n   - 0\uff1a\u5b58\u5728\u906e\u6321</p>\n</li>\n</ol>\n<p><strong>\u6e32\u67d3\u65b9\u7a0b\u7684\u8def\u5f84\u79ef\u5206\u5f62\u5f0f</strong>\n$$L(\\mathbf{x}_0 \\to \\mathbf{x}_1) = \\sum_{k=2}^{\\infty} \\int_{\\mathcal{M}^{k-1}} f(\\mathbf{x}_0 \\mathbf{x}_1 ... \\mathbf{x}_k) \\, dA(\\mathbf{x}_2) ... dA(\\mathbf{x}_k)$$\n\u8fd9\u662f\u5bf9\u6240\u6709\u53ef\u80fd\u8def\u5f84\u7684\u79ef\u5206\uff1a</p>\n<ul>\n<li>\u5916\u5c42\u6c42\u548c\uff1a\u5bf9\u6240\u6709\u8def\u5f84\u957f\u5ea6</li>\n<li>\u5185\u5c42\u79ef\u5206\uff1a\u5bf9\u6240\u6709\u8def\u5f84\u914d\u7f6e</li>\n</ul>\n<p><strong>\u8def\u5f84\u5206\u7c7b\uff08Heckbert\u8bb0\u6cd5\uff09</strong></p>\n<p>\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u63cf\u8ff0\u8def\u5f84\u7c7b\u578b\uff1a</p>\n<ul>\n<li>L\uff1a\u5149\u6e90</li>\n<li>E\uff1a\u76f8\u673a\uff08\u773c\u775b\uff09</li>\n<li>S\uff1a\u955c\u9762\u53cd\u5c04/\u6298\u5c04</li>\n<li>D\uff1a\u6f2b\u53cd\u5c04</li>\n</ul>\n<p>\u4f8b\u5b50\uff1a</p>\n<ul>\n<li>L(D|S)*E\uff1a\u6240\u6709\u8def\u5f84</li>\n<li>LDE\uff1a\u76f4\u63a5\u5149\u7167</li>\n<li>L(D|S)SE\uff1a\u7126\u6563</li>\n<li>LS<em>DS</em>E\uff1a\u955c\u9762\u95f4\u63a5\u5149\u7167</li>\n</ul>\n<p><strong>\u6d4b\u5ea6\u8bba\u89c6\u89d2</strong></p>\n<p>\u8def\u5f84\u7a7a\u95f4\u4e0a\u7684\u6d4b\u5ea6\uff1a\n$$d\\mu(\\bar{x}) = dA(\\mathbf{x}_0) ... dA(\\mathbf{x}_k)$$\n\u6e32\u67d3\u7684\u76ee\u6807\u662f\u8ba1\u7b97\uff1a\n$$I = \\int_{\\Omega} f(\\bar{x}) \\, d\\mu(\\bar{x})$$\n\u8fd9\u4e3a\u8499\u7279\u5361\u6d1b\u65b9\u6cd5\u63d0\u4f9b\u4e86\u7406\u8bba\u57fa\u7840\u3002</p>\n<h3 id=\"824\">8.2.4 \u6d4b\u5ea6\u53d8\u6362</h3>\n<p>\u5728\u6e32\u67d3\u4e2d\uff0c\u7ecf\u5e38\u9700\u8981\u5728\u4e0d\u540c\u7684\u79ef\u5206\u57df\u4e4b\u95f4\u8f6c\u6362\u3002\u7406\u89e3\u6d4b\u5ea6\u53d8\u6362\u5bf9\u4e8e\u6b63\u786e\u5b9e\u73b0\u91cd\u8981\u6027\u91c7\u6837\u81f3\u5173\u91cd\u8981\u3002</p>\n<p><strong>\u7acb\u4f53\u89d2\u5230\u9762\u79ef\u7684\u53d8\u6362</strong></p>\n<p>\u57fa\u672c\u5173\u7cfb\uff1a\n$$d\\omega = \\frac{\\cos\\theta' \\, dA'}{||\\mathbf{p} - \\mathbf{p}'||^2}$$\n\u63a8\u5bfc\uff1a</p>\n<ol>\n<li>\u4ece $\\mathbf{p}$ \u770b $dA'$ \u5f20\u6210\u7684\u7acb\u4f53\u89d2</li>\n<li>\u6295\u5f71\u9762\u79ef\uff1a$dA' \\cos\\theta'$\uff08$\\theta'$ \u662f $\\mathbf{p}'$ \u5904\u7684\u89d2\u5ea6\uff09</li>\n<li>\u7acb\u4f53\u89d2 = \u6295\u5f71\u9762\u79ef / \u8ddd\u79bb\u5e73\u65b9</li>\n</ol>\n<p><strong>\u9762\u79ef\u5f62\u5f0f\u7684\u6e32\u67d3\u65b9\u7a0b</strong></p>\n<p>\u5c06\u6d4b\u5ea6\u53d8\u6362\u5e94\u7528\u4e8e\u6e32\u67d3\u65b9\u7a0b\uff1a\n$$L_o(\\mathbf{p}, \\omega_o) = L_e(\\mathbf{p}, \\omega_o) + \\int_{\\mathcal{M}} f_r(\\mathbf{p}, \\mathbf{p}' \\to \\omega_o) L_o(\\mathbf{p}', \\mathbf{p} - \\mathbf{p}') G(\\mathbf{p} \\leftrightarrow \\mathbf{p}') \\, dA'$$\n\u8fd9\u91cc\u51e0\u4f55\u56e0\u5b50 $G$ \u5305\u542b\u4e86\u6d4b\u5ea6\u53d8\u6362\u7684\u6240\u6709\u9879\u3002</p>\n<p><strong>\u5176\u4ed6\u5e38\u89c1\u7684\u6d4b\u5ea6\u53d8\u6362</strong></p>\n<ol>\n<li>\n<p><strong>\u7403\u9762\u5750\u6807\u5230\u7b1b\u5361\u5c14\u5750\u6807</strong>\uff1a\n$$d\\omega = \\sin\\theta \\, d\\theta \\, d\\phi$$\n\u5bf9\u5e94\u7684\u5411\u91cf\uff1a\n$$\\omega = (\\sin\\theta\\cos\\phi, \\sin\\theta\\sin\\phi, \\cos\\theta)$$</p>\n</li>\n<li>\n<p><strong>\u534a\u7403\u5747\u5300\u91c7\u6837\u5230\u4f59\u5f26\u52a0\u6743\u91c7\u6837</strong>\uff1a\n   - \u5747\u5300\u91c7\u6837\uff1a$p(\\omega) = 1/(2\\pi)$\n   - \u4f59\u5f26\u52a0\u6743\uff1a$p(\\omega) = \\cos\\theta/\\pi$\n   - Jacobian\uff1a$\\frac{\\cos\\theta/\\pi}{1/(2\\pi)} = 2\\cos\\theta$</p>\n</li>\n<li>\n<p><strong>\u5149\u6e90\u91c7\u6837\u7684\u6d4b\u5ea6\u53d8\u6362</strong>\uff1a\n   - \u5728\u5149\u6e90\u8868\u9762\u91c7\u6837\uff1a$p_A(\\mathbf{x}) = 1/A_{light}$\n   - \u8f6c\u6362\u5230\u7acb\u4f53\u89d2\uff1a$p_\\omega(\\omega) = \\frac{r^2}{A_{light}\\cos\\theta_{light}}$</p>\n</li>\n</ol>\n<p><strong>\u53d8\u6362\u7684\u96c5\u53ef\u6bd4\u884c\u5217\u5f0f</strong></p>\n<p>\u4e00\u822c\u7684\u53d8\u91cf\u66ff\u6362\u516c\u5f0f\uff1a\n$$p_Y(y) = p_X(x) \\left|\\frac{\\partial x}{\\partial y}\\right|$$\n\u591a\u7ef4\u60c5\u51b5\uff1a\n$$p_Y(\\mathbf{y}) = p_X(\\mathbf{x}) \\left|\\det\\left(\\frac{\\partial \\mathbf{x}}{\\partial \\mathbf{y}}\\right)\\right|$$\n<strong>\u5b9e\u9645\u5e94\u7528\u4e2d\u7684\u9677\u9631</strong></p>\n<ol>\n<li>\n<p><strong>\u5fd8\u8bb0\u4f59\u5f26\u9879</strong>\uff1a\n   - \u9519\u8bef\uff1a$p_\\omega = \\frac{r^2}{A}$\n   - \u6b63\u786e\uff1a$p_\\omega = \\frac{r^2}{A\\cos\\theta}$</p>\n</li>\n<li>\n<p><strong>\u53cc\u91cd\u8ba1\u7b97\u51e0\u4f55\u9879</strong>\uff1a\n   - \u9519\u8bef\uff1a\u5728BRDF\u548c\u6d4b\u5ea6\u53d8\u6362\u4e2d\u90fd\u5305\u542b $\\cos\\theta$\n   - \u6b63\u786e\uff1a\u660e\u786e\u533a\u5206\u54ea\u4e9b\u9879\u5c5e\u4e8eBRDF\uff0c\u54ea\u4e9b\u5c5e\u4e8e\u6d4b\u5ea6\u53d8\u6362</p>\n</li>\n<li>\n<p><strong>\u6b63\u8d1f\u53f7\u9519\u8bef</strong>\uff1a\n   - \u6ce8\u610f\u6cd5\u7ebf\u65b9\u5411\u548c\u5149\u7ebf\u65b9\u5411\u7684\u5173\u7cfb\n   - \u4f7f\u7528 $|\\cos\\theta|$ \u6216\u786e\u4fdd\u89d2\u5ea6\u5728 $[0, \\pi/2]$</p>\n</li>\n</ol>\n<h2 id=\"83\">8.3 \u8499\u7279\u5361\u6d1b\u79ef\u5206\u4e0e\u8def\u5f84\u8ffd\u8e2a</h2>\n<p>\u6e32\u67d3\u65b9\u7a0b\u662f\u4e00\u4e2a\u9ad8\u7ef4\u79ef\u5206\u65b9\u7a0b\uff0c\u89e3\u6790\u6c42\u89e3\u51e0\u4e4e\u4e0d\u53ef\u80fd\u3002\u8499\u7279\u5361\u6d1b\u65b9\u6cd5\u63d0\u4f9b\u4e86\u6570\u503c\u6c42\u89e3\u7684\u6846\u67b6\u3002</p>\n<h3 id=\"831\">8.3.1 \u8499\u7279\u5361\u6d1b\u79ef\u5206\u57fa\u7840</h3>\n<p>\u5bf9\u4e8e\u79ef\u5206 $I = \\int_{\\Omega} f(x) \\, dx$\uff0c\u8499\u7279\u5361\u6d1b\u4f30\u8ba1\u91cf\u4e3a\uff1a\n$$\\langle I \\rangle = \\frac{1}{N} \\sum_{i=1}^{N} \\frac{f(X_i)}{p(X_i)}$$\n\u5176\u4e2d $X_i \\sim p(x)$ \u662f\u4ece\u6982\u7387\u5bc6\u5ea6\u51fd\u6570 $p(x)$ \u91c7\u6837\u7684\u968f\u673a\u53d8\u91cf\u3002</p>\n<p><strong>\u671f\u671b\u4e0e\u65b9\u5dee</strong>\uff1a</p>\n<ul>\n<li>\u671f\u671b\uff1a$E[\\langle I \\rangle] = I$\uff08\u65e0\u504f\u4f30\u8ba1\uff09</li>\n<li>\u65b9\u5dee\uff1a$V[\\langle I \\rangle] = \\frac{1}{N} V\\left[\\frac{f(X)}{p(X)}\\right]$</li>\n</ul>\n<p><strong>\u6536\u655b\u901f\u5ea6</strong>\uff1a\u8bef\u5dee\u4ee5 $O(1/\\sqrt{N})$ \u7684\u901f\u5ea6\u6536\u655b\uff0c\u4e0e\u7ef4\u5ea6\u65e0\u5173\u3002</p>\n<h3 id=\"832\">8.3.2 \u91cd\u8981\u6027\u91c7\u6837</h3>\n<p>\u9009\u62e9\u5408\u9002\u7684\u6982\u7387\u5bc6\u5ea6\u51fd\u6570 $p(x)$ \u53ef\u4ee5\u663e\u8457\u964d\u4f4e\u65b9\u5dee\u3002\u7406\u60f3\u60c5\u51b5\u4e0b\uff1a\n$$p(x) \\propto |f(x)|$$\n\u5bf9\u4e8e\u6e32\u67d3\uff0c\u5e38\u7528\u7684\u91c7\u6837\u7b56\u7565\u5305\u62ec\uff1a</p>\n<ol>\n<li><strong>\u4f59\u5f26\u52a0\u6743\u91c7\u6837</strong>\uff1a$p(\\omega) \\propto \\cos\\theta$</li>\n<li><strong>BRDF\u91c7\u6837</strong>\uff1a$p(\\omega) \\propto f_r(\\omega_i \\to \\omega_o)$</li>\n<li><strong>\u5149\u6e90\u91c7\u6837</strong>\uff1a\u76f4\u63a5\u5728\u5149\u6e90\u4e0a\u91c7\u6837</li>\n<li><strong>\u591a\u91cd\u91cd\u8981\u6027\u91c7\u6837\uff08MIS\uff09</strong>\uff1a\u7ec4\u5408\u591a\u79cd\u91c7\u6837\u7b56\u7565</li>\n</ol>\n<h3 id=\"833\">8.3.3 \u8def\u5f84\u8ffd\u8e2a\u7b97\u6cd5</h3>\n<p>\u57fa\u672c\u8def\u5f84\u8ffd\u8e2a\u901a\u8fc7\u9012\u5f52\u6c42\u89e3\u6e32\u67d3\u65b9\u7a0b\uff1a</p>\n<pre class=\"codehilite\"><code>radiance(ray):\n    hit = intersect(ray, scene)\n    if not hit:\n        return background\n\n    L_e = hit.emission\n\n    // \u76f4\u63a5\u5149\u7167\n    L_d = sample_direct_lighting(hit)\n\n    // \u95f4\u63a5\u5149\u7167\uff08\u4fc4\u7f57\u65af\u8f6e\u76d8\u8d4c\uff09\n    if random() &lt; P_rr:\n        wi, pdf = sample_brdf(hit)\n        L_i = radiance(spawn_ray(hit, wi))\n        L_indirect = f_r * L_i * cos(theta) / (pdf * P_rr)\n    else:\n        L_indirect = 0\n\n    return L_e + L_d + L_indirect\n</code></pre>\n\n<h3 id=\"834\">8.3.4 \u4fc4\u7f57\u65af\u8f6e\u76d8\u8d4c</h3>\n<p>\u4e3a\u4e86\u5f97\u5230\u65e0\u504f\u4f30\u8ba1\u540c\u65f6\u907f\u514d\u65e0\u9650\u9012\u5f52\uff0c\u4f7f\u7528\u4fc4\u7f57\u65af\u8f6e\u76d8\u8d4c\uff1a\n$$L = \\begin{cases}\n\\frac{L_{continue}}{P_{rr}} &amp; \\text{\u4ee5\u6982\u7387 } P_{rr} \\\n0 &amp; \\text{\u4ee5\u6982\u7387 } 1-P_{rr}\n\\end{cases}$$\n\u671f\u671b\u503c\u4fdd\u6301\u4e0d\u53d8\uff1a$E[L] = P_{rr} \\cdot \\frac{L_{continue}}{P_{rr}} = L_{continue}$</p>\n<h3 id=\"835\">8.3.5 \u76f4\u63a5\u5149\u7167\u91c7\u6837</h3>\n<p>\u5bf9\u4e8e\u9762\u5149\u6e90\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728\u5149\u6e90\u8868\u9762\u91c7\u6837\uff1a\n$$L_d = \\int_{A_{light}} f_r(\\omega_i \\to \\omega_o) L_e \\cos\\theta_i \\frac{\\cos\\theta_{light}}{||\\mathbf{x} - \\mathbf{x}_{light}||^2} V(\\mathbf{x} \\leftrightarrow \\mathbf{x}_{light}) \\, dA_{light}$$\n\u91c7\u6837\u7b56\u7565\uff1a</p>\n<ol>\n<li>\u5728\u5149\u6e90\u8868\u9762\u5747\u5300\u91c7\u6837\uff1a$p(x_{light}) = 1/A_{light}$</li>\n<li>\u8f6c\u6362\u4e3a\u7acb\u4f53\u89d2\u57df\u7684pdf\uff1a$p(\\omega) = \\frac{||\\mathbf{x} - \\mathbf{x}_{light}||^2}{A_{light} \\cos\\theta_{light}}$</li>\n</ol>\n<h3 id=\"836-mis\">8.3.6 \u591a\u91cd\u91cd\u8981\u6027\u91c7\u6837\uff08MIS\uff09</h3>\n<p>\u5f53\u6709\u591a\u79cd\u91c7\u6837\u7b56\u7565\u65f6\uff0cMIS\u63d0\u4f9b\u4e86\u7ec4\u5408\u5b83\u4eec\u7684\u6700\u4f18\u65b9\u5f0f\u3002\u5e73\u8861\u542f\u53d1\u5f0f\u6743\u91cd\uff1a\n$$w_i(x) = \\frac{p_i(x)}{\\sum_j p_j(x)}$$\n\u529f\u7387\u542f\u53d1\u5f0f\uff08\u901a\u5e38\u6548\u679c\u66f4\u597d\uff09\uff1a\n$$w_i(x) = \\frac{p_i^2(x)}{\\sum_j p_j^2(x)}$$\n\u7ec4\u5408\u4f30\u8ba1\u91cf\uff1a\n$$\\langle I \\rangle = \\sum_i \\frac{1}{n_i} \\sum_{j=1}^{n_i} w_i(X_{ij}) \\frac{f(X_{ij})}{p_i(X_{ij})}$$</p>\n<h3 id=\"837\">8.3.7 \u8def\u5f84\u7a7a\u95f4\u7684\u6d4b\u5ea6</h3>\n<p>\u5728\u8def\u5f84\u7a7a\u95f4\u4e2d\uff0c\u4e00\u6761\u957f\u5ea6\u4e3a $k$ \u7684\u8def\u5f84\u7684\u6982\u7387\u5bc6\u5ea6\u4e3a\uff1a\n$$p(\\bar{x}) = p(\\mathbf{x}_0) \\prod_{i=1}^{k} p(\\mathbf{x}_i | \\mathbf{x}_{i-1})$$\n\u9762\u79ef\u6d4b\u5ea6\u4e0b\u7684\u8f6c\u6362\uff1a\n$$p(\\mathbf{x}_i | \\mathbf{x}_{i-1}) = p(\\omega_i) \\frac{\\cos\\theta_i}{||\\mathbf{x}_i - \\mathbf{x}_{i-1}||^2}$$</p>\n<h3 id=\"838\">8.3.8 \u53cc\u5411\u8def\u5f84\u8ffd\u8e2a</h3>\n<p>\u53cc\u5411\u8def\u5f84\u8ffd\u8e2a\uff08BDPT\uff09\u4ece\u76f8\u673a\u548c\u5149\u6e90\u540c\u65f6\u8ffd\u8e2a\u8def\u5f84\uff0c\u7136\u540e\u8fde\u63a5\u5b83\u4eec\uff1a</p>\n<ol>\n<li>\u4ece\u76f8\u673a\u8ffd\u8e2a\u5b50\u8def\u5f84\uff1a$\\mathbf{x}_0, \\mathbf{x}_1, ..., \\mathbf{x}_s$</li>\n<li>\u4ece\u5149\u6e90\u8ffd\u8e2a\u5b50\u8def\u5f84\uff1a$\\mathbf{y}_0, \\mathbf{y}_1, ..., \\mathbf{y}_t$</li>\n<li>\u8fde\u63a5\u7b56\u7565\uff1a\u8fde\u63a5 $\\mathbf{x}_s$ \u548c $\\mathbf{y}_t$ \u5f62\u6210\u5b8c\u6574\u8def\u5f84</li>\n</ol>\n<p>\u5bf9\u4e8e\u6bcf\u79cd\u8fde\u63a5\u7b56\u7565 $(s,t)$\uff0c\u4f7f\u7528MIS\u7ec4\u5408\u6240\u6709\u53ef\u80fd\u7684\u8def\u5f84\u3002</p>\n<h3 id=\"839\">8.3.9 \u6e10\u8fdb\u5f0f\u5149\u5b50\u6620\u5c04</h3>\n<p>\u5149\u5b50\u6620\u5c04\u662f\u53e6\u4e00\u79cd\u5168\u5c40\u5149\u7167\u7b97\u6cd5\uff0c\u7279\u522b\u9002\u5408\u5904\u7406\u7126\u6563\u7b49\u6548\u679c\uff1a</p>\n<ol>\n<li><strong>\u5149\u5b50\u53d1\u5c04\u9636\u6bb5</strong>\uff1a\u4ece\u5149\u6e90\u53d1\u5c04\u5149\u5b50\uff0c\u5728\u573a\u666f\u4e2d\u8ffd\u8e2a\u5e76\u5b58\u50a8</li>\n<li><strong>\u5bc6\u5ea6\u4f30\u8ba1</strong>\uff1a\u4f7f\u7528k\u8fd1\u90bb\u641c\u7d22\u4f30\u8ba1\u8f90\u5c04\u5ea6\n$$L(\\mathbf{x}, \\omega) \\approx \\frac{1}{\\pi r^2} \\sum_{p \\in N_k(\\mathbf{x})} f_r(\\omega_p \\to \\omega) \\Phi_p$$\n\u6e10\u8fdb\u5f0f\u6539\u8fdb\uff1a</li>\n</ol>\n<ul>\n<li>\u9010\u6b65\u7f29\u5c0f\u641c\u7d22\u534a\u5f84\uff1a$r_{i+1} = r_i \\sqrt{\\frac{i}{i+1}}$</li>\n<li>\u4fdd\u8bc1\u6e10\u8fd1\u65e0\u504f\u548c\u4e00\u81f4\u6027\u6536\u655b</li>\n</ul>\n<h2 id=\"_1\">\u672c\u7ae0\u5c0f\u7ed3</h2>\n<p><strong>\u6838\u5fc3\u6982\u5ff5</strong>\uff1a</p>\n<ol>\n<li>\u8f90\u5c04\u5ea6\u91cf\u5b66\u63d0\u4f9b\u4e86\u63cf\u8ff0\u5149\u4f20\u8f93\u7684\u7269\u7406\u6846\u67b6</li>\n<li>\n<p>\u6e32\u67d3\u65b9\u7a0b\u662f\u5168\u5c40\u5149\u7167\u7684\u6570\u5b66\u57fa\u7840\uff1a\n$$L_o = L_e + \\int_{\\Omega} f_r L_i \\cos\\theta_i \\, d\\omega_i$$</p>\n</li>\n<li>\n<p>\u8499\u7279\u5361\u6d1b\u65b9\u6cd5\u63d0\u4f9b\u4e86\u6570\u503c\u6c42\u89e3\u9ad8\u7ef4\u79ef\u5206\u7684\u6846\u67b6</p>\n</li>\n<li>\u8def\u5f84\u8ffd\u8e2a\u901a\u8fc7\u9012\u5f52\u91c7\u6837\u6c42\u89e3\u6e32\u67d3\u65b9\u7a0b</li>\n</ol>\n<p><strong>\u5173\u952e\u516c\u5f0f</strong>\uff1a</p>\n<ul>\n<li>\u8f90\u5c04\u5ea6\u5b9a\u4e49\uff1a$L = \\frac{d^2\\Phi}{dA \\cos\\theta \\, d\\omega}$</li>\n<li>BRDF\u5b9a\u4e49\uff1a$f_r = \\frac{dL_o}{dE_i}$</li>\n<li>\u8499\u7279\u5361\u6d1b\u4f30\u8ba1\uff1a$\\langle I \\rangle = \\frac{1}{N} \\sum_{i=1}^{N} \\frac{f(X_i)}{p(X_i)}$</li>\n<li>MIS\u6743\u91cd\uff1a$w_i(x) = \\frac{p_i^2(x)}{\\sum_j p_j^2(x)}$</li>\n</ul>\n<p><strong>\u7b97\u6cd5\u8981\u70b9</strong>\uff1a</p>\n<ul>\n<li>\u91cd\u8981\u6027\u91c7\u6837\u964d\u4f4e\u65b9\u5dee</li>\n<li>\u4fc4\u7f57\u65af\u8f6e\u76d8\u8d4c\u4fdd\u8bc1\u65e0\u504f\u6027</li>\n<li>\u76f4\u63a5\u5149\u7167\u91c7\u6837\u63d0\u9ad8\u6548\u7387</li>\n<li>\u591a\u91cd\u91cd\u8981\u6027\u91c7\u6837\u7ec4\u5408\u591a\u79cd\u7b56\u7565</li>\n</ul>\n<h2 id=\"_2\">\u7ec3\u4e60\u9898</h2>\n<h3 id=\"_3\">\u57fa\u7840\u9898</h3>\n<p><strong>\u7ec3\u4e608.1</strong>\uff1a\u8bc1\u660e\u8f90\u5c04\u5ea6\u5728\u771f\u7a7a\u4e2d\u6cbf\u5149\u7ebf\u4f20\u64ad\u65f6\u4fdd\u6301\u4e0d\u53d8\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u8003\u8651\u4e24\u4e2a\u5fae\u5206\u9762\u5143\u4e4b\u95f4\u7684\u80fd\u91cf\u4f20\u8f93\uff0c\u4f7f\u7528\u7acb\u4f53\u89d2\u548c\u9762\u79ef\u7684\u5173\u7cfb\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u8bbe\u4e24\u70b9 $\\mathbf{p}_1$ \u548c $\\mathbf{p}_2$ \u4e4b\u95f4\u7684\u8f90\u5c04\u4f20\u8f93\uff0c\u4ece $\\mathbf{p}_1$ \u53d1\u51fa\u7684\u529f\u7387\uff1a\n$$d\\Phi = L_1 dA_1 \\cos\\theta_1 d\\omega_1$$\n\u5176\u4e2d $d\\omega_1 = \\frac{dA_2 \\cos\\theta_2}{r^2}$</p>\n<p>\u5728 $\\mathbf{p}_2$ \u63a5\u6536\u7684\u529f\u7387\uff1a\n$$d\\Phi = L_2 dA_2 \\cos\\theta_2 d\\omega_2$$\n\u5176\u4e2d $d\\omega_2 = \\frac{dA_1 \\cos\\theta_1}{r^2}$</p>\n<p>\u7531\u80fd\u91cf\u5b88\u6052\uff1a$L_1 = L_2$</p>\n</details>\n<p><strong>\u7ec3\u4e608.2</strong>\uff1a\u63a8\u5bfcLambertian BRDF $f_r = \\rho/\\pi$ \u6ee1\u8db3\u80fd\u91cf\u5b88\u6052\u7684\u6761\u4ef6\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u8ba1\u7b97\u534a\u7403\u79ef\u5206 $\\int_{\\Omega} f_r \\cos\\theta \\, d\\omega$\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>$$\\int_{\\Omega} \\frac{\\rho}{\\pi} \\cos\\theta \\, d\\omega = \\frac{\\rho}{\\pi} \\int_0^{2\\pi} \\int_0^{\\pi/2} \\cos\\theta \\sin\\theta \\, d\\theta \\, d\\phi = \\frac{\\rho}{\\pi} \\cdot 2\\pi \\cdot \\frac{1}{2} = \\rho$$\n\u56e0\u6b64\u80fd\u91cf\u5b88\u6052\u8981\u6c42 $\\rho \\leq 1$\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e608.3</strong>\uff1a\u8ba1\u7b97\u5747\u5300\u91c7\u6837\u534a\u7403\u65b9\u5411\u65f6\uff0c\u4f30\u8ba1\u5668 $\\frac{\\cos\\theta}{p(\\omega)}$ \u7684\u65b9\u5dee\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u5747\u5300\u91c7\u6837\u65f6 $p(\\omega) = 1/(2\\pi)$\uff0c\u8ba1\u7b97 $E[(\\cos\\theta)^2]$\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>$$V = E\\left[\\left(\\frac{\\cos\\theta}{1/(2\\pi)}\\right)^2\\right] - \\left(E\\left[\\frac{\\cos\\theta}{1/(2\\pi)}\\right]\\right)^2$$\n$$= (2\\pi)^2 \\int_{\\Omega} \\cos^2\\theta \\frac{1}{2\\pi} d\\omega - \\pi^2$$\n$$= 2\\pi \\cdot \\frac{\\pi}{2} - \\pi^2 = 0$$</p>\n</details>\n<h3 id=\"_4\">\u6311\u6218\u9898</h3>\n<p><strong>\u7ec3\u4e608.4</strong>\uff1a\u8bbe\u8ba1\u4e00\u4e2a\u91c7\u6837\u7b56\u7565\uff0c\u540c\u65f6\u8003\u8651BRDF\u548c\u5165\u5c04\u5149\u7167\u5206\u5e03\uff0c\u5e76\u63a8\u5bfc\u76f8\u5e94\u7684pdf\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u8003\u8651\u4e58\u79ef $f_r(\\omega) L_i(\\omega) \\cos\\theta$ \u7684\u91cd\u8981\u6027\u91c7\u6837\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u7406\u60f3\u7684pdf\u5e94\u8be5\u6b63\u6bd4\u4e8e\u88ab\u79ef\u51fd\u6570\uff1a\n$$p(\\omega) \\propto f_r(\\omega_i \\to \\omega_o) L_i(\\omega_i) \\cos\\theta_i$$\n\u5b9e\u8df5\u4e2d\u53ef\u4ee5\u4f7f\u7528\u591a\u91cd\u91cd\u8981\u6027\u91c7\u6837\u7ec4\u5408BRDF\u91c7\u6837\u548c\u5149\u6e90\u91c7\u6837\uff1a</p>\n<ul>\n<li>BRDF\u91c7\u6837\uff1a$p_1(\\omega) \\propto f_r(\\omega)$</li>\n<li>\u5149\u6e90\u91c7\u6837\uff1a$p_2(\\omega) \\propto L_i(\\omega) \\cos\\theta$</li>\n</ul>\n<p>\u4f7f\u7528MIS\u6743\u91cd\u7ec4\u5408\u4e24\u79cd\u7b56\u7565\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e608.5</strong>\uff1a\u5206\u6790\u8def\u5f84\u8ffd\u8e2a\u4e2d\u4e0d\u540c\u957f\u5ea6\u8def\u5f84\u7684\u76f8\u5bf9\u8d21\u732e\uff0c\u5047\u8bbe\u573a\u666f\u4e2d\u6750\u8d28\u7684\u5e73\u5747\u53cd\u5c04\u7387\u4e3a $\\bar{\\rho}$\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u8003\u8651\u51e0\u4f55\u7ea7\u6570\u548c\u8def\u5f84\u7684\u6982\u7387\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u957f\u5ea6\u4e3a $n$ \u7684\u8def\u5f84\u7684\u5e73\u5747\u8d21\u732e\u5927\u7ea6\u4e3a $\\bar{\\rho}^n$\u3002\u603b\u8d21\u732e\u4e3a\u51e0\u4f55\u7ea7\u6570\uff1a\n$$\\sum_{n=0}^{\\infty} \\bar{\\rho}^n = \\frac{1}{1-\\bar{\\rho}}$$</p>\n<p>\u4f8b\u5982\uff0c$\\bar{\\rho} = 0.5$ \u65f6\uff0c\u76f4\u63a5\u5149\u7167\u8d21\u732e50%\uff0c\u4e00\u6b21\u53cd\u5c04\u8d21\u732e25%\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u8fd9\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u5927\u591a\u6570\u573a\u666f\u4e2d3-5\u6b21\u53cd\u5c04\u5c31\u8db3\u591f\u4e86\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e608.6</strong>\uff1a\u63a8\u5bfc\u53cc\u5411\u8def\u5f84\u8ffd\u8e2a\u4e2d\uff0c\u957f\u5ea6\u4e3a $k$ \u7684\u8def\u5f84\u6709\u591a\u5c11\u79cd\u4e0d\u540c\u7684\u91c7\u6837\u7b56\u7565\uff0c\u5e76\u5206\u6790\u6bcf\u79cd\u7b56\u7565\u7684\u6548\u7387\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u8003\u8651\u4ece\u76f8\u673a\u8ffd\u8e2a $s$ \u6b65\uff0c\u4ece\u5149\u6e90\u8ffd\u8e2a $t$ \u6b65\uff0c\u5176\u4e2d $s + t = k$\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u5bf9\u4e8e\u957f\u5ea6\u4e3a $k$ \u7684\u8def\u5f84\uff08$k+1$ \u4e2a\u9876\u70b9\uff09\uff0c\u6709 $k+1$ \u79cd\u91c7\u6837\u7b56\u7565\uff1a</p>\n<ul>\n<li>$(s,t) = (0,k)$\uff1a\u7eaf\u5149\u6e90\u8ffd\u8e2a\uff08\u5149\u5b50\u6620\u5c04\uff09</li>\n<li>$(s,t) = (1,k-1)$\uff1a\u76f4\u63a5\u5149\u7167</li>\n<li>...</li>\n<li>$(s,t) = (k,0)$\uff1a\u7eaf\u76f8\u673a\u8ffd\u8e2a\uff08\u8def\u5f84\u8ffd\u8e2a\uff09</li>\n</ul>\n<p>\u4e0d\u540c\u7b56\u7565\u7684\u6548\u7387\u53d6\u51b3\u4e8e\u573a\u666f\u7279\u5f81\uff1a</p>\n<ul>\n<li>\u7126\u6563\uff1a\u5149\u6e90\u8ffd\u8e2a\u66f4\u6709\u6548</li>\n<li>\u95f4\u63a5\u6f2b\u53cd\u5c04\uff1a\u53cc\u5411\u8fde\u63a5\u66f4\u6709\u6548</li>\n<li>\u955c\u9762\u53cd\u5c04\uff1a\u76f8\u673a\u8ffd\u8e2a\u66f4\u6709\u6548</li>\n</ul>\n</details>\n<h2 id=\"_5\">\u5e38\u89c1\u9677\u9631\u4e0e\u9519\u8bef</h2>\n<ol>\n<li>\n<p><strong>\u8f90\u5c04\u5ea6\u5355\u4f4d\u6df7\u6dc6</strong>\n   - \u9519\u8bef\uff1a\u5c06\u8f90\u7167\u5ea6\uff08W/m\u00b2\uff09\u4e0e\u8f90\u5c04\u5ea6\uff08W/(m\u00b2\u00b7sr)\uff09\u6df7\u6dc6\n   - \u6b63\u786e\uff1a\u660e\u786e\u533a\u5206\u4e0d\u540c\u8f90\u5c04\u5ea6\u91cf\u53ca\u5176\u7269\u7406\u610f\u4e49</p>\n</li>\n<li>\n<p><strong>BRDF\u5f52\u4e00\u5316</strong>\n   - \u9519\u8bef\uff1a\u5047\u8bbe $\\int f_r d\\omega = 1$\n   - \u6b63\u786e\uff1a\u80fd\u91cf\u5b88\u6052\u8981\u6c42 $\\int f_r \\cos\\theta_o d\\omega_o \\leq 1$</p>\n</li>\n<li>\n<p><strong>\u6982\u7387\u5bc6\u5ea6\u8f6c\u6362</strong>\n   - \u9519\u8bef\uff1a\u76f4\u63a5\u4f7f\u7528\u7acb\u4f53\u89d2\u57df\u7684pdf\u8fdb\u884c\u9762\u79ef\u91c7\u6837\n   - \u6b63\u786e\uff1a$p_A = p_\\omega \\frac{r^2}{\\cos\\theta}$</p>\n</li>\n<li>\n<p><strong>\u4fc4\u7f57\u65af\u8f6e\u76d8\u8d4c\u504f\u5dee</strong>\n   - \u9519\u8bef\uff1a\u4e0d\u9664\u4ee5\u7ee7\u7eed\u6982\u7387 $P_{rr}$\n   - \u6b63\u786e\uff1a\u5fc5\u987b\u9664\u4ee5 $P_{rr}$ \u4fdd\u8bc1\u65e0\u504f</p>\n</li>\n<li>\n<p><strong>MIS\u6743\u91cd\u8ba1\u7b97</strong>\n   - \u9519\u8bef\uff1a\u53ea\u8003\u8651\u5f53\u524d\u91c7\u6837\u7b56\u7565\u7684pdf\n   - \u6b63\u786e\uff1a\u9700\u8981\u8bc4\u4f30\u6240\u6709\u53ef\u80fd\u7b56\u7565\u7684pdf</p>\n</li>\n<li>\n<p><strong>\u6570\u503c\u7cbe\u5ea6\u95ee\u9898</strong>\n   - \u9519\u8bef\uff1a\u5728\u63a5\u8fd1\u96f6\u7684pdf\u5904\u8bc4\u4f30\n   - \u6b63\u786e\uff1a\u6dfb\u52a0\u5c0f\u7684epsilon\u907f\u514d\u9664\u96f6</p>\n</li>\n</ol>\n<h2 id=\"_6\">\u6700\u4f73\u5b9e\u8df5\u68c0\u67e5\u6e05\u5355</h2>\n<h3 id=\"_7\">\u7b97\u6cd5\u5b9e\u73b0</h3>\n<ul>\n<li>[ ] \u9a8c\u8bc1BRDF\u6ee1\u8db3\u4e92\u6613\u6027\u548c\u80fd\u91cf\u5b88\u6052</li>\n<li>[ ] \u6b63\u786e\u5b9e\u73b0\u6982\u7387\u5bc6\u5ea6\u7684\u6d4b\u5ea6\u8f6c\u6362</li>\n<li>[ ] \u4f7f\u7528\u4fc4\u7f57\u65af\u8f6e\u76d8\u8d4c\u65f6\u4fdd\u8bc1\u65e0\u504f\u6027</li>\n<li>[ ] \u5b9e\u73b0\u9c81\u68d2\u7684\u5149\u7ebf-\u7269\u4f53\u76f8\u4ea4\uff0c\u5904\u7406\u6570\u503c\u8bef\u5dee</li>\n</ul>\n<h3 id=\"_8\">\u91c7\u6837\u7b56\u7565</h3>\n<ul>\n<li>[ ] \u9488\u5bf9\u4e0d\u540cBRDF\u7c7b\u578b\u5b9e\u73b0\u4e13\u95e8\u7684\u91c7\u6837\u65b9\u6cd5</li>\n<li>[ ] \u5b9e\u73b0\u76f4\u63a5\u5149\u7167\u91c7\u6837\u63d0\u9ad8\u6536\u655b\u901f\u5ea6</li>\n<li>[ ] \u4f7f\u7528\u591a\u91cd\u91cd\u8981\u6027\u91c7\u6837\u7ec4\u5408\u591a\u79cd\u7b56\u7565</li>\n<li>[ ] \u6839\u636e\u6750\u8d28\u5c5e\u6027\u81ea\u9002\u5e94\u8c03\u6574\u4fc4\u7f57\u65af\u8f6e\u76d8\u8d4c\u6982\u7387</li>\n</ul>\n<h3 id=\"_9\">\u4f18\u5316\u6280\u5de7</h3>\n<ul>\n<li>[ ] \u5b9e\u73b0\u9ad8\u6548\u7684\u5149\u6e90\u91c7\u6837\uff08\u5982\u522b\u540d\u65b9\u6cd5\uff09</li>\n<li>[ ] \u4f7f\u7528\u7a7a\u95f4\u6570\u636e\u7ed3\u6784\u52a0\u901f\u5149\u7ebf\u6c42\u4ea4</li>\n<li>[ ] \u5b9e\u73b0\u8def\u5f84\u91cd\u7528\u6280\u672f\uff08\u5982\u5149\u5b50\u6620\u5c04\uff09</li>\n<li>[ ] \u8003\u8651\u4f7f\u7528\u51c6\u8499\u7279\u5361\u6d1b\u5e8f\u5217</li>\n</ul>\n<h3 id=\"_10\">\u9a8c\u8bc1\u4e0e\u8c03\u8bd5</h3>\n<ul>\n<li>[ ] \u5b9e\u73b0\u767d\u7089\u6d4b\u8bd5\u9a8c\u8bc1\u80fd\u91cf\u5b88\u6052</li>\n<li>[ ] \u4f7f\u7528\u89e3\u6790\u89e3\u9a8c\u8bc1\u7b80\u5355\u573a\u666f</li>\n<li>[ ] \u5b9e\u73b0\u53ef\u89c6\u5316\u5de5\u5177\u8c03\u8bd5\u91c7\u6837\u5206\u5e03</li>\n<li>[ ] \u8bb0\u5f55\u65b9\u5dee\u548c\u6536\u655b\u901f\u5ea6\u7edf\u8ba1</li>\n</ul>"
  },
  "../chapter3.md": {
    "hash": "5ff441b44b6ea5a02ddd96066d57c70e",
    "content": "<h1 id=\"3\">\u7b2c3\u7ae0\uff1a\u5149\u6805\u5316</h1>\n<h2 id=\"_1\">\u7ae0\u8282\u6982\u8ff0</h2>\n<p>\u5149\u6805\u5316\u662f\u5c06\u8fde\u7eed\u7684\u51e0\u4f55\u56fe\u5143\u8f6c\u6362\u4e3a\u79bb\u6563\u50cf\u7d20\u7684\u8fc7\u7a0b\uff0c\u662f\u73b0\u4ee3\u5b9e\u65f6\u6e32\u67d3\u7684\u6838\u5fc3\u6280\u672f\u3002\u672c\u7ae0\u6df1\u5165\u63a2\u8ba8\u5149\u6805\u5316\u7684\u6570\u5b66\u539f\u7406\u3001\u7b97\u6cd5\u5b9e\u73b0\u548c\u786c\u4ef6\u4f18\u5316\u7b56\u7565\u3002\u6211\u4eec\u5c06\u4ece\u4e09\u89d2\u5f62\u7684\u79bb\u6563\u5316\u5f00\u59cb\uff0c\u9010\u6b65\u6df1\u5165\u5230\u6df1\u5ea6\u6d4b\u8bd5\u3001\u6297\u952f\u9f7f\u6280\u672f\uff0c\u6700\u540e\u63a2\u8ba8\u73b0\u4ee3GPU\u7684\u5149\u6805\u5316\u7ba1\u7ebf\u8bbe\u8ba1\u3002\u901a\u8fc7\u672c\u7ae0\u5b66\u4e60\uff0c\u8bfb\u8005\u5c06\u638c\u63e1\u4ece\u51e0\u4f55\u5230\u50cf\u7d20\u7684\u5b8c\u6574\u8f6c\u6362\u8fc7\u7a0b\uff0c\u7406\u89e3\u73b0\u4ee3\u56fe\u5f62\u786c\u4ef6\u7684\u8bbe\u8ba1\u54f2\u5b66\uff0c\u5e76\u80fd\u591f\u5206\u6790\u548c\u4f18\u5316\u5149\u6805\u5316\u6027\u80fd\u3002</p>\n<h2 id=\"31\">3.1 \u4e09\u89d2\u5f62\u7684\u79bb\u6563\u5316</h2>\n<h3 id=\"311\">3.1.1 \u4e3a\u4ec0\u4e48\u9009\u62e9\u4e09\u89d2\u5f62</h3>\n<p>\u4e09\u89d2\u5f62\u662f\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u6700\u57fa\u672c\u7684\u56fe\u5143\uff0c\u5176\u4f18\u52bf\u5305\u62ec\uff1a</p>\n<ul>\n<li><strong>\u5e73\u9762\u6027\u4fdd\u8bc1</strong>\uff1a\u4e09\u4e2a\u4e0d\u5171\u7ebf\u7684\u70b9\u552f\u4e00\u786e\u5b9a\u4e00\u4e2a\u5e73\u9762\uff0c\u907f\u514d\u4e86\u975e\u5e73\u9762\u591a\u8fb9\u5f62\u7684\u6b67\u4e49\u6027</li>\n<li><strong>\u51f8\u6027\u8d28</strong>\uff1a\u4e09\u89d2\u5f62\u5fc5\u5b9a\u662f\u51f8\u591a\u8fb9\u5f62\uff0c\u7b80\u5316\u4e86\u5185\u5916\u5224\u65ad\u548c\u5149\u6805\u5316\u7b97\u6cd5</li>\n<li><strong>\u63d2\u503c\u7b80\u5355</strong>\uff1a\u91cd\u5fc3\u5750\u6807\u63d0\u4f9b\u4e86\u81ea\u7136\u7684\u7ebf\u6027\u63d2\u503c\u6846\u67b6\uff0c\u4fdd\u8bc1\u4e86C\u2070\u8fde\u7eed\u6027</li>\n<li><strong>\u786c\u4ef6\u53cb\u597d</strong>\uff1a\u56fa\u5b9a\u7684\u9876\u70b9\u6570\u91cf\u4fbf\u4e8e\u5e76\u884c\u5904\u7406\u548c\u786c\u4ef6\u4f18\u5316</li>\n<li><strong>\u6570\u5b66\u4f18\u96c5</strong>\uff1a\u4eff\u5c04\u4e0d\u53d8\u6027\u548c\u6295\u5f71\u4e0d\u53d8\u6027\u4f7f\u5f97\u53d8\u6362\u8ba1\u7b97\u7b80\u6d01\u9ad8\u6548</li>\n</ul>\n<p>\u4e09\u89d2\u5f62\u7684\u6570\u5b66\u8868\u793a\u5f62\u5f0f\u591a\u6837\uff0c\u53ef\u4ee5\u7528\u53c2\u6570\u65b9\u7a0b\u3001\u9690\u5f0f\u65b9\u7a0b\u6216\u91cd\u5fc3\u5750\u6807\u8868\u793a\uff1a\n$$\\mathbf{p}(u,v) = (1-u-v)\\mathbf{v}_0 + u\\mathbf{v}_1 + v\\mathbf{v}_2, \\quad u,v \\geq 0, u+v \\leq 1$$</p>\n<h4 id=\"_2\">\u4e09\u89d2\u5f62\u7684\u51e0\u4f55\u6027\u8d28</h4>\n<p>\u4e09\u89d2\u5f62\u5177\u6709\u8bb8\u591a\u91cd\u8981\u7684\u51e0\u4f55\u6027\u8d28\uff0c\u8fd9\u4e9b\u6027\u8d28\u662f\u5149\u6805\u5316\u7b97\u6cd5\u7684\u7406\u8bba\u57fa\u7840\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5355\u7eaf\u5f62\u6027\u8d28</strong>\uff1a\u4e09\u89d2\u5f62\u662f\u4e8c\u7ef4\u7a7a\u95f4\u4e2d\u7684\u5355\u7eaf\u5f62\uff08simplex\uff09\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u662f\u80fd\u591f\u5f20\u6210\u4e8c\u7ef4\u7a7a\u95f4\u7684\u6700\u5c0f\u51f8\u96c6\u3002</p>\n</li>\n<li>\n<p><strong>\u91cd\u5fc3\u5750\u6807\u7684\u51e0\u4f55\u610f\u4e49</strong>\uff1a\n   - \u91cd\u5fc3\u5750\u6807 $(\\alpha, \\beta, \\gamma)$ \u8868\u793a\u70b9\u5230\u5bf9\u8fb9\u7684\u6709\u5411\u8ddd\u79bb\u6bd4\n   - \u7269\u7406\u610f\u4e49\uff1a\u5982\u679c\u5728\u4e09\u4e2a\u9876\u70b9\u653e\u7f6e\u8d28\u91cf\u4e3a $(\\alpha, \\beta, \\gamma)$ \u7684\u8d28\u70b9\uff0c\u5219\u8d28\u5fc3\u4f4d\u4e8e\u70b9 $\\mathbf{p}$\n   - \u9762\u79ef\u6bd4\uff1a$\\alpha = \\frac{\\text{Area}(\\mathbf{p}\\mathbf{v}_1\\mathbf{v}_2)}{\\text{Area}(\\mathbf{v}_0\\mathbf{v}_1\\mathbf{v}_2)}$</p>\n</li>\n<li>\n<p><strong>\u4eff\u5c04\u4e0d\u53d8\u6027</strong>\uff1a\u91cd\u5fc3\u5750\u6807\u5728\u4eff\u5c04\u53d8\u6362\u4e0b\u4fdd\u6301\u4e0d\u53d8\n$$T(\\alpha\\mathbf{v}_0 + \\beta\\mathbf{v}_1 + \\gamma\\mathbf{v}_2) = \\alpha T(\\mathbf{v}_0) + \\beta T(\\mathbf{v}_1) + \\gamma T(\\mathbf{v}_2)$$\n\u8fd9\u4e2a\u6027\u8d28\u4fdd\u8bc1\u4e86\u6211\u4eec\u53ef\u4ee5\u5728\u4efb\u610f\u5750\u6807\u7cfb\u4e2d\u8fdb\u884c\u63d2\u503c\u8ba1\u7b97\u3002</p>\n</li>\n<li>\n<p><strong>\u6b27\u62c9\u516c\u5f0f\u7684\u5e94\u7528</strong>\uff1a\u5bf9\u4e8e\u4e09\u89d2\u5f62\u7f51\u683c\uff0c\u9876\u70b9\u6570V\u3001\u8fb9\u6570E\u3001\u9762\u6570F\u6ee1\u8db3\uff1a\n$$V - E + F = 2 - 2g$$\n\u5176\u4e2dg\u662f\u4e8f\u683c\uff08genus\uff09\u3002\u5bf9\u4e8e\u7b80\u5355\u8fde\u901a\u7f51\u683c\uff0c$g=0$\uff0c\u56e0\u6b64 $F \\approx 2V$\u3002</p>\n</li>\n</ol>\n<h4 id=\"_3\">\u4e09\u89d2\u5f62\u4e0e\u5176\u4ed6\u56fe\u5143\u7684\u6bd4\u8f83</h4>\n<p><strong>\u56db\u8fb9\u5f62</strong>\uff1a</p>\n<ul>\n<li>\u4f18\u70b9\uff1a\u66f4\u5c11\u7684\u56fe\u5143\u6570\u91cf\uff0c\u67d0\u4e9b\u60c5\u51b5\u4e0b\u66f4\u81ea\u7136\uff08\u5982\u5730\u5f62\u7f51\u683c\uff09</li>\n<li>\u7f3a\u70b9\uff1a\u53ef\u80fd\u975e\u5e73\u9762\uff0c\u9700\u8981\u5206\u5272\u6210\u4e09\u89d2\u5f62\uff0c\u63d2\u503c\u66f4\u590d\u6742</li>\n</ul>\n<p><strong>\u591a\u8fb9\u5f62</strong>\uff1a</p>\n<ul>\n<li>\u4f18\u70b9\uff1a\u66f4\u7075\u6d3b\u7684\u5efa\u6a21</li>\n<li>\u7f3a\u70b9\uff1a\u9700\u8981\u4e09\u89d2\u5316\uff0c\u51f9\u591a\u8fb9\u5f62\u5904\u7406\u590d\u6742\uff0c\u786c\u4ef6\u652f\u6301\u6709\u9650</li>\n</ul>\n<p><strong>\u66f2\u9762\u7247\uff08\u5982B\u00e9zier\uff09</strong>\uff1a</p>\n<ul>\n<li>\u4f18\u70b9\uff1a\u66f4\u9ad8\u7684\u51e0\u4f55\u7cbe\u5ea6\uff0c\u66f4\u5c11\u7684\u5b58\u50a8</li>\n<li>\u7f3a\u70b9\uff1a\u8ba1\u7b97\u590d\u6742\uff0c\u9700\u8981\u7ec6\u5206\uff08tessellation\uff09\u6210\u4e09\u89d2\u5f62</li>\n</ul>\n<h4 id=\"_4\">\u4e09\u89d2\u5f62\u7684\u62d3\u6251\u8868\u793a</h4>\n<p>\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u4e09\u89d2\u5f62\u901a\u5e38\u7ec4\u7ec7\u6210\u7f51\u683c\uff08mesh\uff09\u7ed3\u6784\uff1a</p>\n<ol>\n<li>\n<p><strong>\u72ec\u7acb\u4e09\u89d2\u5f62</strong>\uff1a\u6bcf\u4e2a\u4e09\u89d2\u5f62\u5b58\u50a8\u4e09\u4e2a\u9876\u70b9\n   - \u4f18\u70b9\uff1a\u7b80\u5355\uff0c\u65e0\u4f9d\u8d56\n   - \u7f3a\u70b9\uff1a\u9876\u70b9\u91cd\u590d\uff0c\u5185\u5b58\u6d6a\u8d39</p>\n</li>\n<li>\n<p><strong>\u7d22\u5f15\u4e09\u89d2\u5f62\u5217\u8868</strong>\uff1a\u9876\u70b9\u6570\u7ec4 + \u7d22\u5f15\u6570\u7ec4\n   - \u4f18\u70b9\uff1a\u5171\u4eab\u9876\u70b9\uff0c\u8282\u7701\u5185\u5b58\n   - \u7f3a\u70b9\uff1a\u989d\u5916\u7684\u95f4\u63a5\u8bbf\u95ee</p>\n</li>\n<li>\n<p><strong>\u4e09\u89d2\u5f62\u6761\u5e26\uff08Triangle Strip\uff09</strong>\uff1a\n   - \u8868\u793a\uff1a$v_0, v_1, v_2, v_3, ...$ \u5f62\u6210\u4e09\u89d2\u5f62 $(v_0,v_1,v_2), (v_1,v_2,v_3), ...$\n   - \u4f18\u70b9\uff1a\u6700\u5c11\u7684\u7d22\u5f15\u6570\u636e\n   - \u7f3a\u70b9\uff1a\u9700\u8981\u9000\u5316\u4e09\u89d2\u5f62\u8fde\u63a5\u4e0d\u540c\u6761\u5e26</p>\n</li>\n<li>\n<p><strong>\u4e09\u89d2\u5f62\u6247\uff08Triangle Fan\uff09</strong>\uff1a\n   - \u8868\u793a\uff1a\u4e2d\u5fc3\u70b9 $v_0$ \u4e0e\u8fb9\u754c\u70b9 $v_1, v_2, ...$ \u5f62\u6210\u4e09\u89d2\u5f62\n   - \u4f18\u70b9\uff1a\u9002\u5408\u5706\u5f62\u6216\u6247\u5f62\u533a\u57df\n   - \u7f3a\u70b9\uff1a\u5e94\u7528\u573a\u666f\u6709\u9650</p>\n</li>\n</ol>\n<h3 id=\"312\">3.1.2 \u4e09\u89d2\u5f62\u7684\u8868\u793a</h3>\n<p>\u4e09\u89d2\u5f62\u53ef\u4ee5\u901a\u8fc7\u4e09\u4e2a\u9876\u70b9 $\\mathbf{v}_0, \\mathbf{v}_1, \\mathbf{v}_2$ \u8868\u793a\uff0c\u6bcf\u4e2a\u9876\u70b9\u5305\u542b\uff1a</p>\n<ul>\n<li>\u4f4d\u7f6e\uff1a$\\mathbf{p} = (x, y, z, w)^T$\uff08\u9f50\u6b21\u5750\u6807\uff09</li>\n<li>\u5c5e\u6027\uff1a\u989c\u8272\u3001\u6cd5\u7ebf\u3001\u7eb9\u7406\u5750\u6807\u7b49</li>\n</ul>\n<p>\u5728\u5c4f\u5e55\u7a7a\u95f4\u4e2d\uff0c\u7ecf\u8fc7\u6295\u5f71\u53d8\u6362\u540e\u7684\u9876\u70b9\u5750\u6807\u4e3a\uff1a\n$$\\mathbf{p}_{\\text{screen}} = \\begin{pmatrix} x_s \\ y_s \\ z_s \\end{pmatrix} = \\begin{pmatrix} \\frac{x_{ndc} + 1}{2} \\cdot \\text{width} \\ \\frac{y_{ndc} + 1}{2} \\cdot \\text{height} \\ z_{ndc} \\end{pmatrix}$$\n\u5176\u4e2dNDC\uff08Normalized Device Coordinates\uff09\u5750\u6807\u8303\u56f4\u4e3a$[-1, 1]^3$\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c$z_s$\u901a\u5e38\u4f1a\u7ecf\u8fc7\u975e\u7ebf\u6027\u53d8\u6362\u4ee5\u4f18\u5316\u6df1\u5ea6\u7cbe\u5ea6\u5206\u5e03\u3002</p>\n<p>\u4e09\u89d2\u5f62\u7684\u9690\u5f0f\u8868\u793a\u4f7f\u7528\u5e73\u9762\u65b9\u7a0b\uff1a\n$$\\mathbf{n} \\cdot (\\mathbf{p} - \\mathbf{v}_0) = 0$$\n\u5176\u4e2d\u6cd5\u5411\u91cf$\\mathbf{n} = (\\mathbf{v}_1 - \\mathbf{v}_0) \\times (\\mathbf{v}_2 - \\mathbf{v}_0)$\u51b3\u5b9a\u4e86\u4e09\u89d2\u5f62\u7684\u671d\u5411\u3002</p>\n<h4 id=\"_5\">\u5750\u6807\u7cfb\u53d8\u6362\u94fe</h4>\n<p>\u4e09\u89d2\u5f62\u9876\u70b9\u7ecf\u5386\u7684\u5b8c\u6574\u53d8\u6362\u94fe\uff1a</p>\n<ol>\n<li>\n<p><strong>\u6a21\u578b\u7a7a\u95f4\uff08Model Space\uff09</strong> \u2192 <strong>\u4e16\u754c\u7a7a\u95f4\uff08World Space\uff09</strong>\n$$\\mathbf{p}_{world} = \\mathbf{M}_{model} \\mathbf{p}_{model}$$</p>\n</li>\n<li>\n<p><strong>\u4e16\u754c\u7a7a\u95f4</strong> \u2192 <strong>\u89c2\u5bdf\u7a7a\u95f4\uff08View Space\uff09</strong>\n$$\\mathbf{p}_{view} = \\mathbf{V} \\mathbf{p}_{world}$$</p>\n</li>\n<li>\n<p><strong>\u89c2\u5bdf\u7a7a\u95f4</strong> \u2192 <strong>\u88c1\u526a\u7a7a\u95f4\uff08Clip Space\uff09</strong>\n$$\\mathbf{p}_{clip} = \\mathbf{P} \\mathbf{p}_{view}$$\n\u6b64\u65f6\u5750\u6807\u4e3a\u9f50\u6b21\u5750\u6807 $(x_c, y_c, z_c, w_c)$</p>\n</li>\n<li>\n<p><strong>\u900f\u89c6\u9664\u6cd5</strong> \u2192 <strong>NDC\u7a7a\u95f4</strong>\n$$\\mathbf{p}_{ndc} = \\begin{pmatrix} x_c/w_c \\ y_c/w_c \\ z_c/w_c \\end{pmatrix}$$</p>\n</li>\n<li>\n<p><strong>\u89c6\u53e3\u53d8\u6362</strong> \u2192 <strong>\u5c4f\u5e55\u7a7a\u95f4</strong>\n$$x_s = (x_{ndc} + 1) \\cdot \\frac{width}{2} + x_{viewport}$$\n   $$y_s = (y_{ndc} + 1) \\cdot \\frac{height}{2} + y_{viewport}$$</p>\n</li>\n</ol>\n<h4 id=\"_6\">\u4e09\u89d2\u5f62\u7684\u6570\u636e\u7ed3\u6784</h4>\n<p>\u9ad8\u6548\u7684\u4e09\u89d2\u5f62\u8868\u793a\u9700\u8981\u8003\u8651\u5185\u5b58\u5e03\u5c40\u548c\u7f13\u5b58\u53cb\u597d\u6027\uff1a</p>\n<pre class=\"codehilite\"><code>struct Vertex {\n    float3 position;     // 12 bytes\n    float3 normal;       // 12 bytes\n    float2 texcoord;     // 8 bytes\n    float4 tangent;      // 16 bytes (\u542b\u624b\u6027)\n    // \u603b\u8ba1 48 bytes\uff0c\u5bf9\u9f50\u5230 64 bytes\n};\n\nstruct Triangle {\n    uint3 indices;       // \u9876\u70b9\u7d22\u5f15\n    uint materialID;     // \u6750\u8d28\u7d22\u5f15\n    float area;          // \u9884\u8ba1\u7b97\u7684\u9762\u79ef\n    float3 normal;       // \u9884\u8ba1\u7b97\u7684\u6cd5\u7ebf\n};\n</code></pre>\n\n<h4 id=\"_7\">\u9000\u5316\u4e09\u89d2\u5f62\u7684\u5904\u7406</h4>\n<p>\u9000\u5316\u4e09\u89d2\u5f62\u662f\u6307\u9762\u79ef\u4e3a\u96f6\u6216\u63a5\u8fd1\u96f6\u7684\u4e09\u89d2\u5f62\uff0c\u53ef\u80fd\u7531\u4ee5\u4e0b\u539f\u56e0\u4ea7\u751f\uff1a</p>\n<ol>\n<li><strong>\u5171\u7ebf\u9876\u70b9</strong>\uff1a\u4e09\u4e2a\u9876\u70b9\u5728\u4e00\u6761\u76f4\u7ebf\u4e0a</li>\n<li><strong>\u91cd\u590d\u9876\u70b9</strong>\uff1a\u4e24\u4e2a\u6216\u66f4\u591a\u9876\u70b9\u4f4d\u7f6e\u76f8\u540c</li>\n<li><strong>\u6570\u503c\u7cbe\u5ea6</strong>\uff1a\u6d6e\u70b9\u8bef\u5dee\u5bfc\u81f4\u7684\u8fd1\u4f3c\u5171\u7ebf</li>\n</ol>\n<p>\u68c0\u6d4b\u65b9\u6cd5\uff1a\n$$\\text{area} = \\frac{1}{2}||(\\mathbf{v}_1 - \\mathbf{v}_0) \\times (\\mathbf{v}_2 - \\mathbf{v}_0)|| &lt; \\epsilon$$\n\u5904\u7406\u7b56\u7565\uff1a</p>\n<ul>\n<li><strong>\u9884\u5904\u7406\u5254\u9664</strong>\uff1a\u5728\u7f51\u683c\u5904\u7406\u9636\u6bb5\u5220\u9664</li>\n<li><strong>\u8fd0\u884c\u65f6\u8df3\u8fc7</strong>\uff1a\u5149\u6805\u5316\u65f6\u68c0\u6d4b\u5e76\u8df3\u8fc7</li>\n<li><strong>\u9876\u70b9\u5408\u5e76</strong>\uff1a\u5c06\u8ddd\u79bb\u8fc7\u8fd1\u7684\u9876\u70b9\u5408\u5e76</li>\n</ul>\n<h4 id=\"_8\">\u4e09\u89d2\u5f62\u7684\u65b9\u5411\u4e0e\u7f20\u7ed5\u987a\u5e8f</h4>\n<p>\u7f20\u7ed5\u987a\u5e8f\uff08winding order\uff09\u51b3\u5b9a\u4e86\u4e09\u89d2\u5f62\u7684\u6b63\u9762\uff1a</p>\n<ol>\n<li>\n<p><strong>\u9006\u65f6\u9488\uff08CCW\uff09</strong>\uff1aOpenGL\u9ed8\u8ba4\n   - \u4ece\u89c2\u5bdf\u8005\u89d2\u5ea6\u770b\uff0c\u9876\u70b9\u6309\u9006\u65f6\u9488\u6392\u5217\u4e3a\u6b63\u9762\n   - \u6cd5\u7ebf\u6307\u5411\u89c2\u5bdf\u8005</p>\n</li>\n<li>\n<p><strong>\u987a\u65f6\u9488\uff08CW\uff09</strong>\uff1aDirectX\u9ed8\u8ba4\n   - \u4ece\u89c2\u5bdf\u8005\u89d2\u5ea6\u770b\uff0c\u9876\u70b9\u6309\u987a\u65f6\u9488\u6392\u5217\u4e3a\u6b63\u9762</p>\n</li>\n</ol>\n<p>\u53c9\u79ef\u4e0e\u7f20\u7ed5\u987a\u5e8f\u7684\u5173\u7cfb\uff1a\n$$\\mathbf{n} = (\\mathbf{v}_1 - \\mathbf{v}_0) \\times (\\mathbf{v}_2 - \\mathbf{v}_0)$$</p>\n<ul>\n<li>CCW\uff1a\u6cd5\u7ebf\u6307\u5411\u5916\uff08\u6b63\u9762\uff09</li>\n<li>CW\uff1a\u6cd5\u7ebf\u6307\u5411\u5185\uff08\u80cc\u9762\uff09</li>\n</ul>\n<h4 id=\"_9\">\u4e09\u89d2\u5f62\u7684\u5c42\u6b21\u8868\u793a</h4>\n<p>\u5bf9\u4e8e\u590d\u6742\u6a21\u578b\uff0c\u4e09\u89d2\u5f62\u5e38\u7ec4\u7ec7\u6210\u5c42\u6b21\u7ed3\u6784\uff1a</p>\n<ol>\n<li>\n<p><strong>BVH\uff08Bounding Volume Hierarchy\uff09</strong>\uff1a\n   - \u6bcf\u4e2a\u8282\u70b9\u5305\u542b\u5b50\u4e09\u89d2\u5f62\u7684\u5305\u56f4\u76d2\n   - \u7528\u4e8e\u52a0\u901f\u5149\u7ebf\u8ffd\u8e2a\u548c\u78b0\u649e\u68c0\u6d4b</p>\n</li>\n<li>\n<p><strong>LOD\uff08Level of Detail\uff09</strong>\uff1a\n   - \u4e0d\u540c\u8ddd\u79bb\u4f7f\u7528\u4e0d\u540c\u7cbe\u5ea6\u7684\u4e09\u89d2\u5f62\u7f51\u683c\n   - \u51cf\u5c11\u8fdc\u5904\u7269\u4f53\u7684\u6e32\u67d3\u5f00\u9500</p>\n</li>\n<li>\n<p><strong>\u7a7a\u95f4\u5212\u5206</strong>\uff1a\n   - Octree\u3001KD-Tree\u7b49\u7ed3\u6784\n   - \u52a0\u901f\u7a7a\u95f4\u67e5\u8be2\u548c\u5254\u9664</p>\n</li>\n</ol>\n<h3 id=\"313\">3.1.3 \u70b9\u5728\u4e09\u89d2\u5f62\u5185\u7684\u5224\u65ad</h3>\n<h4 id=\"edge-function\">\u53c9\u79ef\u6cd5\uff08Edge Function\uff09</h4>\n<p>\u5bf9\u4e8e\u5c4f\u5e55\u7a7a\u95f4\u4e2d\u7684\u70b9 $\\mathbf{p} = (x, y)$\uff0c\u5224\u65ad\u5176\u662f\u5426\u5728\u4e09\u89d2\u5f62\u5185\u90e8\u6700\u5e38\u7528\u7684\u65b9\u6cd5\u662f\u8fb9\u51fd\u6570\uff08edge function\uff09\uff1a\n$$E_{01}(\\mathbf{p}) = (x - x_0)(y_1 - y_0) - (y - y_0)(x_1 - x_0)$$\n\u8fb9\u51fd\u6570\u7684\u51e0\u4f55\u610f\u4e49\u662f\u6709\u5411\u9762\u79ef\u7684\u4e24\u500d\uff0c\u7b26\u53f7\u8868\u793a\u70b9\u5728\u8fb9\u7684\u54ea\u4e00\u4fa7\u3002\u70b9 $\\mathbf{p}$ \u5728\u4e09\u89d2\u5f62\u5185\u90e8\u5f53\u4e14\u4ec5\u5f53\uff1a</p>\n<ul>\n<li>$E_{01}(\\mathbf{p}) \\geq 0$</li>\n<li>$E_{12}(\\mathbf{p}) \\geq 0$  </li>\n<li>$E_{20}(\\mathbf{p}) \\geq 0$</li>\n</ul>\n<p>\uff08\u5047\u8bbe\u4e09\u89d2\u5f62\u9876\u70b9\u6309\u9006\u65f6\u9488\u987a\u5e8f\u6392\u5217\uff09</p>\n<p>\u8fb9\u51fd\u6570\u7684\u4f18\u52bf\u5728\u4e8e\uff1a</p>\n<ol>\n<li><strong>\u589e\u91cf\u8ba1\u7b97</strong>\uff1a\u76f8\u90bb\u50cf\u7d20\u7684\u8fb9\u51fd\u6570\u503c\u53ef\u901a\u8fc7\u7b80\u5355\u52a0\u6cd5\u83b7\u5f97</li>\n<li><strong>\u5e76\u884c\u53cb\u597d</strong>\uff1a\u4e0d\u540c\u50cf\u7d20\u7684\u8ba1\u7b97\u5b8c\u5168\u72ec\u7acb</li>\n<li><strong>\u7cbe\u786e\u6027</strong>\uff1a\u4f7f\u7528\u6574\u6570\u8fd0\u7b97\u53ef\u907f\u514d\u6d6e\u70b9\u8bef\u5dee</li>\n</ol>\n<h4 id=\"_10\">\u8fb9\u51fd\u6570\u7684\u6570\u5b66\u6027\u8d28</h4>\n<p>\u8fb9\u51fd\u6570\u5177\u6709\u4ee5\u4e0b\u91cd\u8981\u6027\u8d28\uff1a</p>\n<ol>\n<li>\n<p><strong>\u7ebf\u6027\u6027</strong>\uff1a\u8fb9\u51fd\u6570\u662f\u4f4d\u7f6e\u7684\u7ebf\u6027\u51fd\u6570\n$$E(x+\\Delta x, y+\\Delta y) = E(x,y) + A\\Delta x + B\\Delta y$$\n\u5176\u4e2d $A = y_1 - y_0$, $B = x_0 - x_1$</p>\n</li>\n<li>\n<p><strong>\u7b26\u53f7\u51e0\u4f55\u610f\u4e49</strong>\uff1a\n   - $E &gt; 0$\uff1a\u70b9\u5728\u8fb9\u7684\u5de6\u4fa7\uff08\u9006\u65f6\u9488\u65b9\u5411\uff09\n   - $E &lt; 0$\uff1a\u70b9\u5728\u8fb9\u7684\u53f3\u4fa7\n   - $E = 0$\uff1a\u70b9\u5728\u8fb9\u4e0a</p>\n</li>\n<li>\n<p><strong>\u4e0e\u6709\u5411\u9762\u79ef\u7684\u5173\u7cfb</strong>\uff1a\n$$E_{01}(\\mathbf{p}) = 2 \\cdot \\text{SignedArea}(\\mathbf{v}_0, \\mathbf{v}_1, \\mathbf{p})$$</p>\n</li>\n<li>\n<p><strong>\u7f29\u653e\u4e0d\u53d8\u6027</strong>\uff1a\n$$E_{01}(s\\mathbf{p}) = s^2 E_{01}(\\mathbf{p})$$</p>\n</li>\n</ol>\n<h4 id=\"_11\">\u8fb9\u51fd\u6570\u7684\u5411\u91cf\u5f62\u5f0f</h4>\n<p>\u4f7f\u7528\u5411\u91cf\u8868\u793a\u53ef\u4ee5\u66f4\u6e05\u6670\u5730\u7406\u89e3\u8fb9\u51fd\u6570\uff1a\n$$E_{01}(\\mathbf{p}) = \\det\\begin{pmatrix} \n\\mathbf{p} - \\mathbf{v}_0 &amp; \\mathbf{v}_1 - \\mathbf{v}_0 \n\\end{pmatrix} = (\\mathbf{p} - \\mathbf{v}_0) \\times (\\mathbf{v}_1 - \\mathbf{v}_0)$$\n\u8fd9\u8868\u660e\u8fb9\u51fd\u6570\u5b9e\u9645\u4e0a\u662f\u4e24\u4e2a\u5411\u91cf\u7684\u53c9\u79ef\u7684z\u5206\u91cf\u3002</p>\n<h4 id=\"edge-rules\">\u7cbe\u786e\u8fb9\u754c\u5904\u7406\uff08Edge Rules\uff09</h4>\n<p>\u5f53\u50cf\u7d20\u4e2d\u5fc3\u6070\u597d\u843d\u5728\u4e09\u89d2\u5f62\u8fb9\u754c\u4e0a\u65f6\uff0c\u9700\u8981\u660e\u786e\u7684\u89c4\u5219\u907f\u514d\uff1a</p>\n<ul>\n<li>\u50cf\u7d20\u88ab\u591a\u4e2a\u4e09\u89d2\u5f62\u540c\u65f6\u8986\u76d6</li>\n<li>\u50cf\u7d20\u672a\u88ab\u4efb\u4f55\u4e09\u89d2\u5f62\u8986\u76d6</li>\n</ul>\n<p><strong>Top-Left\u89c4\u5219</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>bool is_top_edge(v0, v1) {\n    return v0.y == v1.y &amp;&amp; v0.x &lt; v1.x;  // \u6c34\u5e73\u4e14\u5411\u53f3\n}\n\nbool is_left_edge(v0, v1) {\n    return v0.y &lt; v1.y;  // \u5411\u4e0a\n}\n\n// \u8fb9\u754c\u6d4b\u8bd5\nif (E == 0) {\n    accept = is_top_edge(v0, v1) || is_left_edge(v0, v1);\n}\n</code></pre>\n\n<h4 id=\"_12\">\u5b9a\u70b9\u6570\u5b9e\u73b0</h4>\n<p>\u4e3a\u4e86\u4fdd\u8bc1\u7cbe\u786e\u6027\uff0c\u5b9e\u9645\u5b9e\u73b0\u4e2d\u4f7f\u7528\u5b9a\u70b9\u6570\uff1a</p>\n<pre class=\"codehilite\"><code>// \u8f6c\u6362\u4e3a\u5b9a\u70b9\u6570\uff0816.8\u683c\u5f0f\uff09\nint32_t to_fixed(float f) {\n    return (int32_t)(f * 256.0f + 0.5f);\n}\n\n// \u5b9a\u70b9\u6570\u8fb9\u51fd\u6570\nint32_t edge_fixed(int32_t x, int32_t y, \n                   int32_t x0, int32_t y0,\n                   int32_t x1, int32_t y1) {\n    return (x - x0) * (y1 - y0) - (y - y0) * (x1 - x0);\n}\n</code></pre>\n\n<p>\u4f18\u52bf\uff1a</p>\n<ul>\n<li>\u7cbe\u786e\uff1a\u65e0\u6d6e\u70b9\u820d\u5165\u8bef\u5dee</li>\n<li>\u5feb\u901f\uff1a\u6574\u6570\u8fd0\u7b97</li>\n<li>\u4e00\u81f4\uff1a\u76f8\u90bb\u4e09\u89d2\u5f62\u5171\u4eab\u8fb9\u4ea7\u751f\u76f8\u540c\u7ed3\u679c</li>\n</ul>\n<h4 id=\"barycentric-coordinates\">\u91cd\u5fc3\u5750\u6807\uff08Barycentric Coordinates\uff09</h4>\n<p>\u91cd\u5fc3\u5750\u6807 $(\\alpha, \\beta, \\gamma)$ \u5b9a\u4e49\u4e86\u70b9\u76f8\u5bf9\u4e8e\u4e09\u89d2\u5f62\u7684\u4f4d\u7f6e\uff1a\n$$\\mathbf{p} = \\alpha \\mathbf{v}_0 + \\beta \\mathbf{v}_1 + \\gamma \\mathbf{v}_2$$\n\u5176\u4e2d $\\alpha + \\beta + \\gamma = 1$\u3002\u8ba1\u7b97\u516c\u5f0f\u4e3a\uff1a\n$$\\alpha = \\frac{E_{12}(\\mathbf{p})}{E_{12}(\\mathbf{v}_0)}$$\n$$\\beta = \\frac{E_{20}(\\mathbf{p})}{E_{20}(\\mathbf{v}_1)}$$\n$$\\gamma = \\frac{E_{01}(\\mathbf{p})}{E_{01}(\\mathbf{v}_2)}$$\n\u70b9\u5728\u4e09\u89d2\u5f62\u5185\u90e8\u5f53\u4e14\u4ec5\u5f53 $\\alpha, \\beta, \\gamma \\geq 0$\u3002</p>\n<p>\u91cd\u5fc3\u5750\u6807\u7684\u6027\u8d28\uff1a</p>\n<ul>\n<li><strong>\u4eff\u5c04\u4e0d\u53d8\u6027</strong>\uff1a\u5728\u4eff\u5c04\u53d8\u6362\u4e0b\u4fdd\u6301\u4e0d\u53d8</li>\n<li><strong>\u63d2\u503c\u6027\u8d28</strong>\uff1a\u4efb\u4f55\u9876\u70b9\u5c5e\u6027\u90fd\u53ef\u4ee5\u901a\u8fc7\u91cd\u5fc3\u5750\u6807\u7ebf\u6027\u63d2\u503c</li>\n<li><strong>\u5f52\u4e00\u5316</strong>\uff1a$\\alpha + \\beta + \\gamma = 1$ \u786e\u4fdd\u4e86\u63d2\u503c\u7684\u6b63\u786e\u6027</li>\n</ul>\n<h4 id=\"_13\">\u91cd\u5fc3\u5750\u6807\u7684\u8ba1\u7b97\u65b9\u6cd5</h4>\n<ol>\n<li>\n<p><strong>\u9762\u79ef\u6bd4\u65b9\u6cd5</strong>\uff1a\n$$\\alpha = \\frac{\\text{Area}(\\triangle \\mathbf{p}\\mathbf{v}_1\\mathbf{v}_2)}{\\text{Area}(\\triangle \\mathbf{v}_0\\mathbf{v}_1\\mathbf{v}_2)}$$\n\u4f7f\u7528\u53c9\u79ef\u8ba1\u7b97\u9762\u79ef\uff1a\n$$\\text{Area} = \\frac{1}{2}|(\\mathbf{v}_1 - \\mathbf{v}_0) \\times (\\mathbf{v}_2 - \\mathbf{v}_0)|$$</p>\n</li>\n<li>\n<p><strong>\u7ebf\u6027\u7cfb\u7edf\u65b9\u6cd5</strong>\uff1a\n   \u89e3\u7ebf\u6027\u65b9\u7a0b\u7ec4\uff1a\n$$\\begin{pmatrix} x \\ y \\ 1 \\end{pmatrix} = \\begin{pmatrix} x_0 &amp; x_1 &amp; x_2 \\ y_0 &amp; y_1 &amp; y_2 \\ 1 &amp; 1 &amp; 1 \\end{pmatrix} \\begin{pmatrix} \\alpha \\ \\beta \\ \\gamma \\end{pmatrix}$$\n\u4f7f\u7528\u514b\u62c9\u9ed8\u6cd5\u5219\uff1a\n$$\\alpha = \\frac{\\det\\begin{pmatrix} x &amp; x_1 &amp; x_2 \\ y &amp; y_1 &amp; y_2 \\ 1 &amp; 1 &amp; 1 \\end{pmatrix}}{\\det\\begin{pmatrix} x_0 &amp; x_1 &amp; x_2 \\ y_0 &amp; y_1 &amp; y_2 \\ 1 &amp; 1 &amp; 1 \\end{pmatrix}}$$</p>\n</li>\n<li>\n<p><strong>\u8fb9\u51fd\u6570\u65b9\u6cd5</strong>\uff08\u6700\u5e38\u7528\uff09\uff1a\n$$\\alpha = \\frac{E_{12}(\\mathbf{p})}{2A}, \\quad \\beta = \\frac{E_{20}(\\mathbf{p})}{2A}, \\quad \\gamma = \\frac{E_{01}(\\mathbf{p})}{2A}$$\n\u5176\u4e2d $A$ \u662f\u4e09\u89d2\u5f62\u9762\u79ef\u3002</p>\n</li>\n</ol>\n<h4 id=\"_14\">\u91cd\u5fc3\u5750\u6807\u7684\u51e0\u4f55\u89e3\u91ca</h4>\n<ol>\n<li>\n<p><strong>\u8d28\u5fc3\u89e3\u91ca</strong>\uff1a\u5982\u679c\u5728\u4e09\u4e2a\u9876\u70b9\u5206\u522b\u653e\u7f6e\u8d28\u91cf\u4e3a $(\\alpha, \\beta, \\gamma)$ \u7684\u8d28\u70b9\uff0c\u7cfb\u7edf\u7684\u8d28\u5fc3\u5c31\u5728\u70b9 $\\mathbf{p}$\u3002</p>\n</li>\n<li>\n<p><strong>\u5782\u76f4\u8ddd\u79bb\u89e3\u91ca</strong>\uff1a\u91cd\u5fc3\u5750\u6807\u4e0e\u70b9\u5230\u5bf9\u8fb9\u7684\u5782\u76f4\u8ddd\u79bb\u6210\u6bd4\u4f8b\u3002</p>\n</li>\n<li>\n<p><strong>\u53c2\u6570\u5316\u89e3\u91ca</strong>\uff1a$(\\alpha, \\beta, \\gamma)$ \u63d0\u4f9b\u4e86\u4e09\u89d2\u5f62\u5185\u90e8\u7684\u4e00\u79cd\u81ea\u7136\u53c2\u6570\u5316\u3002</p>\n</li>\n</ol>\n<h4 id=\"_15\">\u91cd\u5fc3\u5750\u6807\u7684\u7279\u6b8a\u70b9</h4>\n<ul>\n<li><strong>\u91cd\u5fc3</strong>\uff1a$(\\frac{1}{3}, \\frac{1}{3}, \\frac{1}{3})$ - \u4e09\u6761\u4e2d\u7ebf\u7684\u4ea4\u70b9</li>\n<li><strong>\u5916\u5fc3</strong>\uff1a\u5230\u4e09\u4e2a\u9876\u70b9\u8ddd\u79bb\u76f8\u7b49\u7684\u70b9</li>\n<li><strong>\u5185\u5fc3</strong>\uff1a$(\\frac{a}{a+b+c}, \\frac{b}{a+b+c}, \\frac{c}{a+b+c})$ - \u5176\u4e2d$a,b,c$\u662f\u8fb9\u957f</li>\n<li><strong>\u5782\u5fc3</strong>\uff1a\u4e09\u6761\u9ad8\u7ebf\u7684\u4ea4\u70b9</li>\n</ul>\n<h4 id=\"_16\">\u91cd\u5fc3\u5750\u6807\u7684\u6570\u503c\u7a33\u5b9a\u6027</h4>\n<p>\u5f53\u4e09\u89d2\u5f62\u63a5\u8fd1\u9000\u5316\u65f6\uff0c\u91cd\u5fc3\u5750\u6807\u8ba1\u7b97\u53ef\u80fd\u4e0d\u7a33\u5b9a\u3002\u7a33\u5065\u7684\u5b9e\u73b0\u9700\u8981\uff1a</p>\n<ol>\n<li>\n<p><strong>\u6761\u4ef6\u6570\u68c0\u67e5</strong>\uff1a\n$$\\kappa = \\frac{\\max(|\\mathbf{v}_0|, |\\mathbf{v}_1|, |\\mathbf{v}_2|) \\cdot \\max(|\\mathbf{v}_1-\\mathbf{v}_0|, |\\mathbf{v}_2-\\mathbf{v}_1|, |\\mathbf{v}_0-\\mathbf{v}_2|)}{2A}$$\n\u5f53 $\\kappa$ \u5f88\u5927\u65f6\uff0c\u8ba1\u7b97\u4e0d\u7a33\u5b9a\u3002</p>\n</li>\n<li>\n<p><strong>\u9000\u5316\u5904\u7406</strong>\uff1a\n   <code>if (area &lt; epsilon) {\n       // \u9000\u5316\u4e3a\u7ebf\u6bb5\u6216\u70b9\n       // \u4f7f\u7528\u6295\u5f71\u5230\u6700\u957f\u8fb9\u7684\u65b9\u6cd5\n   }</code></p>\n</li>\n<li>\n<p><strong>\u53cc\u7cbe\u5ea6\u8ba1\u7b97</strong>\uff1a\u5bf9\u4e8e\u5927\u578b\u573a\u666f\uff0c\u4f7f\u7528\u53cc\u7cbe\u5ea6\u907f\u514d\u7cbe\u5ea6\u635f\u5931\u3002</p>\n</li>\n</ol>\n<h4 id=\"_17\">\u5176\u4ed6\u5224\u65ad\u65b9\u6cd5</h4>\n<p><strong>\u540c\u4fa7\u6cd5</strong>\uff1a\u68c0\u67e5\u70b9\u662f\u5426\u4e0e\u5bf9\u9762\u9876\u70b9\u5728\u6bcf\u6761\u8fb9\u7684\u540c\u4e00\u4fa7\u3002</p>\n<p>\u5bf9\u4e8e\u6bcf\u6761\u8fb9 $(\\mathbf{v}_i, \\mathbf{v}_j)$\uff0c\u68c0\u67e5\uff1a\n$$\\text{sign}(E_{ij}(\\mathbf{p})) = \\text{sign}(E_{ij}(\\mathbf{v}_k))$$\n\u5176\u4e2d $\\mathbf{v}_k$ \u662f\u7b2c\u4e09\u4e2a\u9876\u70b9\u3002</p>\n<p><strong>\u9762\u79ef\u6cd5</strong>\uff1a\u6bd4\u8f83\u5b50\u4e09\u89d2\u5f62\u9762\u79ef\u4e4b\u548c\u4e0e\u539f\u4e09\u89d2\u5f62\u9762\u79ef\uff1a\n$$\\text{Area}(PAB) + \\text{Area}(PBC) + \\text{Area}(PCA) = \\text{Area}(ABC)$$\n\u7531\u4e8e\u6d6e\u70b9\u8bef\u5dee\uff0c\u5b9e\u9645\u5224\u65ad\u65f6\u9700\u8981\u5bb9\u5dee\uff1a\n$$|\\sum \\text{Area}_i - \\text{Area}_{total}| &lt; \\epsilon$$\n<strong>\u5411\u91cf\u6cd5</strong>\uff1a\u4f7f\u7528\u5411\u91cf\u53c9\u79ef\u7684\u65b9\u5411\u4e00\u81f4\u6027\uff1a</p>\n<pre class=\"codehilite\"><code>vec2 v0v1 = v1 - v0;\nvec2 v1v2 = v2 - v1;\nvec2 v2v0 = v0 - v2;\n\nvec2 v0p = p - v0;\nvec2 v1p = p - v1;\nvec2 v2p = p - v2;\n\nfloat cross0 = v0v1.x * v0p.y - v0v1.y * v0p.x;\nfloat cross1 = v1v2.x * v1p.y - v1v2.y * v1p.x;\nfloat cross2 = v2v0.x * v2p.y - v2v0.y * v2p.x;\n\n// \u6240\u6709\u53c9\u79ef\u540c\u53f7\u5219\u5728\u5185\u90e8\nreturn (cross0 &gt;= 0 &amp;&amp; cross1 &gt;= 0 &amp;&amp; cross2 &gt;= 0) ||\n       (cross0 &lt;= 0 &amp;&amp; cross1 &lt;= 0 &amp;&amp; cross2 &lt;= 0);\n</code></pre>\n\n<p><strong>\u89d2\u5ea6\u6cd5</strong>\uff1a\u8ba1\u7b97\u70b9\u5bf9\u4e09\u89d2\u5f62\u4e09\u6761\u8fb9\u7684\u5f20\u89d2\u4e4b\u548c\uff1a</p>\n<ul>\n<li>\u5185\u90e8\u70b9\uff1a\u5f20\u89d2\u4e4b\u548c = $2\\pi$</li>\n<li>\u5916\u90e8\u70b9\uff1a\u5f20\u89d2\u4e4b\u548c &lt; $2\\pi$</li>\n<li>\u8fb9\u754c\u70b9\uff1a\u5f20\u89d2\u4e4b\u548c = $\\pi$</li>\n</ul>\n<h4 id=\"_18\">\u5404\u79cd\u65b9\u6cd5\u7684\u6bd4\u8f83</h4>\n<p>| \u65b9\u6cd5 | \u8ba1\u7b97\u590d\u6742\u5ea6 | \u7cbe\u5ea6 | \u786c\u4ef6\u9002\u5408\u6027 | \u5907\u6ce8 |</p>\n<table>\n<thead>\n<tr>\n<th>\u65b9\u6cd5</th>\n<th>\u8ba1\u7b97\u590d\u6742\u5ea6</th>\n<th>\u7cbe\u5ea6</th>\n<th>\u786c\u4ef6\u9002\u5408\u6027</th>\n<th>\u5907\u6ce8</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\u8fb9\u51fd\u6570</td>\n<td>O(1)</td>\n<td>\u9ad8</td>\n<td>\u6781\u597d</td>\n<td>GPU\u6807\u51c6\u65b9\u6cd5</td>\n</tr>\n<tr>\n<td>\u91cd\u5fc3\u5750\u6807</td>\n<td>O(1)</td>\n<td>\u9ad8</td>\n<td>\u597d</td>\n<td>\u540c\u65f6\u7528\u4e8e\u63d2\u503c</td>\n</tr>\n<tr>\n<td>\u9762\u79ef\u6cd5</td>\n<td>O(1)</td>\n<td>\u4e2d</td>\n<td>\u4e2d</td>\n<td>\u6d6e\u70b9\u8bef\u5dee\u7d2f\u79ef</td>\n</tr>\n<tr>\n<td>\u89d2\u5ea6\u6cd5</td>\n<td>O(1)</td>\n<td>\u4f4e</td>\n<td>\u5dee</td>\n<td>\u9700\u8981\u53cd\u4e09\u89d2\u51fd\u6570</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"314\">3.1.4 \u5149\u6805\u5316\u7b97\u6cd5</h3>\n<h4 id=\"bounding-box\">\u5305\u56f4\u76d2\u7b97\u6cd5\uff08Bounding Box\uff09</h4>\n<p>\u6700\u7b80\u5355\u7684\u5149\u6805\u5316\u7b97\u6cd5\uff1a</p>\n<ol>\n<li>\u8ba1\u7b97\u4e09\u89d2\u5f62\u7684\u8f74\u5bf9\u9f50\u5305\u56f4\u76d2\uff08AABB\uff09</li>\n<li>\u904d\u5386\u5305\u56f4\u76d2\u5185\u7684\u6240\u6709\u50cf\u7d20</li>\n<li>\u5bf9\u6bcf\u4e2a\u50cf\u7d20\u8fdb\u884c\u5185\u5916\u6d4b\u8bd5</li>\n</ol>\n<pre class=\"codehilite\"><code>xmin = floor(min(x0, x1, x2))\nxmax = ceil(max(x0, x1, x2))\nymin = floor(min(y0, y1, y2))\nymax = ceil(max(y0, y1, y2))\n\nfor y in [ymin, ymax]:\n    for x in [xmin, xmax]:\n        if (x, y) inside triangle:\n            shade_pixel(x, y)\n</code></pre>\n\n<p>\u6548\u7387\u5206\u6790\uff1a</p>\n<ul>\n<li>\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O((x_{max}-x_{min})(y_{max}-y_{min}))$</li>\n<li>\u5bf9\u4e8e\u7ec6\u957f\u4e09\u89d2\u5f62\u6548\u7387\u4f4e\u4e0b\uff08\u5927\u91cf\u50cf\u7d20\u5728\u4e09\u89d2\u5f62\u5916\uff09</li>\n<li>\u9002\u5408\u5c0f\u4e09\u89d2\u5f62\u6216\u63a5\u8fd1\u6b63\u65b9\u5f62\u7684\u4e09\u89d2\u5f62</li>\n</ul>\n<h4 id=\"_19\">\u5305\u56f4\u76d2\u4f18\u5316</h4>\n<ol>\n<li>\n<p><strong>\u50cf\u7d20\u4e2d\u5fc3\u5bf9\u9f50</strong>\uff1a\n   <code>// \u8003\u8651\u50cf\u7d20\u4e2d\u5fc3\u504f\u79fb\n   xmin = floor(min(x0, x1, x2) - 0.5)\n   xmax = ceil(max(x0, x1, x2) - 0.5)</code></p>\n</li>\n<li>\n<p><strong>\u4fdd\u5b88\u5305\u56f4\u76d2</strong>\uff1a\n   \u4e3a\u4e86\u5904\u7406\u6d6e\u70b9\u8bef\u5dee\uff0c\u7a0d\u5fae\u6269\u5927\u5305\u56f4\u76d2\uff1a\n   <code>const float epsilon = 0.001f;\n   xmin = floor(min(x0, x1, x2) - epsilon);\n   xmax = ceil(max(x0, x1, x2) + epsilon);</code></p>\n</li>\n<li>\n<p><strong>\u7a7a\u5305\u56f4\u76d2\u68c0\u67e5</strong>\uff1a\n   <code>if (xmin &gt; xmax || ymin &gt; ymax) {\n       return; // \u9000\u5316\u4e09\u89d2\u5f62\uff0c\u8df3\u8fc7\n   }</code></p>\n</li>\n</ol>\n<h4 id=\"_20\">\u586b\u5145\u7387\u5206\u6790</h4>\n<p>\u5b9a\u4e49\u586b\u5145\u7387\uff08fill rate\uff09\u4e3a\uff1a\n$$\\text{Fill Rate} = \\frac{\\text{Triangle Area}}{\\text{Bounding Box Area}}$$\n\u4e0d\u540c\u5f62\u72b6\u4e09\u89d2\u5f62\u7684\u586b\u5145\u7387\uff1a</p>\n<ul>\n<li>\u6b63\u4e09\u89d2\u5f62\uff1a\u7ea650%</li>\n<li>\u76f4\u89d2\u4e09\u89d2\u5f62\uff1a50%</li>\n<li>\u7ec6\u957f\u4e09\u89d2\u5f62\uff1a\u53ef\u80fd\u4f4e\u81f31%</li>\n</ul>\n<p>\u4f4e\u586b\u5145\u7387\u610f\u5473\u7740\u5927\u91cf\u65e0\u6548\u6d4b\u8bd5\uff0c\u9700\u8981\u66f4\u7cbe\u7ec6\u7684\u7b97\u6cd5\u3002</p>\n<h4 id=\"incremental-algorithm\">\u589e\u91cf\u7b97\u6cd5\uff08Incremental Algorithm\uff09</h4>\n<p>\u8fb9\u51fd\u6570\u5177\u6709\u7ebf\u6027\u6027\u8d28\uff1a\n$$E(x+1, y) = E(x, y) + (y_1 - y_0)$$\n$$E(x, y+1) = E(x, y) - (x_1 - x_0)$$\n\u5229\u7528\u8fd9\u4e00\u6027\u8d28\u53ef\u4ee5\u907f\u514d\u91cd\u590d\u8ba1\u7b97\uff1a</p>\n<ol>\n<li>\u8ba1\u7b97\u8d77\u59cb\u70b9\u7684\u8fb9\u51fd\u6570\u503c</li>\n<li>\u4f7f\u7528\u589e\u91cf\u66f4\u65b0\u76f8\u90bb\u50cf\u7d20\u7684\u503c</li>\n<li>\u51cf\u5c11\u4e58\u6cd5\u8fd0\u7b97\uff0c\u63d0\u9ad8\u6548\u7387</li>\n</ol>\n<p>\u589e\u91cf\u7b97\u6cd5\u7684\u4f18\u5316\u7248\u672c\uff1a</p>\n<pre class=\"codehilite\"><code>// \u9884\u8ba1\u7b97\u589e\u91cf\nA01 = y0 - y1, B01 = x1 - x0\nA12 = y1 - y2, B12 = x2 - x1\nA20 = y2 - y0, B20 = x0 - x2\n\n// \u8d77\u59cb\u70b9\u8fb9\u51fd\u6570\u503c\nw0_row = E01(xmin, ymin)\nw1_row = E12(xmin, ymin)\nw2_row = E20(xmin, ymin)\n\nfor y in [ymin, ymax]:\n    w0 = w0_row\n    w1 = w1_row\n    w2 = w2_row\n    for x in [xmin, xmax]:\n        if (w0 &gt;= 0 &amp;&amp; w1 &gt;= 0 &amp;&amp; w2 &gt;= 0):\n            shade_pixel(x, y)\n        w0 += A01\n        w1 += A12\n        w2 += A20\n    w0_row += B01\n    w1_row += B12\n    w2_row += B20\n</code></pre>\n\n<h4 id=\"_21\">\u589e\u91cf\u7b97\u6cd5\u7684\u6027\u80fd\u5206\u6790</h4>\n<p>\u76f8\u6bd4\u6734\u7d20\u7b97\u6cd5\uff1a</p>\n<ul>\n<li><strong>\u4e58\u6cd5\u64cd\u4f5c</strong>\uff1a\u4ece\u6bcf\u50cf\u7d20 6 \u6b21\u51cf\u5c11\u5230 0 \u6b21</li>\n<li><strong>\u52a0\u6cd5\u64cd\u4f5c</strong>\uff1a\u6bcf\u50cf\u7d20 9 \u6b21\uff08\u4e09\u4e2a\u8fb9\u51fd\u6570\uff0c\u6bcf\u4e2a 3 \u6b21\uff09</li>\n<li><strong>\u5185\u5b58\u8bbf\u95ee</strong>\uff1a\u987a\u5e8f\u8bbf\u95ee\uff0c\u7f13\u5b58\u53cb\u597d</li>\n</ul>\n<h4 id=\"_22\">\u5e76\u884c\u589e\u91cf\u7b97\u6cd5</h4>\n<p>\u73b0\u4ee3GPU\u4f7f\u75282\u00d72\u50cf\u7d20\u5757\uff08quad\uff09\u4e3a\u5355\u4f4d\uff1a</p>\n<pre class=\"codehilite\"><code>// \u8ba1\u7b97quad\u5de6\u4e0a\u89d2\u7684\u8fb9\u51fd\u6570\u503c\nfloat3 w_base = compute_edge_functions(quad_x, quad_y);\n\n// \u5e76\u884c\u8ba1\u7b97\u56db\u4e2a\u50cf\u7d20\nfloat3 w00 = w_base;\nfloat3 w10 = w_base + float3(A01, A12, A20);\nfloat3 w01 = w_base + float3(B01, B12, B20);\nfloat3 w11 = w_base + float3(A01+B01, A12+B12, A20+B20);\n\n// SIMD\u5904\u7406\nbool4 inside = (w00 &gt;= 0) &amp; (w10 &gt;= 0) &amp; (w01 &gt;= 0) &amp; (w11 &gt;= 0);\n</code></pre>\n\n<h4 id=\"_23\">\u5b9a\u70b9\u6570\u589e\u91cf\u7b97\u6cd5</h4>\n<p>\u4e3a\u4e86\u4fdd\u8bc1\u7cbe\u5ea6\uff0c\u4f7f\u7528\u5b9a\u70b9\u6570\u8fd0\u7b97\uff1a</p>\n<pre class=\"codehilite\"><code>// 16.16\u5b9a\u70b9\u6570\u683c\u5f0f\ntypedef int32_t fixed16;\n\n// \u8f6c\u6362\u4e3a\u5b9a\u70b9\u6570\nfixed16 to_fixed16(float f) {\n    return (fixed16)(f * 65536.0f + 0.5f);\n}\n\n// \u5b9a\u70b9\u6570\u589e\u91cf\nfixed16 w0 = to_fixed16(E01(xmin, ymin));\nfixed16 A01_fixed = to_fixed16(y0 - y1);\nfixed16 B01_fixed = to_fixed16(x1 - x0);\n\n// \u5185\u5faa\u73af\nfor (int x = xmin; x &lt;= xmax; x++) {\n    if (w0 &gt;= 0 &amp;&amp; w1 &gt;= 0 &amp;&amp; w2 &gt;= 0) {\n        shade_pixel(x, y);\n    }\n    w0 += A01_fixed;\n    w1 += A12_fixed;\n    w2 += A20_fixed;\n}\n</code></pre>\n\n<h4 id=\"tiled-rasterization\">\u5206\u5757\u5149\u6805\u5316\uff08Tiled Rasterization\uff09</h4>\n<p>\u73b0\u4ee3GPU\u91c7\u7528\u5206\u5757\u7b56\u7565\uff1a</p>\n<ol>\n<li>\u5c06\u5c4f\u5e55\u5212\u5206\u4e3a\u56fa\u5b9a\u5927\u5c0f\u7684\u5757\uff08\u59828\u00d78\u621616\u00d716\uff09</li>\n<li>\u9996\u5148\u8fdb\u884c\u5757\u7ea7\u522b\u7684\u7c97\u6d4b\u8bd5</li>\n<li>\u53ea\u5bf9\u53ef\u80fd\u76f8\u4ea4\u7684\u5757\u8fdb\u884c\u50cf\u7d20\u7ea7\u6d4b\u8bd5</li>\n</ol>\n<p>\u5c42\u6b21\u5316\u6d4b\u8bd5\u7b56\u7565\uff1a</p>\n<ul>\n<li><strong>\u7c97\u7c92\u5ea6\u6d4b\u8bd5</strong>\uff1a\u4f7f\u7528\u5757\u7684\u56db\u4e2a\u89d2\u70b9\u5feb\u901f\u6392\u9664\u5b8c\u5168\u5728\u5916\u7684\u5757</li>\n<li><strong>\u7ec6\u7c92\u5ea6\u6d4b\u8bd5</strong>\uff1a\u5bf9\u901a\u8fc7\u7c97\u6d4b\u8bd5\u7684\u5757\u8fdb\u884c\u9010\u50cf\u7d20\u6d4b\u8bd5</li>\n<li><strong>\u65e9\u671f\u9000\u51fa</strong>\uff1a\u4e00\u65e6\u786e\u5b9a\u5757\u5b8c\u5168\u5728\u5185\uff0c\u8df3\u8fc7\u50cf\u7d20\u7ea7\u6d4b\u8bd5</li>\n</ul>\n<h4 id=\"scanline-algorithm\">\u626b\u63cf\u7ebf\u7b97\u6cd5\uff08Scanline Algorithm\uff09</h4>\n<p>\u7ecf\u5178\u7684\u5149\u6805\u5316\u65b9\u6cd5\uff0c\u7279\u522b\u9002\u5408\u8f6f\u4ef6\u5b9e\u73b0\uff1a</p>\n<ol>\n<li>\u627e\u51fa\u4e09\u89d2\u5f62\u4e0e\u6bcf\u6761\u626b\u63cf\u7ebf\u7684\u4ea4\u70b9</li>\n<li>\u5bf9\u6bcf\u6761\u626b\u63cf\u7ebf\uff0c\u586b\u5145\u4ea4\u70b9\u4e4b\u95f4\u7684\u50cf\u7d20</li>\n<li>\u4f7f\u7528\u6d3b\u52a8\u8fb9\u8868\uff08AET\uff09\u7ef4\u62a4\u5f53\u524d\u76f8\u4ea4\u7684\u8fb9</li>\n</ol>\n<p>\u626b\u63cf\u7ebf\u8f6c\u6362\u7684\u4f18\u52bf\uff1a</p>\n<ul>\n<li>\u5185\u5b58\u8bbf\u95ee\u6a21\u5f0f\u53cb\u597d\uff08\u884c\u4f18\u5148\uff09</li>\n<li>\u6613\u4e8e\u5b9e\u73b0\u53cd\u8d70\u6837\uff08\u901a\u8fc7\u5b50\u50cf\u7d20\u7cbe\u5ea6\uff09</li>\n<li>\u9002\u5408\u5e76\u884c\u5316\uff08\u4e0d\u540c\u626b\u63cf\u7ebf\u72ec\u7acb\uff09</li>\n</ul>\n<h4 id=\"pineda\">Pineda\u7b97\u6cd5</h4>\n<p>\u4e00\u79cd\u9ad8\u6548\u7684\u5e76\u884c\u5149\u6805\u5316\u7b97\u6cd5\uff1a</p>\n<ol>\n<li>\u540c\u65f6\u8ba1\u7b97\u4e09\u4e2a\u8fb9\u51fd\u6570</li>\n<li>\u4f7f\u7528\u8fb9\u51fd\u6570\u7684\u7b26\u53f7\u5224\u65ad\u50cf\u7d20\u4f4d\u7f6e</li>\n<li>\u652f\u6301\u4efb\u610f\u904d\u5386\u987a\u5e8f\uff08\u5982Hilbert\u66f2\u7ebf\uff09</li>\n</ol>\n<h3 id=\"315\">3.1.5 \u4e9a\u50cf\u7d20\u7cbe\u5ea6\u4e0e\u5b9a\u70b9\u6570</h3>\n<p>\u4e3a\u907f\u514d\u6d6e\u70b9\u8bef\u5dee\u5bfc\u81f4\u7684\u88c2\u7f1d\uff0c\u73b0\u4ee3\u5149\u6805\u5316\u5668\u4f7f\u7528\u5b9a\u70b9\u6570\u8868\u793a\uff1a</p>\n<ul>\n<li>\u5178\u578b\u7cbe\u5ea6\uff1a16.8\u621624.8\u683c\u5f0f\uff08\u6574\u6570\u90e8\u5206.\u5c0f\u6570\u90e8\u5206\u4f4d\u6570\uff09</li>\n<li>\u5b50\u50cf\u7d20\u7cbe\u5ea6\uff1a1/256\u50cf\u7d20\uff088\u4f4d\u5c0f\u6570\uff09\u62161/65536\u50cf\u7d20\uff0816\u4f4d\u5c0f\u6570\uff09</li>\n<li>\u4fdd\u8bc1\u76f8\u90bb\u4e09\u89d2\u5f62\u7684\u8fb9\u754c\u7cbe\u786e\u5bf9\u9f50</li>\n</ul>\n<p>\u5b9a\u70b9\u6570\u8f6c\u6362\uff1a\n$$x_{fixed} = \\lfloor x_{float} \\times 2^{subpixel_bits} + 0.5 \\rfloor$$</p>\n<h4 id=\"_24\">\u5b9a\u70b9\u6570\u7684\u6570\u5b66\u57fa\u7840</h4>\n<p>\u5b9a\u70b9\u6570\u662f\u4e00\u79cd\u7528\u6574\u6570\u8868\u793a\u5c0f\u6570\u7684\u65b9\u6cd5\u3002\u5bf9\u4e8em.n\u683c\u5f0f\uff1a</p>\n<ul>\n<li>m\u4f4d\u8868\u793a\u6574\u6570\u90e8\u5206</li>\n<li>n\u4f4d\u8868\u793a\u5c0f\u6570\u90e8\u5206</li>\n<li>\u603b\u4f4d\u6570 = m + n</li>\n<li>\u7cbe\u5ea6 = $2^{-n}$</li>\n<li>\u8303\u56f4 = $[-2^{m-1}, 2^{m-1} - 2^{-n}]$</li>\n</ul>\n<p>\u5b9a\u70b9\u6570\u8fd0\u7b97\uff1a</p>\n<pre class=\"codehilite\"><code>// \u52a0\u6cd5\uff1a\u76f4\u63a5\u76f8\u52a0\nfixed_c = fixed_a + fixed_b;\n\n// \u4e58\u6cd5\uff1a\u9700\u8981\u53f3\u79fb\nfixed_c = (fixed_a * fixed_b) &gt;&gt; n;\n\n// \u9664\u6cd5\uff1a\u9700\u8981\u5de6\u79fb\nfixed_c = (fixed_a &lt;&lt; n) / fixed_b;\n</code></pre>\n\n<h4 id=\"_25\">\u4e3a\u4ec0\u4e48\u9700\u8981\u4e9a\u50cf\u7d20\u7cbe\u5ea6</h4>\n<ol>\n<li>\n<p><strong>\u6d88\u9664\u88c2\u7f1d</strong>\uff1a\n   - \u6d6e\u70b9\u8bef\u5dee\u53ef\u80fd\u5bfc\u81f4\u76f8\u90bb\u4e09\u89d2\u5f62\u4e4b\u95f4\u51fa\u73b0\u7f1d\u9699\n   - \u5b9a\u70b9\u6570\u4fdd\u8bc1\u5171\u4eab\u8fb9\u7684\u8ba1\u7b97\u7ed3\u679c\u5b8c\u5168\u4e00\u81f4</p>\n</li>\n<li>\n<p><strong>\u7cbe\u786e\u7684\u8fb9\u754c\u5904\u7406</strong>\uff1a\n   - \u50cf\u7d20\u4e2d\u5fc3\u53ef\u80fd\u6070\u597d\u843d\u5728\u4e09\u89d2\u5f62\u8fb9\u4e0a\n   - \u9700\u8981\u4e00\u81f4\u7684\u89c4\u5219\u51b3\u5b9a\u5f52\u5c5e</p>\n</li>\n<li>\n<p><strong>\u53cd\u8d70\u6837\u652f\u6301</strong>\uff1a\n   - \u8ba1\u7b97\u90e8\u5206\u8986\u76d6\u7684\u50cf\u7d20\n   - \u9700\u8981\u4e9a\u50cf\u7d20\u7ea7\u522b\u7684\u7cbe\u5ea6</p>\n</li>\n</ol>\n<h4 id=\"_26\">\u88c2\u7f1d\u95ee\u9898\u7684\u6839\u6e90</h4>\n<p>\u6d6e\u70b9\u8fd0\u7b97\u7684\u4e0d\u7cbe\u786e\u6027\u4f1a\u5bfc\u81f4\uff1a</p>\n<ol>\n<li><strong>T\u578b\u63a5\u7f1d</strong>\uff1a\u5171\u4eab\u8fb9\u7684\u4e24\u4e2a\u4e09\u89d2\u5f62\u5728\u5149\u6805\u5316\u65f6\u4ea7\u751f\u7f1d\u9699</li>\n<li><strong>\u91cd\u590d\u50cf\u7d20</strong>\uff1a\u540c\u4e00\u50cf\u7d20\u88ab\u591a\u4e2a\u4e09\u89d2\u5f62\u8986\u76d6</li>\n<li><strong>\u4e22\u5931\u50cf\u7d20</strong>\uff1a\u8fb9\u754c\u4e0a\u7684\u50cf\u7d20\u672a\u88ab\u4efb\u4f55\u4e09\u89d2\u5f62\u8986\u76d6</li>\n</ol>\n<h4 id=\"_27\">\u88c2\u7f1d\u95ee\u9898\u7684\u5177\u4f53\u4f8b\u5b50</h4>\n<p>\u8003\u8651\u4e24\u4e2a\u5171\u4eab\u8fb9\u7684\u4e09\u89d2\u5f62\uff1a</p>\n<ul>\n<li>\u4e09\u89d2\u5f62A\uff1a$(0,0), (10,0), (5,10)$</li>\n<li>\u4e09\u89d2\u5f62B\uff1a$(10,0), (5,10), (10,10)$</li>\n<li>\u5171\u4eab\u8fb9\uff1a$(10,0) - (5,10)$</li>\n</ul>\n<p>\u5982\u679c\u4f7f\u7528\u6d6e\u70b9\u8ba1\u7b97\uff1a</p>\n<pre class=\"codehilite\"><code>// \u4e09\u89d2\u5f62A\u8ba1\u7b97\u5171\u4eab\u8fb9\u51fd\u6570\nE_A = (x - 10) * (10 - 0) - (y - 0) * (5 - 10)\n    = 10x - 100 + 5y\n\n// \u4e09\u89d2\u5f62B\u8ba1\u7b97\u540c\u4e00\u6761\u8fb9\uff08\u53cd\u5411\uff09\nE_B = (x - 5) * (0 - 10) - (y - 10) * (10 - 5)\n    = -10x + 50 - 5y + 50\n    = -10x - 5y + 100\n\n// \u7406\u8bba\u4e0a\uff1aE_A + E_B = 0\n// \u5b9e\u9645\u4e0a\uff1a\u6d6e\u70b9\u8bef\u5dee\u53ef\u80fd\u5bfc\u81f4 E_A + E_B \u2260 0\n</code></pre>\n\n<h4 id=\"_28\">\u88c2\u7f1d\u7684\u89c6\u89c9\u5f71\u54cd</h4>\n<p>\u88c2\u7f1d\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u5c24\u4e3a\u660e\u663e\uff1a</p>\n<ol>\n<li><strong>\u9ad8\u5bf9\u6bd4\u5ea6\u573a\u666f</strong>\uff1a\u4eae\u8272\u80cc\u666f\u4e0a\u7684\u6697\u8272\u7269\u4f53</li>\n<li><strong>\u8fd0\u52a8\u573a\u666f</strong>\uff1a\u88c2\u7f1d\u4f1a\u968f\u7740\u89c6\u89d2\u53d8\u5316\u800c\u95ea\u70c1</li>\n<li><strong>\u53cd\u8d70\u6837\u540e</strong>\uff1a\u88c2\u7f1d\u53ef\u80fd\u88ab\u653e\u5927</li>\n</ol>\n<h4 id=\"_29\">\u5b9a\u70b9\u6570\u8fd0\u7b97\u89c4\u5219</h4>\n<p>\u4e3a\u4fdd\u8bc1\u6c34\u5bc6\u6027\uff08watertight\uff09\uff0c\u5fc5\u987b\u9075\u5faa\uff1a</p>\n<ol>\n<li><strong>\u9876\u70b9\u6355\u6349</strong>\uff1a\u5171\u4eab\u9876\u70b9\u5fc5\u987b\u6355\u6349\u5230\u76f8\u540c\u7684\u5b9a\u70b9\u5750\u6807</li>\n<li><strong>\u586b\u5145\u89c4\u5219</strong>\uff1a\u91c7\u7528\u7edf\u4e00\u7684\u8fb9\u754c\u5f52\u5c5e\u89c4\u5219\uff08\u5982top-left rule\uff09</li>\n<li><strong>\u8fb9\u51fd\u6570\u4e00\u81f4\u6027</strong>\uff1a\u5171\u4eab\u8fb9\u7684\u8fb9\u51fd\u6570\u8ba1\u7b97\u5fc5\u987b\u4ea7\u751f\u76f8\u540c\u7ed3\u679c</li>\n</ol>\n<p>Top-left\u586b\u5145\u89c4\u5219\uff1a</p>\n<ul>\n<li>\u50cf\u7d20\u4e2d\u5fc3\u6070\u597d\u5728\u8fb9\u4e0a\u65f6\uff0c\u53ea\u6709\u5f53\u8fb9\u662f\"top\"\u6216\"left\"\u8fb9\u65f6\u624d\u5305\u542b\u8be5\u50cf\u7d20</li>\n<li>Top\u8fb9\uff1a\u6c34\u5e73\u4e14\u4f4d\u4e8e\u4e09\u89d2\u5f62\u4e0a\u65b9</li>\n<li>Left\u8fb9\uff1a\u975e\u6c34\u5e73\u4e14\u4f4d\u4e8e\u4e09\u89d2\u5f62\u5de6\u4fa7</li>\n</ul>\n<h4 id=\"top-left\">Top-Left\u89c4\u5219\u7684\u5b9e\u73b0</h4>\n<pre class=\"codehilite\"><code>bool is_top_left_edge(vec2 v0, vec2 v1) {\n    vec2 edge = v1 - v0;\n\n    // Top edge: horizontal and going right\n    if (edge.y == 0 &amp;&amp; edge.x &gt; 0) return true;\n\n    // Left edge: going up\n    if (edge.y &gt; 0) return true;\n\n    return false;\n}\n\n// \u5728\u8fb9\u51fd\u6570\u6d4b\u8bd5\u4e2d\u5e94\u7528\nfloat bias = is_top_left_edge(v0, v1) ? 0 : -1;\nif (edge_function + bias &gt;= 0) {\n    // \u50cf\u7d20\u5728\u4e09\u89d2\u5f62\u5185\n}\n</code></pre>\n\n<h4 id=\"_30\">\u5b9a\u70b9\u6570\u7684\u6ea2\u51fa\u5904\u7406</h4>\n<p>\u5b9a\u70b9\u6570\u8fd0\u7b97\u53ef\u80fd\u6ea2\u51fa\uff0c\u9700\u8981\u8c28\u614e\u9009\u62e9\u4f4d\u5bbd\uff1a</p>\n<ol>\n<li>\n<p><strong>\u8fb9\u51fd\u6570\u8ba1\u7b97</strong>\uff1a\n   - \u8f93\u5165\uff1am.n\u683c\u5f0f\u7684\u5750\u6807\n   - \u4e58\u79ef\uff1a\u9700\u89812m\u4f4d\n   - \u5dee\u503c\uff1a\u9700\u89812m+1\u4f4d\uff08\u8003\u8651\u7b26\u53f7\uff09</p>\n</li>\n<li>\n<p><strong>\u5b89\u5168\u4f4d\u5bbd\u9009\u62e9</strong>\uff1a\n   - \u5c4f\u5e55\u5750\u6807\uff1a16.8\uff08\u652f\u630165536\u00d765536\uff09\n   - \u8fb9\u51fd\u6570\uff1a32\u4f4d\u6709\u7b26\u53f7\u6574\u6570\n   - \u63d2\u503c\u53c2\u6570\uff1a16.16\uff08\u66f4\u9ad8\u7cbe\u5ea6\uff09</p>\n</li>\n</ol>\n<h4 id=\"_31\">\u5b9a\u70b9\u6570\u4e0e\u6d6e\u70b9\u6570\u7684\u6df7\u5408\u4f7f\u7528</h4>\n<p>\u5728\u73b0\u4ee3GPU\u4e2d\uff0c\u901a\u5e38\u6df7\u5408\u4f7f\u7528\uff1a</p>\n<ul>\n<li><strong>\u5b9a\u70b9\u6570</strong>\uff1a\u7528\u4e8e\u5149\u6805\u5316\u9636\u6bb5\uff08\u4fdd\u8bc1\u7cbe\u786e\u6027\uff09</li>\n<li><strong>\u6d6e\u70b9\u6570</strong>\uff1a\u7528\u4e8e\u7740\u8272\u8ba1\u7b97\uff08\u9700\u8981\u5927\u8303\u56f4\uff09</li>\n</ul>\n<p>\u8f6c\u6362\u70b9\uff1a</p>\n<pre class=\"codehilite\"><code>// \u5149\u6805\u5316\u540e\uff0c\u8f6c\u6362\u56de\u6d6e\u70b9\nfloat x_float = fixed_x / (float)(1 &lt;&lt; FRAC_BITS);\nfloat y_float = fixed_y / (float)(1 &lt;&lt; FRAC_BITS);\n\n// \u8fdb\u884c\u7740\u8272\u8ba1\u7b97\ncolor = shade_pixel(x_float, y_float, attributes);\n</code></pre>\n\n<h4 id=\"_32\">\u5b9a\u70b9\u6570\u7684\u6027\u80fd\u4f18\u52bf</h4>\n<ol>\n<li><strong>\u786e\u5b9a\u6027</strong>\uff1a\u76f8\u540c\u8f93\u5165\u603b\u662f\u4ea7\u751f\u76f8\u540c\u8f93\u51fa</li>\n<li><strong>\u5e76\u884c\u6027</strong>\uff1a\u65e0\u9700\u5904\u7406\u6d6e\u70b9\u5f02\u5e38</li>\n<li><strong>\u786c\u4ef6\u6548\u7387</strong>\uff1a\u6574\u6570\u8fd0\u7b97\u5355\u5143\u66f4\u7b80\u5355\u3001\u66f4\u5feb</li>\n</ol>\n<h4 id=\"_33\">\u5b9a\u70b9\u6570\u786c\u4ef6\u5b9e\u73b0</h4>\n<p>\u73b0\u4ee3GPU\u4e2d\u7684\u5b9a\u70b9\u6570\u5355\u5143\uff1a</p>\n<ol>\n<li>\n<p><strong>\u4e13\u7528\u5b9a\u70b9\u6570ALU</strong>\uff1a\n   - \u5b9a\u70b9\u4e58\u6cd5\u5668\n   - \u79fb\u4f4d\u5668\uff08\u7528\u4e8e\u9664\u6cd5\uff09\n   - \u9971\u548c\u7b97\u672f\uff08\u9632\u6b62\u6ea2\u51fa\uff09</p>\n</li>\n<li>\n<p><strong>\u6d41\u6c34\u7ebf\u8bbe\u8ba1</strong>\uff1a\n   <code>Stage 1: \u5750\u6807\u8f6c\u6362 (float -&gt; fixed)\n   Stage 2: \u8fb9\u51fd\u6570\u8ba1\u7b97\n   Stage 3: \u8986\u76d6\u6d4b\u8bd5\n   Stage 4: \u5c5e\u6027\u63d2\u503c\u8bbe\u7f6e</code></p>\n</li>\n<li>\n<p><strong>SIMD\u4f18\u5316</strong>\uff1a\n   - 4\u4e2a\u50cf\u7d20\u540c\u65f6\u5904\u7406\n   - \u5411\u91cf\u5316\u7684\u5b9a\u70b9\u6570\u8fd0\u7b97</p>\n</li>\n</ol>\n<h4 id=\"_34\">\u672a\u6765\u8d8b\u52bf</h4>\n<p>\u968f\u7740\u6d6e\u70b9\u5355\u5143\u7684\u8fdb\u6b65\uff0c\u4e00\u4e9b\u65b0\u6280\u672f\u6b63\u5728\u51fa\u73b0\uff1a</p>\n<ol>\n<li>\n<p><strong>\u6df7\u5408\u7cbe\u5ea6\u6a21\u5f0f</strong>\uff1a\n   - \u8fb9\u754c\u6d4b\u8bd5\u4f7f\u7528\u5b9a\u70b9\u6570\n   - \u5185\u90e8\u586b\u5145\u4f7f\u7528\u6d6e\u70b9\u6570</p>\n</li>\n<li>\n<p><strong>\u53ef\u914d\u7f6e\u7cbe\u5ea6</strong>\uff1a\n   - \u6839\u636e\u573a\u666f\u9700\u6c42\u8c03\u6574\n   - VR\u9700\u8981\u66f4\u9ad8\u7cbe\u5ea6\n   - \u79fb\u52a8\u8bbe\u5907\u53ef\u4ee5\u964d\u4f4e\u7cbe\u5ea6</p>\n</li>\n<li>\n<p><strong>AI\u8f85\u52a9\u88c2\u7f1d\u68c0\u6d4b</strong>\uff1a\n   - \u673a\u5668\u5b66\u4e60\u68c0\u6d4b\u6f5c\u5728\u88c2\u7f1d\n   - \u81ea\u52a8\u4fee\u590d\u7b97\u6cd5</p>\n</li>\n</ol>\n<h3 id=\"316\">3.1.6 \u5c5e\u6027\u63d2\u503c</h3>\n<p>\u5bf9\u4e8e\u4e09\u89d2\u5f62\u5185\u90e8\u7684\u70b9\uff0c\u6240\u6709\u9876\u70b9\u5c5e\u6027\u9700\u8981\u8fdb\u884c\u63d2\u503c\uff1a</p>\n<h4 id=\"_35\">\u900f\u89c6\u6b63\u786e\u63d2\u503c</h4>\n<p>\u5c4f\u5e55\u7a7a\u95f4\u7684\u7ebf\u6027\u63d2\u503c\u4e0d\u7b49\u4e8e\u4e16\u754c\u7a7a\u95f4\u7684\u7ebf\u6027\u63d2\u503c\u3002\u900f\u89c6\u6b63\u786e\u63d2\u503c\u516c\u5f0f\uff1a\n$$\\frac{1}{w} = \\frac{\\alpha}{w_0} + \\frac{\\beta}{w_1} + \\frac{\\gamma}{w_2}$$\n$$attribute = \\frac{\\frac{\\alpha \\cdot attr_0}{w_0} + \\frac{\\beta \\cdot attr_1}{w_1} + \\frac{\\gamma \\cdot attr_2}{w_2}}{\\frac{1}{w}}$$\n\u5176\u4e2d $w$ \u662f\u9f50\u6b21\u5750\u6807\u7684\u7b2c\u56db\u5206\u91cf\u3002</p>\n<h4 id=\"_36\">\u900f\u89c6\u63d2\u503c\u7684\u5fc5\u8981\u6027</h4>\n<p>\u8003\u8651\u4e00\u6761\u57283D\u7a7a\u95f4\u4e2d\u5747\u5300\u5206\u5e03\u7684\u7eb9\u7406\u5750\u6807\u7ebf\uff0c\u6295\u5f71\u5230\u5c4f\u5e55\u540e\uff1a</p>\n<ul>\n<li>\u8fd1\u5904\u7684\u95f4\u9694\u5728\u5c4f\u5e55\u4e0a\u663e\u5f97\u5927</li>\n<li>\u8fdc\u5904\u7684\u95f4\u9694\u5728\u5c4f\u5e55\u4e0a\u663e\u5f97\u5c0f</li>\n<li>\u76f4\u63a5\u7684\u5c4f\u5e55\u7a7a\u95f4\u63d2\u503c\u4f1a\u5bfc\u81f4\u7eb9\u7406\u626d\u66f2</li>\n</ul>\n<p>\u6570\u5b66\u63a8\u5bfc\uff1a\n\u8bbe\u4e16\u754c\u7a7a\u95f4\u4e2d\u7684\u7ebf\u6027\u63d2\u503c\u53c2\u6570\u4e3a $t$\uff0c\u5219\uff1a\n$$\\mathbf{p}_{world} = (1-t)\\mathbf{p}_0 + t\\mathbf{p}_1$$\n\u6295\u5f71\u540e\u5728\u5c4f\u5e55\u7a7a\u95f4\uff1a\n$$t_{screen} = \\frac{t/w_1}{(1-t)/w_0 + t/w_1}$$\n\u8fd9\u8868\u660e\u5c4f\u5e55\u7a7a\u95f4\u7684\u53c2\u6570\u4e0e\u4e16\u754c\u7a7a\u95f4\u7684\u53c2\u6570\u5448\u975e\u7ebf\u6027\u5173\u7cfb\u3002</p>\n<h4 id=\"_37\">\u63d2\u503c\u4f18\u5316</h4>\n<p>\u73b0\u4ee3GPU\u91c7\u7528\u7684\u4f18\u5316\u7b56\u7565\uff1a</p>\n<ol>\n<li><strong>\u9884\u8ba1\u7b97\u5012\u6570</strong>\uff1a\u9876\u70b9\u7740\u8272\u5668\u8f93\u51fa $1/w$ \u800c\u975e $w$</li>\n<li><strong>\u589e\u91cf\u63d2\u503c</strong>\uff1a\u5229\u7528\u91cd\u5fc3\u5750\u6807\u7684\u7ebf\u6027\u6027\u8d28</li>\n<li><strong>SIMD\u5e76\u884c</strong>\uff1a\u540c\u65f6\u63d2\u503c\u591a\u4e2a\u5c5e\u6027</li>\n</ol>\n<p>\u63d2\u503c\u5668\u786c\u4ef6\u8bbe\u8ba1\uff1a</p>\n<pre class=\"codehilite\"><code>// \u6bcf\u4e2a\u5c5e\u6027\u7684\u63d2\u503c\nfor each attribute:\n    I = a0/w0 * \u03b1 + a1/w1 * \u03b2 + a2/w2 * \u03b3\n    attribute = I * w\n</code></pre>\n\n<h4 id=\"_38\">\u7279\u6b8a\u5c5e\u6027\u7684\u5904\u7406</h4>\n<ol>\n<li><strong>\u6df1\u5ea6\u503c</strong>\uff1a\u901a\u5e38\u7ebf\u6027\u63d2\u503c $z/w$\uff0c\u56e0\u4e3a\u6df1\u5ea6\u7f13\u51b2\u5b58\u50a8\u7684\u5c31\u662f\u8fd9\u4e2a\u503c</li>\n<li><strong>\u6cd5\u7ebf\u5411\u91cf</strong>\uff1a\u63d2\u503c\u540e\u9700\u8981\u91cd\u65b0\u5f52\u4e00\u5316</li>\n<li><strong>\u989c\u8272</strong>\uff1a\u53ef\u4ee5\u9009\u62e9\u662f\u5426\u8fdb\u884c\u900f\u89c6\u6821\u6b63\uff08Gouraud\u7740\u8272\u901a\u5e38\u4e0d\u9700\u8981\uff09</li>\n</ol>\n<h2 id=\"32\">3.2 \u6df1\u5ea6\u6d4b\u8bd5\u4e0e\u6297\u952f\u9f7f</h2>\n<h3 id=\"321-z-buffer\">3.2.1 \u6df1\u5ea6\u7f13\u51b2\uff08Z-Buffer\uff09</h3>\n<p>\u6df1\u5ea6\u7f13\u51b2\u662f\u89e3\u51b3\u53ef\u89c1\u6027\u95ee\u9898\u7684\u6807\u51c6\u65b9\u6cd5\uff1a</p>\n<ul>\n<li>\u4e3a\u6bcf\u4e2a\u50cf\u7d20\u5b58\u50a8\u5f53\u524d\u6700\u8fd1\u7684\u6df1\u5ea6\u503c</li>\n<li>\u65b0\u7247\u6bb5\u53ea\u6709\u5728\u66f4\u8fd1\u65f6\u624d\u4f1a\u66f4\u65b0</li>\n<li>\u4e0e\u7ed8\u5236\u987a\u5e8f\u65e0\u5173\uff08order-independent\uff09</li>\n</ul>\n<p>\u6df1\u5ea6\u6d4b\u8bd5\u7b97\u6cd5\uff1a</p>\n<pre class=\"codehilite\"><code>for each fragment at (x, y) with depth z:\n    if z &lt; depth_buffer[x][y]:\n        depth_buffer[x][y] = z\n        color_buffer[x][y] = fragment_color\n</code></pre>\n\n<h4 id=\"_39\">\u6df1\u5ea6\u503c\u7684\u8868\u793a</h4>\n<p>\u4ece\u773c\u7a7a\u95f4\u5230NDC\u7a7a\u95f4\u7684\u6df1\u5ea6\u53d8\u6362\uff1a\n$$z_{ndc} = \\frac{f+n}{f-n} + \\frac{2fn}{f-n} \\cdot \\frac{1}{z_{eye}}$$\n\u5f52\u4e00\u5316\u5230[0,1]\u7684\u7a97\u53e3\u7a7a\u95f4\u6df1\u5ea6\uff1a\n$$z_{window} = \\frac{z_{ndc} + 1}{2}$$</p>\n<h4 id=\"_40\">\u6df1\u5ea6\u7cbe\u5ea6\u95ee\u9898</h4>\n<p>\u900f\u89c6\u6295\u5f71\u5bfc\u81f4\u6df1\u5ea6\u7cbe\u5ea6\u5206\u5e03\u6781\u4e0d\u5747\u5300\uff1a</p>\n<ul>\n<li>\u8fd1\u5904\u7cbe\u5ea6\u9ad8\uff0c\u8fdc\u5904\u7cbe\u5ea6\u4f4e</li>\n<li>50%\u7684\u7cbe\u5ea6\u96c6\u4e2d\u5728[n, 2n]\u8303\u56f4\u5185</li>\n<li>Z-fighting\uff1a\u6df1\u5ea6\u503c\u63a5\u8fd1\u65f6\u7684\u95ea\u70c1</li>\n</ul>\n<p>\u7cbe\u5ea6\u5206\u6790\uff1a\n$$\\frac{dz_{window}}{dz_{eye}} = \\frac{fn}{(f-n)z_{eye}^2}$$\n\u8fd9\u8868\u660e\u7cbe\u5ea6\u968f\u8ddd\u79bb\u5e73\u65b9\u53cd\u6bd4\u4e0b\u964d\u3002</p>\n<h4 id=\"_41\">\u6df1\u5ea6\u7cbe\u5ea6\u4f18\u5316\u65b9\u6848</h4>\n<ol>\n<li><strong>\u5bf9\u6570\u6df1\u5ea6\u7f13\u51b2</strong>\uff1a\n$$z_{log} = \\frac{\\log(z/n)}{\\log(f/n)}$$</li>\n</ol>\n<ul>\n<li>\u4f18\u70b9\uff1a\u7cbe\u5ea6\u5206\u5e03\u66f4\u5747\u5300</li>\n<li>\u7f3a\u70b9\uff1a\u9700\u8981\u7740\u8272\u5668\u8ba1\u7b97\uff0c\u4e0d\u517c\u5bb9\u786c\u4ef6\u6df1\u5ea6\u6d4b\u8bd5</li>\n</ul>\n<ol start=\"2\">\n<li>\n<p><strong>\u53cd\u5411Z\uff08Reversed-Z\uff09</strong>\uff1a\n   - \u4f7f\u7528 $1-z$ \u4f5c\u4e3a\u6df1\u5ea6\u503c\n   - \u914d\u5408\u6d6e\u70b9\u6df1\u5ea6\u7f13\u51b2\uff0c\u5229\u7528\u6d6e\u70b9\u6570\u57280\u9644\u8fd1\u7684\u9ad8\u7cbe\u5ea6\n   - DirectX 12\u548cVulkan\u7684\u63a8\u8350\u505a\u6cd5</p>\n</li>\n<li>\n<p><strong>\u591a\u7ea7\u6df1\u5ea6\u7f13\u51b2\uff08Cascaded Depth\uff09</strong>\uff1a\n   - \u5c06\u573a\u666f\u5206\u4e3a\u591a\u4e2a\u6df1\u5ea6\u8303\u56f4\n   - \u6bcf\u4e2a\u8303\u56f4\u4f7f\u7528\u72ec\u7acb\u7684\u6df1\u5ea6\u7f13\u51b2\n   - \u5e38\u7528\u4e8e\u5927\u89c4\u6a21\u573a\u666f\uff08\u5982\u98de\u884c\u6a21\u62df\u5668\uff09</p>\n</li>\n<li>\n<p><strong>W\u7f13\u51b2</strong>\uff1a\n   - \u76f4\u63a5\u5b58\u50a8\u7ebf\u6027\u6df1\u5ea6 $w = z_{eye}$\n   - \u7cbe\u5ea6\u5206\u5e03\u5747\u5300\u4f46\u603b\u4f53\u7cbe\u5ea6\u8f83\u4f4e\n   - \u65e9\u671f\u786c\u4ef6\u652f\u6301\uff0c\u73b0\u5df2\u5c11\u89c1</p>\n</li>\n</ol>\n<h3 id=\"322-early-z\">3.2.2 \u65e9\u671f\u6df1\u5ea6\u6d4b\u8bd5\uff08Early Z\uff09</h3>\n<p>\u73b0\u4ee3GPU\u5728\u7247\u6bb5\u7740\u8272\u524d\u8fdb\u884c\u6df1\u5ea6\u6d4b\u8bd5\uff1a</p>\n<ul>\n<li>\u51cf\u5c11\u65e0\u7528\u7684\u7247\u6bb5\u7740\u8272\u8ba1\u7b97</li>\n<li>\u8981\u6c42\u6df1\u5ea6\u5199\u5165\u662f\u5355\u8c03\u7684</li>\n<li>\u67d0\u4e9b\u64cd\u4f5c\u4f1a\u7981\u7528Early Z</li>\n</ul>\n<h4 id=\"early-z\">Early Z\u7684\u5de5\u4f5c\u539f\u7406</h4>\n<p>\u4f20\u7edf\u7ba1\u7ebf\uff1a\u5149\u6805\u5316 \u2192 \u7247\u6bb5\u7740\u8272 \u2192 \u6df1\u5ea6\u6d4b\u8bd5\nEarly Z\u7ba1\u7ebf\uff1a\u5149\u6805\u5316 \u2192 \u6df1\u5ea6\u6d4b\u8bd5 \u2192 \u7247\u6bb5\u7740\u8272\uff08\u4ec5\u901a\u8fc7\u7684\u7247\u6bb5\uff09</p>\n<p>\u542f\u7528\u6761\u4ef6\uff1a</p>\n<ol>\n<li>\u7247\u6bb5\u7740\u8272\u5668\u4e0d\u4fee\u6539\u6df1\u5ea6\u503c</li>\n<li>\u4e0d\u4f7f\u7528discard\u6216clip</li>\n<li>\u4e0d\u542f\u7528alpha test</li>\n<li>\u6df1\u5ea6\u6d4b\u8bd5\u51fd\u6570\u662f\u5355\u8c03\u7684\uff08\u5982LESS\u3001GREATER\uff09</li>\n</ol>\n<h4 id=\"_42\">\u6027\u80fd\u5f71\u54cd</h4>\n<p>Early Z\u7684\u6548\u679c\u53d6\u51b3\u4e8e\uff1a</p>\n<ul>\n<li><strong>\u7ed8\u5236\u987a\u5e8f</strong>\uff1a\u524d\u5230\u540e\u7ed8\u5236\u53ef\u6700\u5927\u5316Early Z\u6548\u76ca</li>\n<li><strong>\u573a\u666f\u590d\u6742\u5ea6</strong>\uff1aoverdraw\u8d8a\u4e25\u91cd\uff0cEarly Z\u6536\u76ca\u8d8a\u5927</li>\n<li><strong>\u7740\u8272\u5668\u590d\u6742\u5ea6</strong>\uff1a\u7247\u6bb5\u7740\u8272\u5668\u8d8a\u590d\u6742\uff0c\u8282\u7701\u8d8a\u591a</li>\n</ul>\n<h3 id=\"323-hierarchical-z\">3.2.3 \u5c42\u6b21\u6df1\u5ea6\u7f13\u51b2\uff08Hierarchical Z\uff09</h3>\n<p>\u4f7f\u7528\u6df1\u5ea6\u91d1\u5b57\u5854\u52a0\u901f\u5254\u9664\uff1a</p>\n<ul>\n<li>\u5b58\u50a8\u5757\u7ea7\u522b\u7684\u6700\u5927/\u6700\u5c0f\u6df1\u5ea6</li>\n<li>\u5feb\u901f\u5254\u9664\u88ab\u906e\u6321\u7684\u5927\u5757\u533a\u57df</li>\n<li>\u4e0e\u5206\u5757\u5149\u6805\u5316\u914d\u5408\u4f7f\u7528</li>\n</ul>\n<h4 id=\"hi-z\">Hi-Z\u7684\u6784\u5efa</h4>\n<p>\u81ea\u5e95\u5411\u4e0a\u6784\u5efa\u6df1\u5ea6\u91d1\u5b57\u5854\uff1a</p>\n<pre class=\"codehilite\"><code>// \u5bf9\u4e8e\u6bcf\u4e2a\u4e0a\u5c42\u50cf\u7d20\nz_max = max(child[0], child[1], child[2], child[3])\nz_min = min(child[0], child[1], child[2], child[3])\n</code></pre>\n\n<h4 id=\"hi-z_1\">Hi-Z\u6d4b\u8bd5\u6d41\u7a0b</h4>\n<ol>\n<li>\u8ba1\u7b97\u56fe\u5143\u7684\u4fdd\u5b88\u6df1\u5ea6\u8303\u56f4[z_prim_min, z_prim_max]</li>\n<li>\u4ece\u7c97\u5230\u7ec6\u8fdb\u884c\u5c42\u6b21\u6d4b\u8bd5\uff1a\n   - \u5982\u679c z_prim_min &gt; z_tile_max\uff1a\u56fe\u5143\u88ab\u906e\u6321\uff0c\u5254\u9664\n   - \u5982\u679c z_prim_max &lt; z_tile_min\uff1a\u56fe\u5143\u5728\u524d\uff0c\u5feb\u901f\u901a\u8fc7\n   - \u5426\u5219\uff1a\u7ec6\u5206\u5230\u4e0b\u4e00\u5c42\u7ee7\u7eed\u6d4b\u8bd5</li>\n</ol>\n<h4 id=\"z-cull-vs-z-pass\">Z-Cull vs Z-Pass</h4>\n<ul>\n<li><strong>Z-Cull</strong>\uff1aHi-Z\u6d4b\u8bd5\u5931\u8d25\uff0c\u6574\u5757\u5254\u9664</li>\n<li><strong>Z-Pass</strong>\uff1aHi-Z\u6d4b\u8bd5\u901a\u8fc7\uff0c\u8df3\u8fc7\u50cf\u7d20\u7ea7\u6df1\u5ea6\u6d4b\u8bd5</li>\n<li>\u4e24\u8005\u7ed3\u5408\u53ef\u663e\u8457\u51cf\u5c11\u6df1\u5ea6\u7f13\u51b2\u5e26\u5bbd</li>\n</ul>\n<h3 id=\"324\">3.2.4 \u6297\u952f\u9f7f\u57fa\u7840\u7406\u8bba</h3>\n<h4 id=\"_43\">\u91c7\u6837\u7406\u8bba</h4>\n<p>\u6839\u636e\u5948\u594e\u65af\u7279-\u9999\u519c\u91c7\u6837\u5b9a\u7406\uff0c\u91c7\u6837\u9891\u7387\u5fc5\u987b\u5927\u4e8e\u4fe1\u53f7\u6700\u9ad8\u9891\u7387\u7684\u4e24\u500d\u624d\u80fd\u5b8c\u7f8e\u91cd\u5efa\u4fe1\u53f7\u3002\u56fe\u5f62\u5b66\u4e2d\u7684\u952f\u9f7f\u672c\u8d28\u662f\u91c7\u6837\u4e0d\u8db3\u5bfc\u81f4\u7684\u6df7\u53e0\uff08aliasing\uff09\u3002</p>\n<p>\u9891\u57df\u5206\u6790\uff1a</p>\n<ul>\n<li>\u539f\u59cb\u4fe1\u53f7\uff1a$f(x)$</li>\n<li>\u91c7\u6837\u8fc7\u7a0b\uff1a$f_s(x) = f(x) \\cdot \\sum_{n} \\delta(x - nT)$</li>\n<li>\u9891\u8c31\u6df7\u53e0\uff1a\u5f53 $f_s &lt; 2f_{max}$ \u65f6\uff0c\u9ad8\u9891\u6210\u5206\u6298\u53e0\u5230\u4f4e\u9891</li>\n</ul>\n<p>\u56fe\u5f62\u5b66\u4e2d\u7684\u9ad8\u9891\u6765\u6e90\uff1a</p>\n<ol>\n<li><strong>\u51e0\u4f55\u8fb9\u754c</strong>\uff1a\u9636\u8dc3\u51fd\u6570\u5305\u542b\u65e0\u9650\u9ad8\u9891</li>\n<li><strong>\u7eb9\u7406\u7ec6\u8282</strong>\uff1a\u9ad8\u9891\u7eb9\u7406\u6a21\u5f0f</li>\n<li><strong>\u955c\u9762\u9ad8\u5149</strong>\uff1a\u6025\u5267\u53d8\u5316\u7684\u5149\u7167</li>\n<li><strong>\u51e0\u4f55\u7ec6\u8282</strong>\uff1a\u7ec6\u5c0f\u7684\u51e0\u4f55\u7279\u5f81</li>\n</ol>\n<h4 id=\"vs\">\u9884\u6ee4\u6ce2vs\u540e\u6ee4\u6ce2</h4>\n<ol>\n<li>\n<p><strong>\u9884\u6ee4\u6ce2\uff08Pre-filtering\uff09</strong>\uff1a\n   - \u5728\u91c7\u6837\u524d\u53bb\u9664\u9ad8\u9891\u6210\u5206\n   - \u7406\u8bba\u4e0a\u6b63\u786e\u4f46\u8ba1\u7b97\u56f0\u96be\n   - \u9700\u8981\u89e3\u6790\u8ba1\u7b97\u8986\u76d6\u9762\u79ef</p>\n</li>\n<li>\n<p><strong>\u540e\u6ee4\u6ce2\uff08Post-filtering\uff09</strong>\uff1a\n   - \u5bf9\u91c7\u6837\u7ed3\u679c\u8fdb\u884c\u91cd\u5efa\n   - \u5b9e\u9645\u5e38\u7528\u4f46\u7406\u8bba\u4e0d\u5b8c\u7f8e\n   - \u5305\u62ec\u5404\u79cd\u56fe\u50cf\u7a7a\u95f4\u6280\u672f</p>\n</li>\n</ol>\n<p>\u7406\u60f3\u7684\u6297\u952f\u9f7f\u662f\u9884\u6ee4\u6ce2\uff0c\u4f46\u8ba1\u7b97\u6210\u672c\u9ad8\u3002\u5b9e\u8df5\u4e2d\u5e38\u91c7\u7528\u8d85\u91c7\u6837\u8fd1\u4f3c\u9884\u6ee4\u6ce2\u3002</p>\n<h4 id=\"_44\">\u6ee4\u6ce2\u6838\u51fd\u6570</h4>\n<p>\u5e38\u7528\u7684\u91cd\u5efa\u6ee4\u6ce2\u5668\uff1a</p>\n<ol>\n<li><strong>\u76d2\u5f0f\u6ee4\u6ce2\u5668\uff08Box\uff09</strong>\uff1a$w(x) = 1, |x| &lt; 0.5$</li>\n<li><strong>\u4e09\u89d2\u6ee4\u6ce2\u5668\uff08Tent\uff09</strong>\uff1a$w(x) = 1 - |x|, |x| &lt; 1$</li>\n<li><strong>\u9ad8\u65af\u6ee4\u6ce2\u5668</strong>\uff1a$w(x) = e^{-x^2/2\\sigma^2}$</li>\n<li><strong>Lanczos\u6ee4\u6ce2\u5668</strong>\uff1a$w(x) = \\text{sinc}(x)\\text{sinc}(x/a), |x| &lt; a$</li>\n</ol>\n<h3 id=\"325-ssaa\">3.2.5 \u8d85\u91c7\u6837\u6297\u952f\u9f7f\uff08SSAA\uff09</h3>\n<p>\u6700\u76f4\u63a5\u7684\u6297\u952f\u9f7f\u65b9\u6cd5\uff1a</p>\n<ul>\n<li>\u4ee5\u66f4\u9ad8\u5206\u8fa8\u7387\u6e32\u67d3</li>\n<li>\u5bf9\u7ed3\u679c\u8fdb\u884c\u4e0b\u91c7\u6837</li>\n</ul>\n<p>\u8ba1\u7b97\u6210\u672c\uff1a$O(n^2)$\uff0c\u5176\u4e2d $n$ \u662f\u8d85\u91c7\u6837\u500d\u6570\u3002</p>\n<h3 id=\"326-msaa\">3.2.6 \u591a\u91cd\u91c7\u6837\u6297\u952f\u9f7f\uff08MSAA\uff09</h3>\n<p>MSAA\u4f18\u5316\u4e86SSAA\u7684\u6027\u80fd\uff1a</p>\n<ol>\n<li>\u6bcf\u4e2a\u50cf\u7d20\u5b58\u50a8\u591a\u4e2a\u91c7\u6837\u70b9</li>\n<li>\u7247\u6bb5\u7740\u8272\u53ea\u6267\u884c\u4e00\u6b21</li>\n<li>\u6df1\u5ea6\u548c\u8986\u76d6\u6d4b\u8bd5\u5bf9\u6bcf\u4e2a\u91c7\u6837\u70b9\u72ec\u7acb\u8fdb\u884c</li>\n</ol>\n<p>\u91c7\u6837\u6a21\u5f0f\uff1a</p>\n<ul>\n<li>2\u00d7MSAA\uff1a\u65cb\u8f6c\u7f51\u683c\u6a21\u5f0f</li>\n<li>4\u00d7MSAA\uff1a\u65cb\u8f6c\u76d2\u6a21\u5f0f\u6216Quincunx</li>\n<li>8\u00d7MSAA\uff1a\u4f18\u5316\u7684Poisson\u5206\u5e03</li>\n</ul>\n<p>\u8986\u76d6\u8ba1\u7b97\uff1a</p>\n<pre class=\"codehilite\"><code>coverage = 0\nfor each sample in pixel:\n    if sample inside triangle:\n        coverage += 1/num_samples\nfinal_color = coverage * fragment_color + (1-coverage) * background\n</code></pre>\n\n<h3 id=\"327-csaa\">3.2.7 \u8986\u76d6\u91c7\u6837\u6297\u952f\u9f7f\uff08CSAA\uff09</h3>\n<p>NVIDIA\u7684\u4f18\u5316\u6280\u672f\uff1a</p>\n<ul>\n<li>\u5206\u79bb\u8986\u76d6\u91c7\u6837\u548c\u989c\u8272/\u6df1\u5ea6\u91c7\u6837</li>\n<li>16\u00d7\u8986\u76d6\u914d\u54084\u00d7\u989c\u8272/\u6df1\u5ea6</li>\n<li>\u51cf\u5c11\u5185\u5b58\u5e26\u5bbd\u9700\u6c42</li>\n</ul>\n<h3 id=\"328-taa\">3.2.8 \u65f6\u95f4\u6297\u952f\u9f7f\uff08TAA\uff09</h3>\n<p>\u5229\u7528\u65f6\u95f4\u57df\u7684\u4fe1\u606f\uff1a</p>\n<ol>\n<li>\u6bcf\u5e27\u4f7f\u7528\u4e0d\u540c\u7684\u91c7\u6837\u504f\u79fb\uff08jittering\uff09</li>\n<li>\u5c06\u591a\u5e27\u7ed3\u679c\u8fdb\u884c\u65f6\u95f4\u79ef\u7d2f</li>\n<li>\u4f7f\u7528\u8fd0\u52a8\u5411\u91cf\u5904\u7406\u52a8\u6001\u573a\u666f</li>\n</ol>\n<p>\u65f6\u95f4\u79ef\u7d2f\u516c\u5f0f\uff1a\n$$color_{new} = \\alpha \\cdot color_{current} + (1-\\alpha) \\cdot color_{history}$$\n\u5176\u4e2d $\\alpha$ \u901a\u5e38\u4e3a 0.1-0.2\u3002</p>\n<h3 id=\"329-mlaafxaasmaa\">3.2.9 \u5f62\u6001\u5b66\u6297\u952f\u9f7f\uff08MLAA/FXAA/SMAA\uff09</h3>\n<p>\u540e\u5904\u7406\u6297\u952f\u9f7f\u6280\u672f\uff1a</p>\n<ol>\n<li><strong>\u8fb9\u7f18\u68c0\u6d4b</strong>\uff1a\u8bc6\u522b\u51e0\u4f55\u8fb9\u754c</li>\n<li><strong>\u6a21\u5f0f\u5339\u914d</strong>\uff1a\u786e\u5b9a\u8fb9\u7f18\u5f62\u72b6</li>\n<li><strong>\u6df7\u5408</strong>\uff1a\u6839\u636e\u6a21\u5f0f\u8fdb\u884c\u50cf\u7d20\u6df7\u5408</li>\n</ol>\n<p>FXAA\u7684\u4eae\u5ea6\u8fb9\u7f18\u68c0\u6d4b\uff1a\n$$edge = |L_N - L_S| + |L_E - L_W| &gt; threshold$$\n\u5176\u4e2d $L$ \u8868\u793a\u50cf\u7d20\u4eae\u5ea6\u3002</p>\n<h2 id=\"33-gpu\">3.3 \u73b0\u4ee3GPU\u5149\u6805\u5316\u7ba1\u7ebf</h2>\n<h3 id=\"331-gpu\">3.3.1 GPU\u67b6\u6784\u6982\u8ff0</h3>\n<p>\u73b0\u4ee3GPU\u91c7\u7528\u5927\u89c4\u6a21\u5e76\u884c\u67b6\u6784\uff1a</p>\n<ul>\n<li><strong>\u6d41\u591a\u5904\u7406\u5668\uff08SM\uff09</strong>\uff1a\u72ec\u7acb\u7684\u8ba1\u7b97\u5355\u5143</li>\n<li><strong>SIMT\u6267\u884c\u6a21\u578b</strong>\uff1a\u5355\u6307\u4ee4\u591a\u7ebf\u7a0b</li>\n<li><strong>Warp/Wavefront</strong>\uff1a32/64\u7ebf\u7a0b\u7684\u6267\u884c\u7ec4</li>\n</ul>\n<h3 id=\"332-primitive-assembly\">3.3.2 \u56fe\u5143\u88c5\u914d\uff08Primitive Assembly\uff09</h3>\n<p>\u5c06\u9876\u70b9\u7ec4\u88c5\u6210\u56fe\u5143\uff1a</p>\n<ol>\n<li>\u7d22\u5f15\u7f13\u51b2\u8bfb\u53d6</li>\n<li>\u56fe\u5143\u62d3\u6251\u89e3\u91ca\uff08\u70b9\u3001\u7ebf\u3001\u4e09\u89d2\u5f62\uff09</li>\n<li>\u56fe\u5143\u5254\u9664\uff08\u80cc\u9762\u3001\u89c6\u9525\u4f53\u5916\uff09</li>\n</ol>\n<p>\u80cc\u9762\u5254\u9664\uff1a\n$$\\mathbf{n} \\cdot \\mathbf{v} = (v_1 - v_0) \\times (v_2 - v_0) \\cdot \\mathbf{view} &gt; 0$$</p>\n<h3 id=\"333-primitive-distribution\">3.3.3 \u56fe\u5143\u5206\u914d\uff08Primitive Distribution\uff09</h3>\n<p>\u5c06\u56fe\u5143\u5206\u914d\u5230\u5c4f\u5e55\u5206\u5757\uff1a</p>\n<ol>\n<li>\u8ba1\u7b97\u56fe\u5143\u7684\u5c4f\u5e55\u7a7a\u95f4\u5305\u56f4\u76d2</li>\n<li>\u786e\u5b9a\u8986\u76d6\u7684\u5206\u5757\u5217\u8868</li>\n<li>\u5c06\u56fe\u5143\u5f15\u7528\u6dfb\u52a0\u5230\u5206\u5757\u961f\u5217</li>\n</ol>\n<p>\u5206\u5757\u5927\u5c0f\u6743\u8861\uff1a</p>\n<ul>\n<li>\u5c0f\u5206\u5757\uff1a\u66f4\u597d\u7684\u8d1f\u8f7d\u5747\u8861\uff0c\u66f4\u591a\u7684\u7ba1\u7406\u5f00\u9500</li>\n<li>\u5927\u5206\u5757\uff1a\u66f4\u5c11\u7684\u91cd\u590d\u5de5\u4f5c\uff0c\u53ef\u80fd\u7684\u8d1f\u8f7d\u4e0d\u5747</li>\n</ul>\n<h3 id=\"334\">3.3.4 \u7247\u6bb5\u751f\u6210\u4e0e\u8c03\u5ea6</h3>\n<p>\u6bcf\u4e2a\u5206\u5757\u72ec\u7acb\u5904\u7406\uff1a</p>\n<ol>\n<li>\u4ece\u961f\u5217\u8bfb\u53d6\u56fe\u5143</li>\n<li>\u751f\u6210\u7247\u6bb5\uff082\u00d72\u50cf\u7d20\u5757\u4e3a\u5355\u4f4d\uff09</li>\n<li>\u8c03\u5ea6\u5230\u7740\u8272\u5355\u5143</li>\n</ol>\n<p>2\u00d72\u50cf\u7d20\u5757\uff08Quad\uff09\u7684\u91cd\u8981\u6027\uff1a</p>\n<ul>\n<li>\u8ba1\u7b97\u5c4f\u5e55\u7a7a\u95f4\u5bfc\u6570\uff08ddx\u3001ddy\uff09</li>\n<li>\u7eb9\u7406LOD\u8ba1\u7b97</li>\n<li>\u4fdd\u8bc1SIMD\u6267\u884c\u6548\u7387</li>\n</ul>\n<h3 id=\"335\">3.3.5 \u6df1\u5ea6\u7f13\u51b2\u538b\u7f29</h3>\n<p>\u51cf\u5c11\u5e26\u5bbd\u9700\u6c42\u7684\u5173\u952e\u6280\u672f\uff1a</p>\n<h4 id=\"_45\">\u5dee\u5206\u538b\u7f29</h4>\n<p>\u5bf9\u4e8e\u5e73\u9762\u533a\u57df\uff0c\u5b58\u50a8\u57fa\u51c6\u503c\u548c\u5dee\u5206\uff1a\n$$z_{compressed} = z_{base} + \\Delta z_x \\cdot x + \\Delta z_y \\cdot y$$</p>\n<h4 id=\"_46\">\u6df1\u5ea6\u8303\u56f4\u538b\u7f29</h4>\n<p>\u5b58\u50a8\u5757\u7684\u6700\u5c0f/\u6700\u5927\u503c\u548c\u76f8\u5bf9\u504f\u79fb\uff1a\n$$z_{normalized} = \\frac{z - z_{min}}{z_{max} - z_{min}}$$</p>\n<h3 id=\"336-rop\">3.3.6 \u6e32\u67d3\u8f93\u51fa\u5355\u5143\uff08ROP\uff09</h3>\n<p>\u8d1f\u8d23\u6700\u7ec8\u7684\u50cf\u7d20\u64cd\u4f5c\uff1a</p>\n<ol>\n<li>\u6df1\u5ea6\u6d4b\u8bd5</li>\n<li>\u6a21\u677f\u6d4b\u8bd5</li>\n<li>\u6df7\u5408\u64cd\u4f5c</li>\n<li>\u5199\u5165\u5e27\u7f13\u51b2</li>\n</ol>\n<p>\u539f\u5b50\u64cd\u4f5c\u4fdd\u8bc1\uff1a</p>\n<ul>\n<li>\u540c\u4e00\u50cf\u7d20\u7684\u64cd\u4f5c\u4e32\u884c\u5316</li>\n<li>\u4e0d\u540c\u50cf\u7d20\u53ef\u4ee5\u5e76\u884c</li>\n</ul>\n<h3 id=\"337\">3.3.7 \u5185\u5b58\u5c42\u6b21\u7ed3\u6784</h3>\n<p>\u4f18\u5316\u7684\u7f13\u5b58\u8bbe\u8ba1\uff1a</p>\n<ol>\n<li><strong>L1\u7f13\u5b58</strong>\uff1a\u7eb9\u7406\u7f13\u5b58\u3001\u5e38\u91cf\u7f13\u5b58</li>\n<li><strong>L2\u7f13\u5b58</strong>\uff1a\u7edf\u4e00\u7f13\u5b58\uff0c\u6240\u6709\u5355\u5143\u5171\u4eab</li>\n<li><strong>\u5e27\u7f13\u51b2\u7f13\u5b58</strong>\uff1a\u4e13\u7528\u4e8eROP\u64cd\u4f5c</li>\n</ol>\n<p>\u5e26\u5bbd\u4f18\u5316\u6280\u672f\uff1a</p>\n<ul>\n<li><strong>Delta\u8272\u5f69\u538b\u7f29</strong>\uff1a\u5b58\u50a8\u4e0e\u53c2\u8003\u503c\u7684\u5dee</li>\n<li><strong>\u5feb\u901f\u6e05\u9664</strong>\uff1a\u6807\u8bb0\u800c\u975e\u5b9e\u9645\u5199\u5165</li>\n<li><strong>\u4e8b\u52a1\u6d88\u9664</strong>\uff1a\u68c0\u6d4b\u5e76\u8df3\u8fc7\u5197\u4f59\u5199\u5165</li>\n</ul>\n<h3 id=\"338\">3.3.8 \u53ef\u7f16\u7a0b\u7ba1\u7ebf\u6269\u5c55</h3>\n<h4 id=\"mesh-shader\">\u7f51\u683c\u7740\u8272\u5668\uff08Mesh Shader\uff09</h4>\n<p>\u65b0\u4e00\u4ee3\u51e0\u4f55\u7ba1\u7ebf\uff1a</p>\n<ul>\n<li>\u66ff\u4ee3\u4f20\u7edf\u7684\u9876\u70b9/\u51e0\u4f55\u7740\u8272\u5668</li>\n<li>\u652f\u6301GPU\u751f\u6210\u51e0\u4f55\u4f53</li>\n<li>\u66f4\u7075\u6d3b\u7684\u56fe\u5143\u5254\u9664</li>\n</ul>\n<h4 id=\"vrs\">\u53ef\u53d8\u7387\u7740\u8272\uff08VRS\uff09</h4>\n<p>\u5141\u8bb8\u4e0d\u540c\u533a\u57df\u4f7f\u7528\u4e0d\u540c\u7684\u7740\u8272\u7387\uff1a</p>\n<ul>\n<li>1\u00d71\u30011\u00d72\u30012\u00d72\u30014\u00d74\u7b49</li>\n<li>\u57fa\u4e8e\u5185\u5bb9\u7684\u81ea\u9002\u5e94</li>\n<li>\u6ce8\u89c6\u70b9\u6e32\u67d3\u4f18\u5316</li>\n</ul>\n<h3 id=\"339\">3.3.9 \u5149\u7ebf\u8ffd\u8e2a\u786c\u4ef6\u96c6\u6210</h3>\n<p>\u73b0\u4ee3GPU\u96c6\u6210\u4e86\u5149\u7ebf\u8ffd\u8e2a\u5355\u5143\uff1a</p>\n<ul>\n<li><strong>RT Core</strong>\uff1a\u786c\u4ef6\u52a0\u901f\u7684BVH\u904d\u5386</li>\n<li><strong>\u5149\u6805\u5316\u4e0e\u5149\u8ffd\u6df7\u5408</strong>\uff1a\u4e3b\u8981\u573a\u666f\u7528\u5149\u6805\u5316\uff0c\u53cd\u5c04/\u9634\u5f71\u7528\u5149\u8ffd</li>\n<li><strong>\u65f6\u95f4\u53bb\u566a</strong>\uff1a\u5229\u7528TAA\u6846\u67b6\u964d\u566a</li>\n</ul>\n<h2 id=\"_47\">\u672c\u7ae0\u5c0f\u7ed3</h2>\n<p>\u5149\u6805\u5316\u662f\u5c06\u8fde\u7eed\u51e0\u4f55\u8f6c\u6362\u4e3a\u79bb\u6563\u50cf\u7d20\u7684\u6838\u5fc3\u8fc7\u7a0b\u3002\u672c\u7ae0\u6db5\u76d6\u4e86\uff1a</p>\n<p><strong>\u5173\u952e\u6982\u5ff5\uff1a</strong></p>\n<ul>\n<li>\u4e09\u89d2\u5f62\u79bb\u6563\u5316\u7684\u6570\u5b66\u57fa\u7840\uff1a\u8fb9\u51fd\u6570\u3001\u91cd\u5fc3\u5750\u6807</li>\n<li>\u900f\u89c6\u6b63\u786e\u63d2\u503c\uff1a$\\frac{1}{w}$ \u7684\u7ebf\u6027\u63d2\u503c</li>\n<li>\u6df1\u5ea6\u7f13\u51b2\u4e0e\u53ef\u89c1\u6027\uff1aZ-Buffer\u7b97\u6cd5\u53ca\u5176\u4f18\u5316</li>\n<li>\u6297\u952f\u9f7f\u7406\u8bba\uff1a\u91c7\u6837\u5b9a\u7406\u4e0e\u5404\u79cdAA\u6280\u672f</li>\n<li>GPU\u7ba1\u7ebf\u67b6\u6784\uff1a\u4ece\u56fe\u5143\u5230\u50cf\u7d20\u7684\u5e76\u884c\u5904\u7406</li>\n</ul>\n<p><strong>\u91cd\u8981\u516c\u5f0f\uff1a</strong></p>\n<ul>\n<li>\u8fb9\u51fd\u6570\uff1a$E(\\mathbf{p}) = (\\mathbf{p} - \\mathbf{v}_0) \\times (\\mathbf{v}_1 - \\mathbf{v}_0)$</li>\n<li>\u91cd\u5fc3\u5750\u6807\uff1a$\\mathbf{p} = \\alpha \\mathbf{v}_0 + \\beta \\mathbf{v}_1 + \\gamma \\mathbf{v}_2$</li>\n<li>\u900f\u89c6\u63d2\u503c\uff1a$attr = \\frac{\\sum \\frac{\\alpha_i \\cdot attr_i}{w_i}}{\\sum \\frac{\\alpha_i}{w_i}}$</li>\n<li>\u6df1\u5ea6\u6620\u5c04\uff1a$z_{ndc} = \\frac{f+n}{f-n} + \\frac{2fn}{f-n} \\cdot \\frac{1}{z_{eye}}$</li>\n</ul>\n<p><strong>\u6027\u80fd\u8003\u8651\uff1a</strong></p>\n<ul>\n<li>\u5206\u5757\u5149\u6805\u5316\u51cf\u5c11overdraw</li>\n<li>Early-Z\u907f\u514d\u65e0\u7528\u7740\u8272</li>\n<li>\u538b\u7f29\u6280\u672f\u964d\u4f4e\u5e26\u5bbd\u9700\u6c42</li>\n<li>SIMT\u6267\u884c\u6a21\u578b\u7684\u5e76\u884c\u6548\u7387</li>\n</ul>\n<h2 id=\"_48\">\u7ec3\u4e60\u9898</h2>\n<h3 id=\"_49\">\u57fa\u7840\u9898</h3>\n<p><strong>3.1 \u8fb9\u51fd\u6570\u8ba1\u7b97</strong>\n\u7ed9\u5b9a\u4e09\u89d2\u5f62\u9876\u70b9 $\\mathbf{v}_0 = (0, 0)$, $\\mathbf{v}_1 = (4, 0)$, $\\mathbf{v}_2 = (2, 3)$\uff0c\u8ba1\u7b97\u70b9 $\\mathbf{p} = (2, 1)$ \u7684\u4e09\u4e2a\u8fb9\u51fd\u6570\u503c\uff0c\u5e76\u5224\u65ad\u8be5\u70b9\u662f\u5426\u5728\u4e09\u89d2\u5f62\u5185\u90e8\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u6ce8\u610f\u9876\u70b9\u7684\u987a\u5e8f\u548c\u8fb9\u51fd\u6570\u7684\u7b26\u53f7\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u8ba1\u7b97\u4e09\u4e2a\u8fb9\u51fd\u6570\uff1a</p>\n<ul>\n<li>$E_{01}(\\mathbf{p}) = (2-0)(0-0) - (1-0)(4-0) = 0 - 4 = -4$</li>\n<li>$E_{12}(\\mathbf{p}) = (2-4)(3-0) - (1-0)(2-4) = -6 - (-2) = -4$</li>\n<li>$E_{20}(\\mathbf{p}) = (2-2)(0-3) - (1-3)(0-2) = 0 - 4 = -4$</li>\n</ul>\n<p>\u7531\u4e8e\u6240\u6709\u8fb9\u51fd\u6570\u503c\u90fd\u4e3a\u8d1f\uff0c\u8bf4\u660e\u4e09\u89d2\u5f62\u9876\u70b9\u662f\u987a\u65f6\u9488\u6392\u5217\u3002\u5bf9\u4e8e\u987a\u65f6\u9488\u6392\u5217\uff0c\u70b9\u5728\u5185\u90e8\u7684\u6761\u4ef6\u662f\u6240\u6709\u8fb9\u51fd\u6570\u503c\u90fd\u5c0f\u4e8e\u7b49\u4e8e0\uff0c\u56e0\u6b64\u70b9 $(2,1)$ \u5728\u4e09\u89d2\u5f62\u5185\u90e8\u3002</p>\n<p>\u9a8c\u8bc1\uff1a\u53ef\u4ee5\u8ba1\u7b97\u91cd\u5fc3\u5750\u6807 $\\alpha = \\beta = \\gamma = 1/3$\uff0c\u5747\u4e3a\u6b63\u503c\uff0c\u786e\u8ba4\u70b9\u5728\u5185\u90e8\u3002</p>\n</details>\n<p><strong>3.2 \u91cd\u5fc3\u5750\u6807\u63d2\u503c</strong>\n\u4e09\u89d2\u5f62\u4e09\u4e2a\u9876\u70b9\u7684\u989c\u8272\u5206\u522b\u4e3a\u7ea2\u8272 $(1,0,0)$\u3001\u7eff\u8272 $(0,1,0)$ \u548c\u84dd\u8272 $(0,0,1)$\u3002\u5982\u679c\u67d0\u70b9\u7684\u91cd\u5fc3\u5750\u6807\u4e3a $(\\alpha, \\beta, \\gamma) = (0.5, 0.3, 0.2)$\uff0c\u8ba1\u7b97\u8be5\u70b9\u7684\u63d2\u503c\u989c\u8272\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u76f4\u63a5\u5e94\u7528\u91cd\u5fc3\u5750\u6807\u7684\u5b9a\u4e49\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u4f7f\u7528\u91cd\u5fc3\u5750\u6807\u8fdb\u884c\u7ebf\u6027\u63d2\u503c\uff1a\n$$\\mathbf{color} = \\alpha \\cdot \\mathbf{c}_0 + \\beta \\cdot \\mathbf{c}_1 + \\gamma \\cdot \\mathbf{c}_2$$\n$$= 0.5 \\cdot (1,0,0) + 0.3 \\cdot (0,1,0) + 0.2 \\cdot (0,0,1)$$\n$$= (0.5, 0, 0) + (0, 0.3, 0) + (0, 0, 0.2)$$\n$$= (0.5, 0.3, 0.2)$$\n\u56e0\u6b64\u8be5\u70b9\u7684\u989c\u8272\u4e3a RGB = $(0.5, 0.3, 0.2)$\u3002</p>\n</details>\n<p><strong>3.3 \u900f\u89c6\u6b63\u786e\u63d2\u503c</strong>\n\u5728\u5c4f\u5e55\u7a7a\u95f4\uff0c\u4e09\u89d2\u5f62\u9876\u70b9\u7684\u6df1\u5ea6\u503c\uff08$1/w$\uff09\u5206\u522b\u4e3a 0.5\u30010.25 \u548c 0.125\u3002\u67d0\u70b9\u7684\u91cd\u5fc3\u5750\u6807\u4e3a $(0.4, 0.4, 0.2)$\u3002\u5982\u679c\u9876\u70b9\u7684\u7eb9\u7406\u5750\u6807\u5206\u522b\u4e3a $(0,0)$\u3001$(1,0)$ \u548c $(0.5,1)$\uff0c\u8ba1\u7b97\u8be5\u70b9\u7684\u900f\u89c6\u6b63\u786e\u7eb9\u7406\u5750\u6807\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u5148\u63d2\u503c $1/w$\uff0c\u518d\u8fdb\u884c\u900f\u89c6\u9664\u6cd5\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u9996\u5148\u63d2\u503c $1/w$\uff1a\n$$\\frac{1}{w} = 0.4 \\times 0.5 + 0.4 \\times 0.25 + 0.2 \\times 0.125 = 0.2 + 0.1 + 0.025 = 0.325$$\n\u7136\u540e\u8ba1\u7b97\u6bcf\u4e2a\u5206\u91cf\u7684\u6743\u91cd\uff1a\n$$\\text{weight}_0 = \\frac{0.4 \\times 0.5}{0.325} = \\frac{0.2}{0.325} = \\frac{8}{13}$$\n$$\\text{weight}_1 = \\frac{0.4 \\times 0.25}{0.325} = \\frac{0.1}{0.325} = \\frac{4}{13}$$\n$$\\text{weight}_2 = \\frac{0.2 \\times 0.125}{0.325} = \\frac{0.025}{0.325} = \\frac{1}{13}$$\n\u6700\u540e\u63d2\u503c\u7eb9\u7406\u5750\u6807\uff1a\n$$u = \\frac{8}{13} \\times 0 + \\frac{4}{13} \\times 1 + \\frac{1}{13} \\times 0.5 = \\frac{4.5}{13} \\approx 0.346$$\n$$v = \\frac{8}{13} \\times 0 + \\frac{4}{13} \\times 0 + \\frac{1}{13} \\times 1 = \\frac{1}{13} \\approx 0.077$$</p>\n<p>\u900f\u89c6\u6b63\u786e\u7684\u7eb9\u7406\u5750\u6807\u4e3a $(0.346, 0.077)$\u3002</p>\n</details>\n<p><strong>3.4 MSAA\u8986\u76d6\u8ba1\u7b97</strong>\n\u4f7f\u75284\u00d7MSAA\uff0c\u91c7\u6837\u70b9\u4f4d\u7f6e\u4e3a\u50cf\u7d20\u4e2d\u5fc3\u504f\u79fb $(-0.25, -0.25)$\u3001$(0.25, -0.25)$\u3001$(-0.25, 0.25)$ \u548c $(0.25, 0.25)$\u3002\u5982\u679c\u4e09\u89d2\u5f62\u8fb9\u754c\u6070\u597d\u901a\u8fc7\u50cf\u7d20\u4e2d\u5fc3\uff08\u4ece\u5de6\u4e0b\u5230\u53f3\u4e0a\u7684\u5bf9\u89d2\u7ebf\uff09\uff0c\u8ba1\u7b97\u8be5\u50cf\u7d20\u7684\u8986\u76d6\u7387\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u5224\u65ad\u6bcf\u4e2a\u91c7\u6837\u70b9\u76f8\u5bf9\u4e8e\u8fb9\u754c\u7684\u4f4d\u7f6e\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u4e09\u89d2\u5f62\u8fb9\u754c\u662f\u4ece\u5de6\u4e0b\u5230\u53f3\u4e0a\u7684\u5bf9\u89d2\u7ebf\uff0c\u53ef\u4ee5\u8868\u793a\u4e3a\uff1a$y = x$</p>\n<p>\u5bf9\u4e8e\u6bcf\u4e2a\u91c7\u6837\u70b9\uff0c\u68c0\u67e5\u662f\u5426\u5728\u8fb9\u754c\u4e0b\u65b9\uff08\u5047\u8bbe\u4e09\u89d2\u5f62\u5728\u8fb9\u754c\u4e0b\u65b9\uff09\uff1a</p>\n<ol>\n<li>$(-0.25, -0.25)$\uff1a$-0.25 &lt; -0.25$ \u4e0d\u6210\u7acb\uff0c\u4e0d\u88ab\u8986\u76d6</li>\n<li>$(0.25, -0.25)$\uff1a$-0.25 &lt; 0.25$ \u6210\u7acb\uff0c\u88ab\u8986\u76d6</li>\n<li>$(-0.25, 0.25)$\uff1a$0.25 &lt; -0.25$ \u4e0d\u6210\u7acb\uff0c\u4e0d\u88ab\u8986\u76d6</li>\n<li>$(0.25, 0.25)$\uff1a$0.25 &lt; 0.25$ \u4e0d\u6210\u7acb\uff0c\u4e0d\u88ab\u8986\u76d6</li>\n</ol>\n<p>\u8986\u76d6\u7387 = 1/4 = 25%</p>\n<p>\u6ce8\u610f\uff1a\u5982\u679c\u4e09\u89d2\u5f62\u5728\u8fb9\u754c\u4e0a\u65b9\uff0c\u5219\u91c7\u6837\u70b91\u548c3\u4f1a\u88ab\u8986\u76d6\uff0c\u8986\u76d6\u7387\u4e3a50%\u3002</p>\n</details>\n<h3 id=\"_50\">\u6311\u6218\u9898</h3>\n<p><strong>3.5 \u4fdd\u5b88\u5149\u6805\u5316</strong>\n\u8bbe\u8ba1\u4e00\u4e2a\u4fdd\u5b88\u5149\u6805\u5316\u7b97\u6cd5\uff0c\u786e\u4fdd\u6240\u6709\u4e0e\u4e09\u89d2\u5f62\u6709\u4efb\u4f55\u91cd\u53e0\u7684\u50cf\u7d20\u90fd\u88ab\u6807\u8bb0\u3002\u63cf\u8ff0\u4f60\u7684\u7b97\u6cd5\u5e76\u5206\u6790\u5176\u4e0e\u6807\u51c6\u5149\u6805\u5316\u7684\u5dee\u5f02\u3002\u8003\u8651\uff1a\u5982\u4f55\u6269\u5c55\u4e09\u89d2\u5f62\u8fb9\u754c\uff1f\u5982\u4f55\u5904\u7406\u6781\u5c0f\u7684\u4e09\u89d2\u5f62\uff1f</p>\n<p><em>\u63d0\u793a\uff1a\u8003\u8651\u5c06\u4e09\u89d2\u5f62\u8fb9\u754c\u5411\u5916\u6269\u5c55\u534a\u4e2a\u50cf\u7d20\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u4fdd\u5b88\u5149\u6805\u5316\u7b97\u6cd5\u8bbe\u8ba1\uff1a</p>\n<ol>\n<li>\n<p><strong>\u8fb9\u754c\u6269\u5c55\u65b9\u6cd5</strong>\uff1a\n   - \u5c06\u6bcf\u6761\u8fb9\u6cbf\u6cd5\u7ebf\u65b9\u5411\u5411\u5916\u6269\u5c55 $\\frac{\\sqrt{2}}{2}$ \u4e2a\u50cf\u7d20\uff08\u6700\u574f\u60c5\u51b5\u4e0b\u7684\u50cf\u7d20\u5bf9\u89d2\u7ebf\u957f\u5ea6\uff09\n   - \u8fb9\u51fd\u6570\u4fee\u6539\uff1a$E'(p) = E(p) - \\frac{\\sqrt{2}}{2} \\cdot ||\\mathbf{n}||$</p>\n</li>\n<li>\n<p><strong>\u5b9e\u73b0\u6b65\u9aa4</strong>\uff1a\n   <code>for each edge (v0, v1):\n       normal = perpendicular(v1 - v0)\n       offset = 0.5 * sqrt(2) * normalize(normal)\n       expanded_edge = translate edge by offset</code></p>\n</li>\n<li>\n<p><strong>\u6781\u5c0f\u4e09\u89d2\u5f62\u5904\u7406</strong>\uff1a\n   - \u5982\u679c\u4e09\u89d2\u5f62\u9762\u79ef\u5c0f\u4e8e\u4e00\u4e2a\u50cf\u7d20\uff0c\u81f3\u5c11\u5149\u6805\u5316\u5176\u8d28\u5fc3\u6240\u5728\u7684\u50cf\u7d20\n   - \u4f7f\u7528\u5305\u56f4\u7403\u6d4b\u8bd5\uff1a\u5982\u679c\u50cf\u7d20\u4e2d\u5fc3\u5230\u4e09\u89d2\u5f62\u7684\u8ddd\u79bb\u5c0f\u4e8e $\\frac{\\sqrt{2}}{2}$\uff0c\u5219\u5149\u6805\u5316</p>\n</li>\n<li>\n<p><strong>\u4f18\u5316\u8003\u8651</strong>\uff1a\n   - \u4f7f\u7528\u5206\u79bb\u8f74\u5b9a\u7406\u8fdb\u884c\u7cbe\u786e\u7684\u50cf\u7d20-\u4e09\u89d2\u5f62\u76f8\u4ea4\u6d4b\u8bd5\n   - \u5bf9\u4e8e\u8f74\u5bf9\u9f50\u7684\u8fb9\uff0c\u6269\u5c55\u53ef\u4ee5\u7b80\u5316\u4e3a0.5\u50cf\u7d20</p>\n</li>\n<li>\n<p><strong>\u5e94\u7528\u573a\u666f</strong>\uff1a\n   - \u4f53\u7d20\u5316\n   - \u78b0\u649e\u68c0\u6d4b\n   - \u9634\u5f71\u4f53\u751f\u6210</p>\n</li>\n</ol>\n</details>\n<p><strong>3.6 \u81ea\u9002\u5e94\u8d85\u91c7\u6837</strong>\n\u8bbe\u8ba1\u4e00\u4e2a\u81ea\u9002\u5e94\u8d85\u91c7\u6837\u7cfb\u7edf\uff0c\u53ea\u5728\u9700\u8981\u7684\u5730\u65b9\uff08\u5982\u8fb9\u7f18\uff09\u4f7f\u7528\u9ad8\u91c7\u6837\u7387\u3002\u4f60\u7684\u7cfb\u7edf\u5e94\u8be5\u5305\u62ec\uff1a\u8fb9\u7f18\u68c0\u6d4b\u6807\u51c6\u3001\u91c7\u6837\u6a21\u5f0f\u9009\u62e9\u3001\u4ee5\u53ca\u6027\u80fd\u4e0e\u8d28\u91cf\u7684\u6743\u8861\u5206\u6790\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u53ef\u4ee5\u57fa\u4e8e\u6df1\u5ea6\u6216\u989c\u8272\u7684\u68af\u5ea6\u6765\u68c0\u6d4b\u8fb9\u7f18\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u81ea\u9002\u5e94\u8d85\u91c7\u6837\u7cfb\u7edf\u8bbe\u8ba1\uff1a</p>\n<ol>\n<li>\n<p><strong>\u8fb9\u7f18\u68c0\u6d4b\u6807\u51c6</strong>\uff1a\n   <code>edge_score = max(\n       |depth_center - depth_neighbor| / depth_center,\n       |color_center - color_neighbor|,\n       |normal_center \u00b7 normal_neighbor - 1|\n   )</code></p>\n</li>\n<li>\n<p><strong>\u91c7\u6837\u7b56\u7565\u5206\u7ea7</strong>\uff1a\n   - Level 0 (1\u00d7): edge_score &lt; 0.1\n   - Level 1 (4\u00d7): 0.1 \u2264 edge_score &lt; 0.3\n   - Level 2 (8\u00d7): 0.3 \u2264 edge_score &lt; 0.6\n   - Level 3 (16\u00d7): edge_score \u2265 0.6</p>\n</li>\n<li>\n<p><strong>\u5b9e\u73b0\u6d41\u7a0b</strong>\uff1a\n   - Pass 1: \u4ee51\u00d7\u91c7\u6837\u7387\u6e32\u67d3\uff0c\u540c\u65f6\u8f93\u51faG-buffer\n   - Analysis: \u5206\u6790G-buffer\uff0c\u6807\u8bb0\u9700\u8981\u8d85\u91c7\u6837\u7684\u50cf\u7d20\n   - Pass 2: \u5bf9\u6807\u8bb0\u7684\u50cf\u7d20\u8fdb\u884c\u8d85\u91c7\u6837\n   - Resolve: \u5408\u5e76\u7ed3\u679c</p>\n</li>\n<li>\n<p><strong>\u4f18\u5316\u6280\u672f</strong>\uff1a\n   - \u65f6\u95f4\u590d\u7528\uff1a\u7ed3\u5408TAA\uff0c\u51cf\u5c11\u5f53\u524d\u5e27\u7684\u91c7\u6837\u9700\u6c42\n   - \u9884\u6d4b\uff1a\u57fa\u4e8e\u524d\u4e00\u5e27\u7684\u8fb9\u7f18\u4fe1\u606f\u9884\u6d4b\u5f53\u524d\u5e27\n   - \u5206\u5757\u5904\u7406\uff1a\u4ee52\u00d72\u62164\u00d74\u5757\u4e3a\u5355\u4f4d\u51b3\u5b9a\u91c7\u6837\u7387</p>\n</li>\n<li>\n<p><strong>\u6027\u80fd\u5206\u6790</strong>\uff1a\n   - \u6700\u4f73\u60c5\u51b5\uff1a\u5927\u90e8\u5206\u5e73\u6ed1\u533a\u57df\uff0c\u63a5\u8fd11\u00d7\u6027\u80fd\n   - \u6700\u574f\u60c5\u51b5\uff1a\u5168\u662f\u8fb9\u7f18\uff0c\u9000\u5316\u4e3a\u5b8c\u5168\u8d85\u91c7\u6837\n   - \u5178\u578b\u573a\u666f\uff1a20-40%\u7684\u50cf\u7d20\u9700\u8981\u8d85\u91c7\u6837\uff0c\u6027\u80fd\u63d0\u53472-3\u500d</p>\n</li>\n</ol>\n</details>\n<p><strong>3.7 \u6df1\u5ea6\u7f13\u51b2\u7cbe\u5ea6\u4f18\u5316</strong>\n\u63a8\u5bfc\u5bf9\u6570\u6df1\u5ea6\u7f13\u51b2\u7684\u6570\u5b66\u516c\u5f0f\uff0c\u5e76\u5206\u6790\u5176\u76f8\u5bf9\u4e8e\u6807\u51c6\u6df1\u5ea6\u7f13\u51b2\u7684\u7cbe\u5ea6\u5206\u5e03\u3002\u5b9e\u73b0\u4e00\u4e2a\u6df1\u5ea6\u503c\u7f16\u7801/\u89e3\u7801\u65b9\u6848\uff0c\u572824\u4f4d\u5b9a\u70b9\u6570\u4e2d\u6700\u5927\u5316\u53ef\u7528\u7cbe\u5ea6\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u8003\u8651\u4eba\u773c\u5bf9\u8fd1\u5904\u7ec6\u8282\u7684\u654f\u611f\u5ea6\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<ol>\n<li><strong>\u5bf9\u6570\u6df1\u5ea6\u63a8\u5bfc</strong>\uff1a</li>\n</ol>\n<p>\u6807\u51c6\u6df1\u5ea6\uff1a$z_{std} = \\frac{f+n}{f-n} - \\frac{2fn}{(f-n)z}$</p>\n<p>\u5bf9\u6570\u6df1\u5ea6\uff1a$z_{log} = \\frac{\\log(z/n)}{\\log(f/n)}$</p>\n<p>\u7cbe\u5ea6\u5206\u6790\uff1a</p>\n<ul>\n<li>\u6807\u51c6\u6df1\u5ea6\uff1a$\\frac{dz_{std}}{dz} = \\frac{2fn}{(f-n)z^2}$\uff08\u968fz\u00b2\u4e0b\u964d\uff09</li>\n<li>\u5bf9\u6570\u6df1\u5ea6\uff1a$\\frac{dz_{log}}{dz} = \\frac{1}{z\\log(f/n)}$\uff08\u968fz\u7ebf\u6027\u4e0b\u964d\uff09</li>\n</ul>\n<ol start=\"2\">\n<li>\n<p><strong>24\u4f4d\u7f16\u7801\u65b9\u6848</strong>\uff1a\n   <code>encode(z_eye):\n       // \u4f7f\u7528\u4f2a\u5bf9\u6570\u7f16\u7801\n       if z_eye &lt; split_distance:\n           // \u8fd1\u5904\u4f7f\u7528\u7ebf\u6027\n           encoded = (z_eye - n) / (split - n) * 0.5\n       else:\n           // \u8fdc\u5904\u4f7f\u7528\u5bf9\u6570\n           encoded = 0.5 + 0.5 * log(z_eye/split) / log(f/split)\n       return uint24(encoded * (2^24 - 1))</code></p>\n</li>\n<li>\n<p><strong>\u7cbe\u5ea6\u5206\u5e03\u4f18\u5316</strong>\uff1a\n   - \u5206\u5272\u70b9\u9009\u62e9\uff1a$split = \\sqrt{nf}$\uff08\u51e0\u4f55\u5e73\u5747\uff09\n   - \u8fd1\u5904\u7cbe\u5ea6\uff1a~0.01mm at 1m\n   - \u8fdc\u5904\u7cbe\u5ea6\uff1a~1m at 1000m</p>\n</li>\n<li>\n<p><strong>\u5b9e\u9645\u8003\u8651</strong>\uff1a\n   - \u53cd\u5411Z + \u6d6e\u70b9\uff1a\u5229\u7528\u6d6e\u70b9\u6570\u7684\u6307\u6570\u7279\u6027\n   - W\u7f13\u51b2\uff1a\u76f4\u63a5\u5b58\u50a8\u7ebf\u6027\u6df1\u5ea61/w\n   - \u591a\u7ea7\u6df1\u5ea6\uff1a\u8fd1\u666f\u548c\u8fdc\u666f\u4f7f\u7528\u72ec\u7acb\u7f13\u51b2</p>\n</li>\n</ol>\n</details>\n<p><strong>3.8 GPU\u5206\u5757\u5927\u5c0f\u4f18\u5316</strong>\n\u5206\u6790\u4e0d\u540c\u5206\u5757\u5927\u5c0f\uff088\u00d78, 16\u00d716, 32\u00d732\uff09\u5bf9GPU\u5149\u6805\u5316\u6027\u80fd\u7684\u5f71\u54cd\u3002\u8003\u8651\uff1a\u7f13\u5b58\u547d\u4e2d\u7387\u3001\u8d1f\u8f7d\u5747\u8861\u3001\u51e0\u4f55\u590d\u6742\u5ea6\u7684\u5f71\u54cd\u3002\u8bbe\u8ba1\u4e00\u4e2a\u5b9e\u9a8c\u6765\u786e\u5b9a\u7279\u5b9a\u573a\u666f\u7684\u6700\u4f18\u5206\u5757\u5927\u5c0f\u3002</p>\n<p><em>\u63d0\u793a\uff1a\u8003\u8651\u4e09\u89d2\u5f62\u5927\u5c0f\u5206\u5e03\u548c\u5c4f\u5e55\u7a7a\u95f4\u5c40\u90e8\u6027\u3002</em></p>\n<details>\n<summary>\u7b54\u6848</summary>\n<ol>\n<li><strong>\u7406\u8bba\u5206\u6790</strong>\uff1a</li>\n</ol>\n<p><strong>8\u00d78\u5206\u5757</strong>\uff1a</p>\n<ul>\n<li>\u4f18\u70b9\uff1a\u7ec6\u7c92\u5ea6\u8d1f\u8f7d\u5747\u8861\uff0c\u5c0f\u4e09\u89d2\u5f62\u6548\u7387\u9ad8</li>\n<li>\u7f3a\u70b9\uff1a\u7ba1\u7406\u5f00\u9500\u5927\uff0c\u5927\u4e09\u89d2\u5f62\u8de8\u8d8a\u591a\u4e2a\u5757</li>\n</ul>\n<p><strong>16\u00d716\u5206\u5757</strong>\uff1a</p>\n<ul>\n<li>\u4f18\u70b9\uff1a\u5e73\u8861\u7684\u9009\u62e9\uff0c\u9002\u5408\u4e2d\u7b49\u5927\u5c0f\u4e09\u89d2\u5f62</li>\n<li>\u7f3a\u70b9\uff1a\u67d0\u4e9b\u573a\u666f\u53ef\u80fd\u4e0d\u591f\u7075\u6d3b</li>\n</ul>\n<p><strong>32\u00d732\u5206\u5757</strong>\uff1a</p>\n<ul>\n<li>\u4f18\u70b9\uff1a\u7ba1\u7406\u5f00\u9500\u5c0f\uff0c\u5927\u4e09\u89d2\u5f62\u6548\u7387\u9ad8</li>\n<li>\u7f3a\u70b9\uff1a\u8d1f\u8f7d\u4e0d\u5747\u8861\u98ce\u9669\uff0c\u5c0f\u4e09\u89d2\u5f62\u6d6a\u8d39</li>\n</ul>\n<ol start=\"2\">\n<li><strong>\u6027\u80fd\u6a21\u578b</strong>\uff1a\n   ```\n   Cost = N_tiles \u00d7 (C_setup + N_prims \u00d7 C_raster + N_pixels \u00d7 C_shade)</li>\n</ol>\n<p>\u5176\u4e2d\uff1a</p>\n<ul>\n<li>N_tiles = ceil(W/tile_size) \u00d7 ceil(H/tile_size)</li>\n<li>N_prims = avg_prims_per_tile\uff08\u4e0e\u5206\u5757\u5927\u5c0f\u76f8\u5173\uff09</li>\n<li>N_pixels = tile_size\u00b2\uff08\u5b9e\u9645\u7740\u8272\u7684\u50cf\u7d20\u53ef\u80fd\u66f4\u5c11\uff09\n   ```</li>\n</ul>\n<ol start=\"3\">\n<li>\n<p><strong>\u5b9e\u9a8c\u8bbe\u8ba1</strong>\uff1a\n   ```\n   for tile_size in [8, 16, 32]:\n       for scene in [many_small_tris, few_large_tris, mixed]:\n           measure:</p>\n<pre class=\"codehilite\"><code>       - Frame time\n       - Tile occupancy\n       - Cache miss rate\n       - Warp divergence\n</code></pre>\n\n<p>```</p>\n</li>\n<li>\n<p><strong>\u81ea\u9002\u5e94\u7b56\u7565</strong>\uff1a\n   - \u57fa\u4e8e\u573a\u666f\u7edf\u8ba1\u52a8\u6001\u9009\u62e9\n   - \u6df7\u5408\u5206\u5757\uff1a\u4e0d\u540c\u533a\u57df\u4f7f\u7528\u4e0d\u540c\u5927\u5c0f\n   - \u9884\u6d4b\u6a21\u578b\uff1a\u57fa\u4e8e\u524d\u51e0\u5e27\u7684\u7edf\u8ba1\u4fe1\u606f</p>\n</li>\n<li>\n<p><strong>\u5b9e\u9645\u5efa\u8bae</strong>\uff1a\n   - UI\u6e32\u67d3\uff1a8\u00d78\uff08many small triangles\uff09\n   - \u6e38\u620f\u573a\u666f\uff1a16\u00d716\uff08\u5e73\u8861\u9009\u62e9\uff09\n   - CAD/\u5efa\u7b51\uff1a32\u00d732\uff08\u5927\u578b\u4e09\u89d2\u5f62\uff09</p>\n</li>\n</ol>\n</details>\n<h2 id=\"gotchas\">\u5e38\u89c1\u9677\u9631\u4e0e\u9519\u8bef\uff08Gotchas\uff09</h2>\n<h3 id=\"1\">1. \u7cbe\u5ea6\u76f8\u5173\u95ee\u9898</h3>\n<p><strong>\u6d6e\u70b9\u7cbe\u5ea6\u5bfc\u81f4\u7684\u88c2\u7f1d</strong></p>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1a\u76f8\u90bb\u4e09\u89d2\u5f62\u7684\u5171\u4eab\u8fb9\u5728\u5149\u6805\u5316\u65f6\u53ef\u80fd\u4ea7\u751f\u88c2\u7f1d</li>\n<li><strong>\u539f\u56e0</strong>\uff1a\u6d6e\u70b9\u8fd0\u7b97\u7684\u820d\u5165\u8bef\u5dee</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u4f7f\u7528\u5b9a\u70b9\u6570\u8fd0\u7b97\uff0c\u786e\u4fdd\u5171\u4eab\u9876\u70b9\u7684\u5750\u6807\u5b8c\u5168\u76f8\u540c</li>\n</ul>\n<p><strong>\u6df1\u5ea6\u7cbe\u5ea6\u4e0d\u8db3</strong></p>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1aZ-fighting\uff0c\u8fdc\u5904\u7269\u4f53\u6df1\u5ea6\u5206\u8fa8\u7387\u4f4e</li>\n<li><strong>\u539f\u56e0</strong>\uff1a\u900f\u89c6\u6295\u5f71\u7684\u975e\u7ebf\u6027\u6df1\u5ea6\u5206\u5e03</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u8c03\u6574near/far\u5e73\u9762\uff0c\u4f7f\u7528\u5bf9\u6570\u6df1\u5ea6\u6216\u53cd\u5411Z</li>\n</ul>\n<h3 id=\"2\">2. \u63d2\u503c\u9519\u8bef</h3>\n<p><strong>\u5c4f\u5e55\u7a7a\u95f4\u7ebf\u6027\u63d2\u503c</strong></p>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1a\u7eb9\u7406\u626d\u66f2\uff0c\u5149\u7167\u4e0d\u6b63\u786e</li>\n<li><strong>\u539f\u56e0</strong>\uff1a\u5fd8\u8bb0\u8fdb\u884c\u900f\u89c6\u6821\u6b63</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u59cb\u7ec8\u4f7f\u7528 $1/w$ \u8fdb\u884c\u63d2\u503c\u6743\u91cd\u8ba1\u7b97</li>\n</ul>\n<p><strong>\u5c5e\u6027\u63d2\u503c\u6ea2\u51fa</strong></p>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1a\u989c\u8272\u503c\u8d85\u51fa[0,1]\u8303\u56f4</li>\n<li><strong>\u539f\u56e0</strong>\uff1a\u91cd\u5fc3\u5750\u6807\u8ba1\u7b97\u9519\u8bef\u6216\u6570\u503c\u7cbe\u5ea6\u95ee\u9898</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u9a8c\u8bc1\u91cd\u5fc3\u5750\u6807\u548c\u4e3a1\uff0c\u6dfb\u52a0\u8303\u56f4\u68c0\u67e5</li>\n</ul>\n<h3 id=\"3_1\">3. \u6027\u80fd\u9677\u9631</h3>\n<p><strong>\u8fc7\u5ea6\u7ed8\u5236\uff08Overdraw\uff09</strong></p>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1a\u540c\u4e00\u50cf\u7d20\u88ab\u591a\u6b21\u7740\u8272</li>\n<li><strong>\u539f\u56e0</strong>\uff1a\u7ed8\u5236\u987a\u5e8f\u4e0d\u5f53\uff0c\u7f3a\u5c11\u65e9\u671f\u5254\u9664</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u524d\u5411\u540e\u6e32\u67d3\u4e0d\u900f\u660e\u7269\u4f53\uff0c\u4f7f\u7528Early-Z</li>\n</ul>\n<p><strong>\u5c0f\u4e09\u89d2\u5f62\u95ee\u9898</strong></p>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1aGPU\u5229\u7528\u7387\u4f4e</li>\n<li><strong>\u539f\u56e0</strong>\uff1a\u5c0f\u4e8e2\u00d72\u50cf\u7d20\u7684\u4e09\u89d2\u5f62\u5bfc\u81f4quad\u5229\u7528\u7387\u4f4e</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u4f7f\u7528LOD\uff0c\u5408\u5e76\u5c0f\u4e09\u89d2\u5f62</li>\n</ul>\n<h3 id=\"4\">4. \u6297\u952f\u9f7f\u76f8\u5173</h3>\n<p><strong>MSAA\u4e0e\u900f\u660e\u5ea6</strong></p>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1aAlpha-tested\u51e0\u4f55\u4f53\u8fb9\u7f18\u4ecd\u6709\u952f\u9f7f</li>\n<li><strong>\u539f\u56e0</strong>\uff1aMSAA\u53ea\u5bf9\u51e0\u4f55\u8fb9\u7f18\u6709\u6548\uff0c\u4e0d\u5904\u7406\u7740\u8272\u5668discard</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u4f7f\u7528Alpha to Coverage\u6216\u4e13\u95e8\u7684\u900f\u660e\u5ea6AA</li>\n</ul>\n<p><strong>TAA\u9b3c\u5f71</strong></p>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1a\u79fb\u52a8\u7269\u4f53\u51fa\u73b0\u62d6\u5c3e</li>\n<li><strong>\u539f\u56e0</strong>\uff1a\u5386\u53f2\u5e27\u6743\u91cd\u8fc7\u9ad8\u6216\u8fd0\u52a8\u5411\u91cf\u4e0d\u51c6\u786e</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u964d\u4f4e\u5386\u53f2\u5e27\u6743\u91cd\uff0c\u6539\u8fdb\u8fd0\u52a8\u5411\u91cf\u8ba1\u7b97</li>\n</ul>\n<h3 id=\"5-gpu\">5. GPU\u7279\u5b9a\u95ee\u9898</h3>\n<p><strong>Warp\u53d1\u6563</strong></p>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1a\u6027\u80fd\u663e\u8457\u4e0b\u964d</li>\n<li><strong>\u539f\u56e0</strong>\uff1a\u540c\u4e00warp\u5185\u7684\u7ebf\u7a0b\u6267\u884c\u4e0d\u540c\u5206\u652f</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u6392\u5e8f\u7ed8\u5236\u8c03\u7528\uff0c\u51cf\u5c11\u52a8\u6001\u5206\u652f</li>\n</ul>\n<p><strong>\u7eb9\u7406\u7f13\u5b58\u672a\u547d\u4e2d</strong></p>\n<ul>\n<li><strong>\u95ee\u9898</strong>\uff1a\u5e26\u5bbd\u74f6\u9888</li>\n<li><strong>\u539f\u56e0</strong>\uff1a\u7eb9\u7406\u8bbf\u95ee\u6a21\u5f0f\u968f\u673a\uff0cmipmap\u9009\u62e9\u4e0d\u5f53</li>\n<li><strong>\u89e3\u51b3</strong>\uff1a\u6539\u5584UV\u5e03\u5c40\uff0c\u6b63\u786e\u8ba1\u7b97LOD</li>\n</ul>\n<h3 id=\"6\">6. \u8c03\u8bd5\u6280\u5de7</h3>\n<p><strong>\u89c6\u89c9\u5316\u8c03\u8bd5</strong></p>\n<pre class=\"codehilite\"><code>// \u53ef\u89c6\u5316\u91cd\u5fc3\u5750\u6807\ncolor = vec3(alpha, beta, gamma);\n\n// \u53ef\u89c6\u5316mipmap\u7ea7\u522b\ncolor = heat_map(mipmap_level);\n\n// \u53ef\u89c6\u5316overdraw\ncolor = vec3(overdraw_count / max_overdraw);\n</code></pre>\n\n<p><strong>\u6027\u80fd\u5206\u6790\u8981\u70b9</strong></p>\n<ul>\n<li>\u4f7f\u7528GPU profiler\u8bc6\u522b\u74f6\u9888</li>\n<li>\u76d1\u63a7\u5404\u9636\u6bb5\u7684\u541e\u5410\u91cf</li>\n<li>\u68c0\u67e5\u7f13\u5b58\u547d\u4e2d\u7387</li>\n</ul>\n<h2 id=\"_51\">\u6700\u4f73\u5b9e\u8df5\u68c0\u67e5\u6e05\u5355</h2>\n<h3 id=\"_52\">\u5149\u6805\u5316\u8bbe\u8ba1\u5ba1\u67e5</h3>\n<h4 id=\"_53\">\u51e0\u4f55\u5904\u7406</h4>\n<ul>\n<li>[ ] \u4e09\u89d2\u5f62\u9876\u70b9\u6309\u4e00\u81f4\u987a\u5e8f\uff08\u901a\u5e38\u9006\u65f6\u9488\uff09</li>\n<li>[ ] \u5171\u4eab\u9876\u70b9\u4f7f\u7528\u7d22\u5f15\u7f13\u51b2</li>\n<li>[ ] \u907f\u514d\u9000\u5316\u4e09\u89d2\u5f62\uff08\u9762\u79ef\u63a5\u8fd10\uff09</li>\n<li>[ ] \u5408\u7406\u7684\u4e09\u89d2\u5f62\u5927\u5c0f\uff08\u907f\u514d\u8fc7\u5c0f\uff09</li>\n</ul>\n<h4 id=\"_54\">\u7cbe\u5ea6\u7ba1\u7406</h4>\n<ul>\n<li>[ ] \u5b9a\u70b9\u6570\u7528\u4e8e\u5149\u6805\u5316\u5750\u6807</li>\n<li>[ ] \u9002\u5f53\u7684\u5b50\u50cf\u7d20\u7cbe\u5ea6\uff08\u901a\u5e388-16\u4f4d\uff09</li>\n<li>[ ] Near/far\u5e73\u9762\u5408\u7406\u8bbe\u7f6e</li>\n<li>[ ] \u6df1\u5ea6\u7f13\u51b2\u683c\u5f0f\u9009\u62e9\u5f97\u5f53</li>\n</ul>\n<h4 id=\"_55\">\u6027\u80fd\u4f18\u5316</h4>\n<ul>\n<li>[ ] \u5b9e\u65bd\u80cc\u9762\u5254\u9664</li>\n<li>[ ] \u542f\u7528Early-Z\uff08\u907f\u514d\u7981\u7528\u5b83\u7684\u64cd\u4f5c\uff09</li>\n<li>[ ] \u5408\u7406\u7684\u7ed8\u5236\u987a\u5e8f\uff08\u4e0d\u900f\u660e\u7269\u4f53\u524d\u5230\u540e\uff09</li>\n<li>[ ] \u6279\u5904\u7406\u76f8\u4f3c\u7684\u7ed8\u5236\u8c03\u7528</li>\n</ul>\n<h4 id=\"_56\">\u6297\u952f\u9f7f\u7b56\u7565</h4>\n<ul>\n<li>[ ] \u6839\u636e\u76ee\u6807\u5e73\u53f0\u9009\u62e9AA\u65b9\u6cd5</li>\n<li>[ ] MSAA\u91c7\u6837\u6a21\u5f0f\u4f18\u5316</li>\n<li>[ ] TAA\u7684\u8fd0\u52a8\u5411\u91cf\u6b63\u786e</li>\n<li>[ ] \u540e\u5904\u7406AA\u4f5c\u4e3a\u5907\u9009\u65b9\u6848</li>\n</ul>\n<h4 id=\"_57\">\u5185\u5b58\u4e0e\u5e26\u5bbd</h4>\n<ul>\n<li>[ ] \u6df1\u5ea6\u7f13\u51b2\u538b\u7f29\u542f\u7528</li>\n<li>[ ] \u989c\u8272\u7f13\u51b2\u538b\u7f29\u542f\u7528</li>\n<li>[ ] \u5408\u7406\u7684\u6e32\u67d3\u76ee\u6807\u683c\u5f0f</li>\n<li>[ ] \u907f\u514d\u4e0d\u5fc5\u8981\u7684\u7f13\u51b2\u6e05\u9664</li>\n</ul>\n<h4 id=\"_58\">\u7740\u8272\u5668\u6700\u4f73\u5b9e\u8df5</h4>\n<ul>\n<li>[ ] \u907f\u514d\u7740\u8272\u5668\u4e2d\u7684discard\uff08\u5f71\u54cdEarly-Z\uff09</li>\n<li>[ ] \u51cf\u5c11\u52a8\u6001\u5206\u652f</li>\n<li>[ ] \u5229\u7528\u63d2\u503c\u5668\u786c\u4ef6</li>\n<li>[ ] \u6b63\u786e\u7684\u5bfc\u6570\u8ba1\u7b97\uff08\u7ef4\u63012\u00d72 quad\uff09</li>\n</ul>\n<h4 id=\"_59\">\u73b0\u4ee3\u7279\u6027\u5229\u7528</h4>\n<ul>\n<li>[ ] VRS\u7528\u4e8e\u6027\u80fd\u4f18\u5316</li>\n<li>[ ] Mesh shader\u7528\u4e8e\u51e0\u4f55\u4f18\u5316</li>\n<li>[ ] \u786c\u4ef6\u5149\u8ffd\u7684\u9009\u62e9\u6027\u4f7f\u7528</li>\n<li>[ ] \u591a\u5206\u8fa8\u7387\u6e32\u67d3\u6280\u672f</li>\n</ul>\n<h4 id=\"_60\">\u8c03\u8bd5\u4e0e\u9a8c\u8bc1</h4>\n<ul>\n<li>[ ] \u65e0\u6e32\u67d3\u9519\u8bef\uff08\u88c2\u7f1d\u3001\u95ea\u70c1\uff09</li>\n<li>[ ] \u6027\u80fd\u6307\u6807\u8fbe\u6807</li>\n<li>[ ] \u5185\u5b58\u4f7f\u7528\u5408\u7406</li>\n<li>[ ] \u652f\u6301\u5fc5\u8981\u7684\u8c03\u8bd5\u53ef\u89c6\u5316</li>\n</ul>\n<h3 id=\"_61\">\u4ee3\u7801\u8d28\u91cf</h3>\n<ul>\n<li>[ ] \u5149\u6805\u5316\u53c2\u6570\u53ef\u914d\u7f6e</li>\n<li>[ ] \u9002\u5f53\u7684\u9519\u8bef\u5904\u7406</li>\n<li>[ ] \u6027\u80fd\u8ba1\u6570\u5668\u96c6\u6210</li>\n<li>[ ] \u6e05\u6670\u7684\u7ba1\u7ebf\u72b6\u6001\u7ba1\u7406</li>\n</ul>"
  },
  "../chapter7.md": {
    "hash": "82ea9b33321304b95985418156159591",
    "content": "<h1 id=\"7\">\u7b2c7\u7ae0\uff1a\u5149\u7ebf\u8ffd\u8e2a\u57fa\u7840</h1>\n<p>\u5149\u7ebf\u8ffd\u8e2a\u662f\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u5b9e\u73b0\u771f\u5b9e\u611f\u6e32\u67d3\u7684\u6838\u5fc3\u6280\u672f\u4e4b\u4e00\u3002\u4e0d\u540c\u4e8e\u5149\u6805\u5316\u7684\u524d\u5411\u6e32\u67d3\u65b9\u5f0f\uff0c\u5149\u7ebf\u8ffd\u8e2a\u91c7\u7528\u9006\u5411\u8ffd\u8e2a\u5149\u7ebf\u7684\u65b9\u5f0f\uff0c\u4ece\u76f8\u673a\u51fa\u53d1\u8ffd\u8e2a\u5149\u7ebf\u5728\u573a\u666f\u4e2d\u7684\u4f20\u64ad\u8def\u5f84\u3002\u672c\u7ae0\u5c06\u6df1\u5165\u63a2\u8ba8\u5149\u7ebf\u8ffd\u8e2a\u7684\u57fa\u672c\u539f\u7406\u3001\u52a0\u901f\u7ed3\u6784\u7684\u8bbe\u8ba1\u4e0e\u5b9e\u73b0\uff0c\u4ee5\u53ca\u5149\u7ebf\u4e0e\u7269\u4f53\u76f8\u4ea4\u7b97\u6cd5\u7684\u4f18\u5316\u6280\u672f\u3002\u6211\u4eec\u5c06\u91cd\u70b9\u5173\u6ce8\u7b97\u6cd5\u7684\u6570\u5b66\u57fa\u7840\u548c\u6027\u80fd\u4f18\u5316\u7b56\u7565\uff0c\u4e3a\u540e\u7eed\u7684\u5168\u5c40\u5149\u7167\u548c\u9ad8\u7ea7\u6e32\u67d3\u6280\u672f\u6253\u4e0b\u575a\u5b9e\u57fa\u7840\u3002</p>\n<h2 id=\"71\">7.1 \u5149\u7ebf\u8ffd\u8e2a\u57fa\u672c\u539f\u7406</h2>\n<h3 id=\"711\">7.1.1 \u5149\u7ebf\u7684\u6570\u5b66\u8868\u793a</h3>\n<p>\u5149\u7ebf\u53ef\u4ee5\u7528\u53c2\u6570\u65b9\u7a0b\u8868\u793a\uff1a\n$$\\mathbf{r}(t) = \\mathbf{o} + t\\mathbf{d}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$\\mathbf{o}$ \u662f\u5149\u7ebf\u8d77\u70b9\uff08origin\uff09</li>\n<li>$\\mathbf{d}$ \u662f\u5f52\u4e00\u5316\u7684\u65b9\u5411\u5411\u91cf\uff08direction\uff09</li>\n<li>$t \\geq 0$ \u662f\u53c2\u6570\uff0c\u8868\u793a\u6cbf\u5149\u7ebf\u65b9\u5411\u7684\u8ddd\u79bb</li>\n</ul>\n<p><strong>\u6269\u5c55\u8868\u793a</strong>\uff1a\u4e3a\u4e86\u6570\u503c\u7a33\u5b9a\u6027\uff0c\u5b9e\u9645\u5e94\u7528\u4e2d\u5e38\u4f7f\u7528\uff1a\n$$\\mathbf{r}(t) = \\mathbf{o} + t\\mathbf{d}, \\quad t \\in [t_{\\min}, t_{\\max}]$$\n\u5176\u4e2d $t_{\\min} &gt; 0$ \u907f\u514d\u81ea\u76f8\u4ea4\uff0c$t_{\\max}$ \u9650\u5236\u5149\u7ebf\u957f\u5ea6\u3002\u5178\u578b\u503c\uff1a$t_{\\min} = 10^{-4}$ \u5230 $10^{-3}$\uff0c\u53d6\u51b3\u4e8e\u573a\u666f\u89c4\u6a21\u3002</p>\n<p><strong>\u5149\u7ebf\u5fae\u5206</strong>\uff1a\u7528\u4e8e\u6297\u952f\u9f7f\u548c\u7eb9\u7406\u8fc7\u6ee4\uff0c\u8ffd\u8e2a\u5149\u7ebf\u7684\u5fae\u5206\u4fe1\u606f\uff1a\n$$\\frac{\\partial \\mathbf{r}}{\\partial x} = \\frac{\\partial \\mathbf{o}}{\\partial x} + t\\frac{\\partial \\mathbf{d}}{\\partial x}$$\n\u8fd9\u5bf9\u4e8e\u8ba1\u7b97\u7eb9\u7406footprint\u81f3\u5173\u91cd\u8981\u3002\u8003\u8651\u76f8\u90bb\u50cf\u7d20\u7684\u5149\u7ebf\uff1a\n$$\\begin{aligned}\n\\frac{\\partial \\mathbf{d}}{\\partial x} &amp;\\approx \\mathbf{d}_{i+1,j} - \\mathbf{d}_{i,j} \\\n\\frac{\\partial \\mathbf{d}}{\\partial y} &amp;\\approx \\mathbf{d}_{i,j+1} - \\mathbf{d}_{i,j}\n\\end{aligned}$$\n<strong>\u5149\u7ebf\u9525\uff08Ray Cone\uff09\u8868\u793a</strong>\uff1a\n\u4e3a\u4e86\u66f4\u51c6\u786e\u7684LOD\u9009\u62e9\u548c\u8fc7\u6ee4\uff0c\u53ef\u4ee5\u5c06\u5149\u7ebf\u6269\u5c55\u4e3a\u5706\u9525\uff1a\n$$r(t) = r_0 + t \\cdot \\tan(\\theta)$$\n\u5176\u4e2d $r_0$ \u662f\u50cf\u7d20footprint\u5728\u8fd1\u5e73\u9762\u7684\u534a\u5f84\uff0c$\\theta$ \u662f\u9525\u89d2\uff0c\u901a\u5e38\uff1a\n$$\\theta \\approx \\frac{1}{\\text{image_width}} \\cdot \\text{fov}$$\n<strong>\u5149\u7ebf\u7684\u9f50\u6b21\u5750\u6807\u8868\u793a</strong>\uff1a\n\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff08\u5982\u6295\u5f71\u53d8\u6362\uff09\uff0c\u4f7f\u7528Pl\u00fccker\u5750\u6807\u66f4\u65b9\u4fbf\uff1a\n$$\\mathbf{L} = (\\mathbf{d}, \\mathbf{o} \\times \\mathbf{d})$$\n\u8fd9\u79cd\u8868\u793a\u5728\u5904\u7406\u5149\u7ebf-\u5149\u7ebf\u8ddd\u79bb\u548c\u76f8\u4ea4\u6d4b\u8bd5\u65f6\u7279\u522b\u6709\u7528\u3002</p>\n<h3 id=\"712\">7.1.2 \u57fa\u672c\u5149\u7ebf\u8ffd\u8e2a\u7b97\u6cd5</h3>\n<p>\u5149\u7ebf\u8ffd\u8e2a\u7684\u6838\u5fc3\u6b65\u9aa4\uff1a</p>\n<ol>\n<li><strong>\u4e3b\u5149\u7ebf\u751f\u6210\uff08Primary Ray Generation\uff09</strong>\n   \u5bf9\u4e8e\u56fe\u50cf\u5e73\u9762\u4e0a\u7684\u6bcf\u4e2a\u50cf\u7d20 $(i, j)$\uff0c\u751f\u6210\u4ece\u76f8\u673a\u4f4d\u7f6e\u51fa\u53d1\u7684\u4e3b\u5149\u7ebf\uff1a\n$$\\mathbf{d}_{i,j} = \\text{normalize}(\\mathbf{p}_{i,j} - \\mathbf{e})$$\n\u5176\u4e2d $\\mathbf{e}$ \u662f\u76f8\u673a\u4f4d\u7f6e\uff0c$\\mathbf{p}_{i,j}$ \u662f\u50cf\u7d20\u5728\u4e16\u754c\u5750\u6807\u7cfb\u4e2d\u7684\u4f4d\u7f6e\u3002</li>\n</ol>\n<p><strong>\u5b50\u50cf\u7d20\u91c7\u6837</strong>\uff1a\u4e3a\u4e86\u6297\u952f\u9f7f\uff0c\u5728\u50cf\u7d20\u5185\u90e8\u8fdb\u884c\u591a\u6b21\u91c7\u6837\uff1a\n$$\\mathbf{p}_{i,j}^{(k)} = \\mathbf{p}_{i,j} + \\xi_x \\Delta_x \\mathbf{right} + \\xi_y \\Delta_y \\mathbf{up}$$\n\u5176\u4e2d $\\xi_x, \\xi_y \\in [-0.5, 0.5]$ \u662f\u91c7\u6837\u504f\u79fb\u3002</p>\n<p><strong>\u91c7\u6837\u6a21\u5f0f</strong>\uff1a</p>\n<ul>\n<li><strong>\u89c4\u5219\u91c7\u6837</strong>\uff1a$\\xi_x = \\frac{k_x + 0.5}{n_x} - 0.5$</li>\n<li><strong>\u968f\u673a\u91c7\u6837</strong>\uff1a$\\xi_x \\sim U(-0.5, 0.5)$</li>\n<li><strong>\u5206\u5c42\u91c7\u6837\uff08Stratified\uff09</strong>\uff1a\u5c06\u50cf\u7d20\u5206\u4e3a $n \\times n$ \u5b50\u683c\uff0c\u6bcf\u683c\u5185\u968f\u673a\u91c7\u6837</li>\n<li><strong>\u4f4e\u5dee\u5f02\u5e8f\u5217</strong>\uff1a\u4f7f\u7528Halton\u6216Sobol\u5e8f\u5217</li>\n</ul>\n<p><strong>\u91cd\u8981\u6027\u91c7\u6837\u4f18\u5316</strong>\uff1a\n   \u6839\u636e\u524d\u5e27\u6216\u9884\u89c8pass\u7684\u4fe1\u606f\uff0c\u5728\u9ad8\u9891\u533a\u57df\u589e\u52a0\u91c7\u6837\uff1a\n$$p(\\xi) \\propto |\\nabla I(x, y)|^2 + \\epsilon$$</p>\n<ol start=\"2\">\n<li><strong>\u5149\u7ebf-\u573a\u666f\u76f8\u4ea4\u6d4b\u8bd5</strong>\n   \u5bf9\u6bcf\u6761\u5149\u7ebf\uff0c\u627e\u5230\u6700\u8fd1\u7684\u76f8\u4ea4\u70b9\uff1a\n$$t_{\\text{hit}} = \\min_{k \\in \\text{objects}} t_k$$\n\u5176\u4e2d $t_k$ \u662f\u5149\u7ebf\u4e0e\u7b2c $k$ \u4e2a\u7269\u4f53\u7684\u76f8\u4ea4\u53c2\u6570\u3002</li>\n</ol>\n<p><strong>\u76f8\u4ea4\u4fe1\u606f\u8bb0\u5f55</strong>\uff1a\n   <code>struct HitRecord {\n       float t;           // \u76f8\u4ea4\u53c2\u6570\n       vec3 point;        // \u76f8\u4ea4\u70b9\n       vec3 normal;       // \u8868\u9762\u6cd5\u7ebf\n       vec2 uv;          // \u7eb9\u7406\u5750\u6807\n       Material* mat;     // \u6750\u8d28\u6307\u9488\n       float pdf_area;    // \u9762\u79ef\u6982\u7387\u5bc6\u5ea6\n       vec3 dpdu, dpdv;   // \u8868\u9762\u53c2\u6570\u5316\u5bfc\u6570\n       vec3 tangent;      // \u5207\u7ebf\u5411\u91cf\n       float curvature;   // \u66f2\u7387\u4fe1\u606f\n   }</code></p>\n<p><strong>\u6d6e\u70b9\u8bef\u5dee\u5904\u7406</strong>\uff1a\n   \u76f8\u4ea4\u70b9\u7684\u7cbe\u786e\u8ba1\u7b97\u8003\u8651\u8bef\u5dee\u754c\uff1a\n$$\\mathbf{p}_{\\text{hit}} = \\mathbf{o} + t_{\\text{hit}}\\mathbf{d} \\pm \\epsilon_{\\text{hit}}$$\n\u5176\u4e2d $\\epsilon_{\\text{hit}} = \\gamma_3(|\\mathbf{o}| + t_{\\text{hit}}|\\mathbf{d}|)$\uff0c\n   $\\gamma_n = \\frac{n\\epsilon_{\\text{machine}}}{1 - n\\epsilon_{\\text{machine}}}$</p>\n<ol start=\"3\">\n<li><strong>\u7740\u8272\u8ba1\u7b97</strong>\n   \u5728\u76f8\u4ea4\u70b9\u5904\u8ba1\u7b97\u989c\u8272\uff0c\u8003\u8651\uff1a</li>\n</ol>\n<ul>\n<li>\u76f4\u63a5\u5149\u7167\uff08\u4f7f\u7528\u9634\u5f71\u5149\u7ebf\uff09</li>\n<li>\u53cd\u5c04\uff08\u9012\u5f52\u8ffd\u8e2a\u53cd\u5c04\u5149\u7ebf\uff09</li>\n<li>\u6298\u5c04\uff08\u5bf9\u900f\u660e\u7269\u4f53\uff09</li>\n<li>\u73af\u5883\u5149\u7167\uff08\u73af\u5883\u8d34\u56fe\u91c7\u6837\uff09</li>\n</ul>\n<p><strong>\u5149\u7ebf\u76f8\u5e72\u6027\u5229\u7528</strong>\uff1a</p>\n<ul>\n<li><strong>\u5149\u7ebf\u5305\uff08Ray Packets\uff09</strong>\uff1a\u540c\u65f6\u8ffd\u8e2a\u591a\u6761\u76f8\u90bb\u5149\u7ebf</li>\n<li><strong>\u5149\u7ebf\u6392\u5e8f</strong>\uff1a\u6309\u65b9\u5411\u6216\u8d77\u70b9\u805a\u7c7b\u4ee5\u6539\u5584\u7f13\u5b58\u5c40\u90e8\u6027</li>\n<li><strong>\u5149\u7ebf\u91cd\u6392\u5e8f\u7f13\u51b2</strong>\uff1a\u5ef6\u8fdf\u5904\u7406\u4ee5\u6279\u91cf\u5316\u76f8\u4f3c\u64cd\u4f5c</li>\n</ul>\n<h3 id=\"713\">7.1.3 \u9012\u5f52\u5149\u7ebf\u8ffd\u8e2a</h3>\n<p>\u9012\u5f52\u5149\u7ebf\u8ffd\u8e2a\u901a\u8fc7\u8ffd\u8e2a\u6b21\u7ea7\u5149\u7ebf\u6765\u6a21\u62df\u590d\u6742\u7684\u5149\u7167\u6548\u679c\uff1a\n$$L_o(\\mathbf{x}, \\omega_o) = L_e(\\mathbf{x}, \\omega_o) + \\int_{\\Omega} f_r(\\mathbf{x}, \\omega_i, \\omega_o) L_i(\\mathbf{x}, \\omega_i) (\\omega_i \\cdot \\mathbf{n}) d\\omega_i$$\n<strong>Whitted-style\u5149\u7ebf\u8ffd\u8e2a</strong>\u7b80\u5316\u4e3a\uff1a\n$$L_o = L_e + k_d L_{\\text{direct}} + k_s L_{\\text{reflect}} + k_t L_{\\text{refract}}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$L_{\\text{direct}}$\uff1a\u76f4\u63a5\u5149\u7167\uff08Lambert + Phong\uff09</li>\n<li>$L_{\\text{reflect}}$\uff1a\u955c\u9762\u53cd\u5c04\u8d21\u732e</li>\n<li>$L_{\\text{refract}}$\uff1a\u6298\u5c04\u8d21\u732e</li>\n<li>$k_d, k_s, k_t$\uff1a\u6750\u8d28\u53c2\u6570\uff0c\u6ee1\u8db3\u80fd\u91cf\u5b88\u6052 $k_d + k_s + k_t \\leq 1$</li>\n</ul>\n<p><strong>\u76f4\u63a5\u5149\u7167\u8ba1\u7b97\u7684\u7ec6\u8282</strong>\uff1a</p>\n<p>\u5bf9\u4e8e\u70b9\u5149\u6e90\uff1a\n$$L_{\\text{direct}} = \\sum_{i} \\frac{I_i}{r_i^2} \\cdot V_i \\cdot \\max(0, \\mathbf{n} \\cdot \\mathbf{l}_i) \\cdot \\left(\\frac{k_d}{\\pi} + k_s \\frac{(\\mathbf{h}_i \\cdot \\mathbf{n})^n}{(\\mathbf{n} \\cdot \\mathbf{l}_i)}\\right)$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$I_i$\uff1a\u5149\u6e90\u5f3a\u5ea6</li>\n<li>$r_i$\uff1a\u5230\u5149\u6e90\u8ddd\u79bb</li>\n<li>$V_i$\uff1a\u53ef\u89c1\u6027\u51fd\u6570\uff080\u62161\uff09</li>\n<li>$\\mathbf{h}_i = \\text{normalize}(\\mathbf{l}_i + \\mathbf{v})$\uff1a\u534a\u5411\u91cf</li>\n<li>$n$\uff1aPhong\u6307\u6570</li>\n</ul>\n<p><strong>\u53cd\u5c04\u65b9\u5411\u8ba1\u7b97</strong>\uff1a\n$$\\mathbf{r}_{\\text{reflect}} = \\mathbf{d} - 2(\\mathbf{d} \\cdot \\mathbf{n})\\mathbf{n}$$\n<strong>\u6539\u8fdb\u7684\u53cd\u5c04\u6a21\u578b</strong>\uff1a\n\u8003\u8651\u5fae\u8868\u9762\u7406\u8bba\uff0c\u53ef\u4ee5\u6dfb\u52a0\u7c97\u7cd9\u5ea6\u6270\u52a8\uff1a\n$$\\mathbf{r}'_{\\text{reflect}} = \\text{normalize}(\\mathbf{r}_{\\text{reflect}} + \\alpha \\mathbf{\\xi})$$\n\u5176\u4e2d $\\mathbf{\\xi}$ \u662f\u968f\u673a\u6270\u52a8\u5411\u91cf\uff0c$\\alpha$ \u662f\u7c97\u7cd9\u5ea6\u53c2\u6570\u3002</p>\n<p><strong>\u6270\u52a8\u5411\u91cf\u7684\u751f\u6210</strong>\uff1a\n\u4f7f\u7528\u5207\u7ebf\u7a7a\u95f4\uff1a</p>\n<ol>\n<li>\u6784\u5efa\u6b63\u4ea4\u57fa\uff1a${\\mathbf{n}, \\mathbf{t}, \\mathbf{b}}$</li>\n<li>\u5728\u534a\u7403\u5185\u91c7\u6837\uff1a$\\mathbf{\\xi} = \\sqrt{1-u^2}\\cos(2\\pi v)\\mathbf{t} + \\sqrt{1-u^2}\\sin(2\\pi v)\\mathbf{b} + u\\mathbf{n}$</li>\n<li>\u5176\u4e2d $u, v \\in [0,1]$ \u662f\u968f\u673a\u6570</li>\n</ol>\n<p><strong>\u6298\u5c04\u65b9\u5411\u8ba1\u7b97</strong>\uff08Snell\u5b9a\u5f8b\uff09\uff1a\n$$\\mathbf{r}_{\\text{refract}} = \\frac{\\eta_i}{\\eta_t}\\mathbf{d} + \\left(\\frac{\\eta_i}{\\eta_t}(\\mathbf{n} \\cdot \\mathbf{d}) - \\sqrt{1 - \\sin^2\\theta_t}\\right)\\mathbf{n}$$\n\u5176\u4e2d $\\sin^2\\theta_t = \\left(\\frac{\\eta_i}{\\eta_t}\\right)^2(1 - (\\mathbf{n} \\cdot \\mathbf{d})^2)$</p>\n<p><strong>\u7a33\u5b9a\u7684\u6298\u5c04\u8ba1\u7b97</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>\u4ee4 k = 1 - \u03b7\u00b2(1 - (n\u00b7d)\u00b2)\nif k &lt; 0: \u5168\u5185\u53cd\u5c04\nelse: t = \u03b7*d + (\u03b7*(n\u00b7d) - \u221ak)*n\n</code></pre>\n\n<p><strong>\u5168\u5185\u53cd\u5c04\u5224\u65ad</strong>\uff1a\u5f53 $\\sin^2\\theta_t &gt; 1$ \u65f6\u53d1\u751f\u5168\u5185\u53cd\u5c04\u3002</p>\n<p>\u4e34\u754c\u89d2\uff1a$\\theta_c = \\arcsin(\\eta_t/\\eta_i)$\uff08\u5f53 $\\eta_i &gt; \\eta_t$\uff09</p>\n<p><strong>Fresnel\u65b9\u7a0b</strong>\uff1a\n\u8ba1\u7b97\u53cd\u5c04\u548c\u6298\u5c04\u7684\u80fd\u91cf\u5206\u914d\uff1a\n$$F_r = \\frac{1}{2}\\left[\\left(\\frac{\\eta_i\\cos\\theta_i - \\eta_t\\cos\\theta_t}{\\eta_i\\cos\\theta_i + \\eta_t\\cos\\theta_t}\\right)^2 + \\left(\\frac{\\eta_t\\cos\\theta_i - \\eta_i\\cos\\theta_t}{\\eta_t\\cos\\theta_i + \\eta_i\\cos\\theta_t}\\right)^2\\right]$$\nSchlick\u8fd1\u4f3c\uff08\u8ba1\u7b97\u6548\u7387\u66f4\u9ad8\uff09\uff1a\n$$F_r \\approx F_0 + (1 - F_0)(1 - \\cos\\theta_i)^5$$\n\u5176\u4e2d $F_0 = \\left(\\frac{\\eta_i - \\eta_t}{\\eta_i + \\eta_t}\\right)^2$</p>\n<p><strong>\u91d1\u5c5e\u6750\u8d28\u7684Fresnel</strong>\uff1a\n\u590d\u6570\u6298\u5c04\u7387 $\\tilde{\\eta} = \\eta + i\\kappa$\n$$F_r = \\frac{(\\eta - 1)^2 + \\kappa^2}{(\\eta + 1)^2 + \\kappa^2}$$\n<strong>\u8272\u6563\u6548\u679c</strong>\uff1a\n\u4e0d\u540c\u6ce2\u957f\u5177\u6709\u4e0d\u540c\u6298\u5c04\u7387\uff1a\n$$\\eta(\\lambda) = A + \\frac{B}{\\lambda^2} + \\frac{C}{\\lambda^4}$$ \uff08Cauchy\u65b9\u7a0b\uff09</p>\n<p>\u5178\u578b\u503c\uff08\u73bb\u7483\uff09\uff1a</p>\n<ul>\n<li>\u7ea2\u5149\uff08700nm\uff09\uff1a$\\eta_r \\approx 1.513$</li>\n<li>\u7eff\u5149\uff08550nm\uff09\uff1a$\\eta_g \\approx 1.517$</li>\n<li>\u84dd\u5149\uff08450nm\uff09\uff1a$\\eta_b \\approx 1.522$</li>\n</ul>\n<p><strong>\u5b9e\u73b0\u8272\u6563</strong>\uff1a</p>\n<ol>\n<li>\u5c06\u767d\u5149\u5206\u89e3\u4e3aRGB\u5206\u91cf</li>\n<li>\u5bf9\u6bcf\u4e2a\u5206\u91cf\u4f7f\u7528\u4e0d\u540c\u6298\u5c04\u7387</li>\n<li>\u5206\u522b\u8ffd\u8e2a\u4e09\u6761\u6298\u5c04\u5149\u7ebf</li>\n<li>\u5408\u6210\u6700\u7ec8\u989c\u8272</li>\n</ol>\n<p><strong>\u9012\u5f52\u6df1\u5ea6\u63a7\u5236</strong>\uff1a</p>\n<p>\u7b80\u5355\u6df1\u5ea6\u9650\u5236\uff1a</p>\n<pre class=\"codehilite\"><code>if (depth &gt; MAX_DEPTH) return background_color;\n</code></pre>\n\n<p>\u57fa\u4e8e\u8d21\u732e\u7684\u7ec8\u6b62\uff1a</p>\n<pre class=\"codehilite\"><code>if (throughput &lt; THRESHOLD) return black;\n</code></pre>\n\n<p><strong>\u4fc4\u7f57\u65af\u8f6e\u76d8\u8d4c</strong>\u7ec8\u6b62\u7b56\u7565\uff1a</p>\n<pre class=\"codehilite\"><code>float p = max(color.r, color.g, color.b);\nif (random() &gt; p) return black;\nreturn color / p;  // \u80fd\u91cf\u8865\u507f\n</code></pre>\n\n<p><strong>\u6539\u8fdb\u7684\u7ec8\u6b62\u7b56\u7565</strong>\uff1a\n\u8003\u8651\u8def\u5f84\u8d21\u732e\u548c\u8ba1\u7b97\u6210\u672c\u7684\u5e73\u8861\uff1a\n$$p_{\\text{continue}} = \\min\\left(1, \\frac{\\text{throughput} \\cdot \\text{max_radiance}}{\\text{current_radiance}}\\right)$$\n<strong>\u81ea\u9002\u5e94\u6df1\u5ea6\u7b56\u7565</strong>\uff1a</p>\n<ul>\n<li>\u955c\u9762\u53cd\u5c04\uff1a\u5141\u8bb8\u66f4\u6df1\u9012\u5f52</li>\n<li>\u6f2b\u53cd\u5c04\uff1a\u8f83\u65e9\u7ec8\u6b62</li>\n<li>\u57fa\u4e8e\u6750\u8d28\u91cd\u8981\u6027\u8c03\u6574\u6df1\u5ea6\u9650\u5236</li>\n</ul>\n<p><strong>\u5149\u7ebf\u6811\u4f18\u5316</strong>\uff1a\n\u8bb0\u5f55\u5149\u7ebf\u8d21\u732e\u8def\u5f84\uff0c\u907f\u514d\u91cd\u590d\u8ba1\u7b97\uff1a</p>\n<pre class=\"codehilite\"><code>struct RayNode {\n    Ray ray;\n    float contribution;\n    Material* mat;\n    RayNode* children[2];  // reflect, refract\n}\n</code></pre>\n\n<p><strong>\u591a\u6b21\u53cd\u5c04\u95f4\u7684\u76f8\u4e92\u4f5c\u7528</strong>\uff1a</p>\n<ul>\n<li><strong>\u7126\u6563\uff08Caustics\uff09</strong>\uff1a\u5149\u7ebf\u7ecf\u8fc7\u6298\u5c04/\u53cd\u5c04\u805a\u7126</li>\n<li><strong>\u95f4\u63a5\u5149\u7167</strong>\uff1a\u591a\u6b21\u6f2b\u53cd\u5c04</li>\n<li><strong>\u8272\u5f69\u6e17\u900f</strong>\uff1a\u76f8\u90bb\u8868\u9762\u7684\u989c\u8272\u4e92\u76f8\u5f71\u54cd</li>\n</ul>\n<p>\u8fd9\u4e9b\u6548\u679c\u5728Whitted\u6a21\u578b\u4e2d\u662f\u8fd1\u4f3c\u7684\uff0c\u66f4\u51c6\u786e\u7684\u6a21\u62df\u9700\u8981\u8def\u5f84\u8ffd\u8e2a\u6216\u5149\u5b50\u6620\u5c04\u3002</p>\n<h3 id=\"714\">7.1.4 \u76f8\u673a\u6a21\u578b\u4e0e\u5149\u7ebf\u751f\u6210</h3>\n<p><strong>\u900f\u89c6\u6295\u5f71\u76f8\u673a</strong>\u7684\u5149\u7ebf\u751f\u6210\uff1a</p>\n<p>\u7ed9\u5b9a\u89c6\u573a\u89d2 $\\text{fov}$\u3001\u5bbd\u9ad8\u6bd4 $\\text{aspect}$\uff0c\u50cf\u7d20 $(i, j)$ \u5bf9\u5e94\u7684\u5149\u7ebf\u65b9\u5411\uff1a\n$$\\begin{aligned}\nu &amp;= \\frac{2i - \\text{width}}{\\text{width}} \\cdot \\text{aspect} \\cdot \\tan(\\text{fov}/2) \\\nv &amp;= \\frac{2j - \\text{height}}{\\text{height}} \\cdot \\tan(\\text{fov}/2) \\\n\\mathbf{d} &amp;= \\text{normalize}(u\\mathbf{right} + v\\mathbf{up} - \\mathbf{forward})\n\\end{aligned}$$\n<strong>\u6539\u8fdb\u7684\u76f8\u673a\u6a21\u578b\u8003\u8651</strong>\uff1a</p>\n<ul>\n<li><strong>\u4f20\u611f\u5668\u504f\u79fb</strong>\uff1a\u6a21\u62dftilt-shift\u6548\u679c</li>\n<li><strong>\u975e\u65b9\u5f62\u50cf\u7d20</strong>\uff1a\u50cf\u7d20\u5bbd\u9ad8\u6bd4\u6821\u6b63</li>\n<li><strong>\u7578\u53d8\u6a21\u578b</strong>\uff1a\u5f84\u5411\u548c\u5207\u5411\u7578\u53d8</li>\n</ul>\n<p><strong>\u8584\u900f\u955c\u76f8\u673a\u6a21\u578b</strong>\uff08\u666f\u6df1\u6548\u679c\uff09\uff1a</p>\n<ol>\n<li>\n<p>\u8ba1\u7b97\u7126\u5e73\u9762\u4e0a\u7684\u76ee\u6807\u70b9\uff1a\n$$\\mathbf{p}_{\\text{focus}} = \\mathbf{o} + \\frac{\\text{focus_distance}}{|\\mathbf{d} \\cdot \\mathbf{forward}|} \\mathbf{d}$$</p>\n</li>\n<li>\n<p>\u5728\u900f\u955c\u4e0a\u91c7\u6837\uff1a\n$$\\mathbf{o}' = \\mathbf{o} + r(\\cos\\theta \\mathbf{right} + \\sin\\theta \\mathbf{up})$$\n\u5176\u4e2d $r \\leq \\text{aperture}/2$\uff0c\u91c7\u6837\u5206\u5e03\u53ef\u4ee5\u662f\uff1a</p>\n</li>\n</ol>\n<ul>\n<li><strong>\u5747\u5300\u5706\u76d8</strong>\uff1a$r = \\sqrt{\\xi_1} \\cdot \\text{aperture}/2$, $\\theta = 2\\pi\\xi_2$</li>\n<li><strong>\u591a\u8fb9\u5f62\u5149\u5708</strong>\uff1a\u6a21\u62df\u771f\u5b9e\u5149\u5708\u53f6\u7247</li>\n<li><strong>\u81ea\u5b9a\u4e49\u5f62\u72b6</strong>\uff1a\u5b9e\u73b0\u6563\u666f\uff08bokeh\uff09\u6548\u679c</li>\n</ul>\n<ol start=\"3\">\n<li>\u65b0\u7684\u5149\u7ebf\u65b9\u5411\uff1a\n$$\\mathbf{d}' = \\text{normalize}(\\mathbf{p}_{\\text{focus}} - \\mathbf{o}')$$\n<strong>\u666f\u6df1\u7684\u7269\u7406\u53c2\u6570</strong>\uff1a</li>\n</ol>\n<ul>\n<li>\u5f25\u6563\u5706\u76f4\u5f84\uff1a$c = \\frac{A|S_2 - S_1|}{S_2}$</li>\n<li>\u666f\u6df1\u8303\u56f4\uff1a$\\text{DOF} = \\frac{2Nc(S - f)^2}{f^2 - N^2c^2}$\n  \u5176\u4e2d $N$ \u662f\u5149\u5708\u6570\uff0c$S$ \u662f\u5bf9\u7126\u8ddd\u79bb\uff0c$f$ \u662f\u7126\u8ddd</li>\n</ul>\n<p><strong>\u9c7c\u773c\u76f8\u673a</strong>\uff1a\n$$\\begin{aligned}\nr &amp;= \\sqrt{u^2 + v^2} \\\n\\theta &amp;= r \\cdot \\text{fov} / 2 \\\n\\phi &amp;= \\arctan2(v, u) \\\n\\mathbf{d} &amp;= \\sin\\theta\\cos\\phi \\mathbf{right} + \\sin\\theta\\sin\\phi \\mathbf{up} - \\cos\\theta \\mathbf{forward}\n\\end{aligned}$$\n<strong>\u5176\u4ed6\u6295\u5f71\u6a21\u578b</strong>\uff1a</p>\n<ul>\n<li><strong>\u7b49\u8ddd\u6295\u5f71</strong>\uff1a$\\theta = r$</li>\n<li><strong>\u7b49\u7acb\u4f53\u89d2\u6295\u5f71</strong>\uff1a$\\theta = 2\\sin^{-1}(r/2)$</li>\n<li><strong>\u6b63\u4ea4\u6295\u5f71</strong>\uff1a$\\theta = \\sin^{-1}(r)$</li>\n<li><strong>\u7acb\u4f53\u6295\u5f71</strong>\uff1a$\\theta = 2\\tan^{-1}(r/2)$</li>\n</ul>\n<p><strong>\u5168\u666f\u76f8\u673a</strong>\uff1a</p>\n<ul>\n<li><strong>\u7b49\u77e9\u5f62\u6295\u5f71</strong>\uff1a$(u, v) \\rightarrow (\\theta, \\phi)$ \u76f4\u63a5\u6620\u5c04</li>\n<li><strong>\u7acb\u65b9\u4f53\u8d34\u56fe</strong>\uff1a6\u4e2a\u900f\u89c6\u6295\u5f71\u76f8\u673a</li>\n<li><strong>\u53cc\u629b\u7269\u9762\u6620\u5c04</strong>\uff1a\u524d\u540e\u4e24\u4e2a\u629b\u7269\u9762\u6295\u5f71</li>\n</ul>\n<p><strong>\u8fd0\u52a8\u6a21\u7cca</strong>\uff1a\n\u5728\u5feb\u95e8\u65f6\u95f4\u5185\u5bf9\u76f8\u673a\u4f4d\u7f6e\u548c\u65b9\u5411\u8fdb\u884c\u79ef\u5206\uff1a\n$$\\mathbf{o}(t) = \\mathbf{o}_0 + t \\cdot \\mathbf{v}$$\n$$\\mathbf{d}(t) = \\mathbf{R}(t) \\cdot \\mathbf{d}_0$$\n\u5176\u4e2d $t \\in [0, \\text{shutter_time}]$</p>\n<h2 id=\"72-bvhkd-tree\">7.2 \u52a0\u901f\u7ed3\u6784\uff08BVH\u3001KD-Tree\uff09</h2>\n<h3 id=\"721\">7.2.1 \u7a7a\u95f4\u6570\u636e\u7ed3\u6784\u7684\u5fc5\u8981\u6027</h3>\n<p>\u6734\u7d20\u7684\u5149\u7ebf\u8ffd\u8e2a\u9700\u8981\u6d4b\u8bd5\u6bcf\u6761\u5149\u7ebf\u4e0e\u573a\u666f\u4e2d\u6240\u6709\u7269\u4f53\u7684\u76f8\u4ea4\uff0c\u590d\u6742\u5ea6\u4e3a $O(N)$\u3002\u5bf9\u4e8e\u5305\u542b\u767e\u4e07\u7ea7\u4e09\u89d2\u5f62\u7684\u573a\u666f\uff0c\u8fd9\u662f\u4e0d\u53ef\u63a5\u53d7\u7684\u3002\u7a7a\u95f4\u52a0\u901f\u7ed3\u6784\u53ef\u4ee5\u5c06\u5e73\u5747\u590d\u6742\u5ea6\u964d\u4f4e\u5230 $O(\\log N)$\u3002</p>\n<p><strong>\u7406\u8bba\u5206\u6790</strong>\uff1a</p>\n<ul>\n<li>\u65e0\u52a0\u901f\u7ed3\u6784\uff1a\u6bcf\u6761\u5149\u7ebf\u9700\u8981 $N$ \u6b21\u76f8\u4ea4\u6d4b\u8bd5</li>\n<li>\u7406\u60f3\u52a0\u901f\u7ed3\u6784\uff1a$O(\\log N)$ \u6b21\u8282\u70b9\u8bbf\u95ee + $O(1)$ \u6b21\u56fe\u5143\u6d4b\u8bd5</li>\n<li>\u5b9e\u9645\u6027\u80fd\uff1a\u53d6\u51b3\u4e8e\u573a\u666f\u5206\u5e03\u548c\u6784\u5efa\u8d28\u91cf</li>\n</ul>\n<p><strong>\u6027\u80fd\u6a21\u578b</strong>\uff1a\n\u8bbe\u5149\u7ebf\u8ffd\u8e2a\u603b\u65f6\u95f4 $T = T_{\\text{build}} + R \\cdot T_{\\text{trace}}$\uff0c\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$T_{\\text{build}}$\uff1a\u6784\u5efa\u65f6\u95f4</li>\n<li>$R$\uff1a\u5149\u7ebf\u6570\u91cf</li>\n<li>$T_{\\text{trace}}$\uff1a\u5355\u6761\u5149\u7ebf\u8ffd\u8e2a\u65f6\u95f4</li>\n</ul>\n<p>\u5bf9\u4e8e\u5355\u6761\u5149\u7ebf\uff1a\n$$T_{\\text{trace}} = T_{\\text{traverse}} + N_{\\text{leaf}} \\cdot T_{\\text{intersect}}$$\n\u5176\u4e2d $N_{\\text{leaf}}$ \u662f\u8bbf\u95ee\u7684\u53f6\u8282\u70b9\u6570\u3002</p>\n<p><strong>\u7a7a\u95f4\u8fde\u8d2f\u6027\u539f\u7406</strong>\uff1a</p>\n<ul>\n<li><strong>\u5149\u7ebf\u8fde\u8d2f\u6027</strong>\uff1a\u76f8\u90bb\u5149\u7ebf\u503e\u5411\u4e8e\u76f8\u4ea4\u76f8\u4f3c\u7684\u7269\u4f53\u96c6\u5408</li>\n<li><strong>\u51e0\u4f55\u8fde\u8d2f\u6027</strong>\uff1a\u7a7a\u95f4\u76f8\u8fd1\u7684\u7269\u4f53\u5e94\u8be5\u5728\u52a0\u901f\u7ed3\u6784\u4e2d\u76f8\u8fd1</li>\n<li><strong>\u65f6\u95f4\u8fde\u8d2f\u6027</strong>\uff1a\u8fde\u7eed\u5e27\u4e4b\u95f4\u7684\u76f8\u4ea4\u6a21\u5f0f\u76f8\u4f3c</li>\n</ul>\n<p><strong>\u5e38\u89c1\u52a0\u901f\u7ed3\u6784\u5206\u7c7b</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u7a7a\u95f4\u5206\u5272</strong>\uff1aKD-Tree\u3001Octree\u3001BSP Tree\n   - \u4f18\u70b9\uff1a\u65e0\u91cd\u53e0\uff0c\u5185\u5b58\u6548\u7387\u9ad8\n   - \u7f3a\u70b9\uff1a\u7269\u4f53\u53ef\u80fd\u8de8\u8d8a\u591a\u4e2a\u8282\u70b9</p>\n</li>\n<li>\n<p><strong>\u7269\u4f53\u5206\u5272</strong>\uff1aBVH\u3001R-Tree\n   - \u4f18\u70b9\uff1a\u6bcf\u4e2a\u7269\u4f53\u53ea\u5c5e\u4e8e\u4e00\u4e2a\u53f6\u8282\u70b9\n   - \u7f3a\u70b9\uff1a\u5305\u56f4\u76d2\u53ef\u80fd\u91cd\u53e0</p>\n</li>\n<li>\n<p><strong>\u6df7\u5408\u65b9\u6cd5</strong>\uff1aSBVH\u3001Dual-Split BVH\n   - \u7ed3\u5408\u7a7a\u95f4\u548c\u7269\u4f53\u5206\u5272\u7684\u4f18\u70b9\n   - \u66f4\u590d\u6742\u7684\u6784\u5efa\u7b97\u6cd5</p>\n</li>\n</ol>\n<p><strong>\u52a0\u901f\u7ed3\u6784\u9009\u62e9\u51c6\u5219</strong>\uff1a</p>\n<ul>\n<li><strong>\u9759\u6001\u573a\u666f</strong>\uff1aKD-Tree\uff08\u904d\u5386\u6548\u7387\u6700\u9ad8\uff09</li>\n<li><strong>\u52a8\u6001\u573a\u666f</strong>\uff1aBVH\uff08\u6613\u4e8e\u66f4\u65b0\uff09</li>\n<li><strong>GPU\u5b9e\u73b0</strong>\uff1aBVH\uff08\u66f4\u89c4\u5219\u7684\u5185\u5b58\u8bbf\u95ee\uff09</li>\n<li><strong>\u5185\u5b58\u53d7\u9650</strong>\uff1a\u538b\u7f29BVH\u6216\u9690\u5f0fGrid</li>\n</ul>\n<h3 id=\"722-bvh\">7.2.2 \u5c42\u6b21\u5305\u56f4\u76d2\uff08BVH\uff09</h3>\n<p>BVH\u662f\u4e00\u79cd\u7269\u4f53\u5c42\u6b21\u7ed3\u6784\uff0c\u6bcf\u4e2a\u8282\u70b9\u5305\u542b\u5176\u6240\u6709\u5b50\u8282\u70b9\u7684\u8f74\u5bf9\u9f50\u5305\u56f4\u76d2\uff08AABB\uff09\u3002</p>\n<p><strong>BVH\u8282\u70b9\u7ed3\u6784</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>struct BVHNode {\n    AABB bounds;          // \u5305\u56f4\u76d2\n    union {\n        struct {          // \u5185\u90e8\u8282\u70b9\n            BVHNode* left;\n            BVHNode* right;\n        };\n        struct {          // \u53f6\u8282\u70b9\n            int primOffset;   // \u56fe\u5143\u8d77\u59cb\u7d22\u5f15\n            int primCount;    // \u56fe\u5143\u6570\u91cf\n        };\n    };\n}\n</code></pre>\n\n<p><strong>BVH\u6784\u5efa\u7b97\u6cd5</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u81ea\u9876\u5411\u4e0b\u6784\u5efa</strong>\n   ```\n   function BuildBVH(primitives, start, end):\n       if (end - start &lt;= leaf_threshold):\n           return CreateLeaf(primitives[start:end])</p>\n<p>axis = ChooseSplitAxis(primitives[start:end])\n   mid = Partition(primitives, start, end, axis)</p>\n<p>left = BuildBVH(primitives, start, mid)\n   right = BuildBVH(primitives, mid, end)</p>\n<p>return CreateNode(left, right)\n   ```</p>\n</li>\n<li>\n<p><strong>SAH\uff08Surface Area Heuristic\uff09</strong>\n   \u6700\u4f18\u5206\u5272\u7684\u4ee3\u4ef7\u51fd\u6570\uff1a\n$$C = C_{\\text{trav}} + \\frac{A_L}{A} \\cdot N_L \\cdot C_{\\text{isect}} + \\frac{A_R}{A} \\cdot N_R \\cdot C_{\\text{isect}}$$\n\u5176\u4e2d\uff1a</p>\n</li>\n</ol>\n<ul>\n<li>$C_{\\text{trav}}$ \u662f\u904d\u5386\u8282\u70b9\u7684\u4ee3\u4ef7\uff08\u5178\u578b\u503c\uff1a1.0\uff09</li>\n<li>$C_{\\text{isect}}$ \u662f\u76f8\u4ea4\u6d4b\u8bd5\u7684\u4ee3\u4ef7\uff08\u5178\u578b\u503c\uff1a4.0\uff09</li>\n<li>$A_L, A_R$ \u662f\u5de6\u53f3\u5b50\u8282\u70b9\u7684\u8868\u9762\u79ef</li>\n<li>$N_L, N_R$ \u662f\u5de6\u53f3\u5b50\u8282\u70b9\u5305\u542b\u7684\u56fe\u5143\u6570</li>\n</ul>\n<p><strong>\u5b8c\u6574SAH\u5b9e\u73b0\u8003\u8651</strong>\uff1a\n$$C_{\\text{split}} = C_{\\text{trav}} + P_L \\cdot C_L + P_R \\cdot C_R$$\n\u5176\u4e2d\u6982\u7387 $P_L = \\frac{A_L}{A}$\uff0c$P_R = \\frac{A_R}{A}$</p>\n<p><strong>\u8868\u9762\u79ef\u8ba1\u7b97</strong>\uff08AABB\uff09\uff1a\n$$A = 2(dx \\cdot dy + dy \\cdot dz + dz \\cdot dx)$$\n\u5176\u4e2d $dx = \\text{max}_x - \\text{min}_x$ \u7b49\u3002</p>\n<ol start=\"3\">\n<li><strong>\u5206\u5272\u7b56\u7565\u6bd4\u8f83</strong>\uff1a</li>\n</ol>\n<p><strong>\u4e2d\u70b9\u5206\u5272\uff08Middle Split\uff09</strong>\uff1a</p>\n<ul>\n<li>\u7b80\u5355\u5feb\u901f\uff1a$p = (\\text{min} + \\text{max}) / 2$</li>\n<li>\u53ef\u80fd\u4ea7\u751f\u4e0d\u5e73\u8861\u7684\u6811</li>\n</ul>\n<p><strong>\u7b49\u6570\u5206\u5272\uff08Equal Count\uff09</strong>\uff1a</p>\n<ul>\n<li>\u4fdd\u8bc1\u5e73\u8861\uff1a\u6bcf\u8fb9 $N/2$ \u4e2a\u56fe\u5143</li>\n<li>\u53ef\u80fd\u4ea7\u751f\u91cd\u53e0\u4e25\u91cd\u7684\u5305\u56f4\u76d2</li>\n</ul>\n<p><strong>SAH\u5206\u5272</strong>\uff1a</p>\n<ul>\n<li>\u6700\u5c0f\u5316\u671f\u671b\u904d\u5386\u4ee3\u4ef7</li>\n<li>\u8ba1\u7b97\u5f00\u9500\u5927\uff0c\u4f46\u8d28\u91cf\u6700\u9ad8</li>\n</ul>\n<p><strong>\u6df7\u5408\u7b56\u7565</strong>\uff1a\n   <code>if (\u56fe\u5143\u6570 &lt; \u9608\u503c) \u4f7f\u7528\u4e2d\u70b9\u5206\u5272\n   else \u4f7f\u7528SAH\u5206\u5272</code></p>\n<ol start=\"4\">\n<li><strong>\u9ad8\u6548SAH\u5b9e\u73b0</strong>\uff1a</li>\n</ol>\n<p><strong>\u6876\u6392\u5e8f\u65b9\u6cd5\uff08Binned SAH\uff09</strong>\uff1a\n   ```\n   \u5c06\u5305\u56f4\u76d2\u8303\u56f4\u5206\u4e3aK\u4e2a\u6876\uff08\u5178\u578bK=32\uff09\n   for each \u56fe\u5143:\n       \u8ba1\u7b97\u8d28\u5fc3\n       \u5206\u914d\u5230\u5bf9\u5e94\u6876</p>\n<p>for each \u53ef\u80fd\u7684\u5206\u5272\u4f4d\u7f6e\uff08K-1\u4e2a\uff09:\n       \u8ba1\u7b97\u5de6\u53f3\u4e24\u8fb9\u7684\u56fe\u5143\u6570\u548c\u5305\u56f4\u76d2\n       \u8bc4\u4f30SAH\u4ee3\u4ef7\n   \u9009\u62e9\u6700\u5c0f\u4ee3\u4ef7\u7684\u5206\u5272\n   ```</p>\n<p>\u590d\u6742\u5ea6\uff1a$O(KN)$ \u800c\u975e $O(N^2)$</p>\n<ol start=\"5\">\n<li><strong>BVH\u904d\u5386</strong></li>\n</ol>\n<p><strong>\u9012\u5f52\u904d\u5386</strong>\uff1a\n   ```\n   function Intersect(node, ray, tmin, tmax):\n       if (IsLeaf(node)):\n           return IntersectPrimitives(node.primitives, ray)</p>\n<pre class=\"codehilite\"><code>   t1 = IntersectAABB(node.left.bbox, ray)\n   t2 = IntersectAABB(node.right.bbox, ray)\n\n   if (t1.hit &amp;&amp; t2.hit):\n       first = (t1.tmin &lt; t2.tmin) ? node.left : node.right\n       second = (t1.tmin &lt; t2.tmin) ? node.right : node.left\n\n       hit1 = Intersect(first, ray, tmin, tmax)\n       if (hit1.t &lt; second.tmin) return hit1\n\n       hit2 = Intersect(second, ray, tmin, tmax)\n       return Closer(hit1, hit2)\n</code></pre>\n\n<p>```</p>\n<p><strong>\u6808\u5f0f\u904d\u5386</strong>\uff08\u66f4\u9002\u5408GPU\uff09\uff1a\n   <code>stack[0] = root\n   while (stack not empty):\n       node = stack.pop()\n       if (IntersectAABB(node.bbox, ray)):\n           if (IsLeaf(node)):\n               ProcessPrimitives(node)\n           else:\n               stack.push(node.farChild)\n               stack.push(node.nearChild)</code></p>\n<p><strong>\u4f18\u5316\u7684\u904d\u5386\u987a\u5e8f</strong>\uff1a\n   \u57fa\u4e8e\u5149\u7ebf\u65b9\u5411\u7b26\u53f7\u9884\u8ba1\u7b97\u5b50\u8282\u70b9\u8bbf\u95ee\u987a\u5e8f\uff1a\n   <code>dirIsNeg[3] = {ray.dir.x &lt; 0, ray.dir.y &lt; 0, ray.dir.z &lt; 0}\n   // \u4f7f\u7528dirIsNeg[node.axis]\u51b3\u5b9a\u5148\u8bbf\u95ee\u54ea\u4e2a\u5b50\u8282\u70b9</code></p>\n<ol start=\"6\">\n<li><strong>BVH\u8d28\u91cf\u8bc4\u4f30</strong>\uff1a</li>\n</ol>\n<p><strong>SAH\u4ee3\u4ef7</strong>\uff1a\n$$\\text{SAH}(T) = \\sum_{\\text{leaves}} P(\\text{leaf}) \\cdot N(\\text{leaf})$$\n<strong>EPO\uff08Expected Primary Operations\uff09</strong>\uff1a\n   \u5e73\u5747\u6bcf\u6761\u5149\u7ebf\u7684\u671f\u671b\u64cd\u4f5c\u6570</p>\n<p><strong>\u6811\u5e73\u8861\u5ea6</strong>\uff1a\n$$\\text{Balance} = \\frac{\\text{avg_depth}}{\\log_2 N}$$</p>\n<ol start=\"7\">\n<li><strong>\u9ad8\u7ea7BVH\u6280\u672f</strong>\uff1a</li>\n</ol>\n<p><strong>SBVH\uff08Spatial Split BVH\uff09</strong>\uff1a</p>\n<ul>\n<li>\u5141\u8bb8\u7a7a\u95f4\u5206\u5272\uff0c\u4e0d\u4ec5\u662f\u7269\u4f53\u5206\u5272</li>\n<li>\u53ef\u4ee5\u51cf\u5c11\u5305\u56f4\u76d2\u91cd\u53e0</li>\n<li>\u4ee3\u4ef7\uff1a\u53ef\u80fd\u589e\u52a0\u56fe\u5143\u5f15\u7528\u6570</li>\n</ul>\n<p><strong>\u5b9e\u73b0\u7b56\u7565</strong>\uff1a\n   <code>if (SAH\u4ee3\u4ef7 &gt; \u9608\u503c &amp;&amp; \u91cd\u53e0\u7387 &gt; \u9608\u503c):\n       \u5c1d\u8bd5\u7a7a\u95f4\u5206\u5272\n       \u9009\u62e9\u6700\u4f18\u7684\u7269\u4f53\u6216\u7a7a\u95f4\u5206\u5272</code></p>\n<p><strong>\u538b\u7f29BVH</strong>\uff1a</p>\n<ul>\n<li>\u91cf\u5316\u5305\u56f4\u76d2\u5750\u6807\uff0816\u4f4d\u62168\u4f4d\uff09</li>\n<li>\u8282\u70b9\u5408\u5e76\uff08\u5c06\u591a\u4e2a\u8282\u70b9\u6253\u5305\uff09</li>\n<li>\u5178\u578b\u538b\u7f29\u7387\uff1a50-75%</li>\n</ul>\n<p><strong>\u91cf\u5316\u516c\u5f0f</strong>\uff1a\n$$\\text{quantized} = \\text{round}\\left(\\frac{\\text{value} - \\text{parent_min}}{\\text{parent_max} - \\text{parent_min}} \\cdot (2^{bits} - 1)\\right)$$\n<strong>Wide BVH</strong>\uff1a</p>\n<ul>\n<li>\u6bcf\u4e2a\u8282\u70b9\u67094\u4e2a\u62168\u4e2a\u5b50\u8282\u70b9</li>\n<li>\u66f4\u597d\u7684SIMD\u5229\u7528\u7387</li>\n<li>\u51cf\u5c11\u5185\u5b58\u8bbf\u95ee\u6b21\u6570</li>\n</ul>\n<ol start=\"8\">\n<li><strong>\u52a8\u6001\u573a\u666f\u7684BVH\u66f4\u65b0</strong>\uff1a</li>\n</ol>\n<p><strong>\u91cd\u62df\u5408\uff08Refit\uff09</strong>\uff1a\n   \u81ea\u5e95\u5411\u4e0a\u66f4\u65b0\u5305\u56f4\u76d2\n   <code>function Refit(node):\n       if (IsLeaf(node)):\n           node.bounds = ComputeBounds(node.primitives)\n       else:\n           Refit(node.left)\n           Refit(node.right)\n           node.bounds = Union(node.left.bounds, node.right.bounds)</code></p>\n<p><strong>\u5c40\u90e8\u91cd\u5efa</strong>\uff1a</p>\n<ul>\n<li>\u6807\u8bb0\"\u810f\"\u8282\u70b9</li>\n<li>\u53ea\u91cd\u5efa\u53d8\u5316\u8f83\u5927\u7684\u5b50\u6811</li>\n<li>\u4f7f\u7528\u542f\u53d1\u5f0f\u5224\u65ad\u662f\u5426\u9700\u8981\u91cd\u5efa</li>\n</ul>\n<p><strong>\u53cc\u7f13\u51b2\u7b56\u7565</strong>\uff1a</p>\n<ul>\n<li>\u7ef4\u62a4\u4e24\u4e2aBVH</li>\n<li>\u5f02\u6b65\u66f4\u65b0\u975e\u6d3b\u52a8BVH</li>\n<li>\u5feb\u901f\u5207\u6362</li>\n</ul>\n<ol start=\"9\">\n<li><strong>\u5185\u5b58\u5e03\u5c40\u4f18\u5316</strong>\uff1a</li>\n</ol>\n<p><strong>\u6df1\u5ea6\u4f18\u5148\u5e03\u5c40</strong>\uff1a</p>\n<ul>\n<li>\u6539\u5584\u7f13\u5b58\u5c40\u90e8\u6027</li>\n<li>\u9002\u5408\u9012\u5f52\u904d\u5386</li>\n</ul>\n<p><strong>van Emde Boas\u5e03\u5c40</strong>\uff1a</p>\n<ul>\n<li>\u4f18\u5316\u7f13\u5b58\u6027\u80fd</li>\n<li>\u9002\u5408\u4efb\u610f\u904d\u5386\u6a21\u5f0f</li>\n</ul>\n<p><strong>\u8282\u70b9\u538b\u7f29\u5e03\u5c40</strong>\uff1a\n   <code>struct CompactBVHNode {\n       float bounds_min[3];\n       float bounds_max[3];\n       uint32_t offset;      // \u5b50\u8282\u70b9\u504f\u79fb\u6216\u56fe\u5143\u504f\u79fb\n       uint8_t nPrims;       // 0\u8868\u793a\u5185\u90e8\u8282\u70b9\n       uint8_t axis;         // \u5206\u5272\u8f74\n       uint16_t pad;         // \u5bf9\u9f50\n   }  // 32\u5b57\u8282\uff0c\u6b63\u597d\u4e24\u4e2a\u7f13\u5b58\u884c</code></p>\n<h3 id=\"723-kd-tree\">7.2.3 KD-Tree</h3>\n<p><strong>KD-Tree\u7279\u70b9</strong>\uff1a</p>\n<ul>\n<li>\u7a7a\u95f4\u5206\u5272\u800c\u975e\u7269\u4f53\u5206\u5272</li>\n<li>\u5206\u5272\u5e73\u9762\u4e0e\u5750\u6807\u8f74\u5bf9\u9f50</li>\n<li>\u53ef\u80fd\u9700\u8981\u5904\u7406\u8de8\u8d8a\u5206\u5272\u5e73\u9762\u7684\u4e09\u89d2\u5f62</li>\n</ul>\n<p><strong>\u6784\u5efa\u7b56\u7565</strong>\uff1a</p>\n<ol>\n<li><strong>\u5206\u5272\u4f4d\u7f6e\u9009\u62e9</strong>\uff1a</li>\n</ol>\n<p><strong>\u4e2d\u4f4d\u6570\u5206\u5272</strong>\uff1a\n$$p_{\\text{split}} = \\text{median}({p_i \\cdot \\mathbf{axis} : i \\in \\text{primitives}})$$\n<strong>SAH\u5206\u5272</strong>\uff1a\n   \u6700\u5c0f\u5316\u4ee3\u4ef7\u51fd\u6570\uff1a\n$$C(p) = C_{\\text{trav}} + \\frac{V_L(p)}{V} N_L(p) C_{\\text{isect}} + \\frac{V_R(p)}{V} N_R(p) C_{\\text{isect}}$$\n<strong>\u7a7a\u76d2\u4f18\u5316</strong>\uff1a\n$$C_{\\text{empty}} = 0.8 \\cdot C_{\\text{trav}}$$</p>\n<ol start=\"2\">\n<li>\n<p><strong>\u7cbe\u786eSAH\u8ba1\u7b97</strong>\uff1a\n   <code>for each candidate position p:\n       leftCount = CountPrimitivesLeft(p)\n       rightCount = CountPrimitivesRight(p)\n       leftVolume = ComputeVolume(min, p)\n       rightVolume = ComputeVolume(p, max)\n       cost = EvaluateSAH(leftCount, rightCount, leftVolume, rightVolume)</code></p>\n</li>\n<li>\n<p><strong>KD-Tree\u904d\u5386\u7b97\u6cd5</strong>\uff1a\n   ```\n   function TraverseKDTree(ray, tmin, tmax, node):\n       if (IsLeaf(node)):\n           return IntersectPrimitives(node.primitives, ray)</p>\n<p>axis = node.splitAxis\n   t_split = (node.splitPos - ray.origin[axis]) / ray.dir[axis]</p>\n<p>nearNode = (ray.origin[axis] &lt; node.splitPos) ? node.left : node.right\n   farNode = (ray.origin[axis] &lt; node.splitPos) ? node.right : node.left</p>\n<p>if (t_split &gt; tmax || t_split &lt; 0):\n       return TraverseKDTree(ray, tmin, tmax, nearNode)\n   if (t_split &lt; tmin):\n       return TraverseKDTree(ray, tmin, tmax, farNode)</p>\n<p>hit = TraverseKDTree(ray, tmin, t_split, nearNode)\n   if (hit.valid) return hit</p>\n<p>return TraverseKDTree(ray, t_split, tmax, farNode)\n   ```</p>\n</li>\n</ol>\n<p><strong>\u904d\u5386\u4f18\u5316</strong>\uff1a</p>\n<ul>\n<li>\n<p><strong>Mailboxing</strong>\uff1a\u907f\u514d\u91cd\u590d\u76f8\u4ea4\u6d4b\u8bd5\n  <code>struct Mailbox {\n      int rayID;\n      float t;\n  }</code></p>\n</li>\n<li>\n<p><strong>\u65e9\u671f\u7ec8\u6b62</strong>\uff1a\u5f53\u627e\u5230\u76f8\u4ea4\u70b9\u540e\u63d0\u524d\u9000\u51fa</p>\n</li>\n<li><strong>Rope\u6280\u672f</strong>\uff1a\u5b58\u50a8\u90bb\u5c45\u6307\u9488\u52a0\u901f\u904d\u5386</li>\n</ul>\n<h3 id=\"724\">7.2.4 \u52a0\u901f\u7ed3\u6784\u6bd4\u8f83</h3>\n<p>| \u7279\u6027 | BVH | KD-Tree | Octree |</p>\n<table>\n<thead>\n<tr>\n<th>\u7279\u6027</th>\n<th>BVH</th>\n<th>KD-Tree</th>\n<th>Octree</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\u6784\u5efa\u590d\u6742\u5ea6</td>\n<td>$O(N\\log N)$</td>\n<td>$O(N\\log N)$</td>\n<td>$O(N)$</td>\n</tr>\n<tr>\n<td>\u5185\u5b58\u5360\u7528</td>\n<td>$O(N)$</td>\n<td>$O(N) - O(N\\log N)$</td>\n<td>$O(N)$</td>\n</tr>\n<tr>\n<td>\u904d\u5386\u6548\u7387</td>\n<td>\u4e2d\u7b49</td>\n<td>\u9ad8</td>\n<td>\u4f4e</td>\n</tr>\n<tr>\n<td>\u52a8\u6001\u66f4\u65b0</td>\n<td>\u652f\u6301\uff08\u91cd\u62df\u5408\uff09</td>\n<td>\u56f0\u96be</td>\n<td>\u4e2d\u7b49</td>\n</tr>\n<tr>\n<td>GPU\u53cb\u597d\u6027</td>\n<td>\u9ad8</td>\n<td>\u4f4e\uff08\u5206\u652f\u591a\uff09</td>\n<td>\u4e2d\u7b49</td>\n</tr>\n<tr>\n<td>\u7a7a\u95f4\u5229\u7528\u7387</td>\n<td>\u53ef\u80fd\u91cd\u53e0</td>\n<td>\u65e0\u91cd\u53e0</td>\n<td>\u53ef\u80fd\u7a00\u758f</td>\n</tr>\n</tbody>\n</table>\n<p><strong>\u6027\u80fd\u6a21\u578b</strong>\uff1a\n\u7ed9\u5b9a\u573a\u666f\u5305\u542b $N$ \u4e2a\u56fe\u5143\uff0c\u5149\u7ebf\u6570\u91cf\u4e3a $R$\uff1a</p>\n<ol>\n<li>\n<p><strong>\u6784\u5efa\u65f6\u95f4</strong>\uff1a\n   - BVH: $T_{\\text{build}} = O(N\\log N)$\n   - KD-Tree: $T_{\\text{build}} = O(N\\log^2 N)$\uff08SAH\uff09</p>\n</li>\n<li>\n<p><strong>\u904d\u5386\u65f6\u95f4</strong>\uff1a\n   - \u671f\u671b\u6df1\u5ea6\uff1a$D = O(\\log N)$\n   - \u6bcf\u6761\u5149\u7ebf\uff1a$T_{\\text{ray}} = D \\cdot C_{\\text{node}} + L \\cdot C_{\\text{leaf}}$\n   - \u603b\u65f6\u95f4\uff1a$T_{\\text{total}} = R \\cdot T_{\\text{ray}}$</p>\n</li>\n<li>\n<p><strong>\u5185\u5b58\u8bbf\u95ee\u6a21\u5f0f</strong>\uff1a\n   - BVH\uff1a\u66f4\u597d\u7684\u7a7a\u95f4\u5c40\u90e8\u6027\n   - KD-Tree\uff1a\u66f4\u6df1\u7684\u6811\uff0c\u66f4\u591acache miss</p>\n</li>\n</ol>\n<p><strong>\u6df7\u5408\u52a0\u901f\u7ed3\u6784</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>\u9876\u5c42\uff1aBVH\uff08\u573a\u666f\u7ea7\u522b\uff09\n  \u251c\u2500\u2500 \u4e2d\u5c42\uff1aKD-Tree\uff08\u7269\u4f53\u7ea7\u522b\uff09\n  \u2514\u2500\u2500 \u5e95\u5c42\uff1aGrid\uff08\u5bc6\u96c6\u4e09\u89d2\u5f62\uff09\n</code></pre>\n\n<h2 id=\"73-\">7.3 \u5149\u7ebf-\u7269\u4f53\u76f8\u4ea4\u7b97\u6cd5\u4f18\u5316</h2>\n<h3 id=\"731-\">7.3.1 \u5149\u7ebf-\u4e09\u89d2\u5f62\u76f8\u4ea4</h3>\n<p>\u5149\u7ebf-\u4e09\u89d2\u5f62\u76f8\u4ea4\u662f\u5149\u7ebf\u8ffd\u8e2a\u4e2d\u6700\u9891\u7e41\u7684\u64cd\u4f5c\uff0c\u5176\u6027\u80fd\u76f4\u63a5\u5f71\u54cd\u6e32\u67d3\u901f\u5ea6\u3002</p>\n<p><strong>M\u00f6ller-Trumbore\u7b97\u6cd5</strong>\uff1a</p>\n<p>\u7ed9\u5b9a\u4e09\u89d2\u5f62\u9876\u70b9 $\\mathbf{v}_0, \\mathbf{v}_1, \\mathbf{v}_2$\uff0c\u5149\u7ebf $\\mathbf{r}(t) = \\mathbf{o} + t\\mathbf{d}$\uff1a\n$$\\begin{aligned}\n\\mathbf{e}_1 &amp;= \\mathbf{v}_1 - \\mathbf{v}_0 \\\n\\mathbf{e}_2 &amp;= \\mathbf{v}_2 - \\mathbf{v}_0 \\\n\\mathbf{h} &amp;= \\mathbf{d} \\times \\mathbf{e}_2 \\\na &amp;= \\mathbf{e}_1 \\cdot \\mathbf{h}\n\\end{aligned}$$\n\u5982\u679c $|a| &lt; \\epsilon$\uff0c\u5149\u7ebf\u4e0e\u4e09\u89d2\u5f62\u5e73\u884c\u3002\u5426\u5219\uff1a\n$$\\begin{aligned}\nf &amp;= 1/a \\\n\\mathbf{s} &amp;= \\mathbf{o} - \\mathbf{v}_0 \\\nu &amp;= f(\\mathbf{s} \\cdot \\mathbf{h})\n\\end{aligned}$$\n\u5982\u679c $u &lt; 0$ \u6216 $u &gt; 1$\uff0c\u65e0\u76f8\u4ea4\u3002\u7ee7\u7eed\uff1a\n$$\\begin{aligned}\n\\mathbf{q} &amp;= \\mathbf{s} \\times \\mathbf{e}_1 \\\nv &amp;= f(\\mathbf{d} \\cdot \\mathbf{q})\n\\end{aligned}$$\n\u5982\u679c $v &lt; 0$ \u6216 $u + v &gt; 1$\uff0c\u65e0\u76f8\u4ea4\u3002\u5426\u5219\uff1a\n$$t = f(\\mathbf{e}_2 \\cdot \\mathbf{q})$$\n<strong>\u7b97\u6cd5\u590d\u6742\u5ea6\u5206\u6790</strong>\uff1a</p>\n<ul>\n<li>1\u6b21\u9664\u6cd5\uff0c27\u6b21\u4e58\u6cd5\uff0c17\u6b21\u52a0\u51cf\u6cd5</li>\n<li>2\u6b21\u53c9\u79ef\uff0c3\u6b21\u70b9\u79ef</li>\n<li>\u5206\u652f\u9884\u6d4b\u53cb\u597d\uff08\u65e9\u671f\u9000\u51fa\uff09</li>\n</ul>\n<p><strong>Baldwin-Weber\u7b97\u6cd5</strong>\uff08\u907f\u514d\u9664\u6cd5\uff09\uff1a\n\u4f7f\u7528\u9f50\u6b21\u5750\u6807\u907f\u514d\u9664\u6cd5\uff1a\n$$\\begin{aligned}\n\\mathbf{o}' &amp;= \\mathbf{o} - \\mathbf{v}_0 \\\n\\mathbf{q}_1 &amp;= \\mathbf{d} \\times \\mathbf{e}_2 \\\n\\mathbf{q}_2 &amp;= \\mathbf{o}' \\times \\mathbf{e}_1 \\\n\\text{det} &amp;= \\mathbf{q}_1 \\cdot \\mathbf{e}_1 \\\nu &amp;= \\mathbf{q}_1 \\cdot \\mathbf{o}' \\\nv &amp;= \\mathbf{q}_2 \\cdot \\mathbf{d} \\\nt &amp;= \\mathbf{q}_2 \\cdot \\mathbf{e}_2\n\\end{aligned}$$\n\u76f8\u4ea4\u6761\u4ef6\uff08\u907f\u514d\u9664\u6cd5\uff09\uff1a</p>\n<pre class=\"codehilite\"><code>if (det &gt; 0):\n    return (u &gt;= 0) &amp;&amp; (v &gt;= 0) &amp;&amp; (u + v &lt;= det) &amp;&amp; (t &gt;= 0)\nelse:\n    return (u &lt;= 0) &amp;&amp; (v &lt;= 0) &amp;&amp; (u + v &gt;= det) &amp;&amp; (t &lt;= 0)\n</code></pre>\n\n<p><strong>Woop\u7b97\u6cd5</strong>\uff08\u9884\u8ba1\u7b97\u4f18\u5316\uff09\uff1a\n\u9884\u8ba1\u7b97\u53d8\u6362\u77e9\u9635\uff0c\u5c06\u4e09\u89d2\u5f62\u53d8\u6362\u5230\u5355\u4f4d\u4e09\u89d2\u5f62\uff1a\n$$\\mathbf{M} = \\begin{bmatrix}\n\\mathbf{v}_0 - \\mathbf{v}_2 &amp; \\mathbf{v}_1 - \\mathbf{v}_2 &amp; \\mathbf{v}_2\n\\end{bmatrix}^{-1}$$\n\u5149\u7ebf\u53d8\u6362\uff1a\n$$\\begin{aligned}\n\\mathbf{o}' &amp;= \\mathbf{M} \\cdot \\mathbf{o} \\\n\\mathbf{d}' &amp;= \\mathbf{M} \\cdot \\mathbf{d}\n\\end{aligned}$$\n\u76f8\u4ea4\u6d4b\u8bd5\u7b80\u5316\u4e3a\uff1a\n$$t = -\\frac{o'_z}{d'_z}, \\quad u = o'_x + t \\cdot d'_x, \\quad v = o'_y + t \\cdot d'_y$$\n\u76f8\u4ea4\u6761\u4ef6\uff1a$u \\geq 0, v \\geq 0, u + v \\leq 1$</p>\n<p><strong>SIMD\u4f18\u5316</strong>\uff1a\n\u540c\u65f6\u6d4b\u8bd54\u4e2a\u4e09\u89d2\u5f62\uff1a</p>\n<pre class=\"codehilite\"><code>__m128 e1x = _mm_sub_ps(v1x, v0x);\n__m128 e1y = _mm_sub_ps(v1y, v0y);\n__m128 e1z = _mm_sub_ps(v1z, v0z);\n// ... \u7ee7\u7eed\u5411\u91cf\u5316\u8ba1\u7b97\n</code></pre>\n\n<p><strong>\u7cbe\u5ea6\u6539\u8fdb</strong>\uff1a\n\u4f7f\u7528Shewchuk\u7684\u7cbe\u786e\u8c13\u8bcd\u7b97\u6cd5\u5904\u7406\u8fb9\u754c\u60c5\u51b5\uff1a</p>\n<ul>\n<li>\u7cbe\u786e\u7684\u65b9\u5411\u6d4b\u8bd5</li>\n<li>\u9c81\u68d2\u7684\u91cd\u5fc3\u5750\u6807\u8ba1\u7b97</li>\n<li>\u907f\u514d\u6570\u503c\u4e0d\u4e00\u81f4</li>\n</ul>\n<h3 id=\"732-\">7.3.2 \u5149\u7ebf-\u5305\u56f4\u76d2\u76f8\u4ea4</h3>\n<p><strong>Slab\u65b9\u6cd5</strong>\uff1a</p>\n<p>\u5bf9\u4e8e\u8f74\u5bf9\u9f50\u5305\u56f4\u76d2\uff08AABB\uff09\uff0c\u8ba1\u7b97\u5149\u7ebf\u4e0e\u6bcf\u5bf9\u5e73\u884c\u5e73\u9762\u7684\u76f8\u4ea4\uff1a\n$$\\begin{aligned}\nt_{\\text{min}} &amp;= \\max(t_{x,\\text{min}}, t_{y,\\text{min}}, t_{z,\\text{min}}) \\\nt_{\\text{max}} &amp;= \\min(t_{x,\\text{max}}, t_{y,\\text{max}}, t_{z,\\text{max}})\n\\end{aligned}$$\n\u76f8\u4ea4\u6761\u4ef6\uff1a$t_{\\text{min}} \\leq t_{\\text{max}}$ \u4e14 $t_{\\text{max}} \\geq 0$</p>\n<p><strong>\u4f18\u5316\u5b9e\u73b0</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>invD = 1.0 / ray.dir  // \u9884\u8ba1\u7b97\nt0 = (box.min - ray.origin) * invD\nt1 = (box.max - ray.origin) * invD\n\n// \u5904\u7406\u8d1f\u65b9\u5411\ntmin = min(t0, t1)\ntmax = max(t0, t1)\n\n// \u8ba1\u7b97\u6700\u7ec8\u533a\u95f4\ntmin_final = max(tmin.x, tmin.y, tmin.z)\ntmax_final = min(tmax.x, tmax.y, tmax.z)\n\nreturn tmin_final &lt;= tmax_final &amp;&amp; tmax_final &gt;= 0\n</code></pre>\n\n<p><strong>Williams\u7b49\u4eba\u7684\u4f18\u5316</strong>\uff1a\n\u6d88\u9664min/max\u4e2d\u7684\u5206\u652f\uff1a</p>\n<pre class=\"codehilite\"><code>sign[3] = {ray.dir.x &lt; 0, ray.dir.y &lt; 0, ray.dir.z &lt; 0}\ntmin = (box[sign[0]].x - ray.origin.x) * invD.x\ntmax = (box[1-sign[0]].x - ray.origin.x) * invD.x\n</code></pre>\n\n<p><strong>SSE\u4f18\u5316\u7248\u672c</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>__m128 tmin = _mm_mul_ps(_mm_sub_ps(box_min, origin), inv_dir);\n__m128 tmax = _mm_mul_ps(_mm_sub_ps(box_max, origin), inv_dir);\n__m128 t0 = _mm_min_ps(tmin, tmax);\n__m128 t1 = _mm_max_ps(tmin, tmax);\n</code></pre>\n\n<p><strong>\u9c81\u68d2\u6027\u6539\u8fdb</strong>\uff1a\n\u5904\u7406\u5149\u7ebf\u65b9\u5411\u5206\u91cf\u4e3a0\u7684\u60c5\u51b5\uff1a</p>\n<pre class=\"codehilite\"><code>if (abs(ray.dir.x) &lt; epsilon):\n    if (ray.origin.x &lt; box.min.x || ray.origin.x &gt; box.max.x):\n        return false\n    tx_min = -infinity\n    tx_max = +infinity\n</code></pre>\n\n<h3 id=\"733-\">7.3.3 \u5149\u7ebf-\u7403\u4f53\u76f8\u4ea4</h3>\n<p>\u7403\u4f53\u65b9\u7a0b\uff1a$||\\mathbf{p} - \\mathbf{c}||^2 = r^2$</p>\n<p>\u4ee3\u5165\u5149\u7ebf\u65b9\u7a0b\u5f97\u5230\u4e8c\u6b21\u65b9\u7a0b\uff1a\n$$at^2 + bt + c = 0$$\n\u5176\u4e2d\uff1a\n$$\\begin{aligned}\na &amp;= \\mathbf{d} \\cdot \\mathbf{d} = 1 \\text{ (\u5f52\u4e00\u5316\u65b9\u5411)} \\\nb &amp;= 2\\mathbf{d} \\cdot (\\mathbf{o} - \\mathbf{c}) \\\nc &amp;= ||\\mathbf{o} - \\mathbf{c}||^2 - r^2\n\\end{aligned}$$\n\u5224\u522b\u5f0f $\\Delta = b^2 - 4ac$\uff0c\u76f8\u4ea4\u53c2\u6570\uff1a\n$$t = \\frac{-b \\pm \\sqrt{\\Delta}}{2a}$$\n<strong>\u51e0\u4f55\u4f18\u5316\u65b9\u6cd5</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>L = center - ray.origin\ntca = dot(L, ray.dir)\nif (tca &lt; 0) return false  // \u7403\u5728\u5149\u7ebf\u540e\u65b9\n\nd2 = dot(L, L) - tca * tca\nif (d2 &gt; radius2) return false  // \u5149\u7ebf\u9519\u8fc7\u7403\u4f53\n\nthc = sqrt(radius2 - d2)\nt0 = tca - thc\nt1 = tca + thc\n</code></pre>\n\n<p><strong>\u6570\u503c\u7a33\u5b9a\u6027\u6539\u8fdb</strong>\uff1a\n\u4f7f\u7528\u4ee5\u4e0b\u5f62\u5f0f\u907f\u514d\u76f8\u51cf\u76f8\u6d88\uff1a\n$$t = \\frac{-b - \\text{sign}(b)\\sqrt{\\Delta}}{2a}$$\n<strong>\u692d\u7403\u4f53\u76f8\u4ea4</strong>\uff1a\n\u4f7f\u7528\u53d8\u6362\u77e9\u9635 $\\mathbf{M}$ \u5c06\u692d\u7403\u53d8\u6362\u4e3a\u5355\u4f4d\u7403\uff1a\n$$\\begin{aligned}\n\\mathbf{o}' &amp;= \\mathbf{M}(\\mathbf{o} - \\mathbf{c}) \\\n\\mathbf{d}' &amp;= \\mathbf{M}\\mathbf{d}\n\\end{aligned}$$\n\u7136\u540e\u4f7f\u7528\u7403\u4f53\u76f8\u4ea4\u7b97\u6cd5\u3002</p>\n<h3 id=\"734\">7.3.4 \u5176\u4ed6\u51e0\u4f55\u4f53\u76f8\u4ea4</h3>\n<p><strong>\u5149\u7ebf-\u5706\u67f1\u76f8\u4ea4</strong>\uff1a\n\u65e0\u9650\u5706\u67f1\uff1a$(x - c_x)^2 + (z - c_z)^2 = r^2$</p>\n<p>\u76f8\u4ea4\u8ba1\u7b97\uff1a\n$$a = d_x^2 + d_z^2$$\n$$b = 2(d_x(o_x - c_x) + d_z(o_z - c_z))$$\n$$c = (o_x - c_x)^2 + (o_z - c_z)^2 - r^2$$\n\u6709\u9650\u5706\u67f1\u9700\u8981\u989d\u5916\u68c0\u67e5\u7aef\u76d6\u3002</p>\n<p><strong>\u5149\u7ebf-\u5706\u9525\u76f8\u4ea4</strong>\uff1a\n\u5706\u9525\u65b9\u7a0b\uff1a$x^2 + z^2 = (r(y/h))^2$</p>\n<p>\u4e8c\u6b21\u65b9\u7a0b\u7cfb\u6570\uff1a\n$$a = d_x^2 + d_z^2 - (r/h)^2 d_y^2$$\n$$b = 2(o_x d_x + o_z d_z - (r/h)^2 o_y d_y)$$\n$$c = o_x^2 + o_z^2 - (r/h)^2 o_y^2$$\n<strong>\u5149\u7ebf-\u73af\u9762\uff08Torus\uff09\u76f8\u4ea4</strong>\uff1a\n\u56db\u6b21\u65b9\u7a0b\uff0c\u4f7f\u7528\u6570\u503c\u65b9\u6cd5\u6c42\u89e3\uff1a\n$$(x^2 + y^2 + z^2 + R^2 - r^2)^2 = 4R^2(x^2 + z^2)$$\n\u53ef\u4ee5\u4f7f\u7528Sturm\u5e8f\u5217\u6216Ferrari\u65b9\u6cd5\u6c42\u89e3\u3002</p>\n<h3 id=\"735\">7.3.5 \u76f8\u4ea4\u6d4b\u8bd5\u4f18\u5316\u7b56\u7565</h3>\n<ol>\n<li>\n<p><strong>\u65e9\u671f\u62d2\u7edd\uff08Early Rejection\uff09</strong>\n   - \u4f7f\u7528\u7b80\u5355\u5305\u56f4\u4f53\u8fdb\u884c\u9884\u6d4b\u8bd5\n   - \u5229\u7528\u7a7a\u95f4\u8fde\u8d2f\u6027\n   - \u80cc\u9762\u5254\u9664\uff08\u5bf9\u95ed\u5408\u7269\u4f53\uff09</p>\n</li>\n<li>\n<p><strong>SIMD\u5e76\u884c\u5316</strong>\n   - \u540c\u65f6\u6d4b\u8bd5\u591a\u6761\u5149\u7ebf\uff08Ray Packets\uff09\n   - \u6279\u91cf\u5904\u7406\u4e09\u89d2\u5f62\n   - \u4f7f\u7528SOA\uff08Structure of Arrays\uff09\u5e03\u5c40</p>\n</li>\n<li>\n<p><strong>\u7f13\u5b58\u4f18\u5316</strong>\n   - \u6570\u636e\u7ed3\u6784\u5bf9\u9f50\uff08\u907f\u514dfalse sharing\uff09\n   - \u70ed\u6570\u636e\u5206\u79bb\uff08\u5c06\u5e38\u7528\u6570\u636e\u6253\u5305\uff09\n   - \u9884\u53d6\uff08prefetch\uff09\u5173\u952e\u6570\u636e</p>\n</li>\n<li>\n<p><strong>\u7cbe\u5ea6\u8003\u8651</strong>\n   - \u4f7f\u7528\u7a33\u5b9a\u7684\u6570\u503c\u7b97\u6cd5\n   - \u5904\u7406\u81ea\u76f8\u4ea4\u95ee\u9898\uff08shadow acne\uff09\n   - \u8003\u8651\u820d\u5165\u8bef\u5dee\u7684\u4f20\u64ad</p>\n</li>\n<li>\n<p><strong>\u5206\u652f\u4f18\u5316</strong>\n   - \u51cf\u5c11\u6761\u4ef6\u5206\u652f\uff08\u4f7f\u7528\u4f4d\u8fd0\u7b97\uff09\n   - \u4f7f\u7528\u6a21\u677f\u7279\u5316\u6d88\u9664\u8fd0\u884c\u65f6\u5206\u652f\n   - Profile-guided optimization</p>\n</li>\n<li>\n<p><strong>\u95f4\u9694\u7b97\u672f\uff08Interval Arithmetic\uff09</strong>\n   \u7528\u4e8e\u4fdd\u5b88\u4f30\u8ba1\u548c\u9c81\u68d2\u6027\uff1a\n   <code>struct Interval {\n       float min, max;\n       Interval operator*(const Interval&amp; b) {\n           float products[4] = {min*b.min, min*b.max, \n                               max*b.min, max*b.max};\n           return {min(products), max(products)};\n       }\n   }</code></p>\n</li>\n<li>\n<p><strong>\u81ea\u9002\u5e94\u7cbe\u5ea6</strong>\n   - \u8fdc\u5904\u7269\u4f53\u4f7f\u7528\u4f4e\u7cbe\u5ea6\n   - \u91cd\u8981\u533a\u57df\u4f7f\u7528\u9ad8\u7cbe\u5ea6\n   - \u57fa\u4e8e\u8bef\u5dee\u4f30\u8ba1\u52a8\u6001\u8c03\u6574</p>\n</li>\n<li>\n<p><strong>\u5149\u7ebf\u5dee\u5206\uff08Ray Differentials\uff09</strong>\n   \u8ffd\u8e2a\u5149\u7ebf\u7684\u5fae\u5206\u4fe1\u606f\u7528\u4e8e\uff1a</p>\n</li>\n</ol>\n<ul>\n<li>LOD\u9009\u62e9</li>\n<li>\u7eb9\u7406\u8fc7\u6ee4</li>\n<li>\u81ea\u9002\u5e94\u7ec6\u5206\n$$\\frac{\\partial \\mathbf{p}}{\\partial u} = t \\frac{\\partial \\mathbf{d}}{\\partial u} + \\frac{\\partial t}{\\partial u} \\mathbf{d}$$</li>\n</ul>\n<h2 id=\"_1\">\u672c\u7ae0\u5c0f\u7ed3</h2>\n<p>\u672c\u7ae0\u4ecb\u7ecd\u4e86\u5149\u7ebf\u8ffd\u8e2a\u7684\u6838\u5fc3\u6982\u5ff5\u548c\u5173\u952e\u6280\u672f\uff1a</p>\n<p><strong>\u6838\u5fc3\u6982\u5ff5</strong>\uff1a</p>\n<ul>\n<li>\u5149\u7ebf\u7684\u53c2\u6570\u8868\u793a\uff1a$\\mathbf{r}(t) = \\mathbf{o} + t\\mathbf{d}$</li>\n<li>\u9012\u5f52\u5149\u7ebf\u8ffd\u8e2a\u5b9e\u73b0\u5168\u5c40\u5149\u7167\u6548\u679c</li>\n<li>\u7a7a\u95f4\u52a0\u901f\u7ed3\u6784\u5c06\u590d\u6742\u5ea6\u4ece $O(N)$ \u964d\u81f3 $O(\\log N)$</li>\n</ul>\n<p><strong>\u5173\u952e\u7b97\u6cd5</strong>\uff1a</p>\n<ul>\n<li>M\u00f6ller-Trumbore \u4e09\u89d2\u5f62\u76f8\u4ea4\u7b97\u6cd5</li>\n<li>SAH\u542f\u53d1\u5f0f\u7528\u4e8e\u6784\u5efa\u6700\u4f18BVH</li>\n<li>Slab\u65b9\u6cd5\u7528\u4e8e\u5305\u56f4\u76d2\u76f8\u4ea4\u6d4b\u8bd5</li>\n</ul>\n<p><strong>\u6027\u80fd\u4f18\u5316</strong>\uff1a</p>\n<ul>\n<li>\u4f7f\u7528BVH\u6216KD-Tree\u52a0\u901f\u7ed3\u6784</li>\n<li>SIMD\u5e76\u884c\u5316\u76f8\u4ea4\u6d4b\u8bd5</li>\n<li>\u7f13\u5b58\u53cb\u597d\u7684\u6570\u636e\u5e03\u5c40</li>\n</ul>\n<p><strong>\u91cd\u8981\u516c\u5f0f</strong>\uff1a</p>\n<ul>\n<li>SAH\u4ee3\u4ef7\u51fd\u6570\uff1a$C = C_{\\text{trav}} + \\sum_i \\frac{A_i}{A} N_i C_{\\text{isect}}$</li>\n<li>\u900f\u89c6\u6295\u5f71\u5149\u7ebf\u751f\u6210</li>\n<li>\u5404\u79cd\u51e0\u4f55\u4f53\u7684\u76f8\u4ea4\u6d4b\u8bd5\u516c\u5f0f</li>\n</ul>\n<p>\u5149\u7ebf\u8ffd\u8e2a\u4e3a\u540e\u7eed\u7684\u5168\u5c40\u5149\u7167\u3001\u8def\u5f84\u8ffd\u8e2a\u7b49\u9ad8\u7ea7\u6e32\u67d3\u6280\u672f\u5960\u5b9a\u4e86\u57fa\u7840\u3002\u638c\u63e1\u672c\u7ae0\u5185\u5bb9\u662f\u7406\u89e3\u73b0\u4ee3\u6e32\u67d3\u6280\u672f\u7684\u5173\u952e\u3002</p>\n<h2 id=\"_2\">\u7ec3\u4e60\u9898</h2>\n<h3 id=\"_3\">\u57fa\u7840\u9898</h3>\n<p><strong>\u7ec3\u4e607.1</strong> \u63a8\u5bfc\u6b63\u4ea4\u6295\u5f71\u76f8\u673a\u7684\u5149\u7ebf\u751f\u6210\u516c\u5f0f\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u6b63\u4ea4\u6295\u5f71\u4e2d\uff0c\u6240\u6709\u5149\u7ebf\u65b9\u5411\u76f8\u540c\uff0c\u53ea\u662f\u8d77\u70b9\u4e0d\u540c\u3002\u8003\u8651\u89c6\u56fe\u4f53\u79ef\u7684\u5b9a\u4e49\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u5bf9\u4e8e\u6b63\u4ea4\u6295\u5f71\uff0c\u5149\u7ebf\u65b9\u5411\u90fd\u662f $\\mathbf{d} = -\\mathbf{forward}$\uff08\u76f8\u673a\u524d\u65b9\uff09\u3002</p>\n<p>\u5149\u7ebf\u8d77\u70b9\uff1a\n$$\\mathbf{o}_{i,j} = \\mathbf{e} + u\\mathbf{right} + v\\mathbf{up}$$\n\u5176\u4e2d\uff1a\n$$\\begin{aligned}\nu &amp;= \\frac{2i - \\text{width}}{\\text{width}} \\cdot \\frac{\\text{width}_{\\text{view}}}{2} \\\nv &amp;= \\frac{2j - \\text{height}}{\\text{height}} \\cdot \\frac{\\text{height}_{\\text{view}}}{2}\n\\end{aligned}$$\n$\\text{width}_{\\text{view}}$ \u548c $\\text{height}_{\\text{view}}$ \u662f\u89c6\u56fe\u4f53\u79ef\u7684\u5bbd\u9ad8\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e607.2</strong> \u7ed9\u5b9a\u5149\u7ebf $\\mathbf{o} = (0, 0, 0)$, $\\mathbf{d} = (1, 0, 0)$ \u548c\u4e09\u89d2\u5f62\u9876\u70b9 $\\mathbf{v}_0 = (2, -1, -1)$, $\\mathbf{v}_1 = (2, 1, -1)$, $\\mathbf{v}_2 = (2, 0, 1)$\uff0c\u8ba1\u7b97\u76f8\u4ea4\u70b9\u548c\u91cd\u5fc3\u5750\u6807\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u4f7f\u7528 M\u00f6ller-Trumbore \u7b97\u6cd5\u6216\u5148\u8ba1\u7b97\u5e73\u9762\u65b9\u7a0b\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u4e09\u89d2\u5f62\u5728\u5e73\u9762 $x = 2$ \u4e0a\u3002\u5149\u7ebf\u6cbf $x$ \u8f74\u6b63\u65b9\u5411\uff0c\u6240\u4ee5 $t = 2$\u3002</p>\n<p>\u76f8\u4ea4\u70b9\uff1a$\\mathbf{p} = (2, 0, 0)$</p>\n<p>\u9a8c\u8bc1\u91cd\u5fc3\u5750\u6807\uff1a\u8bbe $\\mathbf{p} = u\\mathbf{v}_0 + v\\mathbf{v}_1 + w\\mathbf{v}_2$\uff0c\u5176\u4e2d $u + v + w = 1$\u3002</p>\n<p>\u89e3\u5f97\uff1a$u = 0$, $v = 0.5$, $w = 0.5$</p>\n<p>\u56e0\u6b64\u76f8\u4ea4\u70b9\u5728\u8fb9 $\\mathbf{v}_1\\mathbf{v}_2$ \u7684\u4e2d\u70b9\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e607.3</strong> \u8bc1\u660eBVH\u4e2d\u4f7f\u7528SAH\u6784\u5efa\u7684\u6811\uff0c\u671f\u671b\u904d\u5386\u4ee3\u4ef7\u662f\u6700\u4f18\u7684\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u8003\u8651\u5149\u7ebf\u5747\u5300\u5206\u5e03\u7684\u5047\u8bbe\uff0c\u4ee5\u53ca\u6761\u4ef6\u6982\u7387\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u5047\u8bbe\u5149\u7ebf\u5747\u5300\u5206\u5e03\uff0c\u51fb\u4e2d\u5b50\u8282\u70b9\u7684\u6982\u7387\u6b63\u6bd4\u4e8e\u5176\u8868\u9762\u79ef\u3002</p>\n<p>\u671f\u671b\u4ee3\u4ef7\uff1a\n$$E[C] = P(\\text{hit}) \\cdot C_{\\text{hit}} + P(\\text{miss}) \\cdot C_{\\text{miss}}$$\n\u5bf9\u4e8e\u5185\u90e8\u8282\u70b9\uff1a\n$$E[C] = C_{\\text{trav}} + P(L) \\cdot E[C_L] + P(R) \\cdot E[C_R]$$\n\u5176\u4e2d $P(L) = A_L/A$\uff0c$P(R) = A_R/A$\u3002</p>\n<p>SAH\u6b63\u662f\u6700\u5c0f\u5316\u8fd9\u4e2a\u671f\u671b\u4ee3\u4ef7\u7684\u8d2a\u5fc3\u7b56\u7565\u3002\u901a\u8fc7\u9012\u5f52\u8bba\u8bc1\uff0c\u53ef\u4ee5\u8bc1\u660e\u5c40\u90e8\u6700\u4f18\u5bfc\u81f4\u5168\u5c40\u6700\u4f18\uff08\u5728\u72ec\u7acb\u6027\u5047\u8bbe\u4e0b\uff09\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e607.4</strong> \u8bbe\u8ba1\u4e00\u4e2a\u7b97\u6cd5\uff0c\u68c0\u6d4b\u5149\u7ebf\u662f\u5426\u7a7f\u8fc7\u7531\u591a\u4e2a\u4e09\u89d2\u5f62\u7ec4\u6210\u7684\u5c01\u95ed\u7f51\u683c\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u8003\u8651\u5947\u5076\u89c4\u5219\uff08odd-even rule\uff09\u6216\u8ba1\u7b97\u6709\u7b26\u53f7\u4f53\u79ef\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u65b9\u6cd51\uff1a\u8ba1\u6570\u6cd5</p>\n<ul>\n<li>\u4ece\u5149\u7ebf\u8d77\u70b9\u5411\u4efb\u610f\u65b9\u5411\u53d1\u5c04\u6d4b\u8bd5\u5149\u7ebf</li>\n<li>\u8ba1\u7b97\u4e0e\u7f51\u683c\u7684\u76f8\u4ea4\u6b21\u6570</li>\n<li>\u5947\u6570\u6b21\u76f8\u4ea4\u8868\u793a\u8d77\u70b9\u5728\u5185\u90e8</li>\n</ul>\n<p>\u65b9\u6cd52\uff1a\u6709\u7b26\u53f7\u4f53\u79ef\u6cd5</p>\n<ul>\n<li>\u5bf9\u6bcf\u4e2a\u4e09\u89d2\u5f62\uff0c\u8ba1\u7b97\u5149\u7ebf\u8d77\u70b9\u4e0e\u4e09\u89d2\u5f62\u6784\u6210\u7684\u56db\u9762\u4f53\u6709\u7b26\u53f7\u4f53\u79ef</li>\n<li>\u7d2f\u52a0\u6240\u6709\u4f53\u79ef</li>\n<li>\u975e\u96f6\u503c\u8868\u793a\u5728\u5185\u90e8</li>\n</ul>\n<p>\u65b9\u6cd53\uff1a\u6cd5\u5411\u4e00\u81f4\u6027</p>\n<ul>\n<li>\u68c0\u67e5\u6240\u6709\u76f8\u4ea4\u70b9\u5904\u7684\u6cd5\u5411\u4e0e\u5149\u7ebf\u65b9\u5411\u7684\u70b9\u79ef\u7b26\u53f7</li>\n<li>\u4e00\u81f4\u7684\u7b26\u53f7\u6a21\u5f0f\u53ef\u5224\u65ad\u5185\u5916</li>\n</ul>\n</details>\n<h3 id=\"_4\">\u6311\u6218\u9898</h3>\n<p><strong>\u7ec3\u4e607.5</strong> \u63a8\u5bfc\u56db\u53c9BVH\uff084\u4e2a\u5b50\u8282\u70b9\uff09\u76f8\u5bf9\u4e8e\u4e8c\u53c9BVH\u7684\u7406\u8bba\u4f18\u52bf\u548c\u52a3\u52bf\u3002\u5728\u4ec0\u4e48\u60c5\u51b5\u4e0b\u56db\u53c9BVH\u66f4\u4f18\uff1f</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u8003\u8651\u6811\u7684\u6df1\u5ea6\u3001\u8282\u70b9\u8bbf\u95ee\u6b21\u6570\u3001SIMD\u5229\u7528\u7387\u548c\u7f13\u5b58\u6027\u80fd\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u4f18\u52bf\uff1a</p>\n<ol>\n<li>\u6811\u6df1\u5ea6\u51cf\u5c11\uff1a$\\log_4 N = \\frac{1}{2}\\log_2 N$</li>\n<li>SIMD\u53cb\u597d\uff1a\u53ef\u4ee5\u540c\u65f6\u6d4b\u8bd54\u4e2a\u5305\u56f4\u76d2</li>\n<li>\u51cf\u5c11\u904d\u5386\u5f00\u9500\uff1a\u66f4\u5c11\u7684\u8282\u70b9\u8bbf\u95ee</li>\n</ol>\n<p>\u52a3\u52bf\uff1a</p>\n<ol>\n<li>\u6784\u5efa\u590d\u6742\uff1a\u9700\u8981\u8003\u8651\u66f4\u591a\u5206\u5272\u7ec4\u5408</li>\n<li>\u8282\u70b9\u66f4\u5927\uff1a\u6bcf\u4e2a\u8282\u70b9\u5b58\u50a84\u4e2a\u5b50\u8282\u70b9\u4fe1\u606f</li>\n<li>\u5305\u56f4\u76d2\u53ef\u80fd\u66f4\u677e\uff1a\u96be\u4ee5\u627e\u5230\u6700\u4f184\u8def\u5206\u5272</li>\n</ol>\n<p>\u9002\u7528\u573a\u666f\uff1a</p>\n<ul>\n<li>GPU\u5b9e\u73b0\uff08SIMD\u5bbd\u5ea6\u5927\uff09</li>\n<li>\u573a\u666f\u8f83\u4e3a\u5747\u5300\u5206\u5e03</li>\n<li>\u5185\u5b58\u5e26\u5bbd\u5145\u8db3</li>\n</ul>\n<p>\u7406\u8bba\u5206\u6790\uff1a\u8bbe\u8282\u70b9\u8bbf\u95ee\u4ee3\u4ef7\u4e3a $C_n$\uff0c\u5305\u56f4\u76d2\u6d4b\u8bd5\u4ee3\u4ef7\u4e3a $C_b$\u3002</p>\n<ul>\n<li>\u4e8c\u53c9\uff1a$C_{\\text{total}} = \\log_2 N \\cdot C_n + 2\\log_2 N \\cdot C_b$</li>\n<li>\u56db\u53c9\uff1a$C_{\\text{total}} = \\frac{1}{2}\\log_2 N \\cdot C_n + 2\\log_2 N \\cdot C_b$</li>\n</ul>\n<p>\u5f53 $C_n \\gg C_b$ \u65f6\uff0c\u56db\u53c9BVH\u66f4\u4f18\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e607.6</strong> \u8bbe\u8ba1\u5e76\u5206\u6790\u4e00\u79cd\u81ea\u9002\u5e94\u7684\u5149\u7ebf\u8ffd\u8e2a\u7b97\u6cd5\uff0c\u80fd\u591f\u6839\u636e\u573a\u666f\u590d\u6742\u5ea6\u52a8\u6001\u8c03\u6574\u91c7\u6837\u5bc6\u5ea6\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u8003\u8651\u56fe\u50cf\u7a7a\u95f4\u7684\u68af\u5ea6\u3001\u51e0\u4f55\u590d\u6742\u5ea6\u548c\u7740\u8272\u590d\u6742\u5ea6\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u81ea\u9002\u5e94\u91c7\u6837\u7b56\u7565\uff1a</p>\n<ol>\n<li>\n<p><strong>\u521d\u59cb\u7a00\u758f\u91c7\u6837</strong>\n   - \u4ee5\u4f4e\u5206\u8fa8\u7387\uff08\u5982\u6bcf4\u00d74\u50cf\u7d201\u4e2a\u6837\u672c\uff09\u8fdb\u884c\u521d\u59cb\u91c7\u6837\n   - \u8bb0\u5f55\u6bcf\u4e2a\u6837\u672c\u7684\uff1a\u6df1\u5ea6\u3001\u6cd5\u7ebf\u3001\u6750\u8d28ID\u3001\u989c\u8272</p>\n</li>\n<li>\n<p><strong>\u590d\u6742\u5ea6\u4f30\u8ba1</strong>\n   <code>\u590d\u6742\u5ea6 = w1\u00b7\u6df1\u5ea6\u65b9\u5dee + w2\u00b7\u6cd5\u7ebf\u5dee\u5f02 + w3\u00b7\u989c\u8272\u68af\u5ea6 + w4\u00b7\u6750\u8d28\u8fb9\u754c</code></p>\n</li>\n<li>\n<p><strong>\u81ea\u9002\u5e94\u7ec6\u5206</strong>\n   - \u9ad8\u590d\u6742\u5ea6\u533a\u57df\uff1a\u589e\u52a0\u91c7\u6837\u5bc6\u5ea6\n   - \u4f7f\u7528\u56db\u53c9\u6811\u7ed3\u6784\u7ba1\u7406\u91c7\u6837\u70b9\n   - \u6700\u5927\u7ec6\u5206\u7ea7\u522b\u9650\u5236</p>\n</li>\n<li>\n<p><strong>\u63d2\u503c\u91cd\u5efa</strong>\n   - \u5e73\u6ed1\u533a\u57df\uff1a\u53cc\u7ebf\u6027\u63d2\u503c\n   - \u8fb9\u7f18\u533a\u57df\uff1a\u6700\u8fd1\u90bb\u6216\u5f15\u5bfc\u6ee4\u6ce2</p>\n</li>\n<li>\n<p><strong>\u6027\u80fd\u5206\u6790</strong>\n   - \u6700\u574f\u60c5\u51b5\uff1a$O(N)$\uff08\u5168\u5206\u8fa8\u7387\uff09\n   - \u6700\u597d\u60c5\u51b5\uff1a$O(N/16)$\uff084\u00d74\u5757\uff09\n   - \u5b9e\u9645\uff1a\u901a\u5e38\u8282\u770150-80%\u7684\u5149\u7ebf</p>\n</li>\n</ol>\n<p>\u5173\u952e\u4f18\u5316\uff1a</p>\n<ul>\n<li>\u4f7f\u7528GPU\u7684\u5206\u5c42\u6df1\u5ea6\u7f13\u51b2</li>\n<li>\u65f6\u95f4\u8fde\u8d2f\u6027\uff1a\u590d\u7528\u524d\u5e27\u4fe1\u606f</li>\n<li>\u5e76\u884c\u5316\uff1a\u57fa\u4e8etile\u7684\u5904\u7406</li>\n</ul>\n</details>\n<p><strong>\u7ec3\u4e607.7</strong> \u5206\u6790\u5149\u7ebf\u8ffd\u8e2a\u4e2d\u7684\u6570\u503c\u7cbe\u5ea6\u95ee\u9898\uff0c\u5e76\u63d0\u51fa\u4e00\u5957\u5b8c\u6574\u7684\u89e3\u51b3\u65b9\u6848\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u8003\u8651\u6d6e\u70b9\u8bef\u5dee\u7d2f\u79ef\u3001\u81ea\u76f8\u4ea4\u3001\u8584\u7269\u4f53\u7a7f\u900f\u7b49\u95ee\u9898\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u4e3b\u8981\u7cbe\u5ea6\u95ee\u9898\uff1a</p>\n<ol>\n<li>\n<p><strong>\u81ea\u76f8\u4ea4\uff08Shadow Acne\uff09</strong>\n   - \u539f\u56e0\uff1a\u76f8\u4ea4\u70b9\u8ba1\u7b97\u7684\u6d6e\u70b9\u8bef\u5dee\n   - \u89e3\u51b3\uff1a\u504f\u79fb\u5149\u7ebf\u8d77\u70b9\n   <code>\u03b5 = 1e-4 * max(|x|, |y|, |z|)\n   origin_offset = \u03b5 * normal</code></p>\n</li>\n<li>\n<p><strong>\u5149\u7ebf\u8d77\u70b9\u8bef\u5dee\u4f20\u64ad</strong>\n   - \u4f7f\u7528\u8bef\u5dee\u754c\u9650\u8ffd\u8e2a\n   - Welzl\u7684\u8bef\u5dee\u5206\u6790\uff1a$\\delta = \\gamma_n \\cdot |t|$\n   - \u5176\u4e2d $\\gamma_n = \\frac{n\\epsilon}{1-n\\epsilon}$</p>\n</li>\n<li>\n<p><strong>\u8584\u7269\u4f53\u7a7f\u900f</strong>\n   - \u53cc\u9762\u6d4b\u8bd5\n   - \u4fdd\u5b88\u5305\u56f4\u76d2\u6269\u5c55\n   - \u4f7f\u7528\u533a\u95f4\u7b97\u672f</p>\n</li>\n<li>\n<p><strong>\u5927\u573a\u666f\u7684\u7cbe\u5ea6\u635f\u5931</strong>\n   - \u5c40\u90e8\u5750\u6807\u7cfb\u53d8\u6362\n   - \u5206\u5c42\u7cbe\u5ea6\u8868\u793a\n   - \u4f7f\u7528\u53cc\u7cbe\u5ea6\u5173\u952e\u8ba1\u7b97</p>\n</li>\n<li>\n<p><strong>\u5b8c\u6574\u89e3\u51b3\u65b9\u6848</strong>\n   ```\n   \u7ed3\u6784\uff1a</p>\n</li>\n</ol>\n<ul>\n<li>\u4f7f\u7528\u76f8\u5bf9\u5750\u6807\u7cfb</li>\n<li>\u5305\u56f4\u76d2\u9002\u5f53\u6269\u5c55\uff1abox.min -= \u03b5, box.max += \u03b5</li>\n<li>\u76f8\u4ea4\u6d4b\u8bd5\u4f7f\u7528\u7a33\u5b9a\u7b97\u6cd5</li>\n</ul>\n<p>\u7b97\u6cd5\uff1a</p>\n<ul>\n<li>Kahan\u6c42\u548c\u5904\u7406\u7d2f\u79ef</li>\n<li>\u4f7f\u7528\u6709\u7406\u6570\u7b97\u672f\u9a8c\u8bc1\u5173\u952e\u51b3\u7b56</li>\n<li>\u81ea\u9002\u5e94\u7cbe\u5ea6\uff1a\u8fdc\u5904\u7269\u4f53\u964d\u4f4e\u7cbe\u5ea6\u8981\u6c42\n   ```</li>\n</ul>\n<p>\u8bef\u5dee\u5206\u6790\uff1a\n\u603b\u8bef\u5dee \u2264 \u76f8\u4ea4\u8bef\u5dee + \u53d8\u6362\u8bef\u5dee + \u7740\u8272\u8bef\u5dee\n\u5178\u578b\u503c\uff1a~1e-3 \u5230 1e-5 \u76f8\u5bf9\u8bef\u5dee</p>\n</details>\n<p><strong>\u7ec3\u4e607.8</strong> \u63a2\u8ba8\u5982\u4f55\u5c06\u5149\u7ebf\u8ffd\u8e2a\u6269\u5c55\u5230\u975e\u6b27\u51e0\u4f55\u7a7a\u95f4\uff08\u5982\u7403\u9762\u51e0\u4f55\u6216\u53cc\u66f2\u51e0\u4f55\uff09\u3002</p>\n<details>\n<summary>\u63d0\u793a</summary>\n<p>\u8003\u8651\u6d4b\u5730\u7ebf\u3001\u5e73\u884c\u4f20\u8f93\u548c\u66f2\u7387\u7684\u5f71\u54cd\u3002</p>\n</details>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u975e\u6b27\u51e0\u4f55\u5149\u7ebf\u8ffd\u8e2a\uff1a</p>\n<ol>\n<li>\n<p><strong>\u7403\u9762\u51e0\u4f55\uff08\u6b63\u66f2\u7387\uff09</strong>\n   - \u5149\u7ebf\u6cbf\u5927\u5706\u8def\u5f84\u4f20\u64ad\n   - \u53c2\u6570\u5316\uff1a$\\mathbf{r}(t) = \\cos(t)\\mathbf{o} + \\sin(t)\\mathbf{d}$\n   - \u76f8\u4ea4\u6d4b\u8bd5\u9700\u8981\u8003\u8651\u5468\u671f\u6027</p>\n</li>\n<li>\n<p><strong>\u53cc\u66f2\u51e0\u4f55\uff08\u8d1f\u66f2\u7387\uff09</strong>\n   - \u4f7f\u7528Poincar\u00e9\u7403\u6a21\u578b\u6216\u53cc\u66f2\u9762\u6a21\u578b\n   - \u6d4b\u5730\u7ebf\u65b9\u7a0b\uff1a\n$$\\frac{d^2x^i}{dt^2} + \\Gamma^i_{jk}\\frac{dx^j}{dt}\\frac{dx^k}{dt} = 0$$</p>\n</li>\n<li>\n<p><strong>\u7b97\u6cd5\u4fee\u6539</strong>\n   ```\n   \u5149\u7ebf\u4f20\u64ad\uff1a</p>\n</li>\n</ol>\n<ul>\n<li>\u4f7f\u7528\u6570\u503c\u79ef\u5206\u6c42\u89e3\u6d4b\u5730\u7ebf\u65b9\u7a0b</li>\n<li>\u81ea\u9002\u5e94\u6b65\u957f\u63a7\u5236</li>\n</ul>\n<p>\u76f8\u4ea4\u6d4b\u8bd5\uff1a</p>\n<ul>\n<li>\u5c06\u7269\u4f53\u53d8\u6362\u5230\u5c40\u90e8\u6b27\u5f0f\u5750\u6807\u7cfb</li>\n<li>\u6216\u76f4\u63a5\u5728\u66f2\u9762\u5750\u6807\u7cfb\u6c42\u89e3</li>\n</ul>\n<p>\u52a0\u901f\u7ed3\u6784\uff1a</p>\n<ul>\n<li>\u9700\u8981\u8003\u8651\u7a7a\u95f4\u7684\u62d3\u6251\u7ed3\u6784</li>\n<li>BVH\u9700\u8981\u4f7f\u7528\u6d4b\u5730\u8ddd\u79bb\n   ```</li>\n</ul>\n<ol start=\"4\">\n<li>\n<p><strong>\u5e94\u7528\u573a\u666f</strong>\n   - \u76f8\u5bf9\u8bba\u53ef\u89c6\u5316\n   - \u5168\u666f\u6e32\u67d3\n   - \u827a\u672f\u6548\u679c</p>\n</li>\n<li>\n<p><strong>\u6027\u80fd\u8003\u8651</strong>\n   - \u9884\u8ba1\u7b97\u6d4b\u5730\u7ebf\u67e5\u627e\u8868\n   - \u4f7f\u7528\u5c40\u90e8\u8fd1\u4f3c\n   - GPU\u4e0a\u7684\u5e76\u884c\u79ef\u5206\u5668</p>\n</li>\n</ol>\n</details>\n<h2 id=\"_5\">\u5e38\u89c1\u9677\u9631\u4e0e\u9519\u8bef</h2>\n<h3 id=\"1\">1. \u6570\u503c\u7cbe\u5ea6\u95ee\u9898</h3>\n<p><strong>\u95ee\u9898</strong>\uff1a\u81ea\u76f8\u4ea4\u5bfc\u81f4\u7684\u9634\u5f71\u75e4\u75ae\uff08Shadow Acne\uff09</p>\n<pre class=\"codehilite\"><code>\u9519\u8bef\uff1ashadow_ray.origin = hit_point\n\u6b63\u786e\uff1ashadow_ray.origin = hit_point + \u03b5 * normal\n</code></pre>\n\n<p><strong>\u95ee\u9898</strong>\uff1a\u5149\u7ebf\u65b9\u5411\u672a\u5f52\u4e00\u5316\u5bfc\u81f4t\u503c\u542b\u4e49\u9519\u8bef</p>\n<pre class=\"codehilite\"><code>\u68c0\u67e5\uff1aassert(|ray.direction| \u2248 1.0)\n</code></pre>\n\n<h3 id=\"2\">2. \u6027\u80fd\u9677\u9631</h3>\n<p><strong>\u95ee\u9898</strong>\uff1aBVH\u6784\u5efa\u65f6\u672a\u8003\u8651\u7a7a\u95f4\u5c40\u90e8\u6027</p>\n<ul>\n<li>\u4f7f\u7528Morton\u7f16\u7801\u6539\u5584\u7f13\u5b58\u6027\u80fd</li>\n<li>\u8003\u8651\u8282\u70b9\u5927\u5c0f\u4e0e\u7f13\u5b58\u884c\u5bf9\u9f50</li>\n</ul>\n<p><strong>\u95ee\u9898</strong>\uff1a\u8fc7\u65e9\u4f18\u5316\u5bfc\u81f4\u4ee3\u7801\u590d\u6742</p>\n<ul>\n<li>\u5148\u5b9e\u73b0\u6b63\u786e\u7684\u7b97\u6cd5</li>\n<li>\u4f7f\u7528\u6027\u80fd\u5206\u6790\u5de5\u5177\u5b9a\u4f4d\u74f6\u9888</li>\n</ul>\n<h3 id=\"3\">3. \u7b97\u6cd5\u9519\u8bef</h3>\n<p><strong>\u95ee\u9898</strong>\uff1aBVH\u904d\u5386\u65f6\u9519\u8bef\u7684\u8282\u70b9\u8bbf\u95ee\u987a\u5e8f</p>\n<pre class=\"codehilite\"><code>\u9519\u8bef\uff1a\u603b\u662f\u5148\u8bbf\u95ee\u5de6\u5b50\u8282\u70b9\n\u6b63\u786e\uff1a\u5148\u8bbf\u95ee\u8ddd\u79bb\u8f83\u8fd1\u7684\u5b50\u8282\u70b9\n</code></pre>\n\n<p><strong>\u95ee\u9898</strong>\uff1a\u5ffd\u7565\u4e86\u80cc\u9762\u5254\u9664\u7684\u8fb9\u754c\u60c5\u51b5</p>\n<ul>\n<li>\u900f\u660e\u7269\u4f53\u9700\u8981\u53cc\u9762\u6d4b\u8bd5</li>\n<li>\u6cd5\u7ebf\u7ffb\u8f6c\u7684\u5904\u7406</li>\n</ul>\n<h3 id=\"4\">4. \u8fb9\u754c\u60c5\u51b5</h3>\n<p><strong>\u95ee\u9898</strong>\uff1a\u9000\u5316\u4e09\u89d2\u5f62\uff08\u5171\u7ebf\u9876\u70b9\uff09\u5bfc\u81f4\u9664\u96f6\u9519\u8bef</p>\n<ul>\n<li>\u9884\u5904\u7406\u79fb\u9664\u9000\u5316\u51e0\u4f55</li>\n<li>\u76f8\u4ea4\u6d4b\u8bd5\u4e2d\u6dfb\u52a0\u68c0\u67e5</li>\n</ul>\n<p><strong>\u95ee\u9898</strong>\uff1a\u6781\u5c0f\u6216\u6781\u5927\u7684\u573a\u666f\u89c4\u6a21</p>\n<ul>\n<li>\u4f7f\u7528\u76f8\u5bf9\u8bef\u5dee\u800c\u975e\u7edd\u5bf9\u8bef\u5dee</li>\n<li>\u8003\u8651\u5206\u5c42LOD</li>\n</ul>\n<h2 id=\"_6\">\u6700\u4f73\u5b9e\u8df5\u68c0\u67e5\u6e05\u5355</h2>\n<h3 id=\"_7\">\u8bbe\u8ba1\u9636\u6bb5</h3>\n<ul>\n<li>[ ] \u9009\u62e9\u5408\u9002\u7684\u52a0\u901f\u7ed3\u6784\uff08BVH vs KD-Tree\uff09</li>\n<li>[ ] \u786e\u5b9a\u7cbe\u5ea6\u8981\u6c42\u548c\u8bef\u5dee\u5bb9\u9650</li>\n<li>[ ] \u89c4\u5212\u5185\u5b58\u5e03\u5c40\u548c\u7f13\u5b58\u4f18\u5316\u7b56\u7565</li>\n<li>[ ] \u8003\u8651\u76ee\u6807\u5e73\u53f0\uff08CPU/GPU\uff09\u7279\u6027</li>\n</ul>\n<h3 id=\"_8\">\u5b9e\u73b0\u9636\u6bb5</h3>\n<ul>\n<li>[ ] \u5149\u7ebf\u65b9\u5411\u59cb\u7ec8\u4fdd\u6301\u5f52\u4e00\u5316</li>\n<li>[ ] \u6b63\u786e\u5904\u7406\u6570\u503c\u7cbe\u5ea6\u95ee\u9898</li>\n<li>[ ] \u5b9e\u73b0\u9c81\u68d2\u7684\u76f8\u4ea4\u6d4b\u8bd5\u7b97\u6cd5</li>\n<li>[ ] \u6dfb\u52a0\u9002\u5f53\u7684debug\u53ef\u89c6\u5316</li>\n</ul>\n<h3 id=\"_9\">\u4f18\u5316\u9636\u6bb5</h3>\n<ul>\n<li>[ ] \u4f7f\u7528\u6027\u80fd\u5206\u6790\u786e\u5b9a\u74f6\u9888</li>\n<li>[ ] \u5b9e\u73b0SIMD\u52a0\u901f\u7684\u76f8\u4ea4\u6d4b\u8bd5</li>\n<li>[ ] \u4f18\u5316\u5185\u5b58\u8bbf\u95ee\u6a21\u5f0f</li>\n<li>[ ] \u8003\u8651\u5149\u7ebf\u5305\uff08Ray Packet\uff09\u6280\u672f</li>\n</ul>\n<h3 id=\"_10\">\u9a8c\u8bc1\u9636\u6bb5</h3>\n<ul>\n<li>[ ] \u6d4b\u8bd5\u5404\u79cd\u9000\u5316\u60c5\u51b5</li>\n<li>[ ] \u9a8c\u8bc1\u6570\u503c\u7a33\u5b9a\u6027</li>\n<li>[ ] \u6bd4\u8f83\u4e0d\u540c\u573a\u666f\u4e0b\u7684\u6027\u80fd</li>\n<li>[ ] \u786e\u4fdd\u7ed3\u679c\u7684\u786e\u5b9a\u6027\uff08\u7528\u4e8e\u8c03\u8bd5\uff09</li>\n</ul>\n<h3 id=\"_11\">\u7ef4\u62a4\u9636\u6bb5</h3>\n<ul>\n<li>[ ] \u6587\u6863\u5316\u5173\u952e\u7b97\u6cd5\u9009\u62e9</li>\n<li>[ ] \u63d0\u4f9b\u6027\u80fd\u8c03\u4f18\u53c2\u6570</li>\n<li>[ ] \u652f\u6301\u6e10\u8fdb\u5f0f\u6e32\u67d3</li>\n<li>[ ] \u4fdd\u6301\u4ee3\u7801\u7684\u53ef\u6269\u5c55\u6027</li>\n</ul>"
  },
  "../chapter12.md": {
    "hash": "3275d3922f6f88ccd7a0b5ffc1722b6e",
    "content": "<h1 id=\"12\">\u7b2c12\u7ae0\uff1a\u7269\u8d28\u70b9\u6cd5</h1>\n<p>\u7269\u8d28\u70b9\u6cd5\uff08Material Point Method, MPM\uff09\u662f\u4e00\u79cd\u6df7\u5408\u6b27\u62c9-\u62c9\u683c\u6717\u65e5\u6570\u503c\u65b9\u6cd5\uff0c\u5728\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u88ab\u5e7f\u6cdb\u7528\u4e8e\u6a21\u62df\u5404\u79cd\u6750\u6599\u7684\u5927\u53d8\u5f62\u884c\u4e3a\uff0c\u5305\u62ec\u96ea\u3001\u6c99\u3001\u6ce5\u6d46\u3001\u5f39\u6027\u4f53\u7b49\u3002MPM\u7ed3\u5408\u4e86\u7c92\u5b50\u65b9\u6cd5\u7684\u7075\u6d3b\u6027\u548c\u7f51\u683c\u65b9\u6cd5\u7684\u8ba1\u7b97\u6548\u7387\uff0c\u7279\u522b\u9002\u5408\u5904\u7406\u62d3\u6251\u53d8\u5316\u3001\u788e\u88c2\u3001\u6df7\u5408\u7b49\u590d\u6742\u73b0\u8c61\u3002\u672c\u7ae0\u5c06\u6df1\u5165\u63a2\u8ba8MPM\u7684\u7406\u8bba\u57fa\u7840\u3001\u79fb\u52a8\u6700\u5c0f\u4e8c\u4e58MPM\uff08MLS-MPM\uff09\u7684\u6539\u8fdb\uff0c\u4ee5\u53ca\u9ad8\u7ea7\u6280\u672f\u4e0e\u5e94\u7528\u3002</p>\n<h2 id=\"_1\">\u7ae0\u8282\u5927\u7eb2</h2>\n<h3 id=\"121\">12.1 \u7269\u8d28\u70b9\u6cd5\u57fa\u7840\u7406\u8bba</h3>\n<ul>\n<li>\u8fde\u7eed\u4ecb\u8d28\u529b\u5b66\u57fa\u7840</li>\n<li>MPM\u7684\u57fa\u672c\u6846\u67b6</li>\n<li>\u7c92\u5b50-\u7f51\u683c\u4ea4\u4e92</li>\n<li>\u65f6\u95f4\u79ef\u5206\u65b9\u6848</li>\n</ul>\n<h3 id=\"122-mls-mpm\">12.2 MLS-MPM\uff08\u79fb\u52a8\u6700\u5c0f\u4e8c\u4e58\u7269\u8d28\u70b9\u6cd5\uff09</h3>\n<ul>\n<li>\u4f20\u7edfMPM\u7684\u5c40\u9650\u6027</li>\n<li>MLS-MPM\u7684\u7406\u8bba\u63a8\u5bfc</li>\n<li>APIC\u4e0eMLS-MPM\u7684\u5173\u7cfb</li>\n<li>\u5b9e\u73b0\u7ec6\u8282\u4e0e\u4f18\u5316</li>\n</ul>\n<h3 id=\"123-mpm\">12.3 \u9ad8\u7ea7MPM\u6280\u672f\u4e0e\u5e94\u7528</h3>\n<ul>\n<li>\u591a\u6750\u6599MPM</li>\n<li>\u81ea\u9002\u5e94MPM</li>\n<li>GPU\u52a0\u901f\u6280\u672f</li>\n<li>\u5de5\u7a0b\u5e94\u7528\u6848\u4f8b</li>\n</ul>\n<h2 id=\"121_1\">12.1 \u7269\u8d28\u70b9\u6cd5\u57fa\u7840\u7406\u8bba</h2>\n<h3 id=\"1211\">12.1.1 \u8fde\u7eed\u4ecb\u8d28\u529b\u5b66\u57fa\u7840</h3>\n<p>\u5728\u4ecb\u7ecdMPM\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u6df1\u5165\u7406\u89e3\u8fde\u7eed\u4ecb\u8d28\u529b\u5b66\u7684\u57fa\u672c\u6982\u5ff5\u3002\u8003\u8651\u4e00\u4e2a\u8fde\u7eed\u4f53 $\\Omega$\uff0c\u5176\u8fd0\u52a8\u53ef\u4ee5\u7528\u6620\u5c04 $\\phi: \\Omega_0 \\times [0,T] \\rightarrow \\mathbb{R}^d$ \u63cf\u8ff0\uff0c\u5176\u4e2d $\\Omega_0$ \u662f\u521d\u59cb\uff08\u53c2\u8003\uff09\u6784\u578b\uff0c$d$ \u662f\u7a7a\u95f4\u7ef4\u5ea6\uff08\u901a\u5e38\u4e3a2\u62163\uff09\u3002</p>\n<p><strong>\u8fd0\u52a8\u5b66\u63cf\u8ff0</strong>\uff1a</p>\n<ul>\n<li><strong>\u62c9\u683c\u6717\u65e5\u63cf\u8ff0</strong>\uff1a\u8ddf\u8e2a\u6750\u6599\u70b9 $\\mathbf{X} \\in \\Omega_0$ \u7684\u8fd0\u52a8\u8f68\u8ff9\uff0c\u9002\u5408\u8ffd\u8e2a\u6750\u6599\u5386\u53f2\u548c\u5185\u90e8\u53d8\u91cf\u6f14\u5316</li>\n<li><strong>\u6b27\u62c9\u63cf\u8ff0</strong>\uff1a\u5173\u6ce8\u7a7a\u95f4\u70b9 $\\mathbf{x} \\in \\Omega_t$ \u5904\u7684\u7269\u7406\u91cf\u53d8\u5316\uff0c\u9002\u5408\u6d41\u4f53\u529b\u5b66\u548c\u5927\u53d8\u5f62\u95ee\u9898</li>\n<li><strong>\u6620\u5c04\u5173\u7cfb</strong>\uff1a$\\mathbf{x} = \\phi(\\mathbf{X}, t)$</li>\n<li><strong>\u901f\u5ea6\u573a</strong>\uff1a$\\mathbf{v}(\\mathbf{X}, t) = \\frac{\\partial \\phi}{\\partial t}(\\mathbf{X}, t)$\uff08\u62c9\u683c\u6717\u65e5\uff09\u6216 $\\mathbf{v}(\\mathbf{x}, t)$\uff08\u6b27\u62c9\uff09</li>\n</ul>\n<p><strong>\u53d8\u5f62\u68af\u5ea6</strong>\u5b9a\u4e49\u4e3a\uff1a\n$$\\mathbf{F} = \\frac{\\partial \\phi}{\\partial \\mathbf{X}} = \\frac{\\partial \\mathbf{x}}{\\partial \\mathbf{X}}$$\n\u53d8\u5f62\u68af\u5ea6 $\\mathbf{F}$ \u662f\u4e00\u4e2a\u4e8c\u9636\u5f20\u91cf\uff0c\u5305\u542b\u4e86\u6240\u6709\u7684\u5c40\u90e8\u53d8\u5f62\u4fe1\u606f\u3002\u4ece\u51e0\u4f55\u89d2\u5ea6\u770b\uff0c$\\mathbf{F}$ \u5c06\u53c2\u8003\u6784\u578b\u4e2d\u7684\u65e0\u7a77\u5c0f\u7ebf\u5143 $d\\mathbf{X}$ \u6620\u5c04\u5230\u5f53\u524d\u6784\u578b\u4e2d\u7684 $d\\mathbf{x} = \\mathbf{F} d\\mathbf{X}$\u3002</p>\n<p><strong>\u53d8\u5f62\u68af\u5ea6\u7684\u6027\u8d28</strong>\uff1a</p>\n<ul>\n<li><strong>\u53ef\u9006\u6027</strong>\uff1a\u7269\u7406\u4e0a\u5408\u7406\u7684\u53d8\u5f62\u8981\u6c42 $\\det(\\mathbf{F}) &gt; 0$\uff08\u907f\u514d\u6750\u6599\u7a7f\u900f\u81ea\u8eab\uff09</li>\n<li><strong>\u4f53\u79ef\u6bd4</strong>\uff1a$J = \\det(\\mathbf{F})$ \u8868\u793a\u5c40\u90e8\u4f53\u79ef\u53d8\u5316\u7387</li>\n<li>$J &gt; 0$\uff1a\u4fdd\u6301\u5b9a\u5411\uff08\u7269\u7406\u4e0a\u5408\u7406\uff09</li>\n<li>$J = 1$\uff1a\u4f53\u79ef\u5b88\u6052\uff08\u4e0d\u53ef\u538b\u7f29\uff09</li>\n<li>$J &lt; 1$\uff1a\u538b\u7f29</li>\n<li>$J &gt; 1$\uff1a\u81a8\u80c0</li>\n<li><strong>\u6052\u7b49\u53d8\u5f62</strong>\uff1a\u672a\u53d8\u5f62\u72b6\u6001\u5bf9\u5e94 $\\mathbf{F} = \\mathbf{I}$</li>\n</ul>\n<p><strong>\u6781\u5206\u89e3\u5b9a\u7406</strong>\uff1a\n\u4efb\u4f55\u53ef\u9006\u7684\u53d8\u5f62\u68af\u5ea6\u53ef\u4ee5\u552f\u4e00\u5206\u89e3\u4e3a\u65cb\u8f6c\u548c\u62c9\u4f38\u7684\u7ec4\u5408\uff1a\n$$\\mathbf{F} = \\mathbf{R}\\mathbf{U} = \\mathbf{V}\\mathbf{R}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$\\mathbf{R}$ \u662f\u65cb\u8f6c\u5f20\u91cf\uff08\u6b63\u4ea4\u5f20\u91cf\uff09\uff1a$\\mathbf{R}^T\\mathbf{R} = \\mathbf{I}$\uff0c$\\det(\\mathbf{R}) = 1$</li>\n<li>$\\mathbf{U}$ \u662f\u53f3\u62c9\u4f38\u5f20\u91cf\uff08\u5bf9\u79f0\u6b63\u5b9a\uff09\uff1a\u63cf\u8ff0\u65cb\u8f6c\u524d\u7684\u62c9\u4f38</li>\n<li>$\\mathbf{V}$ \u662f\u5de6\u62c9\u4f38\u5f20\u91cf\uff08\u5bf9\u79f0\u6b63\u5b9a\uff09\uff1a\u63cf\u8ff0\u65cb\u8f6c\u540e\u7684\u62c9\u4f38</li>\n</ul>\n<p>\u8ba1\u7b97\u6781\u5206\u89e3\u7684\u7b97\u6cd5\u901a\u5e38\u4f7f\u7528SVD\uff1a$\\mathbf{F} = \\mathbf{U}_{\\text{svd}} \\boldsymbol{\\Sigma} \\mathbf{V}_{\\text{svd}}^T$\uff0c\u5219 $\\mathbf{R} = \\mathbf{U}_{\\text{svd}} \\mathbf{V}_{\\text{svd}}^T$\u3002</p>\n<p><strong>\u5e94\u53d8\u5ea6\u91cf</strong>\uff1a\n\u5e94\u53d8\u91cf\u5316\u4e86\u53d8\u5f62\u4e2d\u7684\u62c9\u4f38\u90e8\u5206\uff0c\u4e0d\u540c\u7684\u5e94\u53d8\u5f20\u91cf\u9002\u7528\u4e8e\u4e0d\u540c\u7684\u53d8\u5f62\u7a0b\u5ea6\u548c\u5206\u6790\u9700\u6c42\uff1a</p>\n<ol>\n<li><strong>Green-Lagrange\u5e94\u53d8\u5f20\u91cf</strong>\uff08\u62c9\u683c\u6717\u65e5\u63cf\u8ff0\uff0c\u5927\u53d8\u5f62\uff09\uff1a\n$$\\mathbf{E} = \\frac{1}{2}(\\mathbf{F}^T\\mathbf{F} - \\mathbf{I}) = \\frac{1}{2}(\\mathbf{C} - \\mathbf{I})$$\n\u5176\u4e2d $\\mathbf{C} = \\mathbf{F}^T\\mathbf{F}$ \u662f\u53f3Cauchy-Green\u53d8\u5f62\u5f20\u91cf\u3002</li>\n</ol>\n<ul>\n<li>\u7269\u7406\u610f\u4e49\uff1a\u5ea6\u91cf\u53c2\u8003\u6784\u578b\u4e2d\u7ebf\u5143\u957f\u5ea6\u7684\u53d8\u5316</li>\n<li>\u7279\u70b9\uff1a\u5728\u521a\u4f53\u65cb\u8f6c\u4e0b\u4e0d\u53d8\uff0c\u9002\u5408\u5927\u53d8\u5f62\u5206\u6790</li>\n</ul>\n<ol start=\"2\">\n<li><strong>Almansi-Euler\u5e94\u53d8\u5f20\u91cf</strong>\uff08\u6b27\u62c9\u63cf\u8ff0\uff09\uff1a\n$$\\mathbf{e} = \\frac{1}{2}(\\mathbf{I} - \\mathbf{F}^{-T}\\mathbf{F}^{-1}) = \\frac{1}{2}(\\mathbf{I} - \\mathbf{B}^{-1})$$\n\u5176\u4e2d $\\mathbf{B} = \\mathbf{F}\\mathbf{F}^T$ \u662f\u5de6Cauchy-Green\u53d8\u5f62\u5f20\u91cf\u3002</li>\n</ol>\n<ul>\n<li>\u7269\u7406\u610f\u4e49\uff1a\u5ea6\u91cf\u5f53\u524d\u6784\u578b\u4e2d\u7ebf\u5143\u957f\u5ea6\u7684\u53d8\u5316</li>\n<li>\u5e94\u7528\uff1a\u9002\u5408\u66f4\u65b0\u62c9\u683c\u6717\u65e5\u683c\u5f0f</li>\n</ul>\n<ol start=\"3\">\n<li><strong>\u5c0f\u5e94\u53d8\u5f20\u91cf</strong>\uff08\u7ebf\u6027\u5316\uff0c\u5de5\u7a0b\u5e94\u53d8\uff09\uff1a\n   \u4f4d\u79fb\u573a $\\mathbf{u} = \\mathbf{x} - \\mathbf{X}$\uff0c\u4f4d\u79fb\u68af\u5ea6 $\\mathbf{H} = \\nabla\\mathbf{u} = \\mathbf{F} - \\mathbf{I}$\n$$\\boldsymbol{\\epsilon} = \\frac{1}{2}(\\mathbf{H} + \\mathbf{H}^T) = \\frac{1}{2}(\\nabla\\mathbf{u} + \\nabla\\mathbf{u}^T)$$</li>\n</ol>\n<ul>\n<li>\u5047\u8bbe\uff1a$||\\mathbf{H}|| \\ll 1$\uff08\u5c0f\u53d8\u5f62\u3001\u5c0f\u8f6c\u52a8\uff09</li>\n<li>\u4f18\u70b9\uff1a\u7ebf\u6027\u7406\u8bba\uff0c\u8ba1\u7b97\u7b80\u5355</li>\n</ul>\n<ol start=\"4\">\n<li><strong>\u5bf9\u6570\u5e94\u53d8</strong>\uff08Hencky\u5e94\u53d8\uff09\uff1a\n$$\\mathbf{E}_{\\ln} = \\ln(\\mathbf{V}) = \\frac{1}{2}\\ln(\\mathbf{B})$$</li>\n</ol>\n<ul>\n<li>\u7279\u70b9\uff1a\u5bf9\u4e8e\u5355\u8f74\u62c9\u4f38\u7ed9\u51fa\u771f\u5b9e\u5e94\u53d8</li>\n<li>\u8ba1\u7b97\uff1a\u9700\u8981\u77e9\u9635\u5bf9\u6570\uff0c\u901a\u5e38\u901a\u8fc7\u7279\u5f81\u503c\u5206\u89e3</li>\n</ul>\n<p><strong>\u5e94\u53d8\u7387\u548c\u81ea\u65cb\u5f20\u91cf</strong>\uff1a\n\u901f\u5ea6\u68af\u5ea6\u5f20\u91cf $\\mathbf{L} = \\nabla\\mathbf{v} = \\dot{\\mathbf{F}}\\mathbf{F}^{-1}$ \u53ef\u5206\u89e3\u4e3a\uff1a\n$$\\mathbf{L} = \\mathbf{D} + \\mathbf{W}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>\u53d8\u5f62\u7387\u5f20\u91cf\uff08\u5bf9\u79f0\uff09\uff1a$\\mathbf{D} = \\frac{1}{2}(\\mathbf{L} + \\mathbf{L}^T)$</li>\n<li>\u81ea\u65cb\u5f20\u91cf\uff08\u53cd\u5bf9\u79f0\uff09\uff1a$\\mathbf{W} = \\frac{1}{2}(\\mathbf{L} - \\mathbf{L}^T)$</li>\n</ul>\n<p><strong>\u5e94\u529b\u5ea6\u91cf</strong>\uff1a\n\u5e94\u529b\u63cf\u8ff0\u5185\u529b\u7684\u5206\u5e03\uff0c\u4e0d\u540c\u7684\u5e94\u529b\u5f20\u91cf\u5bf9\u5e94\u4e0d\u540c\u7684\u53c2\u8003\u6784\u578b\uff1a</p>\n<ol>\n<li>\n<p><strong>Cauchy\u5e94\u529b\u5f20\u91cf</strong> $\\boldsymbol{\\sigma}$\uff08\u771f\u5b9e\u5e94\u529b\uff09\uff1a\n   - \u5b9a\u4e49\uff1a\u5f53\u524d\u6784\u578b\u4e2d\u5355\u4f4d\u9762\u79ef\u4e0a\u7684\u529b\n   - \u5bf9\u79f0\u6027\uff1a\u89d2\u52a8\u91cf\u5b88\u6052\u8981\u6c42 $\\boldsymbol{\\sigma} = \\boldsymbol{\\sigma}^T$\n   - \u7275\u5f15\u529b\uff1a$\\mathbf{t} = \\boldsymbol{\\sigma} \\mathbf{n}$\uff08$\\mathbf{n}$ \u662f\u5f53\u524d\u6784\u578b\u7684\u5916\u6cd5\u5411\uff09</p>\n</li>\n<li>\n<p><strong>\u7b2c\u4e00Piola-Kirchhoff\u5e94\u529b\u5f20\u91cf</strong> $\\mathbf{P}$\uff08\u540d\u4e49\u5e94\u529b\uff09\uff1a\n$$\\mathbf{P} = J\\boldsymbol{\\sigma}\\mathbf{F}^{-T}$$</p>\n</li>\n</ol>\n<ul>\n<li>\u5b9a\u4e49\uff1a\u5f53\u524d\u529b\u5bf9\u53c2\u8003\u9762\u79ef\u7684\u6bd4\u503c</li>\n<li>\u975e\u5bf9\u79f0\uff1a$\\mathbf{P} \\neq \\mathbf{P}^T$\uff08\u4e00\u822c\u60c5\u51b5\uff09</li>\n<li>\u529f\u5171\u8f6d\uff1a$\\mathbf{P} : \\dot{\\mathbf{F}} = J\\boldsymbol{\\sigma} : \\mathbf{D}$</li>\n</ul>\n<ol start=\"3\">\n<li><strong>\u7b2c\u4e8cPiola-Kirchhoff\u5e94\u529b\u5f20\u91cf</strong> $\\mathbf{S}$\uff1a\n$$\\mathbf{S} = \\mathbf{F}^{-1}\\mathbf{P} = J\\mathbf{F}^{-1}\\boldsymbol{\\sigma}\\mathbf{F}^{-T}$$</li>\n</ol>\n<ul>\n<li>\u5b9a\u4e49\uff1a\u5b8c\u5168\u53c2\u8003\u6784\u578b\u7684\u5e94\u529b\u5ea6\u91cf</li>\n<li>\u5bf9\u79f0\u6027\uff1a$\\mathbf{S} = \\mathbf{S}^T$</li>\n<li>\u529f\u5171\u8f6d\uff1a$\\mathbf{S} : \\dot{\\mathbf{E}} = J\\boldsymbol{\\sigma} : \\mathbf{D}$</li>\n</ul>\n<ol start=\"4\">\n<li><strong>Kirchhoff\u5e94\u529b\u5f20\u91cf</strong> $\\boldsymbol{\\tau}$\uff1a\n$$\\boldsymbol{\\tau} = J\\boldsymbol{\\sigma}$$</li>\n</ol>\n<ul>\n<li>\u5e94\u7528\uff1a\u4e0d\u53ef\u538b\u7f29\u6750\u6599\uff08$J = 1$\uff09\u65f6\u7b49\u4e8eCauchy\u5e94\u529b</li>\n<li>\u4f18\u70b9\uff1a\u5728\u5927\u53d8\u5f62\u95ee\u9898\u4e2d\u6570\u503c\u7a33\u5b9a\u6027\u66f4\u597d</li>\n</ul>\n<p><strong>\u5b88\u6052\u65b9\u7a0b</strong>\uff1a\n\u8fde\u7eed\u4ecb\u8d28\u5fc5\u987b\u6ee1\u8db3\u57fa\u672c\u7684\u7269\u7406\u5b88\u6052\u5b9a\u5f8b\uff1a</p>\n<ol>\n<li><strong>\u8d28\u91cf\u5b88\u6052</strong>\uff08\u8fde\u7eed\u6027\u65b9\u7a0b\uff09\uff1a\n   - \u79ef\u5206\u5f62\u5f0f\uff1a$\\frac{d}{dt}\\int_{\\Omega_t} \\rho \\, dv = 0$\n   - \u62c9\u683c\u6717\u65e5\u5f62\u5f0f\uff1a$\\rho_0 = J\\rho$\uff08\u8d28\u91cf\u5bc6\u5ea6\u5173\u7cfb\uff09\n   - \u6b27\u62c9\u5f62\u5f0f\uff1a$\\frac{\\partial \\rho}{\\partial t} + \\nabla \\cdot (\\rho\\mathbf{v}) = 0$\n   - \u7269\u8d28\u5bfc\u6570\u5f62\u5f0f\uff1a$\\frac{D\\rho}{Dt} + \\rho\\nabla \\cdot \\mathbf{v} = 0$</li>\n</ol>\n<p>\u5bf9\u4e8e\u4e0d\u53ef\u538b\u7f29\u6750\u6599\uff1a$\\nabla \\cdot \\mathbf{v} = 0$</p>\n<ol start=\"2\">\n<li><strong>\u52a8\u91cf\u5b88\u6052</strong>\uff08\u8fd0\u52a8\u65b9\u7a0b\uff09\uff1a\n   - \u79ef\u5206\u5f62\u5f0f\uff1a$\\frac{d}{dt}\\int_{\\Omega_t} \\rho\\mathbf{v} \\, dv = \\int_{\\Omega_t} \\rho\\mathbf{b} \\, dv + \\int_{\\partial\\Omega_t} \\mathbf{t} \\, da$\n   - \u62c9\u683c\u6717\u65e5\u5f62\u5f0f\uff1a$\\rho_0 \\frac{\\partial^2 \\phi}{\\partial t^2} = \\nabla_0 \\cdot \\mathbf{P} + \\rho_0\\mathbf{b}$\n   - \u6b27\u62c9\u5f62\u5f0f\uff08Cauchy\u8fd0\u52a8\u65b9\u7a0b\uff09\uff1a$\\rho\\frac{D\\mathbf{v}}{Dt} = \\nabla \\cdot \\boldsymbol{\\sigma} + \\rho\\mathbf{b}$</li>\n</ol>\n<p>\u5176\u4e2d\u7269\u8d28\u5bfc\u6570\uff1a$\\frac{D(\\cdot)}{Dt} = \\frac{\\partial(\\cdot)}{\\partial t} + \\mathbf{v} \\cdot \\nabla(\\cdot)$</p>\n<ol start=\"3\">\n<li>\n<p><strong>\u89d2\u52a8\u91cf\u5b88\u6052</strong>\uff1a\n   - \u79ef\u5206\u5f62\u5f0f\uff1a$\\frac{d}{dt}\\int_{\\Omega_t} \\mathbf{x} \\times \\rho\\mathbf{v} \\, dv = \\int_{\\Omega_t} \\mathbf{x} \\times \\rho\\mathbf{b} \\, dv + \\int_{\\partial\\Omega_t} \\mathbf{x} \\times \\mathbf{t} \\, da$\n   - \u5c40\u90e8\u7ed3\u679c\uff1aCauchy\u5e94\u529b\u5f20\u91cf\u7684\u5bf9\u79f0\u6027 $\\boldsymbol{\\sigma} = \\boldsymbol{\\sigma}^T$</p>\n</li>\n<li>\n<p><strong>\u80fd\u91cf\u5b88\u6052</strong>\uff08\u70ed\u529b\u5b66\u7b2c\u4e00\u5b9a\u5f8b\uff09\uff1a\n$$\\rho\\frac{De}{Dt} = \\boldsymbol{\\sigma} : \\mathbf{D} - \\nabla \\cdot \\mathbf{q} + \\rho r$$\n\u5176\u4e2d\uff1a</p>\n</li>\n</ol>\n<ul>\n<li>$e$\uff1a\u6bd4\u5185\u80fd</li>\n<li>$\\boldsymbol{\\sigma} : \\mathbf{D}$\uff1a\u5e94\u529b\u529f\u7387\uff08\u673a\u68b0\u529f\uff09</li>\n<li>$\\mathbf{q}$\uff1a\u70ed\u6d41\u5411\u91cf\uff08Fourier\u5b9a\u5f8b\uff1a$\\mathbf{q} = -k\\nabla T$\uff09</li>\n<li>$r$\uff1a\u4f53\u79ef\u70ed\u6e90</li>\n</ul>\n<p>\u603b\u80fd\u91cf\u5f62\u5f0f\uff1a$\\rho\\frac{D}{Dt}(e + \\frac{1}{2}|\\mathbf{v}|^2) = \\nabla \\cdot (\\boldsymbol{\\sigma} \\cdot \\mathbf{v}) - \\nabla \\cdot \\mathbf{q} + \\rho(\\mathbf{b} \\cdot \\mathbf{v} + r)$</p>\n<ol start=\"5\">\n<li><strong>\u71b5\u4e0d\u7b49\u5f0f</strong>\uff08\u70ed\u529b\u5b66\u7b2c\u4e8c\u5b9a\u5f8b\uff09\uff1a\n$$\\rho\\frac{Ds}{Dt} + \\nabla \\cdot \\left(\\frac{\\mathbf{q}}{T}\\right) - \\frac{\\rho r}{T} \\geq 0$$\n\u5176\u4e2d $s$ \u662f\u6bd4\u71b5\uff0c$T$ \u662f\u7edd\u5bf9\u6e29\u5ea6\u3002</li>\n</ol>\n<p><strong>\u8fb9\u754c\u6761\u4ef6\u548c\u521d\u59cb\u6761\u4ef6</strong>\uff1a\n\u5b8c\u6574\u7684\u8fb9\u503c\u95ee\u9898\u9700\u8981\u6307\u5b9a\uff1a</p>\n<ol>\n<li>\n<p><strong>\u8fb9\u754c\u6761\u4ef6</strong>\uff1a\n   - Dirichlet\uff08\u672c\u8d28\uff09\uff1a$\\mathbf{u} = \\overline{\\mathbf{u}}$ \u5728 $\\partial\\Omega_u$ \u4e0a\n   - Neumann\uff08\u81ea\u7136\uff09\uff1a$\\mathbf{t} = \\boldsymbol{\\sigma} \\cdot \\mathbf{n} = \\overline{\\mathbf{t}}$ \u5728 $\\partial\\Omega_t$ \u4e0a\n   - Robin\uff08\u6df7\u5408\uff09\uff1a$\\alpha\\mathbf{u} + \\beta\\mathbf{t} = \\mathbf{g}$</p>\n</li>\n<li>\n<p><strong>\u521d\u59cb\u6761\u4ef6</strong>\uff1a\n   - \u4f4d\u7f6e\uff1a$\\mathbf{x}(\\mathbf{X}, 0) = \\mathbf{x}_0(\\mathbf{X})$\n   - \u901f\u5ea6\uff1a$\\mathbf{v}(\\mathbf{X}, 0) = \\mathbf{v}_0(\\mathbf{X})$</p>\n</li>\n</ol>\n<p><strong>\u865a\u529f\u539f\u7406\u548c\u5f31\u5f62\u5f0f</strong>\uff1a\n\u5f3a\u5f62\u5f0f\u7684\u5e73\u8861\u65b9\u7a0b\u7b49\u4ef7\u4e8e\u865a\u529f\u539f\u7406\uff0c\u5bf9\u4efb\u610f\u8fd0\u52a8\u5b66\u53ef\u5bb9\u8bb8\u7684\u865a\u4f4d\u79fb $\\delta\\mathbf{u}$\uff08\u6ee1\u8db3 $\\delta\\mathbf{u} = \\mathbf{0}$ \u5728 $\\partial\\Omega_u$ \u4e0a\uff09\uff1a\n$$\\delta W = \\delta W^{\\text{int}} - \\delta W^{\\text{ext}} = 0$$\n\u5c55\u5f00\u4e3a\uff1a\n$$\\int_{\\Omega} \\rho \\ddot{\\mathbf{u}} \\cdot \\delta\\mathbf{u} \\, dV + \\int_{\\Omega} \\boldsymbol{\\sigma} : \\delta\\boldsymbol{\\epsilon} \\, dV = \\int_{\\Omega} \\rho\\mathbf{b} \\cdot \\delta\\mathbf{u} \\, dV + \\int_{\\partial\\Omega_t} \\mathbf{t} \\cdot \\delta\\mathbf{u} \\, dA$$\n\u8fd9\u662f\u6709\u9650\u5143\u65b9\u6cd5\u548cMPM\u7684\u7406\u8bba\u57fa\u7840\uff0c\u901a\u8fc7\u5206\u90e8\u79ef\u5206\u5c06\u4e8c\u9636\u5bfc\u6570\u964d\u4e3a\u4e00\u9636\uff0c\u964d\u4f4e\u4e86\u5bf9\u89e3\u7684\u5149\u6ed1\u6027\u8981\u6c42\u3002</p>\n<h3 id=\"1212-mpm\">12.1.2 MPM\u7684\u57fa\u672c\u6846\u67b6</h3>\n<p>MPM\u5de7\u5999\u5730\u7ed3\u5408\u4e86\u62c9\u683c\u6717\u65e5\u7c92\u5b50\u6cd5\u548c\u6b27\u62c9\u7f51\u683c\u6cd5\u7684\u4f18\u52bf\u3002\u7269\u8d28\u70b9\uff08\u7c92\u5b50\uff09\u643a\u5e26\u6240\u6709\u7684\u5386\u53f2\u4fe1\u606f\u548c\u6750\u6599\u5c5e\u6027\uff0c\u800c\u80cc\u666f\u7f51\u683c\u4ec5\u7528\u4e8e\u6c42\u89e3\u52a8\u91cf\u65b9\u7a0b\uff0c\u907f\u514d\u4e86\u7f51\u683c\u7578\u53d8\u95ee\u9898\u3002</p>\n<p><strong>MPM\u7684\u6838\u5fc3\u601d\u60f3</strong>\uff1a</p>\n<ol>\n<li><strong>\u53cc\u91cd\u8868\u793a</strong>\uff1a\u6750\u6599\u65e2\u7531\u7c92\u5b50\u8868\u793a\uff08\u643a\u5e26\u5386\u53f2\uff09\uff0c\u53c8\u901a\u8fc7\u7f51\u683c\u6c42\u89e3\uff08\u9ad8\u6548\u8ba1\u7b97\uff09</li>\n<li><strong>\u4fe1\u606f\u6d41\u52a8</strong>\uff1a\u7c92\u5b50\u2192\u7f51\u683c\uff08\u6536\u96c6\u4fe1\u606f\uff09\u2192\u6c42\u89e3\u2192\u7f51\u683c\u2192\u7c92\u5b50\uff08\u66f4\u65b0\u72b6\u6001\uff09</li>\n<li><strong>\u81ea\u52a8\u5904\u7406\u62d3\u6251\u53d8\u5316</strong>\uff1a\u65e0\u9700\u663e\u5f0f\u8ffd\u8e2a\u754c\u9762\u6216\u91cd\u65b0\u7f51\u683c\u5316</li>\n<li><strong>\u6df7\u5408\u65b9\u6cd5\u4f18\u52bf</strong>\uff1a\u7ed3\u5408\u4e86\u62c9\u683c\u6717\u65e5\u65b9\u6cd5\u7684\u6750\u6599\u8ffd\u8e2a\u80fd\u529b\u548c\u6b27\u62c9\u65b9\u6cd5\u7684\u8ba1\u7b97\u6548\u7387</li>\n</ol>\n<p><strong>\u7406\u8bba\u57fa\u7840</strong>\uff1a\nMPM\u53ef\u4ee5\u770b\u4f5c\u662f\u6709\u9650\u5143\u65b9\u6cd5\u7684\u7c92\u5b50\u5316\u7248\u672c\u3002\u8003\u8651\u5f31\u5f62\u5f0f\uff1a\n$$\\int_\\Omega \\rho \\frac{D\\mathbf{v}}{Dt} \\cdot \\delta\\mathbf{v} \\, dV + \\int_\\Omega \\boldsymbol{\\sigma} : \\nabla\\delta\\mathbf{v} \\, dV = \\int_\\Omega \\rho\\mathbf{b} \\cdot \\delta\\mathbf{v} \\, dV$$\nMPM\u4f7f\u7528\u7c92\u5b50\u8fdb\u884c\u79ef\u5206\u8fd1\u4f3c\uff1a\n$$\\int_\\Omega (\\cdot) \\, dV \\approx \\sum_p V_p (\\cdot)_p$$\n<strong>\u79bb\u6563\u5316\u7b56\u7565</strong>\uff1a\n\u5c06\u8fde\u7eed\u4f53 $\\Omega$ \u79bb\u6563\u4e3a $N_p$ \u4e2a\u7c92\u5b50\uff0c\u6bcf\u4e2a\u7c92\u5b50 $p$ \u4ee3\u8868\u4e00\u5c0f\u5757\u6750\u6599\uff1a</p>\n<ul>\n<li>\u521d\u59cb\u4f53\u79ef\uff1a$V_p^0 = \\int_{\\Omega_p^0} dV$</li>\n<li>\u8d28\u91cf\u5b88\u6052\uff1a$m_p = \\rho_p^0 V_p^0 = \\text{const}$</li>\n<li>\u5f53\u524d\u4f53\u79ef\uff1a$V_p = J_p V_p^0$</li>\n<li>\u5bc6\u5ea6\u66f4\u65b0\uff1a$\\rho_p = m_p / V_p = \\rho_p^0 / J_p$</li>\n</ul>\n<p><strong>\u7c92\u5b50\u521d\u59cb\u5316</strong>\uff1a\n\u7c92\u5b50\u7684\u521d\u59cb\u5206\u5e03\u5f71\u54cd\u6570\u503c\u7cbe\u5ea6\uff1a</p>\n<ol>\n<li><strong>\u89c4\u5219\u5206\u5e03</strong>\uff1a\u5728\u6bcf\u4e2a\u7f51\u683c\u5355\u5143\u5185\u5747\u5300\u653e\u7f6e $2^d$ \u4e2a\u7c92\u5b50\uff08$d$ \u662f\u7ef4\u5ea6\uff09</li>\n<li><strong>\u968f\u673a\u6270\u52a8</strong>\uff1a\u6dfb\u52a0\u5c0f\u7684\u968f\u673a\u504f\u79fb\u907f\u514d\u4eba\u5de5\u5404\u5411\u5f02\u6027</li>\n<li><strong>\u81ea\u9002\u5e94\u5206\u5e03</strong>\uff1a\u6839\u636e\u5e94\u529b\u68af\u5ea6\u6216\u53d8\u5f62\u7a0b\u5ea6\u8c03\u6574\u7c92\u5b50\u5bc6\u5ea6</li>\n</ol>\n<p><strong>\u57fa\u672c\u53d8\u91cf</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u7c92\u5b50\u53d8\u91cf</strong>\uff08\u62c9\u683c\u6717\u65e5\uff09\uff1a\n   - \u4f4d\u7f6e\uff1a$\\mathbf{x}_p \\in \\mathbb{R}^d$\n   - \u901f\u5ea6\uff1a$\\mathbf{v}_p \\in \\mathbb{R}^d$\n   - \u8d28\u91cf\uff1a$m_p \\in \\mathbb{R}^+$\uff08\u5e38\u6570\uff09\n   - \u521d\u59cb\u4f53\u79ef\uff1a$V_p^0 \\in \\mathbb{R}^+$\uff08\u5e38\u6570\uff09\n   - \u5f53\u524d\u4f53\u79ef\uff1a$V_p = J_p V_p^0$\n   - \u53d8\u5f62\u68af\u5ea6\uff1a$\\mathbf{F}_p \\in \\mathbb{R}^{d \\times d}$\uff0c$\\det(\\mathbf{F}_p) &gt; 0$\n   - \u5e94\u529b\u5f20\u91cf\uff1a$\\boldsymbol{\\sigma}_p \\in \\mathbb{R}^{d \\times d}$\n   - \u5185\u90e8\u53d8\u91cf\uff1a</p>\n<ul>\n<li>\u5851\u6027\u5e94\u53d8\uff1a$\\boldsymbol{\\epsilon}_p^p$</li>\n<li>\u7b49\u6548\u5851\u6027\u5e94\u53d8\uff1a$\\bar{\\epsilon}_p^p$</li>\n<li>\u635f\u4f24\u53d8\u91cf\uff1a$d_p \\in [0,1]$</li>\n<li>\u6e29\u5ea6\uff1a$T_p$</li>\n<li>\u76f8\u573a\u53d8\u91cf\uff1a$\\phi_p$\uff08\u591a\u76f8\u6750\u6599\uff09</li>\n</ul>\n</li>\n<li>\n<p><strong>\u7f51\u683c\u53d8\u91cf</strong>\uff08\u6b27\u62c9\uff09\uff1a\n   - \u8282\u70b9\u4f4d\u7f6e\uff1a$\\mathbf{x}_i \\in \\mathbb{R}^d$\uff08\u56fa\u5b9a\uff09\n   - \u8282\u70b9\u901f\u5ea6\uff1a$\\mathbf{v}_i \\in \\mathbb{R}^d$\n   - \u8282\u70b9\u8d28\u91cf\uff1a$m_i \\in \\mathbb{R}^+$\n   - \u8282\u70b9\u52a8\u91cf\uff1a$\\mathbf{p}_i = m_i \\mathbf{v}_i$\n   - \u8282\u70b9\u5185\u529b\uff1a$\\mathbf{f}_i^{\\text{int}} \\in \\mathbb{R}^d$\n   - \u8282\u70b9\u5916\u529b\uff1a$\\mathbf{f}_i^{\\text{ext}} \\in \\mathbb{R}^d$</p>\n</li>\n</ol>\n<p><strong>MPM\u7684\u8ba1\u7b97\u5faa\u73af</strong>\uff08\u5355\u4e2a\u65f6\u95f4\u6b65 $[t^n, t^{n+1}]$\uff09\uff1a</p>\n<ol>\n<li><strong>\u7c92\u5b50\u5230\u7f51\u683c\u7684\u4f20\u8f93\uff08P2G\uff09</strong>\uff1a</li>\n</ol>\n<p><strong>\u8d28\u91cf\u4f20\u8f93</strong>\uff1a\n$$m_i = \\sum_p w_{ip} m_p$$\n\u8fd9\u786e\u4fdd\u4e86\u603b\u8d28\u91cf\u5b88\u6052\uff1a$\\sum_i m_i = \\sum_p m_p$</p>\n<p><strong>\u52a8\u91cf\u4f20\u8f93</strong>\uff1a\n$$\\mathbf{p}_i = \\sum_p w_{ip} m_p \\mathbf{v}_p$$\n\u5176\u4e2d\u63d2\u503c\u6743\u91cd\uff1a$w_{ip} = N_i(\\mathbf{x}_p)$\uff0c$N_i$ \u662f\u4e0e\u8282\u70b9 $i$ \u5173\u8054\u7684\u5f62\u51fd\u6570\u3002</p>\n<p><strong>\u901f\u5ea6\u8ba1\u7b97</strong>\uff1a\n$$\\mathbf{v}_i = \\begin{cases}\n   \\frac{\\mathbf{p}_i}{m_i} &amp; \\text{if } m_i &gt; \\epsilon_m \\\n   \\mathbf{0} &amp; \\text{otherwise}\n   \\end{cases}$$\n\u5176\u4e2d $\\epsilon_m$ \u662f\u9632\u6b62\u9664\u96f6\u7684\u5c0f\u91cf\uff08\u5982 $10^{-10}$\uff09\u3002</p>\n<ol start=\"2\">\n<li><strong>\u529b\u7684\u8ba1\u7b97</strong>\uff1a</li>\n</ol>\n<p><strong>\u5185\u529b</strong>\uff08\u6765\u81ea\u5e94\u529b\u6563\u5ea6\uff09\uff1a\n$$\\mathbf{f}_i^{\\text{int}} = -\\sum_p V_p \\boldsymbol{\\sigma}_p \\nabla w_{ip}$$\n\u8fd9\u662f\u865a\u529f\u539f\u7406\u7684\u79bb\u6563\u5f62\u5f0f\u3002\u5bf9\u4e8e\u4efb\u610f\u865a\u901f\u5ea6\u573a $\\delta\\mathbf{v} = \\sum_i \\delta\\mathbf{v}_i N_i$\uff1a\n$$\\delta W^{\\text{int}} = -\\int_\\Omega \\boldsymbol{\\sigma} : \\nabla\\delta\\mathbf{v} \\, dV \\approx -\\sum_p V_p \\boldsymbol{\\sigma}_p : \\sum_i \\delta\\mathbf{v}_i \\otimes \\nabla w_{ip}$$\n\u6574\u7406\u5f97\u5230\u8282\u70b9\u529b\uff1a\n$$\\mathbf{f}_i^{\\text{int}} = -\\frac{\\partial W^{\\text{int}}}{\\partial \\mathbf{v}_i}$$\n<strong>\u5916\u529b</strong>\uff1a</p>\n<ul>\n<li>\u4f53\u529b\u8d21\u732e\uff1a$\\mathbf{f}_i^{\\text{body}} = \\sum_p w_{ip} m_p \\mathbf{b}_p$</li>\n<li>\u8868\u9762\u529b\u8d21\u732e\uff1a$\\mathbf{f}_i^{\\text{traction}} = \\int_{\\partial\\Omega_t} N_i \\mathbf{t} \\, dA$</li>\n<li>\u603b\u5916\u529b\uff1a$\\mathbf{f}_i^{\\text{ext}} = \\mathbf{f}_i^{\\text{body}} + \\mathbf{f}_i^{\\text{traction}}$</li>\n</ul>\n<p><strong>\u963b\u5c3c\u529b</strong>\uff08\u53ef\u9009\uff09\uff1a\n$$\\mathbf{f}_i^{\\text{damp}} = -c_d m_i \\mathbf{v}_i$$\n\u5176\u4e2d $c_d$ \u662f\u963b\u5c3c\u7cfb\u6570\u3002</p>\n<ol start=\"3\">\n<li><strong>\u7f51\u683c\u4e0a\u7684\u52a8\u91cf\u66f4\u65b0</strong>\uff1a</li>\n</ol>\n<p><strong>\u663e\u5f0f\u6b27\u62c9</strong>\uff08\u4e00\u9636\u7cbe\u5ea6\uff09\uff1a\n$$\\mathbf{v}_i^{n+1} = \\mathbf{v}_i^n + \\frac{\\Delta t}{m_i} (\\mathbf{f}_i^{\\text{int}} + \\mathbf{f}_i^{\\text{ext}})$$\n<strong>\u8f9b\u6b27\u62c9</strong>\uff08\u4fdd\u6301\u76f8\u7a7a\u95f4\u4f53\u79ef\uff09\uff1a\n$$\\mathbf{p}_i^{n+1} = \\mathbf{p}_i^n + \\Delta t \\mathbf{f}_i$$\n   $$\\mathbf{v}_i^{n+1} = \\mathbf{p}_i^{n+1} / m_i$$\n<strong>\u901f\u5ea6Verlet</strong>\uff08\u4e8c\u9636\u7cbe\u5ea6\uff09\uff1a\n$$\\mathbf{v}_i^{n+1/2} = \\mathbf{v}_i^n + \\frac{\\Delta t}{2m_i} \\mathbf{f}_i^n$$\n   $$\\mathbf{v}_i^{n+1} = \\mathbf{v}_i^{n+1/2} + \\frac{\\Delta t}{2m_i} \\mathbf{f}_i^{n+1}$$</p>\n<ol start=\"4\">\n<li><strong>\u8fb9\u754c\u6761\u4ef6\u5904\u7406</strong>\uff1a</li>\n</ol>\n<p><strong>Dirichlet\u8fb9\u754c</strong>\uff08\u4f4d\u79fb/\u901f\u5ea6\u7ea6\u675f\uff09\uff1a</p>\n<ul>\n<li>\u56fa\u5b9a\u8fb9\u754c\uff1a$\\mathbf{v}_i = \\mathbf{0}$</li>\n<li>\u79fb\u52a8\u8fb9\u754c\uff1a$\\mathbf{v}_i = \\mathbf{v}_{\\text{prescribed}}(t)$</li>\n<li>\u6ed1\u79fb\u8fb9\u754c\uff1a$\\mathbf{v}_i \\cdot \\mathbf{n} = 0$\uff0c$\\mathbf{v}_i = \\mathbf{v}_i - (\\mathbf{v}_i \\cdot \\mathbf{n})\\mathbf{n}$</li>\n</ul>\n<p><strong>Neumann\u8fb9\u754c</strong>\uff08\u529b/\u5e94\u529b\u7ea6\u675f\uff09\uff1a\n   \u5df2\u5305\u542b\u5728 $\\mathbf{f}_i^{\\text{traction}}$ \u4e2d</p>\n<p><strong>\u63a5\u89e6\u8fb9\u754c</strong>\uff08\u5355\u4fa7\u7ea6\u675f\uff09\uff1a</p>\n<ul>\n<li>\u6cd5\u5411\uff1a$\\mathbf{v}_n = \\max(0, \\mathbf{v}_i \\cdot \\mathbf{n})$</li>\n<li>\u5207\u5411\uff08\u5e93\u4ed1\u6469\u64e6\uff09\uff1a\n$$\\mathbf{v}_t = \\begin{cases}\n     \\mathbf{0} &amp; \\text{if } ||\\mathbf{v}_t|| \\leq \\mu |\\mathbf{v}_n| \\\n     (1-\\mu|\\mathbf{v}_n|/||\\mathbf{v}_t||)\\mathbf{v}_t &amp; \\text{otherwise}\n     \\end{cases}$$\n\u5176\u4e2d $\\mu$ \u662f\u6469\u64e6\u7cfb\u6570\u3002</li>\n</ul>\n<ol start=\"5\">\n<li><strong>\u7f51\u683c\u5230\u7c92\u5b50\u7684\u4f20\u8f93\uff08G2P\uff09</strong>\uff1a</li>\n</ol>\n<p><strong>PIC\u66f4\u65b0</strong>\uff08Particle-In-Cell\uff0c\u6570\u503c\u8017\u6563\u5927\uff09\uff1a\n$$\\mathbf{v}_p^{n+1} = \\sum_i w_{ip} \\mathbf{v}_i^{n+1}$$\n<strong>FLIP\u66f4\u65b0</strong>\uff08Fluid-Implicit-Particle\uff0c\u4fdd\u6301\u7ec6\u8282\u4f46\u6709\u566a\u58f0\uff09\uff1a\n$$\\mathbf{v}_p^{n+1} = \\mathbf{v}_p^n + \\sum_i w_{ip} (\\mathbf{v}_i^{n+1} - \\mathbf{v}_i^n)$$\n<strong>PIC/FLIP\u6df7\u5408</strong>\uff08\u5e73\u8861\u8017\u6563\u548c\u566a\u58f0\uff09\uff1a\n$$\\mathbf{v}_p^{n+1} = (1-\\alpha)\\mathbf{v}_p^{\\text{PIC}} + \\alpha\\mathbf{v}_p^{\\text{FLIP}}$$\n\u5178\u578b\u53d6 $\\alpha \\in [0.95, 0.99]$\u3002</p>\n<p><strong>\u4f4d\u7f6e\u66f4\u65b0</strong>\uff1a\n$$\\mathbf{x}_p^{n+1} = \\mathbf{x}_p^n + \\Delta t \\mathbf{v}_p^{n+1}$$\n\u6216\u4f7f\u7528\u4e2d\u70b9\u6cd5\u63d0\u9ad8\u7cbe\u5ea6\uff1a\n$$\\mathbf{x}_p^{n+1} = \\mathbf{x}_p^n + \\Delta t \\sum_i w_{ip} \\frac{\\mathbf{v}_i^{n+1} + \\mathbf{v}_i^n}{2}$$</p>\n<ol start=\"6\">\n<li><strong>\u53d8\u5f62\u68af\u5ea6\u66f4\u65b0</strong>\uff1a</li>\n</ol>\n<p><strong>\u901f\u5ea6\u68af\u5ea6\u8ba1\u7b97</strong>\uff1a\n$$\\mathbf{L}_p = \\sum_i \\mathbf{v}_i^{n+1} \\otimes \\nabla w_{ip}$$\n<strong>\u4e00\u9636\u66f4\u65b0</strong>\uff08\u7b80\u5355\u4f46\u53ef\u80fd\u5f15\u5165\u8bef\u5dee\uff09\uff1a\n$$\\mathbf{F}_p^{n+1} = (\\mathbf{I} + \\Delta t \\mathbf{L}_p) \\mathbf{F}_p^n$$\n<strong>\u6307\u6570\u6620\u5c04</strong>\uff08\u4fdd\u6301\u6b63\u5b9a\u6027\u548c\u4f53\u79ef\uff09\uff1a\n$$\\mathbf{F}_p^{n+1} = \\exp(\\Delta t \\mathbf{L}_p) \\mathbf{F}_p^n$$\n\u5bf9\u4e8e\u5c0f\u65f6\u95f4\u6b65\uff0c\u4f7f\u7528Pad\u00e9\u8fd1\u4f3c\uff1a\n$$\\exp(\\mathbf{A}) \\approx (\\mathbf{I} - \\frac{1}{2}\\mathbf{A})^{-1}(\\mathbf{I} + \\frac{1}{2}\\mathbf{A})$$\n<strong>\u4f53\u79ef\u66f4\u65b0</strong>\uff1a\n$$J_p^{n+1} = \\det(\\mathbf{F}_p^{n+1})$$\n   $$V_p^{n+1} = J_p^{n+1} V_p^0$$</p>\n<ol start=\"7\">\n<li><strong>\u5e94\u529b\u66f4\u65b0</strong>\uff1a</li>\n</ol>\n<p>\u6839\u636e\u672c\u6784\u6a21\u578b\u8ba1\u7b97\u65b0\u7684\u5e94\u529b\uff1a\n$$\\boldsymbol{\\sigma}_p^{n+1} = \\mathcal{C}(\\mathbf{F}_p^{n+1}, {\\text{history}_p})$$\n\u5176\u4e2d $\\mathcal{C}$ \u662f\u672c\u6784\u5173\u7cfb\uff0chistory\u5305\u542b\uff1a</p>\n<ul>\n<li>\u5851\u6027\u5e94\u53d8\u5386\u53f2</li>\n<li>\u635f\u4f24\u6f14\u5316</li>\n<li>\u6e29\u5ea6\u5386\u53f2</li>\n<li>\u76f8\u53d8\u72b6\u6001</li>\n</ul>\n<p><strong>\u8fd4\u56de\u6620\u5c04\u7b97\u6cd5</strong>\uff08\u5851\u6027\uff09\uff1a</p>\n<ol>\n<li>\u5f39\u6027\u9884\u6d4b\uff1a$\\boldsymbol{\\sigma}^{\\text{trial}} = \\mathcal{C}^{\\text{elastic}}(\\mathbf{F}^{n+1})$</li>\n<li>\u68c0\u67e5\u5c48\u670d\uff1a$f(\\boldsymbol{\\sigma}^{\\text{trial}}) \\leq 0$\uff1f</li>\n<li>\u5851\u6027\u4fee\u6b63\uff1a\u5982\u679c $f &gt; 0$\uff0c\u6295\u5f71\u56de\u5c48\u670d\u9762</li>\n</ol>\n<p><strong>\u7b97\u6cd5\u7279\u70b9\u4e0e\u4f18\u52bf</strong>\uff1a</p>\n<ol>\n<li><strong>\u81ea\u52a8\u8d28\u91cf\u5b88\u6052</strong>\uff1a\u7c92\u5b50\u8d28\u91cf\u4e0d\u53d8\uff0c\u603b\u8d28\u91cf\u7cbe\u786e\u5b88\u6052</li>\n<li><strong>\u52a8\u91cf\u5b88\u6052</strong>\uff1a\u901a\u8fc7\u7f51\u683c\u6c42\u89e3\uff0c\u52a8\u91cf\u5b88\u6052\u5230\u673a\u5668\u7cbe\u5ea6</li>\n<li><strong>\u5386\u53f2\u4f9d\u8d56</strong>\uff1a\u7c92\u5b50\u643a\u5e26\u6240\u6709\u5386\u53f2\u53d8\u91cf\uff0c\u81ea\u7136\u5904\u7406\u8def\u5f84\u4f9d\u8d56\u6750\u6599</li>\n<li><strong>\u5927\u53d8\u5f62\u80fd\u529b</strong>\uff1a\u65e0\u7f51\u683c\u7578\u53d8\uff0c\u53ef\u5904\u7406\u4efb\u610f\u5927\u53d8\u5f62\u548c\u62d3\u6251\u53d8\u5316</li>\n<li><strong>\u591a\u7269\u7406\u8026\u5408</strong>\uff1a\u6613\u4e8e\u6dfb\u52a0\u70ed\u4f20\u5bfc\u3001\u76f8\u53d8\u3001\u5316\u5b66\u53cd\u5e94\u7b49</li>\n<li><strong>\u5e76\u884c\u53cb\u597d</strong>\uff1aP2G\u548cG2P\u9636\u6bb5\u9ad8\u5ea6\u5e76\u884c</li>\n</ol>\n<p><strong>\u6570\u503c\u8003\u8651</strong>\uff1a</p>\n<ol>\n<li><strong>\u7f51\u683c\u7a7f\u8d8a\u8bef\u5dee</strong>\uff1a\u7c92\u5b50\u7a7f\u8d8a\u7f51\u683c\u5355\u5143\u65f6\u53ef\u80fd\u5f15\u5165\u8bef\u5dee</li>\n<li><strong>\u6570\u503c\u65ad\u88c2</strong>\uff1a\u7c92\u5b50\u5206\u79bb\u53ef\u80fd\u5bfc\u81f4\u975e\u7269\u7406\u65ad\u88c2</li>\n<li><strong>\u7c92\u5b50\u805a\u96c6</strong>\uff1a\u67d0\u4e9b\u533a\u57df\u7c92\u5b50\u8fc7\u5ea6\u805a\u96c6\u5f71\u54cd\u7cbe\u5ea6</li>\n<li><strong>\u8fb9\u754c\u5904\u7406</strong>\uff1a\u9700\u8981\u7279\u6b8a\u6280\u672f\u5904\u7406\u590d\u6742\u8fb9\u754c</li>\n</ol>\n<h3 id=\"1213-\">12.1.3 \u7c92\u5b50-\u7f51\u683c\u4ea4\u4e92</h3>\n<p>\u7c92\u5b50\u4e0e\u7f51\u683c\u4e4b\u95f4\u7684\u4fe1\u606f\u4f20\u9012\u662fMPM\u7684\u6838\u5fc3\uff0c\u5f62\u51fd\u6570\u7684\u9009\u62e9\u76f4\u63a5\u5f71\u54cd\u6570\u503c\u7cbe\u5ea6\u3001\u7a33\u5b9a\u6027\u548c\u8ba1\u7b97\u6548\u7387\u3002\u672c\u8282\u6df1\u5165\u63a2\u8ba8\u5f62\u51fd\u6570\u7406\u8bba\u3001\u5b9e\u73b0\u7ec6\u8282\u548c\u6027\u80fd\u4f18\u5316\u3002</p>\n<p><strong>\u5f62\u51fd\u6570\u7684\u6570\u5b66\u57fa\u7840</strong>\uff1a\n\u5f62\u51fd\u6570 $N_i(\\mathbf{x})$ \u662f\u5b9a\u4e49\u5728\u7f51\u683c\u4e0a\u7684\u57fa\u51fd\u6570\uff0c\u5fc5\u987b\u6ee1\u8db3\u4ee5\u4e0b\u6027\u8d28\uff1a</p>\n<ol>\n<li><strong>\u63d2\u503c\u6027</strong>\uff08\u5206\u5272\u5355\u4f4d\u6027\uff09\uff1a$\\sum_i N_i(\\mathbf{x}) = 1$ \u5bf9\u6240\u6709 $\\mathbf{x} \\in \\Omega$</li>\n<li><strong>\u7d27\u652f\u6027</strong>\uff1a$N_i(\\mathbf{x}) = 0$ \u5f53 $||\\mathbf{x} - \\mathbf{x}_i|| &gt; r_{\\text{support}}$</li>\n<li><strong>\u975e\u8d1f\u6027</strong>\uff1a$N_i(\\mathbf{x}) \\geq 0$\uff08\u4fdd\u8bc1\u7269\u7406\u610f\u4e49\uff09</li>\n<li><strong>\u5149\u6ed1\u6027</strong>\uff1a\u81f3\u5c11 $C^0$ \u8fde\u7eed\uff0c\u7406\u60f3\u60c5\u51b5\u4e0b $C^{k-1}$\uff08$k$ \u9636\u7cbe\u5ea6\u9700\u8981\uff09</li>\n<li><strong>\u5c40\u90e8\u6027</strong>\uff1a\u6bcf\u4e2a\u70b9\u6700\u591a\u88ab\u6709\u9650\u4e2a\u5f62\u51fd\u6570\u8986\u76d6</li>\n</ol>\n<p><strong>\u7406\u8bba\u57fa\u7840</strong>\uff1a\n\u4ece\u91cd\u6784\u7406\u8bba\u89d2\u5ea6\uff0c\u4efb\u610f\u51fd\u6570 $f(\\mathbf{x})$ \u53ef\u4ee5\u8fd1\u4f3c\u4e3a\uff1a\n$$f(\\mathbf{x}) \\approx \\sum_i f_i N_i(\\mathbf{x})$$\n\u91cd\u6784\u8bef\u5dee\u4e0e\u5f62\u51fd\u6570\u7684\u903c\u8fd1\u9636\u6570\u76f8\u5173\uff1a\n$$||f - f_h||_{L^2} = O(h^{k+1})$$\n\u5176\u4e2d $k$ \u662f\u591a\u9879\u5f0f\u7cbe\u5ea6\u9636\u6570\u3002</p>\n<p><strong>\u5e38\u7528\u5f62\u51fd\u6570\u65cf</strong>\uff1a</p>\n<ol>\n<li><strong>\u7ebf\u6027\u5f62\u51fd\u6570</strong>\uff08\u5e10\u7bf7\u51fd\u6570/\u4e09\u7ebf\u6027\u63d2\u503c\uff09\uff1a</li>\n</ol>\n<p>\u4e00\u7ef4\u57fa\u51fd\u6570\uff1a\n$$N^1(\\xi) = \\begin{cases}\n   1 - |\\xi| &amp; |\\xi| &lt; 1 \\\n   0 &amp; \\text{otherwise}\n   \\end{cases}$$\n\u5bfc\u6570\uff1a\n$$\\frac{dN^1}{d\\xi} = \\begin{cases}\n   -\\text{sign}(\\xi) &amp; |\\xi| &lt; 1 \\\n   0 &amp; \\text{otherwise}\n   \\end{cases}$$\n\u591a\u7ef4\u5f20\u91cf\u79ef\uff08\u5206\u79bb\u53d8\u91cf\uff09\uff1a\n$$N(\\boldsymbol{\\xi}) = \\prod_{d=1}^D N^1(\\xi_d)$$\n\u68af\u5ea6\uff08\u94fe\u5f0f\u6cd5\u5219\uff09\uff1a\n$$\\nabla N = \\frac{1}{h}\\begin{bmatrix}\n   \\frac{dN^1}{d\\xi_1}(\\xi_1) \\prod_{d=2}^D N^1(\\xi_d) \\\n   N^1(\\xi_1) \\frac{dN^1}{d\\xi_2}(\\xi_2) \\prod_{d=3}^D N^1(\\xi_d) \\\n   \\vdots\n   \\end{bmatrix}$$\n\u7279\u70b9\uff1a</p>\n<ul>\n<li>\u652f\u6491\u57df\uff1a$2^D$ \u4e2a\u8282\u70b9\uff082\u00d72\u00d72 in 3D\uff09</li>\n<li>\u8fde\u7eed\u6027\uff1a$C^0$\uff08\u4f4d\u7f6e\u8fde\u7eed\uff0c\u901f\u5ea6\u4e0d\u8fde\u7eed\uff09</li>\n<li>\u8ba1\u7b97\u6548\u7387\uff1a\u6700\u9ad8\uff08\u7b80\u5355\u7684\u52a0\u51cf\u4e58\u9664\uff09</li>\n<li>\u6570\u503c\u95ee\u9898\uff1a\u7f51\u683c\u7a7f\u8d8a\u566a\u58f0\u3001\u529b\u7684\u4e0d\u8fde\u7eed\u6027</li>\n</ul>\n<ol start=\"2\">\n<li><strong>\u4e8c\u6b21B\u6837\u6761</strong>\uff1a</li>\n</ol>\n<p>\u4e00\u7ef4\u57fa\u51fd\u6570\uff08\u4e2d\u5fc3\u5316\uff09\uff1a\n$$N^2(\\xi) = \\begin{cases}\n   \\frac{3}{4} - \\xi^2 &amp; |\\xi| \\leq \\frac{1}{2} \\\n   \\frac{1}{2}(\\frac{3}{2} - |\\xi|)^2 &amp; \\frac{1}{2} &lt; |\\xi| \\leq \\frac{3}{2} \\\n   0 &amp; |\\xi| &gt; \\frac{3}{2}\n   \\end{cases}$$\n\u5bfc\u6570\uff1a\n$$\\frac{dN^2}{d\\xi} = \\begin{cases}\n   -2\\xi &amp; |\\xi| \\leq \\frac{1}{2} \\\n   -\\text{sign}(\\xi)(\\frac{3}{2} - |\\xi|) &amp; \\frac{1}{2} &lt; |\\xi| \\leq \\frac{3}{2} \\\n   0 &amp; |\\xi| &gt; \\frac{3}{2}\n   \\end{cases}$$\n\u7279\u70b9\uff1a</p>\n<ul>\n<li>\u652f\u6491\u57df\uff1a$3^D$ \u4e2a\u8282\u70b9\uff083\u00d73\u00d73 in 3D\uff09</li>\n<li>\u8fde\u7eed\u6027\uff1a$C^1$\uff08\u901f\u5ea6\u8fde\u7eed\uff09</li>\n<li>\u7cbe\u5ea6\uff1a$O(h^3)$ \u6536\u655b\u7387</li>\n<li>\u5e94\u7528\uff1a\u6d41\u4f53\u6a21\u62df\u9996\u9009\uff08\u5e73\u6ed1\u6027\u597d\uff09</li>\n</ul>\n<ol start=\"3\">\n<li><strong>\u4e09\u6b21B\u6837\u6761</strong>\uff1a</li>\n</ol>\n<p>\u4e00\u7ef4\u57fa\u51fd\u6570\uff1a\n$$N^3(\\xi) = \\frac{1}{6}\\begin{cases}\n   (2-|\\xi|)^3 &amp; 1 &lt; |\\xi| \\leq 2 \\\n   4 - 6\\xi^2 + 3|\\xi|^3 &amp; |\\xi| \\leq 1 \\\n   0 &amp; |\\xi| &gt; 2\n   \\end{cases}$$\n\u5bfc\u6570\uff1a\n$$\\frac{dN^3}{d\\xi} = \\frac{1}{6}\\begin{cases}\n   -3\\text{sign}(\\xi)(2-|\\xi|)^2 &amp; 1 &lt; |\\xi| \\leq 2 \\\n   -12\\xi + 9\\xi|\\xi| &amp; |\\xi| \\leq 1 \\\n   0 &amp; |\\xi| &gt; 2\n   \\end{cases}$$\n\u7279\u70b9\uff1a</p>\n<ul>\n<li>\u652f\u6491\u57df\uff1a$4^D$ \u4e2a\u8282\u70b9\uff084\u00d74\u00d74 in 3D\uff09</li>\n<li>\u8fde\u7eed\u6027\uff1a$C^2$\uff08\u52a0\u901f\u5ea6\u8fde\u7eed\uff09</li>\n<li>\u7cbe\u5ea6\uff1a$O(h^4)$ \u6536\u655b\u7387</li>\n<li>\u4ee3\u4ef7\uff1a\u8ba1\u7b97\u91cf\u5927\uff0c\u5185\u5b58\u5e26\u5bbd\u9700\u6c42\u9ad8</li>\n</ul>\n<ol start=\"4\">\n<li><strong>GIMP\uff08Generalized Interpolation Material Point\uff09\u5f62\u51fd\u6570</strong>\uff1a</li>\n</ol>\n<p>\u6838\u5fc3\u601d\u60f3\uff1a\u8003\u8651\u7c92\u5b50\u7684\u6709\u9650\u5c3a\u5bf8\uff0c\u901a\u8fc7\u5377\u79ef\u83b7\u5f97\u5f62\u51fd\u6570\uff1a\n$$S_{ip} = \\int_{\\Omega_p} N_i(\\mathbf{x}) \\chi_p(\\mathbf{x}) d\\mathbf{x}$$\n\u5176\u4e2d $\\chi_p$ \u662f\u7c92\u5b50\u7684\u7279\u5f81\u51fd\u6570\uff08\u5f62\u72b6\u51fd\u6570\uff09\u3002</p>\n<p>\u5bf9\u4e8e\u8f74\u5bf9\u9f50\u77e9\u5f62\u7c92\u5b50\uff0c\u4e00\u7ef4GIMP\u6743\u91cd\uff1a\n$$S^1_{ip}(\\xi, l) = \\begin{cases}\n   1 - \\frac{(|\\xi|-l)^2}{4l} &amp; l &lt; |\\xi| &lt; 1+l \\\n   1 - |\\xi| &amp; |\\xi| &lt; l \\\n   0 &amp; |\\xi| &gt; 1+l\n   \\end{cases}$$\n\u5176\u4e2d $l = l_p/h$ \u662f\u5f52\u4e00\u5316\u7c92\u5b50\u534a\u5bbd\u5ea6\u3002</p>\n<p>\u68af\u5ea6\uff08\u4f7f\u7528Leibniz\u79ef\u5206\u6cd5\u5219\uff09\uff1a\n$$\\nabla S_{ip} = \\int_{\\Omega_p} \\nabla N_i(\\mathbf{x}) \\chi_p(\\mathbf{x}) d\\mathbf{x}$$\n\u4f18\u52bf\uff1a</p>\n<ul>\n<li>\u51cf\u5c11\u7c92\u5b50\u7a7f\u900f</li>\n<li>\u66f4\u597d\u7684\u52a8\u91cf\u4f20\u9012</li>\n<li>\u81ea\u9002\u5e94\u5206\u8fa8\u7387</li>\n</ul>\n<p>\u53d8\u79cd\uff1a</p>\n<ul>\n<li>cpGIMP\uff1a\u6536\u7f29\u7c92\u5b50\u57dfGIMP</li>\n<li>uGIMP\uff1a\u5747\u5300GIMP\uff08\u7b80\u5316\u8ba1\u7b97\uff09</li>\n</ul>\n<p><strong>\u6743\u91cd\u548c\u68af\u5ea6\u7684\u9ad8\u6548\u8ba1\u7b97</strong>\uff1a</p>\n<p>\u7ed9\u5b9a\u7c92\u5b50\u4f4d\u7f6e $\\mathbf{x}_p$ \u548c\u7f51\u683c\u8282\u70b9 $i$ \u7684\u4f4d\u7f6e $\\mathbf{x}_i$\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5750\u6807\u53d8\u6362</strong>\uff1a\n   <code>\u57fa\u8282\u70b9\u7d22\u5f15: base = floor(x_p / h)\n   \u5c40\u90e8\u5750\u6807: \u03be = (x_p - x_i) / h\n   \u76f8\u5bf9\u7d22\u5f15: offset = i - base</code></p>\n</li>\n<li>\n<p><strong>\u6743\u91cd\u8ba1\u7b97\u4f18\u5316</strong>\uff1a\n   - <strong>\u67e5\u8868\u6cd5</strong>\uff1a\u9884\u8ba1\u7b97 $N(\\xi)$ \u5728\u7ec6\u5206\u7f51\u683c\u4e0a\u7684\u503c\n   - <strong>\u5206\u6bb5\u591a\u9879\u5f0f</strong>\uff1a\u76f4\u63a5\u8ba1\u7b97\uff0c\u5229\u7528\u5206\u652f\u9884\u6d4b\n   - <strong>SIMD\u5411\u91cf\u5316</strong>\uff1a\u540c\u65f6\u8ba1\u7b97\u591a\u4e2a\u7ef4\u5ea6</p>\n</li>\n<li>\n<p><strong>\u68af\u5ea6\u8ba1\u7b97\u6280\u5de7</strong>\uff1a\n$$\\nabla w_{ip} = \\frac{1}{h} \\begin{bmatrix}\n   \\frac{\\partial N}{\\partial \\xi_1} \\frac{N(\\xi_2)N(\\xi_3)}{N(\\boldsymbol{\\xi})} \\\n   \\frac{\\partial N}{\\partial \\xi_2} \\frac{N(\\xi_1)N(\\xi_3)}{N(\\boldsymbol{\\xi})} \\\n   \\frac{\\partial N}{\\partial \\xi_3} \\frac{N(\\xi_1)N(\\xi_2)}{N(\\boldsymbol{\\xi})}\n   \\end{bmatrix} w_{ip}$$\n\u907f\u514d\u91cd\u590d\u8ba1\u7b97\u57fa\u51fd\u6570\u503c\u3002</p>\n</li>\n</ol>\n<p><strong>\u8bef\u5dee\u5206\u6790\u4e0e\u6536\u655b\u6027</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u63d2\u503c\u8bef\u5dee\u4f30\u8ba1</strong>\uff1a\n   \u5bf9\u4e8e $k$ \u9636\u7cbe\u5ea6\u7684\u5f62\u51fd\u6570\uff1a\n$$||f - \\Pi_h f||_{L^2(\\Omega)} \\leq C h^{k+1} ||f||_{H^{k+1}(\\Omega)}$$\n\u5176\u4e2d $\\Pi_h$ \u662f\u63d2\u503c\u7b97\u5b50\u3002</p>\n</li>\n<li>\n<p><strong>\u79ef\u5206\u7cbe\u5ea6</strong>\uff1a\n   \u6570\u503c\u79ef\u5206\u8bef\u5dee\uff1a\n$$\\left|\\int_\\Omega f dV - \\sum_p V_p f_p\\right| \\leq C h^{k+1} ||f||_{W^{k+1,1}(\\Omega)}$$</p>\n</li>\n<li>\n<p><strong>\u6761\u4ef6\u6570\u5206\u6790</strong>\uff1a\n   \u8d28\u91cf\u77e9\u9635\u6761\u4ef6\u6570\uff1a$\\kappa(M) = O(1)$\uff08\u5bf9\u89d2\u5360\u4f18\uff09\n   \u521a\u5ea6\u77e9\u9635\u6761\u4ef6\u6570\uff1a$\\kappa(K) = O(h^{-2})$\uff08\u4e0eFEM\u76f8\u540c\uff09</p>\n</li>\n</ol>\n<p><strong>\u6570\u503c\u7a33\u5b9a\u6027\u8003\u8651</strong>\uff1a</p>\n<ol>\n<li><strong>\u8d28\u91cf\u805a\u96c6\u95ee\u9898</strong>\uff1a\n   \u5f53 $m_i = \\sum_p w_{ip} m_p &lt; \\epsilon_m$ \u65f6\uff1a</li>\n</ol>\n<ul>\n<li>\u8df3\u8fc7\u8be5\u8282\u70b9\u7684\u529b\u8ba1\u7b97</li>\n<li>\u6216\u4f7f\u7528\u6b63\u5219\u5316\uff1a$\\tilde{m}_i = \\max(m_i, \\epsilon_m)$</li>\n</ul>\n<ol start=\"2\">\n<li>\n<p><strong>\u68af\u5ea6\u7206\u70b8\u9884\u9632</strong>\uff1a\n   \u9650\u5236\u901f\u5ea6\u68af\u5ea6\uff1a\n$$||\\mathbf{L}_p|| \\leq L_{\\max} = \\frac{c_{\\max}}{h}$$\n\u5176\u4e2d $c_{\\max}$ \u662f\u6750\u6599\u6ce2\u901f\u4e0a\u754c\u3002</p>\n</li>\n<li>\n<p><strong>\u8fb9\u754c\u9644\u8fd1\u7684\u5904\u7406</strong>\uff1a\n   - \u4f7f\u7528\u4fee\u6b63\u7684\u5f62\u51fd\u6570\u4fdd\u8bc1\u5206\u5272\u5355\u4f4d\u6027\n   - \u6216\u91c7\u7528\u865a\u62df\u8282\u70b9\u6280\u672f</p>\n</li>\n</ol>\n<p><strong>\u9ad8\u6548\u5b9e\u73b0\u7b56\u7565</strong>\uff1a</p>\n<ol>\n<li><strong>\u6570\u636e\u7ed3\u6784\u4f18\u5316</strong>\uff1a\n   ```\n   struct GridNode {\n       float mass;\n       vec3 momentum;\n       vec3 force;\n       // \u586b\u5145\u5230\u7f13\u5b58\u884c\u8fb9\u754c\n   };</li>\n</ol>\n<p>struct Particle {\n       vec3 position;\n       vec3 velocity;\n       mat3 F;  // \u53d8\u5f62\u68af\u5ea6\n       mat3 stress;\n       float volume;\n       // \u6309\u8bbf\u95ee\u6a21\u5f0f\u7ec4\u7ec7\n   };\n   ```</p>\n<ol start=\"2\">\n<li>\n<p><strong>\u5e76\u884c\u5316\u7b56\u7565</strong>\uff1a\n   - <strong>P2G\u5e76\u884c</strong>\uff1a\u4f7f\u7528\u539f\u5b50\u64cd\u4f5c\u6216\u56fe\u7740\u8272\u907f\u514d\u7ade\u4e89\n   - <strong>\u529b\u8ba1\u7b97</strong>\uff1a\u5b8c\u5168\u5e76\u884c\uff08\u53ea\u8bfb\u7c92\u5b50\u6570\u636e\uff09\n   - <strong>G2P\u5e76\u884c</strong>\uff1a\u6bcf\u4e2a\u7c92\u5b50\u72ec\u7acb\u66f4\u65b0</p>\n</li>\n<li>\n<p><strong>\u5185\u5b58\u8bbf\u95ee\u4f18\u5316</strong>\uff1a\n   - <strong>\u7c92\u5b50\u6392\u5e8f</strong>\uff1a\u6309\u7a7a\u95f4\u4f4d\u7f6e\u6392\u5e8f\uff08Z-order\u3001Hilbert\u66f2\u7ebf\uff09\n   - <strong>\u7f13\u5b58\u9884\u53d6</strong>\uff1a\u663e\u5f0f\u9884\u53d6\u4e0b\u4e00\u4e2a\u7c92\u5b50\u6570\u636e\n   - <strong>AoS vs SoA</strong>\uff1a\u6839\u636e\u8bbf\u95ee\u6a21\u5f0f\u9009\u62e9</p>\n</li>\n<li>\n<p><strong>\u8ba1\u7b97\u4f18\u5316</strong>\uff1a\n   ```\n   // \u907f\u514d\u91cd\u590d\u8ba1\u7b97\n   float wx = N1(xi.x);\n   float wy = N1(xi.y);\n   float wz = N1(xi.z);\n   float wip = wx * wy * wz;</p>\n</li>\n</ol>\n<p>// \u5229\u7528\u5bf9\u79f0\u6027\n   grad_wip.x = dN1(xi.x) * wy * wz / h;\n   ```</p>\n<p><strong>\u81ea\u9002\u5e94\u5f62\u51fd\u6570\u9009\u62e9</strong>\uff1a</p>\n<p>\u6839\u636e\u5c40\u90e8\u7269\u7406\u72b6\u6001\u52a8\u6001\u9009\u62e9\u5f62\u51fd\u6570\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5e94\u53d8\u7387\u51c6\u5219</strong>\uff1a\n$$\\text{order} = \\begin{cases}\n   1 &amp; ||\\mathbf{D}|| &gt; D_{\\text{thresh}} \\\n   2 &amp; \\text{otherwise}\n   \\end{cases}$$</p>\n</li>\n<li>\n<p><strong>\u6750\u6599\u7c7b\u578b\u51c6\u5219</strong>\uff1a\n   - \u56fa\u4f53\uff1a\u4e8c\u6b21B\u6837\u6761\uff08\u5e73\u6ed1\u5e94\u529b\uff09\n   - \u6d41\u4f53\uff1a\u4e09\u6b21B\u6837\u6761\uff08\u9ad8\u7cbe\u5ea6\uff09\n   - \u9897\u7c92\uff1a\u7ebf\u6027\uff08\u8ba1\u7b97\u6548\u7387\uff09</p>\n</li>\n<li>\n<p><strong>\u6df7\u5408\u5f62\u51fd\u6570</strong>\uff1a\n   \u5728\u8fc7\u6e21\u533a\u57df\u4f7f\u7528\u52a0\u6743\u7ec4\u5408\uff1a\n$$N^{\\text{mix}} = \\alpha N^{\\text{low}} + (1-\\alpha) N^{\\text{high}}$$\n<strong>\u5f62\u51fd\u6570\u9009\u62e9\u51b3\u7b56\u6811</strong>\uff1a</p>\n</li>\n</ol>\n<pre class=\"codehilite\"><code>\u6750\u6599\u7c7b\u578b\uff1f\n\u251c\u2500 \u5f39\u6027\u56fa\u4f53\n\u2502  \u2514\u2500 \u4e8c\u6b21B\u6837\u6761\uff08C\u00b9\u8fde\u7eed\u6027\uff09\n\u251c\u2500 \u6d41\u4f53\n\u2502  \u251c\u2500 \u4f4e\u96f7\u8bfa\u6570 \u2192 \u4e09\u6b21B\u6837\u6761\n\u2502  \u2514\u2500 \u9ad8\u96f7\u8bfa\u6570 \u2192 \u4e8c\u6b21B\u6837\u6761\n\u251c\u2500 \u9897\u7c92\u6750\u6599\n\u2502  \u2514\u2500 \u7ebf\u6027 + GIMP\uff08\u9632\u7a7f\u900f\uff09\n\u2514\u2500 \u5927\u53d8\u5f62\u5851\u6027\n   \u2514\u2500 \u81ea\u9002\u5e94\uff08\u5e94\u53d8\u7387\u76f8\u5173\uff09\n</code></pre>\n\n<h3 id=\"1214\">12.1.4 \u65f6\u95f4\u79ef\u5206\u65b9\u6848</h3>\n<p>MPM\u4e2d\u5e38\u7528\u7684\u65f6\u95f4\u79ef\u5206\u65b9\u6848\u5305\u62ec\uff1a</p>\n<ol>\n<li>\n<p><strong>\u663e\u5f0f\u79ef\u5206</strong>\uff1a\n   - \u524d\u5411\u6b27\u62c9\uff1a\u7b80\u5355\u4f46\u7a33\u5b9a\u6027\u53d7\u9650\n   - \u8f9b\u6b27\u62c9\uff1a\u4fdd\u6301\u80fd\u91cf\u5b88\u6052\u6027\u8d28\n   - Runge-Kutta\u65b9\u6cd5\uff1a\u9ad8\u9636\u7cbe\u5ea6</p>\n</li>\n<li>\n<p><strong>\u534a\u9690\u5f0f\u79ef\u5206</strong>\uff1a\n   - \u5bf9\u67d0\u4e9b\u9879\uff08\u5982\u5f39\u6027\u529b\uff09\u8fdb\u884c\u9690\u5f0f\u5904\u7406\n   - \u63d0\u9ad8\u7a33\u5b9a\u6027\uff0c\u5141\u8bb8\u66f4\u5927\u7684\u65f6\u95f4\u6b65\u957f</p>\n</li>\n</ol>\n<p><strong>CFL\u6761\u4ef6</strong>\uff1a\n$$\\Delta t \\leq C \\frac{h}{c}$$\n\u5176\u4e2d $c = \\sqrt{E/\\rho}$ \u662f\u6750\u6599\u4e2d\u7684\u58f0\u901f\uff0c$C$ \u662fCFL\u6570\uff08\u901a\u5e38\u53d60.1-0.5\uff09\u3002</p>\n<h3 id=\"1215\">12.1.5 \u672c\u6784\u6a21\u578b</h3>\n<p>MPM\u53ef\u4ee5\u5904\u7406\u5404\u79cd\u6750\u6599\u6a21\u578b\uff1a</p>\n<ol>\n<li>\n<p><strong>\u7ebf\u5f39\u6027</strong>\uff1a\n$$\\boldsymbol{\\sigma} = \\lambda \\text{tr}(\\boldsymbol{\\epsilon})\\mathbf{I} + 2\\mu\\boldsymbol{\\epsilon}$$</p>\n</li>\n<li>\n<p><strong>\u8d85\u5f39\u6027</strong>\uff08Neo-Hookean\uff09\uff1a\n$$\\boldsymbol{\\sigma} = \\mu(\\mathbf{B} - \\mathbf{I}) + \\lambda\\ln(J)\\mathbf{I}$$\n\u5176\u4e2d $\\mathbf{B} = \\mathbf{F}\\mathbf{F}^T$\uff0c$J = \\det(\\mathbf{F})$\u3002</p>\n</li>\n<li>\n<p><strong>\u5851\u6027\u6a21\u578b</strong>\uff1a\n   - von Mises\u5c48\u670d\u51c6\u5219\n   - Drucker-Prager\u6a21\u578b\uff08\u9002\u7528\u4e8e\u9897\u7c92\u6750\u6599\uff09\n   - \u96ea\u7684\u672c\u6784\u6a21\u578b</p>\n</li>\n</ol>\n<p><strong>\u5e94\u529b\u8ba1\u7b97</strong>\u901a\u5e38\u6d89\u53ca\uff1a</p>\n<ol>\n<li>\u8ba1\u7b97\u5e94\u53d8\u6216\u53d8\u5f62\u68af\u5ea6</li>\n<li>\u5e94\u7528\u672c\u6784\u5173\u7cfb\u83b7\u5f97\u5e94\u529b</li>\n<li>\u8003\u8651\u5851\u6027\u4fee\u6b63\uff08\u5982\u679c\u9002\u7528\uff09</li>\n</ol>\n<h2 id=\"122-mls-mpm_1\">12.2 MLS-MPM\uff08\u79fb\u52a8\u6700\u5c0f\u4e8c\u4e58\u7269\u8d28\u70b9\u6cd5\uff09</h2>\n<h3 id=\"1221-mpm\">12.2.1 \u4f20\u7edfMPM\u7684\u5c40\u9650\u6027</h3>\n<p>\u4f20\u7edfMPM\u867d\u7136\u5728\u5904\u7406\u5927\u53d8\u5f62\u95ee\u9898\u4e0a\u6709\u4f18\u52bf\uff0c\u4f46\u5b58\u5728\u4e00\u4e9b\u56fa\u6709\u95ee\u9898\uff1a</p>\n<ol>\n<li><strong>\u6570\u503c\u8017\u6563</strong>\uff1a\u7c92\u5b50-\u7f51\u683c-\u7c92\u5b50\u7684\u4f20\u8f93\u8fc7\u7a0b\u5f15\u5165\u4eba\u5de5\u7c98\u6027</li>\n<li><strong>\u89d2\u52a8\u91cf\u5b88\u6052</strong>\uff1aFLIP\uff08Fluid Implicit Particle\uff09\u65b9\u6cd5\u4fdd\u6301\u89d2\u52a8\u91cf\u4f46\u5f15\u5165\u566a\u58f0</li>\n<li><strong>\u8ba1\u7b97\u6548\u7387</strong>\uff1a\u9700\u8981\u5b58\u50a8\u548c\u66f4\u65b0\u5927\u91cf\u7c92\u5b50\u4fe1\u606f</li>\n<li><strong>\u7cbe\u5ea6\u95ee\u9898</strong>\uff1a\u4f4e\u9636\u5f62\u51fd\u6570\u9650\u5236\u4e86\u5e94\u529b\u8ba1\u7b97\u7684\u7cbe\u5ea6</li>\n</ol>\n<h3 id=\"1222-mls-mpm\">12.2.2 MLS-MPM\u7684\u7406\u8bba\u63a8\u5bfc</h3>\n<p>MLS-MPM\u7684\u6838\u5fc3\u601d\u60f3\u662f\u4f7f\u7528\u79fb\u52a8\u6700\u5c0f\u4e8c\u4e58\uff08Moving Least Squares\uff09\u65b9\u6cd5\u5728\u7c92\u5b50\u5468\u56f4\u91cd\u6784\u901f\u5ea6\u573a\uff0c\u4ece\u800c\u83b7\u5f97\u66f4\u7cbe\u786e\u7684\u53d8\u5f62\u68af\u5ea6\u66f4\u65b0\u3002</p>\n<p><strong>\u901f\u5ea6\u573a\u91cd\u6784</strong>\uff1a\n\u5047\u8bbe\u5728\u7c92\u5b50 $p$ \u9644\u8fd1\u7684\u901f\u5ea6\u573a\u53ef\u4ee5\u8868\u793a\u4e3a\uff1a\n$$\\mathbf{v}(\\mathbf{x}) = \\mathbf{c}_0 + \\mathbf{C}_1 (\\mathbf{x} - \\mathbf{x}_p)$$\n\u5176\u4e2d $\\mathbf{c}_0$ \u662f\u5e38\u6570\u9879\uff0c$\\mathbf{C}_1$ \u662f\u4e00\u9636\u5bfc\u6570\u77e9\u9635\u3002</p>\n<p><strong>\u6700\u5c0f\u4e8c\u4e58\u62df\u5408</strong>\uff1a\n\u901a\u8fc7\u6700\u5c0f\u5316\u52a0\u6743\u8bef\u5dee\uff1a\n$$E = \\sum_i w_{ip} m_i ||\\mathbf{v}_i - \\mathbf{c}_0 - \\mathbf{C}_1(\\mathbf{x}_i - \\mathbf{x}_p)||^2$$\n\u6c42\u89e3\u5f97\u5230\uff1a\n$$\\mathbf{c}_0 = \\sum_i w_{ip} \\mathbf{v}_i$$\n$$\\mathbf{C}_1 = \\left(\\sum_i w_{ip} \\mathbf{v}_i \\otimes (\\mathbf{x}_i - \\mathbf{x}_p)\\right) \\mathbf{D}_p^{-1}$$\n\u5176\u4e2d $\\mathbf{D}_p = \\sum_i w_{ip} (\\mathbf{x}_i - \\mathbf{x}_p) \\otimes (\\mathbf{x}_i - \\mathbf{x}_p)$ \u662f\u60ef\u6027\u5f20\u91cf\u3002</p>\n<p><strong>APIC\u77e9\u9635</strong>\uff1a\nMLS-MPM\u5f15\u5165\u4eff\u5c04\u7c92\u5b50-\u7f51\u683c\uff08APIC\uff09\u77e9\u9635 $\\mathbf{C}_p$ \u6765\u5b58\u50a8\u901f\u5ea6\u68af\u5ea6\u4fe1\u606f\uff1a\n$$\\mathbf{C}_p = \\mathbf{B}_p \\mathbf{D}_p^{-1}$$\n\u5176\u4e2d $\\mathbf{B}_p = \\sum_i w_{ip} \\mathbf{v}_i \\otimes (\\mathbf{x}_i - \\mathbf{x}_p)$\u3002</p>\n<h3 id=\"1223-mls-mpm\">12.2.3 MLS-MPM\u7b97\u6cd5\u6d41\u7a0b</h3>\n<ol>\n<li>\n<p><strong>\u521d\u59cb\u5316</strong>\uff1a\n   - \u8bbe\u7f6e\u7c92\u5b50\u4f4d\u7f6e $\\mathbf{x}_p$\u3001\u901f\u5ea6 $\\mathbf{v}_p$\u3001\u8d28\u91cf $m_p$\n   - \u521d\u59cb\u5316\u53d8\u5f62\u68af\u5ea6 $\\mathbf{F}_p = \\mathbf{I}$\n   - \u8ba1\u7b97\u521d\u59cb APIC \u77e9\u9635 $\\mathbf{C}_p = \\mathbf{0}$</p>\n</li>\n<li>\n<p><strong>P2G\u4f20\u8f93\uff08\u6539\u8fdb\u7248\uff09</strong>\uff1a\n$$m_i = \\sum_p w_{ip} m_p$$\n   $$m_i \\mathbf{v}_i = \\sum_p w_{ip} m_p [\\mathbf{v}_p + \\mathbf{C}_p(\\mathbf{x}_i - \\mathbf{x}_p)]$$</p>\n</li>\n<li>\n<p><strong>\u7f51\u683c\u52a8\u91cf\u66f4\u65b0</strong>\uff08\u4e0e\u4f20\u7edfMPM\u76f8\u540c\uff09\uff1a\n$$\\mathbf{v}_i^{n+1} = \\mathbf{v}_i^n + \\frac{\\Delta t}{m_i} \\mathbf{f}_i$$</p>\n</li>\n<li>\n<p><strong>G2P\u4f20\u8f93\uff08\u6539\u8fdb\u7248\uff09</strong>\uff1a\n$$\\mathbf{v}_p^{n+1} = \\sum_i w_{ip} \\mathbf{v}_i^{n+1}$$\n   $$\\mathbf{C}_p^{n+1} = \\sum_i w_{ip} \\mathbf{v}_i^{n+1} \\otimes (\\mathbf{x}_i - \\mathbf{x}_p) \\cdot \\mathbf{D}_p^{-1}$$</p>\n</li>\n<li>\n<p><strong>\u7c92\u5b50\u66f4\u65b0</strong>\uff1a\n$$\\mathbf{x}_p^{n+1} = \\mathbf{x}_p^n + \\Delta t \\mathbf{v}_p^{n+1}$$\n   $$\\mathbf{F}_p^{n+1} = (\\mathbf{I} + \\Delta t \\mathbf{C}_p^{n+1}) \\mathbf{F}_p^n$$</p>\n</li>\n</ol>\n<h3 id=\"1224\">12.2.4 \u4f18\u5316\u6280\u5de7</h3>\n<ol>\n<li>\n<p><strong>\u60ef\u6027\u5f20\u91cf\u7684\u9ad8\u6548\u8ba1\u7b97</strong>\uff1a\n   \u5bf9\u4e8e\u89c4\u5219\u7f51\u683c\u548c\u5bf9\u79f0\u6838\u51fd\u6570\uff1a\n$$\\mathbf{D}_p = \\frac{4h^2}{3}\\mathbf{I}$$\uff08\u4e8c\u7ef4\u60c5\u51b5\uff09$$\\mathbf{D}_p = \\frac{h^2}{2}\\mathbf{I}$$\uff08\u4e09\u7ef4\u60c5\u51b5\uff09</p>\n</li>\n<li>\n<p><strong>\u4f53\u79ef\u5b88\u6052</strong>\uff1a\n   \u901a\u8fc7\u4fee\u6b63\u53d8\u5f62\u68af\u5ea6\u4fdd\u6301\u4f53\u79ef\uff1a\n   $$\\mathbf{F}_p^{\\text{corrected}} = J^{1/d} \\mathbf{F}_p / \\det(\\mathbf{F}_p)^{1/d}$$</p>\n</li>\n<li>\n<p><strong>\u6570\u503c\u7a33\u5b9a\u6027\u589e\u5f3a</strong>\uff1a\n   - \u9650\u5236\u53d8\u5f62\u68af\u5ea6\u7684\u5947\u5f02\u503c\n   - \u4f7f\u7528\u9690\u5f0f\u79ef\u5206\u5904\u7406\u521a\u6027\u6750\u6599\n   - \u81ea\u9002\u5e94\u65f6\u95f4\u6b65\u957f</p>\n</li>\n</ol>\n<h3 id=\"1225-apic\">12.2.5 \u4e0eAPIC\u7684\u5173\u7cfb</h3>\n<p>MLS-MPM\u53ef\u4ee5\u770b\u4f5c\u662fAPIC\uff08Affine Particle-In-Cell\uff09\u65b9\u6cd5\u7684\u63a8\u5e7f\uff1a</p>\n<ol>\n<li><strong>APIC</strong>\uff1a\u4fdd\u5b58\u4eff\u5c04\u901f\u5ea6\u573a $\\mathbf{v}(\\mathbf{x}) = \\mathbf{v}_p + \\mathbf{C}_p(\\mathbf{x} - \\mathbf{x}_p)$</li>\n<li><strong>MLS-MPM</strong>\uff1a\u901a\u8fc7MLS\u91cd\u6784\u83b7\u5f97\u6700\u4f18\u7684 $\\mathbf{C}_p$</li>\n<li><strong>\u7406\u8bba\u8054\u7cfb</strong>\uff1aMLS-MPM\u5728\u6570\u5b66\u4e0a\u7b49\u4ef7\u4e8e\u4f7f\u7528\u7279\u5b9a\u6743\u91cd\u7684APIC</li>\n</ol>\n<p><strong>\u4f18\u52bf\u5bf9\u6bd4</strong>\uff1a</p>\n<ul>\n<li>APIC\uff1a\u5b9e\u73b0\u7b80\u5355\uff0c\u4f46\u7cbe\u5ea6\u53d7\u9650</li>\n<li>MLS-MPM\uff1a\u66f4\u9ad8\u7cbe\u5ea6\uff0c\u66f4\u597d\u7684\u52a8\u91cf\u5b88\u6052</li>\n<li>\u8ba1\u7b97\u6210\u672c\u76f8\u8fd1</li>\n</ul>\n<h2 id=\"123-mpm_1\">12.3 \u9ad8\u7ea7MPM\u6280\u672f\u4e0e\u5e94\u7528</h2>\n<h3 id=\"1231-mpm\">12.3.1 \u591a\u6750\u6599MPM</h3>\n<p>\u5b9e\u9645\u5e94\u7528\u4e2d\u7ecf\u5e38\u9700\u8981\u6a21\u62df\u591a\u79cd\u6750\u6599\u7684\u76f8\u4e92\u4f5c\u7528\uff0c\u5982\u6d41\u4f53-\u56fa\u4f53\u8026\u5408\u3001\u591a\u76f8\u6d41\u7b49\u3002</p>\n<p><strong>\u591a\u6750\u6599\u8868\u793a\u65b9\u6cd5</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5206\u79bb\u7c92\u5b50\u6cd5</strong>\uff1a\n   - \u4e0d\u540c\u6750\u6599\u4f7f\u7528\u4e0d\u540c\u7684\u7c92\u5b50\u96c6\n   - \u5728\u7f51\u683c\u4e0a\u8fdb\u884c\u8026\u5408\n   - \u9002\u7528\u4e8e\u754c\u9762\u6e05\u6670\u7684\u60c5\u51b5</p>\n</li>\n<li>\n<p><strong>\u6df7\u5408\u7c92\u5b50\u6cd5</strong>\uff1a\n   - \u5355\u4e2a\u7c92\u5b50\u53ef\u4ee5\u5305\u542b\u591a\u79cd\u6750\u6599\n   - \u4f7f\u7528\u4f53\u79ef\u5206\u6570 $\\phi_k$ \u8868\u793a\u6750\u6599 $k$ \u7684\u5360\u6bd4\n   - \u9002\u7528\u4e8e\u6df7\u5408\u6750\u6599</p>\n</li>\n</ol>\n<p><strong>\u754c\u9762\u5904\u7406</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u63a5\u89e6\u7b97\u6cd5</strong>\uff1a\n$$\\mathbf{v}_i^{k,\\text{final}} = \\mathbf{v}_i^k + \\frac{\\Delta t}{m_i^k} \\mathbf{f}_i^{\\text{contact}}$$\n\u63a5\u89e6\u529b\u901a\u8fc7\u7f5a\u51fd\u6570\u6216\u62c9\u683c\u6717\u65e5\u4e58\u5b50\u8ba1\u7b97\u3002</p>\n</li>\n<li>\n<p><strong>\u6df7\u5408\u7406\u8bba</strong>\uff1a\n   \u5e94\u529b\u901a\u8fc7\u4f53\u79ef\u52a0\u6743\u5e73\u5747\uff1a\n$$\\boldsymbol{\\sigma} = \\sum_k \\phi_k \\boldsymbol{\\sigma}_k$$\n<strong>\u8868\u9762\u5f20\u529b</strong>\uff1a\n\u5bf9\u4e8e\u6d41\u4f53\u754c\u9762\uff0c\u9700\u8981\u8003\u8651\u8868\u9762\u5f20\u529b\uff1a\n$$\\mathbf{f}_{\\text{surface}} = \\gamma \\kappa \\mathbf{n}$$\n\u5176\u4e2d $\\gamma$ \u662f\u8868\u9762\u5f20\u529b\u7cfb\u6570\uff0c$\\kappa$ \u662f\u66f2\u7387\uff0c$\\mathbf{n}$ \u662f\u6cd5\u5411\u91cf\u3002</p>\n</li>\n</ol>\n<h3 id=\"1232-mpm\">12.3.2 \u81ea\u9002\u5e94MPM</h3>\n<p>\u4e3a\u4e86\u63d0\u9ad8\u8ba1\u7b97\u6548\u7387\u548c\u7cbe\u5ea6\uff0c\u53ef\u4ee5\u4f7f\u7528\u81ea\u9002\u5e94\u6280\u672f\uff1a</p>\n<ol>\n<li><strong>\u7a7a\u95f4\u81ea\u9002\u5e94</strong>\uff1a\n   - <strong>\u81ea\u9002\u5e94\u7f51\u683c\u7ec6\u5316</strong>\uff08AMR\uff09\uff1a\u5728\u9700\u8981\u9ad8\u7cbe\u5ea6\u7684\u533a\u57df\u4f7f\u7528\u66f4\u7ec6\u7684\u7f51\u683c\n   - <strong>\u7c92\u5b50\u5206\u88c2\u4e0e\u5408\u5e76</strong>\uff1a\u6839\u636e\u53d8\u5f62\u7a0b\u5ea6\u8c03\u6574\u7c92\u5b50\u5bc6\u5ea6</li>\n</ol>\n<p>\u5206\u88c2\u51c6\u5219\uff1a\n$$\\text{split if } \\det(\\mathbf{F}_p) &gt; \\theta_{\\text{split}}$$\n\u5408\u5e76\u51c6\u5219\uff1a\n$$\\text{merge if } ||\\mathbf{x}_p - \\mathbf{x}_q|| &lt; r_{\\text{merge}} \\text{ and } \\det(\\mathbf{F}_p) &lt; \\theta_{\\text{merge}}$$</p>\n<ol start=\"2\">\n<li>\n<p><strong>\u65f6\u95f4\u81ea\u9002\u5e94</strong>\uff1a\n   \u6839\u636e\u5c40\u90e8CFL\u6761\u4ef6\u8c03\u6574\u65f6\u95f4\u6b65\u957f\uff1a\n$$\\Delta t_p = \\min\\left(C_{\\text{CFL}} \\frac{h}{||\\mathbf{v}_p|| + c_p}, \\Delta t_{\\text{max}}\\right)$$</p>\n</li>\n<li>\n<p><strong>\u6a21\u578b\u81ea\u9002\u5e94</strong>\uff1a\n   - \u5728\u5c0f\u53d8\u5f62\u533a\u57df\u4f7f\u7528\u7ebf\u6027\u6a21\u578b\n   - \u5728\u5927\u53d8\u5f62\u533a\u57df\u4f7f\u7528\u975e\u7ebf\u6027\u6a21\u578b\n   - \u52a8\u6001\u5207\u6362\u672c\u6784\u6a21\u578b</p>\n</li>\n</ol>\n<h3 id=\"1233-gpu\">12.3.3 GPU\u52a0\u901f\u6280\u672f</h3>\n<p>MPM\u5929\u7136\u9002\u5408GPU\u5e76\u884c\u5316\uff0c\u5173\u952e\u4f18\u5316\u7b56\u7565\u5305\u62ec\uff1a</p>\n<ol>\n<li>\n<p><strong>\u6570\u636e\u7ed3\u6784\u4f18\u5316</strong>\uff1a\n   - <strong>\u7c92\u5b50\u6392\u5e8f</strong>\uff1a\u6309\u7a7a\u95f4\u4f4d\u7f6e\u6392\u5e8f\u51cf\u5c11\u5185\u5b58\u8bbf\u95ee\u51b2\u7a81\n   - <strong>\u7f51\u683c\u54c8\u5e0c</strong>\uff1a\u4f7f\u7528\u7a7a\u95f4\u54c8\u5e0c\u8868\u5feb\u901f\u67e5\u627e\u7c92\u5b50-\u7f51\u683c\u6620\u5c04\n   - <strong>\u7a00\u758f\u7f51\u683c</strong>\uff1a\u53ea\u5206\u914d\u6d3b\u8dc3\u7f51\u683c\u8282\u70b9</p>\n</li>\n<li>\n<p><strong>\u5e76\u884c\u5316\u7b56\u7565</strong>\uff1a\n   - <strong>P2G\u9636\u6bb5</strong>\uff1a\u6bcf\u4e2a\u7c92\u5b50\u72ec\u7acb\u8ba1\u7b97\uff0c\u4f7f\u7528\u539f\u5b50\u64cd\u4f5c\u7d2f\u52a0\u5230\u7f51\u683c\n   - <strong>\u7f51\u683c\u66f4\u65b0</strong>\uff1a\u6bcf\u4e2a\u7f51\u683c\u8282\u70b9\u72ec\u7acb\u66f4\u65b0\n   - <strong>G2P\u9636\u6bb5</strong>\uff1a\u6bcf\u4e2a\u7c92\u5b50\u72ec\u7acb\u66f4\u65b0</p>\n</li>\n<li>\n<p><strong>\u6027\u80fd\u4f18\u5316</strong>\uff1a\n   - <strong>\u5171\u4eab\u5185\u5b58\u4f7f\u7528</strong>\uff1a\u7f13\u5b58\u9891\u7e41\u8bbf\u95ee\u7684\u7f51\u683c\u6570\u636e\n   - <strong>Warp\u7ea7\u522b\u4f18\u5316</strong>\uff1a\u786e\u4fdd\u7ebf\u7a0b\u675f\u5185\u7684\u4e00\u81f4\u6027\n   - <strong>\u6df7\u5408\u7cbe\u5ea6\u8ba1\u7b97</strong>\uff1a\u5728\u4e0d\u5f71\u54cd\u7cbe\u5ea6\u7684\u5730\u65b9\u4f7f\u7528float16</p>\n</li>\n</ol>\n<p><strong>\u5178\u578b\u52a0\u901f\u6bd4</strong>\uff1a</p>\n<ul>\n<li>CPU\u5355\u7ebf\u7a0b \u2192 GPU\uff1a100-1000\u500d</li>\n<li>\u5b9e\u65f6\u6a21\u62df\u6210\u4e3a\u53ef\u80fd\uff08&gt;30 FPS\uff09</li>\n</ul>\n<h3 id=\"1234\">12.3.4 \u5de5\u7a0b\u5e94\u7528\u6848\u4f8b</h3>\n<ol>\n<li>\n<p><strong>\u8ba1\u7b97\u673a\u52a8\u753b</strong>\uff1a\n   - \u96ea\u5d29\u6a21\u62df\uff08\u8fea\u58eb\u5c3c\u300a\u51b0\u96ea\u5947\u7f18\u300b\uff09\n   - \u6c99\u5c18\u6548\u679c\n   - \u6d41\u4f53-\u56fa\u4f53\u4ea4\u4e92</p>\n</li>\n<li>\n<p><strong>\u5730\u8d28\u5de5\u7a0b</strong>\uff1a\n   - \u6ed1\u5761\u9884\u6d4b\n   - \u571f\u58e4\u6db2\u5316\u5206\u6790\n   - \u7206\u7834\u6548\u679c\u6a21\u62df</p>\n</li>\n<li>\n<p><strong>\u751f\u7269\u529b\u5b66</strong>\uff1a\n   - \u8f6f\u7ec4\u7ec7\u53d8\u5f62\n   - \u8840\u6d41\u52a8\u529b\u5b66\n   - \u7ec6\u80de\u529b\u5b66</p>\n</li>\n<li>\n<p><strong>\u5de5\u4e1a\u8bbe\u8ba1</strong>\uff1a\n   - 3D\u6253\u5370\u8fc7\u7a0b\u6a21\u62df\n   - \u6750\u6599\u6210\u578b\u5206\u6790\n   - \u78b0\u649e\u5b89\u5168\u6d4b\u8bd5</p>\n</li>\n</ol>\n<h3 id=\"1235\">12.3.5 \u524d\u6cbf\u7814\u7a76\u65b9\u5411</h3>\n<ol>\n<li>\n<p><strong>\u673a\u5668\u5b66\u4e60\u589e\u5f3a</strong>\uff1a\n   - \u4f7f\u7528\u795e\u7ecf\u7f51\u7edc\u5b66\u4e60\u672c\u6784\u6a21\u578b\n   - \u52a0\u901f\u7ed3\u6784\u9884\u6d4b\n   - \u53c2\u6570\u81ea\u52a8\u8c03\u4f18</p>\n</li>\n<li>\n<p><strong>\u591a\u5c3a\u5ea6MPM</strong>\uff1a\n   - \u5b8f\u89c2-\u4ecb\u89c2-\u5fae\u89c2\u8026\u5408\n   - \u5206\u5b50\u52a8\u529b\u5b66\u4e0e\u8fde\u7eed\u4ecb\u8d28\u8026\u5408\n   - \u81ea\u9002\u5e94\u5c3a\u5ea6\u8f6c\u6362</p>\n</li>\n<li>\n<p><strong>\u62d3\u6251\u4f18\u5316</strong>\uff1a\n   - \u57fa\u4e8eMPM\u7684\u5f62\u72b6\u4f18\u5316\n   - \u6750\u6599\u5206\u5e03\u4f18\u5316\n   - \u591a\u76ee\u6807\u4f18\u5316</p>\n</li>\n<li>\n<p><strong>\u5b9e\u65f6\u4ea4\u4e92\u7cfb\u7edf</strong>\uff1a\n   - VR/AR\u5e94\u7528\n   - \u89e6\u89c9\u53cd\u9988\n   - \u5b9e\u65f6\u7269\u7406\u7f16\u8f91</p>\n</li>\n</ol>\n<h2 id=\"_2\">\u672c\u7ae0\u5c0f\u7ed3</h2>\n<p>\u672c\u7ae0\u6df1\u5165\u4ecb\u7ecd\u4e86\u7269\u8d28\u70b9\u6cd5\uff08MPM\uff09\u53ca\u5176\u73b0\u4ee3\u53d8\u79cdMLS-MPM\uff0c\u8fd9\u662f\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u6a21\u62df\u5927\u53d8\u5f62\u6750\u6599\u7684\u5f3a\u5927\u5de5\u5177\u3002</p>\n<p><strong>\u5173\u952e\u6982\u5ff5</strong>\uff1a</p>\n<ol>\n<li><strong>MPM\u57fa\u7840</strong>\uff1a\u7ed3\u5408\u62c9\u683c\u6717\u65e5\u7c92\u5b50\u548c\u6b27\u62c9\u7f51\u683c\u7684\u6df7\u5408\u65b9\u6cd5</li>\n<li><strong>\u6838\u5fc3\u7b97\u6cd5</strong>\uff1aP2G \u2192 \u7f51\u683c\u6c42\u89e3 \u2192 G2P \u2192 \u72b6\u6001\u66f4\u65b0</li>\n<li><strong>MLS-MPM</strong>\uff1a\u901a\u8fc7\u79fb\u52a8\u6700\u5c0f\u4e8c\u4e58\u6539\u8fdb\u7cbe\u5ea6\u548c\u7a33\u5b9a\u6027</li>\n<li><strong>\u9ad8\u7ea7\u6280\u672f</strong>\uff1a\u591a\u6750\u6599\u3001\u81ea\u9002\u5e94\u3001GPU\u52a0\u901f</li>\n</ol>\n<p><strong>\u91cd\u8981\u516c\u5f0f</strong>\uff1a</p>\n<ul>\n<li>\u53d8\u5f62\u68af\u5ea6\u66f4\u65b0\uff1a$\\mathbf{F}^{n+1} = (\\mathbf{I} + \\Delta t \\mathbf{L}) \\mathbf{F}^n$</li>\n<li>\u5185\u529b\u8ba1\u7b97\uff1a$\\mathbf{f}_i^{\\text{int}} = -\\sum_p V_p \\boldsymbol{\\sigma}_p \\nabla w_{ip}$</li>\n<li>MLS\u901f\u5ea6\u573a\uff1a$\\mathbf{v}(\\mathbf{x}) = \\mathbf{c}_0 + \\mathbf{C}_1 (\\mathbf{x} - \\mathbf{x}_p)$</li>\n<li>CFL\u6761\u4ef6\uff1a$\\Delta t \\leq C h/c$</li>\n</ul>\n<p><strong>\u7b97\u6cd5\u9009\u62e9\u6307\u5357</strong>\uff1a</p>\n<ul>\n<li>\u4f20\u7edfMPM\uff1a\u7b80\u5355\u5b9e\u73b0\uff0c\u9002\u5408\u6559\u5b66</li>\n<li>MLS-MPM\uff1a\u751f\u4ea7\u73af\u5883\u63a8\u8350\uff0c\u66f4\u597d\u7684\u7cbe\u5ea6</li>\n<li>GIMP\uff1a\u9700\u8981\u7cbe\u786e\u63a5\u89e6\u5904\u7406\u65f6\u4f7f\u7528</li>\n<li>\u81ea\u9002\u5e94MPM\uff1a\u5927\u89c4\u6a21\u573a\u666f\u4f18\u5316</li>\n</ul>\n<h2 id=\"_3\">\u7ec3\u4e60\u9898</h2>\n<h3 id=\"_4\">\u57fa\u7840\u9898</h3>\n<ol>\n<li><strong>\u5f62\u51fd\u6570\u6027\u8d28</strong>\n   \u8bc1\u660e\u4e8c\u6b21B\u6837\u6761\u5f62\u51fd\u6570\u6ee1\u8db3\u5206\u5272\u5355\u4f4d\u6027\uff1a$\\sum_i N_i^2(\\mathbf{x}) = 1$\u3002</li>\n</ol>\n<p><em>\u63d0\u793a\uff1a\u8003\u8651\u4e00\u7ef4\u60c5\u51b5\uff0c\u5229\u7528B\u6837\u6761\u7684\u9012\u5f52\u5b9a\u4e49\u3002</em></p>\n<details markdown=\"block\">\n   \n\n<summary>\u7b54\u6848</summary>\n\n\n   \u5bf9\u4e8e\u5747\u5300\u7f51\u683c\u4e0a\u7684\u4e8c\u6b21B\u6837\u6761\uff0c\u4efb\u610f\u70b9\u6700\u591a\u88ab3\u4e2a\u57fa\u51fd\u6570\u8986\u76d6\u3002\u8bbe $\\xi = (x - x\\_i)/h$\uff0c\u5219\uff1a\n\n   - \u8282\u70b9 $i-1$\uff1a$N^2(\\xi+1)$\n   - \u8282\u70b9 $i$\uff1a$N^2(\\xi)$  \n   - \u8282\u70b9 $i+1$\uff1a$N^2(\\xi-1)$\n\n   \u5f53 $\\xi \\in [-1/2, 1/2]$ \u65f6\uff1a\n$$N^2(\\xi+1) + N^2(\\xi) + N^2(\\xi-1) = \\frac{1}{2}(1/2-\\xi)^2 + (3/4-\\xi^2) + \\frac{1}{2}(1/2+\\xi)^2 = 1$$\n\u7c7b\u4f3c\u53ef\u9a8c\u8bc1\u5176\u4ed6\u533a\u95f4\u3002\n   </details>\n<ol start=\"2\">\n<li><strong>\u53d8\u5f62\u68af\u5ea6\u7684\u7269\u7406\u610f\u4e49</strong>\n   \u7ed9\u5b9a\u53d8\u5f62\u68af\u5ea6 $\\mathbf{F} = \\begin{bmatrix} 2 &amp; 0.5 \\ 0 &amp; 1 \\end{bmatrix}$\uff0c\u8ba1\u7b97\uff1a\n   a) \u4f53\u79ef\u6bd4 $J$\n   b) \u53f3Cauchy-Green\u5f20\u91cf $\\mathbf{C}$\n   c) Green-Lagrange\u5e94\u53d8 $\\mathbf{E}$</li>\n</ol>\n<p><em>\u63d0\u793a\uff1a\u4f7f\u7528 $J = \\det(\\mathbf{F})$\uff0c$\\mathbf{C} = \\mathbf{F}^T\\mathbf{F}$\u3002</em></p>\n<details markdown=\"block\">\n   \n\n<summary>\u7b54\u6848</summary>\n\n\n   a) $J = \\det(\\mathbf{F}) = 2 \\times 1 - 0.5 \\times 0 = 2$\uff08\u4f53\u79ef\u81a8\u80c02\u500d\uff09\n\n   b) $\\mathbf{C} = \\mathbf{F}^T\\mathbf{F} = \\begin{bmatrix} 2 &amp; 0 \\\\ 0.5 &amp; 1 \\end{bmatrix} \\begin{bmatrix} 2 &amp; 0.5 \\\\ 0 &amp; 1 \\end{bmatrix} = \\begin{bmatrix} 4 &amp; 1 \\\\ 1 &amp; 1.25 \\end{bmatrix}$\n\n   c) $\\mathbf{E} = \\frac{1}{2}(\\mathbf{C} - \\mathbf{I}) = \\begin{bmatrix} 1.5 &amp; 0.5 \\\\ 0.5 &amp; 0.125 \\end{bmatrix}$\n   </details>\n<ol start=\"3\">\n<li><strong>CFL\u7a33\u5b9a\u6027\u5206\u6790</strong>\n   \u5bf9\u4e8e\u6768\u6c0f\u6a21\u91cf $E = 10^6$ Pa\u3001\u5bc6\u5ea6 $\\rho = 1000$ kg/m\u00b3 \u7684\u6750\u6599\uff0c\u7f51\u683c\u95f4\u8ddd $h = 0.01$ m\uff0c\u8ba1\u7b97\u6700\u5927\u5141\u8bb8\u65f6\u95f4\u6b65\u957f\uff08\u53d6CFL\u6570 $C = 0.3$\uff09\u3002</li>\n</ol>\n<p><em>\u63d0\u793a\uff1a\u58f0\u901f $c = \\sqrt{E/\\rho}$\u3002</em></p>\n<details markdown=\"block\">\n   \n\n<summary>\u7b54\u6848</summary>\n\n\n   \u58f0\u901f\uff1a$c = \\sqrt{E/\\rho} = \\sqrt{10^6/1000} = 31.62$ m/s\n\n   \u6700\u5927\u65f6\u95f4\u6b65\u957f\uff1a$\\Delta t\\_{\\max} = C \\cdot h/c = 0.3 \\times 0.01/31.62 = 9.49 \\times 10^{-5}$ s\n   </details>\n<h3 id=\"_5\">\u6311\u6218\u9898</h3>\n<ol start=\"4\">\n<li><strong>\u80fd\u91cf\u5b88\u6052\u5206\u6790</strong>\n   \u8bc1\u660e\u5728\u65e0\u5916\u529b\u548c\u65e0\u8017\u6563\u7684\u60c5\u51b5\u4e0b\uff0c\u663e\u5f0fMPM\u7684\u603b\u80fd\u91cf\uff08\u52a8\u80fd+\u52bf\u80fd\uff09\u5728\u4e00\u4e2a\u65f6\u95f4\u6b65\u5185\u7684\u53d8\u5316\u4e3a $O(\\Delta t^2)$\u3002</li>\n</ol>\n<p><em>\u63d0\u793a\uff1a\u8003\u8651\u8f9b\u7ed3\u6784\u548c\u4e2d\u70b9\u6cd5\u5219\u3002</em></p>\n<details markdown=\"block\">\n   \n\n<summary>\u7b54\u6848</summary>\n\n\n   \u603b\u80fd\u91cf $E = T + V$\uff0c\u5176\u4e2d\u52a8\u80fd $T = \\frac{1}{2}\\sum\\_p m\\_p ||\\mathbf{v}\\_p||^2$\uff0c\u52bf\u80fd $V = \\sum\\_p V\\_p \\psi(\\mathbf{F}\\_p)$\u3002\n\n   \u5728\u4e00\u4e2a\u65f6\u95f4\u6b65\u5185\uff1a\n\n   - \u901f\u5ea6\u66f4\u65b0\u5f15\u5165 $O(\\Delta t)$ \u8bef\u5dee\n   - \u4f4d\u7f6e\u66f4\u65b0\u5f15\u5165\u989d\u5916 $O(\\Delta t)$ \u8bef\u5dee\n   - \u603b\u80fd\u91cf\u53d8\u5316\uff1a$\\Delta E = O(\\Delta t^2)$\n\n   \u8fd9\u8868\u660eMPM\u662f\u8fd1\u4f3c\u80fd\u91cf\u5b88\u6052\u7684\u3002\n   </details>\n<ol start=\"5\">\n<li><strong>MLS-MPM\u7684\u7406\u8bba\u5206\u6790</strong>\n   \u63a8\u5bfcMLS-MPM\u4e2dAPIC\u77e9\u9635 $\\mathbf{C}_p$ \u7684\u66f4\u65b0\u516c\u5f0f\uff0c\u5e76\u8bf4\u660e\u5176\u5982\u4f55\u4fdd\u6301\u89d2\u52a8\u91cf\u5b88\u6052\u3002</li>\n</ol>\n<p><em>\u63d0\u793a\uff1a\u4ece\u6700\u5c0f\u4e8c\u4e58\u95ee\u9898\u51fa\u53d1\uff0c\u8003\u8651\u60ef\u6027\u5f20\u91cf\u7684\u4f5c\u7528\u3002</em></p>\n<details markdown=\"block\">\n   \n\n<summary>\u7b54\u6848</summary>\n\n\n   \u6700\u5c0f\u4e8c\u4e58\u95ee\u9898\uff1a\n$$\\min\\_{\\mathbf{c}\\_0, \\mathbf{C}\\_1} \\sum\\_i w\\_{ip} m\\_i ||\\mathbf{v}\\_i - \\mathbf{c}\\_0 - \\mathbf{C}\\_1(\\mathbf{x}\\_i - \\mathbf{x}\\_p)||^2$$\n\u6c42\u5bfc\u5f97\u5230\u6b63\u89c4\u65b9\u7a0b\uff0c\u89e3\u5f97\uff1a\n$$\\mathbf{C}\\_p = \\left(\\sum\\_i w\\_{ip} \\mathbf{v}\\_i \\otimes (\\mathbf{x}\\_i - \\mathbf{x}\\_p)\\right) \\mathbf{D}\\_p^{-1}$$\n\n   \u89d2\u52a8\u91cf $\\mathbf{L} = \\sum\\_p (\\mathbf{x}\\_p - \\mathbf{x}\\_c) \\times m\\_p \\mathbf{v}\\_p$ \u5728P2G\u548cG2P\u8fc7\u7a0b\u4e2d\u4fdd\u6301\u4e0d\u53d8\uff08\u5ffd\u7565\u6570\u503c\u8bef\u5dee\uff09\u3002\n   </details>\n<ol start=\"6\">\n<li><strong>\u591a\u6750\u6599\u8026\u5408</strong>\n   \u8bbe\u8ba1\u4e00\u4e2a\u7b97\u6cd5\u5904\u7406\u6d41\u56fa\u8026\u5408\u95ee\u9898\uff0c\u5176\u4e2d\u56fa\u4f53\u4f7f\u7528Neo-Hookean\u6a21\u578b\uff0c\u6d41\u4f53\u4f7f\u7528\u4e0d\u53ef\u538b\u7f29\u6761\u4ef6\u3002\u8ba8\u8bba\u754c\u9762\u6761\u4ef6\u7684\u5904\u7406\u3002</li>\n</ol>\n<p><em>\u63d0\u793a\uff1a\u8003\u8651\u5206\u79bb\u5f0f\u6c42\u89e3\u548c\u8026\u5408\u7ea6\u675f\u3002</em></p>\n<details markdown=\"block\">\n   \n\n<summary>\u7b54\u6848</summary>\n\n\n   \u7b97\u6cd5\u6846\u67b6\uff1a\n\n   1. \u5206\u522b\u8ba1\u7b97\u56fa\u4f53\u548c\u6d41\u4f53\u7684\u5e94\u529b\n   2. \u5728\u7f51\u683c\u4e0a\u65bd\u52a0\u8026\u5408\u6761\u4ef6\uff1a\n      - \u901f\u5ea6\u8fde\u7eed\uff1a$\\mathbf{v}\\_{\\text{solid}} = \\mathbf{v}\\_{\\text{fluid}}$\uff08\u754c\u9762\u5904\uff09\n      - \u5e94\u529b\u5e73\u8861\uff1a$\\boldsymbol{\\sigma}\\_{\\text{solid}} \\cdot \\mathbf{n} = -p\\mathbf{n} + \\boldsymbol{\\tau}\\_{\\text{fluid}} \\cdot \\mathbf{n}$\n   3. \u4f7f\u7528\u5206\u6570\u6b65\u6cd5\u5904\u7406\u4e0d\u53ef\u538b\u7f29\u6027\n   4. \u66f4\u65b0\u7c92\u5b50\u72b6\u6001\n\n   \u5173\u952e\u5728\u4e8e\u6b63\u786e\u8bc6\u522b\u754c\u9762\u548c\u65bd\u52a0\u7ea6\u675f\u3002\n   </details>\n<h2 id=\"_6\">\u5e38\u89c1\u9677\u9631\u4e0e\u9519\u8bef</h2>\n<ol>\n<li>\n<p><strong>\u6570\u503c\u4e0d\u7a33\u5b9a</strong>\n   - \u9519\u8bef\uff1a\u4f7f\u7528\u8fc7\u5927\u7684\u65f6\u95f4\u6b65\u957f\u5bfc\u81f4\u7206\u70b8\n   - \u89e3\u51b3\uff1a\u4e25\u683c\u9075\u5b88CFL\u6761\u4ef6\uff0c\u8003\u8651\u81ea\u9002\u5e94\u65f6\u95f4\u6b65</p>\n</li>\n<li>\n<p><strong>\u8d28\u91cf\u635f\u5931</strong>\n   - \u9519\u8bef\uff1a\u7f51\u683c\u8282\u70b9\u8d28\u91cf\u8fc7\u5c0f\u5bfc\u81f4\u9664\u96f6\n   - \u89e3\u51b3\uff1a\u8bbe\u7f6e\u6700\u5c0f\u8d28\u91cf\u9608\u503c $m_{\\min} = 10^{-10} m_{\\text{avg}}$</p>\n</li>\n<li>\n<p><strong>\u5e94\u529b\u632f\u8361</strong>\n   - \u9519\u8bef\uff1a\u4f7f\u7528\u7ebf\u6027\u5f62\u51fd\u6570\u5bfc\u81f4\u529b\u7684\u4e0d\u8fde\u7eed\n   - \u89e3\u51b3\uff1a\u6539\u7528B\u6837\u6761\u6216GIMP\u5f62\u51fd\u6570</p>\n</li>\n<li>\n<p><strong>\u5185\u5b58\u6cc4\u6f0f</strong>\n   - \u9519\u8bef\uff1a\u52a8\u6001\u5206\u914d\u7f51\u683c\u4f46\u5fd8\u8bb0\u91ca\u653e\n   - \u89e3\u51b3\uff1a\u4f7f\u7528\u7a00\u758f\u6570\u636e\u7ed3\u6784\u548c\u667a\u80fd\u6307\u9488</p>\n</li>\n<li>\n<p><strong>\u5e76\u884c\u5316\u9519\u8bef</strong>\n   - \u9519\u8bef\uff1aP2G\u9636\u6bb5\u7684\u7ade\u4e89\u6761\u4ef6\n   - \u89e3\u51b3\uff1a\u4f7f\u7528\u539f\u5b50\u64cd\u4f5c\u6216\u7740\u8272\u7b97\u6cd5</p>\n</li>\n<li>\n<p><strong>\u8fb9\u754c\u5904\u7406\u4e0d\u5f53</strong>\n   - \u9519\u8bef\uff1a\u7c92\u5b50\u7a7f\u900f\u56fa\u5b9a\u8fb9\u754c\n   - \u89e3\u51b3\uff1a\u6b63\u786e\u5b9e\u73b0\u78b0\u649e\u68c0\u6d4b\u548c\u54cd\u5e94</p>\n</li>\n</ol>\n<h2 id=\"_7\">\u6700\u4f73\u5b9e\u8df5\u68c0\u67e5\u6e05\u5355</h2>\n<h3 id=\"_8\">\u7b97\u6cd5\u8bbe\u8ba1</h3>\n<ul>\n<li>[ ] \u9009\u62e9\u5408\u9002\u7684\u5f62\u51fd\u6570\uff08\u7cbe\u5ea6vs\u6548\u7387\u6743\u8861\uff09</li>\n<li>[ ] \u5b9e\u73b0\u7a33\u5b9a\u7684\u65f6\u95f4\u79ef\u5206\uff08CFL\u6761\u4ef6\uff09</li>\n<li>[ ] \u6b63\u786e\u5904\u7406\u8fb9\u754c\u6761\u4ef6</li>\n<li>[ ] \u8003\u8651\u80fd\u91cf\u5b88\u6052\u6027\u8d28</li>\n</ul>\n<h3 id=\"_9\">\u6570\u503c\u7a33\u5b9a\u6027</h3>\n<ul>\n<li>[ ] \u907f\u514d\u6781\u5c0f\u8d28\u91cf\u7684\u9664\u6cd5</li>\n<li>[ ] \u9650\u5236\u53d8\u5f62\u68af\u5ea6\u7684\u6761\u4ef6\u6570</li>\n<li>[ ] \u4f7f\u7528\u9002\u5f53\u7684\u6d6e\u70b9\u7cbe\u5ea6</li>\n<li>[ ] \u5b9e\u73b0\u6570\u503c\u963b\u5c3c\uff08\u5982\u9700\u8981\uff09</li>\n</ul>\n<h3 id=\"_10\">\u6027\u80fd\u4f18\u5316</h3>\n<ul>\n<li>[ ] \u5229\u7528\u7a7a\u95f4\u5c40\u90e8\u6027\uff08\u7c92\u5b50\u6392\u5e8f\uff09</li>\n<li>[ ] \u5b9e\u73b0\u7a00\u758f\u7f51\u683c\u7ed3\u6784</li>\n<li>[ ] \u8003\u8651GPU\u5e76\u884c\u5316</li>\n<li>[ ] \u4f7f\u7528\u9ad8\u6548\u7684\u6570\u636e\u7ed3\u6784</li>\n</ul>\n<h3 id=\"_11\">\u7269\u7406\u6b63\u786e\u6027</h3>\n<ul>\n<li>[ ] \u9a8c\u8bc1\u8d28\u91cf\u5b88\u6052</li>\n<li>[ ] \u68c0\u67e5\u52a8\u91cf\u5b88\u6052</li>\n<li>[ ] \u6d4b\u8bd5\u80fd\u91cf\u884c\u4e3a</li>\n<li>[ ] \u9a8c\u8bc1\u672c\u6784\u6a21\u578b\u5b9e\u73b0</li>\n</ul>\n<h3 id=\"_12\">\u4ee3\u7801\u8d28\u91cf</h3>\n<ul>\n<li>[ ] \u6a21\u5757\u5316\u8bbe\u8ba1\uff08\u5206\u79bb\u7269\u7406\u548c\u6570\u503c\uff09</li>\n<li>[ ] \u5145\u5206\u7684\u5355\u5143\u6d4b\u8bd5</li>\n<li>[ ] \u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5</li>\n<li>[ ] \u6e05\u6670\u7684\u6587\u6863\u548c\u6ce8\u91ca</li>\n</ul>\n<h3 id=\"_13\">\u8c03\u8bd5\u5efa\u8bae</h3>\n<ul>\n<li>[ ] \u5b9e\u73b0\u53ef\u89c6\u5316\u8c03\u8bd5\u5de5\u5177</li>\n<li>[ ] \u6dfb\u52a0\u7269\u7406\u91cf\u76d1\u63a7\uff08\u8d28\u91cf\u3001\u52a8\u91cf\u3001\u80fd\u91cf\uff09</li>\n<li>[ ] \u4f7f\u7528\u7b80\u5355\u6d4b\u8bd5\u6848\u4f8b\u9a8c\u8bc1</li>\n<li>[ ] \u9010\u6b65\u589e\u52a0\u590d\u6742\u5ea6</li>\n</ul>"
  },
  "../CLAUDE.md": {
    "hash": "e778931356ed211e1e756ffeec68d8a5",
    "content": "<p>\uff08\u4ea4\u6d41\u53ef\u4ee5\u7528\u82f1\u6587\uff0c\u672c\u6587\u6863\u4e2d\u6587\uff0c\u4fdd\u7559\u8fd9\u53e5\uff09</p>\n<h2 id=\"_1\">\u9879\u76ee\u76ee\u6807</h2>\n<p>\u7f16\u5199\u4e00\u4efd\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u6587\u6559\u7a0bmarkdown\uff0c\u8981\u5305\u542b\u5927\u91cf\u7684\u4e60\u9898\u548c\u53c2\u8003\u7b54\u6848\uff08\u7b54\u6848\u9ed8\u8ba4\u6298\u53e0\uff09\u3002\u80fd\u6570\u5b66\u7b97\u5c3d\u91cf\u6570\u5b66\u7b97\uff0c\u5408\u9002\u65f6\u63d0\u53ca\u76f8\u5173\u51fd\u6570\u540d\u4f46\u4e0d\u5199\u4ee3\u7801\u3002\n\u5185\u5bb9\u7ec4\u7ec7\u53c2\u8003 old.md\n\u516c\u5f0f\u90fd\u7528 latex\n\u6587\u4ef6\u7ec4\u7ec7\u662f index.md + chapter1.md + ...</p>\n<h2 id=\"audience\">Audience</h2>\n<p>verteran programmer and AI scientists</p>\n<h2 id=\"_2\">\u7ae0\u8282\u7ed3\u6784\u8981\u6c42</h2>\n<p>\u6bcf\u4e2a\u7ae0\u8282\u5e94\u5305\u542b\uff1a</p>\n<ol>\n<li><strong>\u5f00\u7bc7\u6bb5\u843d</strong>\uff1a\u7b80\u8981\u4ecb\u7ecd\u672c\u7ae0\u5185\u5bb9\u548c\u5b66\u4e60\u76ee\u6807</li>\n<li><strong>\u672c\u7ae0\u5c0f\u7ed3</strong>\uff1a\u603b\u7ed3\u5173\u952e\u6982\u5ff5\u548c\u516c\u5f0f</li>\n<li><strong>\u7ec3\u4e60\u9898</strong>\uff1a\n   - \u6bcf\u7ae0\u5305\u542b6-8\u9053\u7ec3\u4e60\u9898\n   - 50%\u57fa\u7840\u9898\uff08\u5e2e\u52a9\u719f\u6089\u6750\u6599\uff09\n   - 50%\u6311\u6218\u9898\uff08\u5305\u62ec\u5f00\u653e\u6027\u601d\u8003\u9898\uff09\n   - \u6bcf\u9898\u63d0\u4f9b\u63d0\u793a\uff08Hint\uff09\n   - \u7b54\u6848\u9ed8\u8ba4\u6298\u53e0\uff0c\u4e0d\u5305\u542b\u4ee3\u7801</li>\n<li><strong>\u5e38\u89c1\u9677\u9631\u4e0e\u9519\u8bef</strong> (Gotchas)\uff1a\u6bcf\u7ae0\u5305\u542b\u8be5\u4e3b\u9898\u7684\u5e38\u89c1\u9519\u8bef\u548c\u8c03\u8bd5\u6280\u5de7</li>\n<li><strong>\u6700\u4f73\u5b9e\u8df5\u68c0\u67e5\u6e05\u5355</strong>\uff1a\u6bcf\u7ae0\u672b\u5c3e\u63d0\u4f9b\u8bbe\u8ba1\u5ba1\u67e5\u8981\u70b9</li>\n</ol>"
  },
  "../chapter6.md": {
    "hash": "b3706f3d3eea05efa1bfa63fc92f2ede",
    "content": "<h1 id=\"6\">\u7b2c6\u7ae0\uff1a\u51e0\u4f55\u8868\u793a</h1>\n<p>\u672c\u7ae0\u6df1\u5165\u63a2\u8ba8\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u51e0\u4f55\u5bf9\u8c61\u7684\u5404\u79cd\u8868\u793a\u65b9\u6cd5\u3002\u6211\u4eec\u5c06\u4ece\u57fa\u672c\u7684\u51e0\u4f55\u8868\u793a\u5f00\u59cb\uff0c\u9010\u6b65\u6df1\u5165\u5230\u53c2\u6570\u5316\u66f2\u7ebf\u66f2\u9762\u7406\u8bba\uff0c\u6700\u540e\u8ba8\u8bba\u73b0\u4ee3\u56fe\u5f62\u5b66\u4e2d\u7684\u7f51\u683c\u5904\u7406\u6280\u672f\u548c\u9634\u5f71\u56fe\u7b97\u6cd5\u3002\u5bf9\u4e8eAI\u79d1\u5b66\u5bb6\u800c\u8a00\uff0c\u7406\u89e3\u8fd9\u4e9b\u51e0\u4f55\u8868\u793a\u4e0d\u4ec5\u6709\u52a9\u4e8e3D\u89c6\u89c9\u4efb\u52a1\uff0c\u8fd8\u80fd\u4e3a\u795e\u7ecf\u9690\u5f0f\u8868\u793a\uff08Neural Implicit Representations\uff09\u7b49\u524d\u6cbf\u6280\u672f\u6253\u4e0b\u575a\u5b9e\u57fa\u7840\u3002</p>\n<h2 id=\"61\">6.1 \u57fa\u672c\u51e0\u4f55\u8868\u793a\u65b9\u6cd5</h2>\n<h3 id=\"611\">6.1.1 \u9690\u5f0f\u8868\u793a\u4e0e\u663e\u5f0f\u8868\u793a</h3>\n<p>\u51e0\u4f55\u5bf9\u8c61\u7684\u6570\u5b66\u8868\u793a\u4e3b\u8981\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a</p>\n<p><strong>\u9690\u5f0f\u8868\u793a\uff08Implicit Representation\uff09</strong>\uff1a\u901a\u8fc7\u65b9\u7a0b $f(\\mathbf{x}) = 0$ \u5b9a\u4e49\u51e0\u4f55\u5bf9\u8c61\uff0c\u5176\u4e2d $\\mathbf{x} \\in \\mathbb{R}^n$\u3002</p>\n<p>\u4f18\u70b9\uff1a</p>\n<ul>\n<li>\u6613\u4e8e\u5224\u65ad\u70b9\u7684\u5185\u5916\u5173\u7cfb\uff1a$f(\\mathbf{x}) &lt; 0$ \u8868\u793a\u5185\u90e8\uff0c$f(\\mathbf{x}) &gt; 0$ \u8868\u793a\u5916\u90e8</li>\n<li>\u4fbf\u4e8e\u8fdb\u884c\u5e03\u5c14\u8fd0\u7b97\uff08\u5e76\u3001\u4ea4\u3001\u5dee\uff09</li>\n<li>\u81ea\u7136\u652f\u6301\u5b9e\u4f53\u5efa\u6a21</li>\n<li>\u5149\u7ebf\u6c42\u4ea4\u7b80\u5316\u4e3a\u6c42\u89e3\u65b9\u7a0b $f(\\mathbf{o} + t\\mathbf{d}) = 0$</li>\n<li>\u6613\u4e8e\u5b9e\u73b0\u5f62\u53d8\u548c\u6270\u52a8</li>\n<li>\u65e0\u9700\u5b58\u50a8\u8fde\u63a5\u4fe1\u606f\uff0c\u5185\u5b58\u5360\u7528\u53ef\u9884\u6d4b</li>\n<li>\u652f\u6301\u65e0\u9650\u7cbe\u5ea6\u7684\u8868\u9762\u7ec6\u8282</li>\n</ul>\n<p>\u7f3a\u70b9\uff1a</p>\n<ul>\n<li>\u96be\u4ee5\u53c2\u6570\u5316\u91c7\u6837</li>\n<li>\u4e0d\u6613\u63a7\u5236\u5c40\u90e8\u5f62\u72b6</li>\n<li>\u9700\u8981\u7279\u6b8a\u6280\u672f\uff08\u5982Marching Cubes\uff09\u8fdb\u884c\u53ef\u89c6\u5316</li>\n<li>\u96be\u4ee5\u83b7\u5f97\u8868\u9762\u7684\u53c2\u6570\u5316\u5750\u6807</li>\n<li>\u7eb9\u7406\u6620\u5c04\u9700\u8981\u989d\u5916\u8ba1\u7b97</li>\n<li>\u76f4\u63a5\u7f16\u8f91\u56f0\u96be</li>\n</ul>\n<p><strong>\u663e\u5f0f\u8868\u793a\uff08Explicit Representation\uff09</strong>\uff1a\u76f4\u63a5\u7ed9\u51fa\u51e0\u4f55\u5bf9\u8c61\u4e0a\u70b9\u7684\u5750\u6807\uff0c\u5982\u53c2\u6570\u5316\u8868\u793a $\\mathbf{x} = \\mathbf{g}(u, v)$\u3002</p>\n<p>\u4f18\u70b9\uff1a</p>\n<ul>\n<li>\u6613\u4e8e\u91c7\u6837\u548c\u904d\u5386</li>\n<li>\u4fbf\u4e8e\u7eb9\u7406\u6620\u5c04</li>\n<li>\u76f4\u89c2\u7684\u5f62\u72b6\u63a7\u5236</li>\n<li>\u5929\u7136\u63d0\u4f9bUV\u5750\u6807</li>\n<li>\u9002\u5408GPU\u786c\u4ef6\u52a0\u901f</li>\n<li>\u652f\u6301\u5206\u5c42\u7ec6\u8282\uff08LOD\uff09</li>\n<li>\u827a\u672f\u5bb6\u53cb\u597d\u7684\u7f16\u8f91\u5de5\u5177</li>\n</ul>\n<p>\u7f3a\u70b9\uff1a</p>\n<ul>\n<li>\u96be\u4ee5\u5224\u65ad\u70b9\u7684\u5185\u5916\u5173\u7cfb</li>\n<li>\u62d3\u6251\u53d8\u5316\u5904\u7406\u590d\u6742</li>\n<li>\u81ea\u76f8\u4ea4\u68c0\u6d4b\u56f0\u96be</li>\n<li>\u96be\u4ee5\u8868\u793a\u4f53\u79ef\u4fe1\u606f</li>\n<li>\u9700\u8981\u989d\u5916\u7684\u6570\u636e\u7ed3\u6784\u7ef4\u62a4\u8fde\u63a5\u5173\u7cfb</li>\n<li>\u91c7\u6837\u5bc6\u5ea6\u5f71\u54cd\u8868\u793a\u7cbe\u5ea6</li>\n</ul>\n<p><strong>\u6570\u5b66\u8f6c\u6362\u5173\u7cfb</strong>\uff1a</p>\n<p>\u4ece\u9690\u5f0f\u5230\u663e\u5f0f\u7684\u8f6c\u6362\u901a\u5e38\u6d89\u53ca\uff1a</p>\n<ul>\n<li><strong>\u7b49\u503c\u9762\u63d0\u53d6</strong>\uff1aMarching Cubes\u3001Dual Contouring</li>\n<li><strong>\u5149\u7ebf\u6295\u5c04</strong>\uff1a\u6cbf\u89c6\u7ebf\u65b9\u5411\u6c42\u89e3 $f(\\mathbf{r}(t)) = 0$</li>\n<li><strong>\u7c92\u5b50\u91c7\u6837</strong>\uff1a\u5728\u8868\u9762\u4e0a\u5206\u5e03\u7c92\u5b50\u5e76\u677e\u5f1b</li>\n</ul>\n<p>\u4ece\u663e\u5f0f\u5230\u9690\u5f0f\u7684\u8f6c\u6362\u65b9\u6cd5\uff1a</p>\n<ul>\n<li><strong>\u8ddd\u79bb\u573a\u8ba1\u7b97</strong>\uff1a\u8ba1\u7b97\u5230\u6700\u8fd1\u8868\u9762\u70b9\u7684\u8ddd\u79bb</li>\n<li><strong>\u4f53\u7d20\u5316</strong>\uff1a\u5728\u89c4\u5219\u7f51\u683c\u4e0a\u91c7\u6837\u5185\u5916\u4fe1\u606f</li>\n<li><strong>\u5f84\u5411\u57fa\u51fd\u6570\u63d2\u503c</strong>\uff1a$f(\\mathbf{x}) = \\sum_i w_i \\phi(|\\mathbf{x} - \\mathbf{c}_i|)$</li>\n</ul>\n<p><strong>\u6df7\u5408\u8868\u793a\u7684\u5e94\u7528\u573a\u666f</strong>\uff1a</p>\n<ul>\n<li>\u5efa\u6a21\u9636\u6bb5\uff1a\u4f7f\u7528\u663e\u5f0f\u8868\u793a\u4fbf\u4e8e\u827a\u672f\u5bb6\u63a7\u5236</li>\n<li>\u7269\u7406\u4eff\u771f\uff1a\u9690\u5f0f\u8868\u793a\u4fbf\u4e8e\u78b0\u649e\u68c0\u6d4b</li>\n<li>\u6e32\u67d3\u9636\u6bb5\uff1a\u8f6c\u6362\u4e3a\u4e09\u89d2\u7f51\u683c\u5229\u7528GPU</li>\n<li>\u673a\u5668\u5b66\u4e60\uff1a\u795e\u7ecf\u9690\u5f0f\u8868\u793a\uff08\u5982NeRF\u3001DeepSDF\uff09\u7ed3\u5408\u4e24\u8005\u4f18\u52bf</li>\n<li>\u533b\u5b66\u6210\u50cf\uff1a\u4f53\u6570\u636e\u7684\u9690\u5f0f\u8868\u793a\uff0c\u8868\u9762\u63d0\u53d6\u7528\u4e8e\u53ef\u89c6\u5316</li>\n<li>CAD/CAM\uff1a\u7cbe\u786e\u7684\u9690\u5f0f\u8868\u793a\uff0c\u7f51\u683c\u5316\u7528\u4e8e\u52a0\u5de5</li>\n</ul>\n<p><strong>\u8868\u793a\u9009\u62e9\u7684\u51b3\u7b56\u56e0\u7d20</strong>\uff1a</p>\n<ol>\n<li><strong>\u67e5\u8be2\u7c7b\u578b</strong>\uff1a\u70b9\u6d4b\u8bd5\u9891\u7e41\u2192\u9690\u5f0f\uff1b\u904d\u5386\u9891\u7e41\u2192\u663e\u5f0f</li>\n<li><strong>\u4fee\u6539\u9700\u6c42</strong>\uff1a\u62d3\u6251\u53d8\u5316\u2192\u9690\u5f0f\uff1b\u5c40\u90e8\u7f16\u8f91\u2192\u663e\u5f0f</li>\n<li><strong>\u7cbe\u5ea6\u8981\u6c42</strong>\uff1a\u89e3\u6790\u8868\u793a\u2192\u9690\u5f0f\uff1b\u56fa\u5b9a\u7cbe\u5ea6\u2192\u663e\u5f0f</li>\n<li><strong>\u786c\u4ef6\u9650\u5236</strong>\uff1aGPU\u53cb\u597d\u2192\u663e\u5f0f\uff1bCPU\u8ba1\u7b97\u2192\u9690\u5f0f\u7686\u53ef</li>\n<li><strong>\u6570\u636e\u6765\u6e90</strong>\uff1a\u626b\u63cf\u6570\u636e\u2192\u663e\u5f0f\uff1b\u6570\u5b66\u5b9a\u4e49\u2192\u9690\u5f0f</li>\n</ol>\n<h3 id=\"612\">6.1.2 \u4ee3\u6570\u8868\u9762</h3>\n<p>\u4ee3\u6570\u8868\u9762\u662f\u7531\u591a\u9879\u5f0f\u65b9\u7a0b\u5b9a\u4e49\u7684\u9690\u5f0f\u8868\u9762\u3002\u5bf9\u4e8e\u5ea6\u6570\u4e3a $d$ \u7684\u4ee3\u6570\u8868\u9762\uff1a</p>\n<p>$$f(\\mathbf{x}) = \\sum_{i+j+k \\leq d} a_{ijk} x^i y^j z^k = 0$$\n\u4ee3\u6570\u8868\u9762\u7684\u7cfb\u6570\u6570\u91cf\u4e3a $\\binom{d+3}{3}$\uff0c\u56e0\u6b64\u4e8c\u6b21\u66f2\u9762\u670910\u4e2a\u7cfb\u6570\uff0c\u4e09\u6b21\u66f2\u9762\u670920\u4e2a\u7cfb\u6570\u3002</p>\n<p><strong>\u4e8c\u6b21\u66f2\u9762\uff08Quadrics\uff09</strong> \u662f\u6700\u5e38\u7528\u7684\u4ee3\u6570\u8868\u9762\uff08$d=2$\uff09\uff1a\n$$\\mathbf{x}^T \\mathbf{Q} \\mathbf{x} + 2\\mathbf{b}^T \\mathbf{x} + c = 0$$\n\u5176\u4e2d $\\mathbf{Q}$ \u662f $3 \\times 3$ \u5bf9\u79f0\u77e9\u9635\uff0c\u53ef\u4ee5\u5199\u6210\u5c55\u5f00\u5f62\u5f0f\uff1a\n$$Q_{11}x^2 + Q_{22}y^2 + Q_{33}z^2 + 2Q_{12}xy + 2Q_{13}xz + 2Q_{23}yz + 2b_1x + 2b_2y + 2b_3z + c = 0$$\n<strong>\u4e8c\u6b21\u66f2\u9762\u7684\u5206\u7c7b</strong>\uff1a</p>\n<p>\u901a\u8fc7\u7279\u5f81\u503c\u5206\u89e3 $\\mathbf{Q} = \\mathbf{V}\\mathbf{\\Lambda}\\mathbf{V}^T$\uff0c\u6839\u636e\u7279\u5f81\u503c $\\lambda_1, \\lambda_2, \\lambda_3$ \u7684\u7b26\u53f7\u53ef\u4ee5\u5206\u7c7b\uff1a</p>\n<ol>\n<li>\n<p><strong>\u692d\u7403\u4f53</strong>\uff1a\u4e09\u4e2a\u6b63\u7279\u5f81\u503c $(+,+,+)$\n   - \u6807\u51c6\u5f62\u5f0f\uff1a$\\frac{x^2}{a^2} + \\frac{y^2}{b^2} + \\frac{z^2}{c^2} = 1$\n   - \u6709\u754c\u3001\u51f8\u3001\u5c01\u95ed\u66f2\u9762</p>\n</li>\n<li>\n<p><strong>\u5355\u53f6\u53cc\u66f2\u9762</strong>\uff1a\u4e24\u6b63\u4e00\u8d1f $(+,+,-)$\n   - \u6807\u51c6\u5f62\u5f0f\uff1a$\\frac{x^2}{a^2} + \\frac{y^2}{b^2} - \\frac{z^2}{c^2} = 1$\n   - \u65e0\u754c\u3001\u978d\u5f62\u66f2\u9762</p>\n</li>\n<li>\n<p><strong>\u53cc\u53f6\u53cc\u66f2\u9762</strong>\uff1a\u4e00\u6b63\u4e24\u8d1f $(+,-,-)$\n   - \u6807\u51c6\u5f62\u5f0f\uff1a$\\frac{x^2}{a^2} - \\frac{y^2}{b^2} - \\frac{z^2}{c^2} = 1$\n   - \u4e24\u4e2a\u5206\u79bb\u7684\u65e0\u754c\u90e8\u5206</p>\n</li>\n<li>\n<p><strong>\u692d\u5706\u629b\u7269\u9762</strong>\uff1a\u4e24\u4e2a\u975e\u96f6\u7279\u5f81\u503c $(+,+,0)$\n   - \u6807\u51c6\u5f62\u5f0f\uff1a$z = \\frac{x^2}{a^2} + \\frac{y^2}{b^2}$\n   - \u5f00\u653e\u7684\u7897\u72b6\u66f2\u9762</p>\n</li>\n<li>\n<p><strong>\u53cc\u66f2\u629b\u7269\u9762</strong>\uff1a\u4e24\u4e2a\u76f8\u53cd\u7b26\u53f7\u7684\u975e\u96f6\u7279\u5f81\u503c $(+,-,0)$\n   - \u6807\u51c6\u5f62\u5f0f\uff1a$z = \\frac{x^2}{a^2} - \\frac{y^2}{b^2}$\n   - \u9a6c\u978d\u5f62\u66f2\u9762</p>\n</li>\n<li>\n<p><strong>\u5706\u67f1\u9762</strong>\uff1a\u4e00\u4e2a\u96f6\u7279\u5f81\u503c $(+,+,0)$\uff0c$\\mathbf{b}$ \u5728\u96f6\u7a7a\u95f4\u5185\n   - \u6807\u51c6\u5f62\u5f0f\uff1a$\\frac{x^2}{a^2} + \\frac{y^2}{b^2} = 1$</p>\n</li>\n<li>\n<p><strong>\u5706\u9525\u9762</strong>\uff1a\u4e00\u4e2a\u96f6\u7279\u5f81\u503c $(+,+,0)$\uff0c\u9876\u70b9\u5728\u539f\u70b9\n   - \u6807\u51c6\u5f62\u5f0f\uff1a$\\frac{x^2}{a^2} + \\frac{y^2}{b^2} - z^2 = 0$</p>\n</li>\n<li>\n<p><strong>\u9000\u5316\u60c5\u51b5</strong>\uff1a\n   - \u5e73\u9762\u5bf9\uff1a\u4e24\u4e2a\u96f6\u7279\u5f81\u503c\n   - \u76f4\u7ebf\uff1a\u79e9\u4e3a1\n   - \u70b9\uff1a\u79e9\u4e3a0\uff08\u4ec5\u5f53 $c &gt; 0$\uff09</p>\n</li>\n</ol>\n<p><strong>\u6807\u51c6\u5f62\u5f0f\u8f6c\u6362</strong>\uff1a</p>\n<ol>\n<li>\u627e\u5230\u4e8c\u6b21\u578b\u7684\u4e2d\u5fc3\uff08\u5982\u679c\u5b58\u5728\uff09\uff1a$\\mathbf{x}_0 = -\\mathbf{Q}^{-1}\\mathbf{b}$</li>\n<li>\u5e73\u79fb\uff1a$\\mathbf{x}' = \\mathbf{x} - \\mathbf{x}_0$</li>\n<li>\u65cb\u8f6c\uff1a$\\mathbf{y} = \\mathbf{V}^T\\mathbf{x}'$</li>\n<li>\u5f97\u5230\u6807\u51c6\u5f62\u5f0f\uff1a$\\sum_{i=1}^3 \\lambda_i y_i^2 + d = 0$</li>\n</ol>\n<p>\u5176\u4e2d $d = c - \\mathbf{b}^T\\mathbf{Q}^{-1}\\mathbf{b}$\uff08\u5bf9\u4e8e\u975e\u9000\u5316\u60c5\u51b5\uff09</p>\n<p><strong>\u5149\u7ebf-\u4e8c\u6b21\u66f2\u9762\u6c42\u4ea4</strong>\uff1a</p>\n<p>\u5c06\u5149\u7ebf $\\mathbf{r}(t) = \\mathbf{o} + t\\mathbf{d}$ \u4ee3\u5165\u4e8c\u6b21\u66f2\u9762\u65b9\u7a0b\uff1a\n$$at^2 + bt + c = 0$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$a = \\mathbf{d}^T\\mathbf{Q}\\mathbf{d}$</li>\n<li>$b = 2(\\mathbf{d}^T\\mathbf{Q}\\mathbf{o} + \\mathbf{b}^T\\mathbf{d})$</li>\n<li>$c = \\mathbf{o}^T\\mathbf{Q}\\mathbf{o} + 2\\mathbf{b}^T\\mathbf{o} + c$</li>\n</ul>\n<p>\u4ea4\u70b9\u6570\u91cf\u5206\u6790\uff1a</p>\n<ul>\n<li>$a = 0$\uff1a\u5149\u7ebf\u5e73\u884c\u4e8e\u4e8c\u6b21\u66f2\u9762\u7684\u6e10\u8fd1\u65b9\u5411</li>\n<li>$\\Delta = b^2 - 4ac &lt; 0$\uff1a\u65e0\u4ea4\u70b9</li>\n<li>$\\Delta = 0$\uff1a\u76f8\u5207\uff08\u4e00\u4e2a\u4ea4\u70b9\uff09</li>\n<li>$\\Delta &gt; 0$\uff1a\u4e24\u4e2a\u4ea4\u70b9</li>\n</ul>\n<p>\u6cd5\u5411\u91cf\u8ba1\u7b97\uff1a\u5728\u4ea4\u70b9 $\\mathbf{p}$ \u5904\uff0c\u6cd5\u5411\u91cf\u4e3a\uff1a\n$$\\mathbf{n} = \\nabla f(\\mathbf{p}) = 2\\mathbf{Q}\\mathbf{p} + 2\\mathbf{b}$$\n<strong>\u9ad8\u6b21\u4ee3\u6570\u8868\u9762</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u4e09\u6b21\u66f2\u9762\uff08$d=3$\uff09</strong>\uff1a\n   - \u6700\u591a27\u6761\u76f4\u7ebf\uff08Cayley-Salmon\u5b9a\u7406\uff09\n   - \u5305\u542bClebsch\u5bf9\u89d2\u4e09\u6b21\u66f2\u9762\u3001Fermat\u4e09\u6b21\u66f2\u9762\n   - \u53ef\u8868\u793a\u90e8\u5206torus\u5f62\u72b6</p>\n</li>\n<li>\n<p><strong>\u56db\u6b21\u66f2\u9762\uff08$d=4$\uff09</strong>\uff1a\n   - <strong>Torus\uff08\u73af\u9762\uff09</strong>\uff1a$(x^2 + y^2 + z^2 + R^2 - r^2)^2 - 4R^2(x^2 + y^2) = 0$\n   - <strong>Kummer\u66f2\u9762</strong>\uff1a\u5177\u670916\u4e2a\u5947\u70b9\u7684\u7279\u6b8a\u56db\u6b21\u66f2\u9762\n   - <strong>Steiner\u7684Roman\u66f2\u9762</strong>\uff1a$x^2y^2 + y^2z^2 + z^2x^2 = r^2xyz$</p>\n</li>\n<li>\n<p><strong>\u7279\u6b8a\u4ee3\u6570\u66f2\u9762</strong>\uff1a\n   - <strong>Cayley\u66f2\u9762</strong>\uff1a\u4e09\u6b21\u786e\u5b9a\u6027\u66f2\u9762\uff0c\u67094\u4e2a\u9525\u5f62\u5947\u70b9\n   - <strong>Enneper\u66f2\u9762</strong>\uff1a\u516b\u6b21\u6781\u5c0f\u66f2\u9762\n   - <strong>Boy\u66f2\u9762</strong>\uff1a\u5b9e\u6295\u5f71\u5e73\u9762\u7684\u6d78\u5165</p>\n</li>\n</ol>\n<p><strong>\u4ee3\u6570\u51e0\u4f55\u4e2d\u7684\u91cd\u8981\u5b9a\u7406</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>B\u00e9zout\u5b9a\u7406</strong>\uff1a\n   - \u5e73\u9762\u60c5\u51b5\uff1a\u5ea6\u6570\u4e3a $m$ \u548c $n$ \u7684\u4ee3\u6570\u66f2\u7ebf\u6700\u591a\u6709 $mn$ \u4e2a\u4ea4\u70b9\uff08\u8ba1\u91cd\u6570\uff09\n   - \u7a7a\u95f4\u63a8\u5e7f\uff1a\u4ee3\u6570\u7c07\u7684\u4ea4\u96c6\u7ef4\u6570\u548c\u5ea6\u6570\u5173\u7cfb</p>\n</li>\n<li>\n<p><strong>Harnack\u5b9a\u7406</strong>\uff1a\n   - \u5ea6\u6570\u4e3a $d$ \u7684\u975e\u5947\u5f02\u5b9e\u4ee3\u6570\u66f2\u7ebf\u7684\u8fde\u901a\u5206\u652f\u6570\u6700\u591a\u4e3a $\\frac{(d-1)(d-2)}{2} + 1$\n   - \u5bf9\u4e8e\u66f2\u9762\uff1a\u9650\u5236\u4e86\u5b9e\u90e8\u5206\u7684\u62d3\u6251\u590d\u6742\u5ea6</p>\n</li>\n<li>\n<p><strong>\u4ee3\u6570\u66f2\u9762\u7684\u62d3\u6251\u4e0d\u53d8\u91cf</strong>\uff1a\n   - \u6b27\u62c9\u7279\u5f81\u6570\uff1a$\\chi = 2 - 2g + s$\uff08$g$ \u662f\u4e8f\u683c\uff0c$s$ \u662f\u5947\u70b9\u6570\uff09\n   - Hodge\u6570\uff1a\u63cf\u8ff0\u66f2\u9762\u7684\u590d\u6742\u51e0\u4f55\u7ed3\u6784</p>\n</li>\n</ol>\n<p><strong>\u8ba1\u7b97\u6280\u5de7\u4e0e\u4f18\u5316</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u9690\u5f0f\u5316</strong>\uff1a\u4ece\u53c2\u6570\u8868\u793a\u8f6c\u6362\u4e3a\u9690\u5f0f\u8868\u793a\n   - \u4f7f\u7528\u7ed3\u5f0f\uff08resultant\uff09\u6d88\u53bb\u53c2\u6570\n   - Gr\u00f6bner\u57fa\u65b9\u6cd5</p>\n</li>\n<li>\n<p><strong>\u591a\u9879\u5f0f\u6c42\u503c\u4f18\u5316</strong>\uff1a\n   - Horner\u6cd5\u5219\uff1a\u51cf\u5c11\u4e58\u6cd5\u6b21\u6570\n   - \u5229\u7528\u5bf9\u79f0\u6027\u51cf\u5c11\u8ba1\u7b97</p>\n</li>\n<li>\n<p><strong>\u6570\u503c\u7a33\u5b9a\u6027</strong>\uff1a\n   - \u6761\u4ef6\u6570\u5206\u6790\uff1a\u75c5\u6001\u4e8c\u6b21\u578b\u7684\u5904\u7406\n   - \u4f7f\u7528\u9f50\u6b21\u5750\u6807\u907f\u514d\u65e0\u7a77\u8fdc\u70b9\u95ee\u9898</p>\n</li>\n</ol>\n<h3 id=\"613-csg\">6.1.3 \u6784\u9020\u5b9e\u4f53\u51e0\u4f55\uff08CSG\uff09</h3>\n<p>CSG\u901a\u8fc7\u5e03\u5c14\u8fd0\u7b97\u7ec4\u5408\u7b80\u5355\u51e0\u4f55\u4f53\u6784\u5efa\u590d\u6742\u5f62\u72b6\u3002\u8fd9\u662fCAD\u7cfb\u7edf\u4e2d\u7684\u6838\u5fc3\u6280\u672f\uff0c\u7279\u522b\u9002\u5408\u5de5\u7a0b\u8bbe\u8ba1\u548c\u7cbe\u786e\u5efa\u6a21\u3002</p>\n<p><strong>\u57fa\u672c\u5e03\u5c14\u8fd0\u7b97</strong>\uff1a</p>\n<p>\u5bf9\u4e8e\u4e24\u4e2a\u9690\u5f0f\u8868\u793a\u7684\u5bf9\u8c61 $A: f_A(\\mathbf{x}) \\leq 0$ \u548c $B: f_B(\\mathbf{x}) \\leq 0$\uff1a</p>\n<ul>\n<li><strong>\u5e76\u96c6\uff08Union\uff09</strong>\uff1a$A \\cup B: \\min(f_A(\\mathbf{x}), f_B(\\mathbf{x})) \\leq 0$</li>\n<li><strong>\u4ea4\u96c6\uff08Intersection\uff09</strong>\uff1a$A \\cap B: \\max(f_A(\\mathbf{x}), f_B(\\mathbf{x})) \\leq 0$</li>\n<li><strong>\u5dee\u96c6\uff08Difference\uff09</strong>\uff1a$A - B: \\max(f_A(\\mathbf{x}), -f_B(\\mathbf{x})) \\leq 0$</li>\n<li><strong>\u5bf9\u79f0\u5dee\uff08Symmetric Difference\uff09</strong>\uff1a$(A - B) \\cup (B - A)$</li>\n</ul>\n<p><strong>R-\u51fd\u6570\u7406\u8bba</strong>\uff1a</p>\n<p>Rvachev\u51fd\u6570\u63d0\u4f9b\u4e86\u4fdd\u6301\u53ef\u5fae\u6027\u7684\u5e03\u5c14\u8fd0\u7b97\uff1a</p>\n<ul>\n<li>R-\u5e76\u96c6\uff1a$f_{A \\cup B} = f_A + f_B + \\sqrt{f_A^2 + f_B^2}$</li>\n<li>R-\u4ea4\u96c6\uff1a$f_{A \\cap B} = f_A + f_B - \\sqrt{f_A^2 + f_B^2}$</li>\n</ul>\n<p>\u8fd9\u4e9b\u51fd\u6570\u4fdd\u8bc1\u4e86 $C^1$ \u8fde\u7eed\u6027\uff0c\u68af\u5ea6\u4e3a\uff1a\n$$\\nabla f_{A \\cup B} = \\nabla f_A \\left(1 + \\frac{f_A}{\\sqrt{f_A^2 + f_B^2}}\\right) + \\nabla f_B \\left(1 + \\frac{f_B}{\\sqrt{f_A^2 + f_B^2}}\\right)$$\n<strong>\u5e73\u6ed1\u5e03\u5c14\u8fd0\u7b97</strong>\uff1a</p>\n<p>\u4e3a\u907f\u514d\u5c16\u9510\u8fb9\u7f18\u5e76\u6539\u5584\u6570\u503c\u6027\u8d28\uff0c\u53ef\u4f7f\u7528\u5404\u79cd\u5e73\u6ed1\u51fd\u6570\uff1a</p>\n<ol>\n<li><strong>\u6307\u6570\u5e73\u6ed1\uff08LogSumExp\uff09</strong>\uff1a\n$$\\text{smin}(a, b, k) = -\\frac{1}{k}\\log(e^{-ka} + e^{-kb})$$</li>\n</ol>\n<ul>\n<li>\u5f53 $k \\to \\infty$ \u65f6\u8d8b\u5411\u4e8e\u6807\u51c6 $\\min$</li>\n<li>\u4fdd\u6301 $C^\\infty$ \u8fde\u7eed\u6027</li>\n</ul>\n<ol start=\"2\">\n<li><strong>\u591a\u9879\u5f0f\u5e73\u6ed1</strong>\uff1a\n$$\\text{smin}(a, b, k) = \\frac{a + b - \\sqrt{(a-b)^2 + k^2}}{2}$$</li>\n</ol>\n<ul>\n<li>\u8ba1\u7b97\u6548\u7387\u9ad8</li>\n<li>\u8fc7\u6e21\u533a\u57df\u5bbd\u5ea6\u4e3a $O(k)$</li>\n</ul>\n<ol start=\"3\">\n<li><strong>\u5e42\u5e73\u6ed1</strong>\uff1a\n$$\\text{smin}(a, b, k) = (a^{-k} + b^{-k})^{-1/k}$$</li>\n</ol>\n<ul>\n<li>\u8981\u6c42 $a, b &gt; 0$</li>\n<li>\u9002\u5408\u6b63\u5b9a\u8ddd\u79bb\u573a</li>\n</ul>\n<ol start=\"4\">\n<li><strong>\u4e09\u6b21\u5e73\u6ed1</strong>\uff1a\n   \u5728\u8fc7\u6e21\u533a\u57df $|a - b| &lt; k$ \u5185\u4f7f\u7528Hermite\u63d2\u503c\uff1a\n$$h(t) = 3t^2 - 2t^3, \\quad t = \\frac{a - b + k}{2k}$$\n<strong>CSG\u6811\u7ed3\u6784</strong>\uff1a</li>\n</ol>\n<pre class=\"codehilite\"><code>CSGNode = Leaf(Primitive, Transform)\n        | Internal(Operation, CSGNode, CSGNode)\n        | Transform(Matrix, CSGNode)\n</code></pre>\n\n<p>\u6811\u7684\u5c5e\u6027\uff1a</p>\n<ul>\n<li><strong>\u53f6\u8282\u70b9</strong>\uff1a\u57fa\u672c\u51e0\u4f55\u4f53\uff08\u7403\u3001\u7acb\u65b9\u4f53\u3001\u5706\u67f1\u3001\u5706\u9525\u3001\u73af\u9762\u7b49\uff09</li>\n<li><strong>\u5185\u90e8\u8282\u70b9</strong>\uff1a\u5e03\u5c14\u8fd0\u7b97\u7b26\uff08\u222a\u3001\u2229\u3001-\uff09</li>\n<li><strong>\u53d8\u6362\u8282\u70b9</strong>\uff1a\u4eff\u5c04\u53d8\u6362\uff08\u5e73\u79fb\u3001\u65cb\u8f6c\u3001\u7f29\u653e\u3001\u9519\u5207\uff09</li>\n<li><strong>\u6b63\u89c4\u5f62\u5f0f</strong>\uff1a\u53ef\u901a\u8fc7\u5fb7\u6469\u6839\u5b9a\u5f8b\u548c\u5206\u914d\u5f8b\u7b80\u5316</li>\n</ul>\n<p><strong>CSG\u6811\u7684\u4f18\u5316</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u7a7a\u95f4\u5305\u56f4\u76d2\u526a\u679d</strong>\uff1a\n   - \u5e76\u96c6\uff1a$\\text{BBox}(A \\cup B) = \\text{BBox}(A) \\cup \\text{BBox}(B)$\n   - \u4ea4\u96c6\uff1a$\\text{BBox}(A \\cap B) = \\text{BBox}(A) \\cap \\text{BBox}(B)$</p>\n</li>\n<li>\n<p><strong>\u6811\u5e73\u8861</strong>\uff1a\n   - \u4f7f\u7528\u542f\u53d1\u5f0f\u65b9\u6cd5\u91cd\u7ec4\u6811\u4ee5\u6700\u5c0f\u5316\u6df1\u5ea6\n   - \u76f8\u4f3c\u5927\u5c0f\u7684\u5bf9\u8c61\u4f18\u5148\u7ec4\u5408</p>\n</li>\n<li>\n<p><strong>\u516c\u5171\u5b50\u8868\u8fbe\u5f0f\u6d88\u9664</strong>\uff1a\n   - \u8bc6\u522b\u91cd\u590d\u7684\u5b50\u6811\n   - \u4f7f\u7528DAG\uff08\u6709\u5411\u65e0\u73af\u56fe\uff09\u4ee3\u66ff\u6811</p>\n</li>\n</ol>\n<p><strong>\u5149\u7ebf\u8ffd\u8e2aCSG</strong>\uff1a</p>\n<p>\u7ecf\u5178\u7684\u533a\u95f4\u5206\u7c7b\u7b97\u6cd5\uff1a</p>\n<ol>\n<li>\n<p><strong>\u4ea4\u70b9\u8ba1\u7b97</strong>\uff1a\n   - \u5bf9\u6bcf\u4e2a\u53f6\u8282\u70b9\u8ba1\u7b97\u5149\u7ebf\u4ea4\u70b9 ${t_i^{\\text{in}}, t_i^{\\text{out}}}$\n   - \u8003\u8651\u6570\u503c\u5bb9\u5dee\u5904\u7406\u76f8\u5207\u60c5\u51b5</p>\n</li>\n<li>\n<p><strong>\u533a\u95f4\u5408\u5e76</strong>\uff1a\n   <code>Union: \u5408\u5e76\u91cd\u53e0\u533a\u95f4\n   Intersection: \u53d6\u533a\u95f4\u4ea4\u96c6\n   Difference: \u4ece\u7b2c\u4e00\u4e2a\u533a\u95f4\u4e2d\u51cf\u53bb\u7b2c\u4e8c\u4e2a</code></p>\n</li>\n<li>\n<p><strong>\u6cd5\u5411\u91cf\u8ba1\u7b97</strong>\uff1a\n   - \u53f6\u8282\u70b9\uff1a\u76f4\u63a5\u8ba1\u7b97\u51e0\u4f55\u4f53\u6cd5\u5411\n   - \u5e76\u96c6\uff1a\u9009\u62e9\u8f83\u5c0f SDF \u503c\u7684\u6cd5\u5411\n   - \u4ea4\u96c6\uff1a\u9009\u62e9\u8f83\u5927 SDF \u503c\u7684\u6cd5\u5411\n   - \u5dee\u96c6\uff1a\u53ef\u80fd\u9700\u8981\u7ffb\u8f6c\u6cd5\u5411</p>\n</li>\n</ol>\n<p><strong>\u6539\u8fdb\u7684\u7b97\u6cd5</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>Goldfeather\u7b97\u6cd5</strong>\uff1a\n   - \u4f7f\u7528\u6df1\u5ea6\u7f13\u51b2\u548c\u6a21\u677f\u7f13\u51b2\n   - \u9002\u5408GPU\u5b9e\u73b0</p>\n</li>\n<li>\n<p><strong>SCS\uff08Sequenced Convex Subtraction\uff09</strong>\uff1a\n   - \u5c06CSG\u8f6c\u6362\u4e3a\u51f8\u96c6\u7684\u5dee\u96c6\u5e8f\u5217\n   - \u51cf\u5c11\u6e32\u67d3\u904d\u6570</p>\n</li>\n</ol>\n<p><strong>CSG\u5230\u8fb9\u754c\u8868\u793a\u7684\u8f6c\u6362</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u8fb9\u754c\u6c42\u503c\u7b97\u6cd5</strong>\uff1a\n   - \u8ba1\u7b97\u6240\u6709\u57fa\u672c\u4f53\u7684\u4ea4\u7ebf\n   - \u6839\u636e\u5e03\u5c14\u8fd0\u7b97\u9009\u62e9\u4fdd\u7559\u7684\u8fb9\u754c\u7247\u6bb5\n   - \u62fc\u63a5\u6210\u5b8c\u6574\u7684\u8fb9\u754c\u8868\u793a</p>\n</li>\n<li>\n<p><strong>Marching Cubes\u6269\u5c55</strong>\uff1a\n   - \u5728\u4f53\u7d20\u7f51\u683c\u4e0a\u8bc4\u4f30CSG\u51fd\u6570\n   - \u4f7f\u7528\u53cc\u7ebf\u6027\u63d2\u503c\u63d0\u9ad8\u7cbe\u5ea6</p>\n</li>\n</ol>\n<p><strong>CSG\u7684\u6570\u5b66\u6027\u8d28</strong>\uff1a</p>\n<ol>\n<li><strong>\u6b63\u5219\u5316\u5e03\u5c14\u8fd0\u7b97</strong>\uff1a\n$$A \\cup^* B = \\text{closure}(\\text{interior}(A \\cup B))$$</li>\n</ol>\n<ul>\n<li>\u6d88\u9664\u60ac\u6302\u8fb9\u548c\u5b64\u7acb\u70b9</li>\n<li>\u4fdd\u8bc1\u7ed3\u679c\u662f\u6709\u6548\u7684\u5b9e\u4f53</li>\n</ul>\n<ol start=\"2\">\n<li><strong>CSG\u7684\u5b8c\u5907\u6027</strong>\uff1a\n   - \u4efb\u4f55\u6b63\u5219\u96c6\u53ef\u4ee5\u8868\u793a\u4e3a\u6709\u9650\u4e2a\u534a\u7a7a\u95f4\u7684\u6b63\u5219\u5e03\u5c14\u7ec4\u5408\n   - \u5b9e\u8df5\u4e2d\u53d7\u57fa\u672c\u4f53\u96c6\u5408\u7684\u9650\u5236</li>\n</ol>\n<p><strong>\u5e94\u7528\u9886\u57df</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>CAD/CAM</strong>\uff1a\n   - \u673a\u68b0\u96f6\u4ef6\u8bbe\u8ba1\n   - \u5efa\u7b51\u5efa\u6a21\n   - 3D\u6253\u5370\u8def\u5f84\u89c4\u5212</p>\n</li>\n<li>\n<p><strong>\u6e38\u620f\u5f15\u64ce</strong>\uff1a\n   - \u7834\u574f\u7cfb\u7edf\uff08\u5b9e\u65f6\u5e03\u5c14\u8fd0\u7b97\uff09\n   - \u7a0b\u5e8f\u5316\u5185\u5bb9\u751f\u6210</p>\n</li>\n<li>\n<p><strong>\u79d1\u5b66\u53ef\u89c6\u5316</strong>\uff1a\n   - \u5206\u5b50\u5efa\u6a21\uff08\u8303\u5fb7\u534e\u8868\u9762\uff09\n   - \u5730\u8d28\u5efa\u6a21\uff08\u5730\u5c42\u7ed3\u6784\uff09</p>\n</li>\n</ol>\n<p><strong>\u6027\u80fd\u4f18\u5316\u6280\u5de7</strong>\uff1a</p>\n<ol>\n<li><strong>\u7a7a\u95f4\u54c8\u5e0c</strong>\uff1a\u52a0\u901f\u90bb\u8fd1\u67e5\u8be2</li>\n<li><strong>\u5c42\u6b21\u5316\u91c7\u6837</strong>\uff1a\u81ea\u9002\u5e94\u7ec6\u5316</li>\n<li><strong>GPU\u5e76\u884c\u5316</strong>\uff1a\u5229\u7528\u7247\u5143\u7740\u8272\u5668</li>\n<li><strong>\u589e\u91cf\u66f4\u65b0</strong>\uff1a\u5c40\u90e8\u91cd\u8ba1\u7b97</li>\n</ol>\n<p><strong>CSG\u7684\u4f18\u7f3a\u70b9</strong>\uff1a</p>\n<p>\u4f18\u70b9\uff1a</p>\n<ul>\n<li>\u7cbe\u786e\u7684\u5b9e\u4f53\u8868\u793a\uff0c\u65e0\u8fd1\u4f3c\u8bef\u5dee</li>\n<li>\u7d27\u51d1\u7684\u5b58\u50a8\uff08\u6811\u7ed3\u6784\uff09</li>\n<li>\u5386\u53f2\u53ef\u8ffd\u6eaf\uff08\u4fdd\u7559\u5efa\u6a21\u6b65\u9aa4\uff09</li>\n<li>\u6613\u4e8e\u53c2\u6570\u5316\u548c\u7ea6\u675f\u6c42\u89e3</li>\n<li>\u652f\u6301\u7cbe\u786e\u7684\u8d28\u91cf\u5c5e\u6027\u8ba1\u7b97\uff08\u4f53\u79ef\u3001\u8d28\u5fc3\u7b49\uff09</li>\n</ul>\n<p>\u7f3a\u70b9\uff1a</p>\n<ul>\n<li>\u6e32\u67d3\u8f83\u6162\uff08\u9700\u8981\u904d\u5386\u6811\uff09</li>\n<li>\u96be\u4ee5\u9ad8\u6548\u8f6c\u6362\u4e3a\u591a\u8fb9\u5f62\u7f51\u683c</li>\n<li>\u5c40\u90e8\u4fee\u6539\u53ef\u80fd\u9700\u8981\u5168\u5c40\u91cd\u8ba1\u7b97</li>\n<li>\u4e0d\u9002\u5408\u81ea\u7531\u5f62\u72b6\u548c\u6709\u673a\u5efa\u6a21</li>\n<li>\u6570\u503c\u9c81\u68d2\u6027\u95ee\u9898\uff08\u5e03\u5c14\u8fd0\u7b97\u7684\u9000\u5316\u60c5\u51b5\uff09</li>\n</ul>\n<h3 id=\"614-sdf\">6.1.4 \u7b26\u53f7\u8ddd\u79bb\u573a\uff08SDF\uff09</h3>\n<p>SDF\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u9690\u5f0f\u8868\u793a\uff0c\u5176\u4e2d $f(\\mathbf{x})$ \u8868\u793a\u70b9 $\\mathbf{x}$ \u5230\u8868\u9762\u7684\u6709\u7b26\u53f7\u8ddd\u79bb\uff1a\n$$f(\\mathbf{x}) = \\text{sign}(\\mathbf{x}) \\cdot \\min_{\\mathbf{y} \\in \\partial S} |\\mathbf{x} - \\mathbf{y}|$$\n\u5176\u4e2d\u7b26\u53f7\u51fd\u6570\u5b9a\u4e49\u4e3a\uff1a\n$$\\text{sign}(\\mathbf{x}) = \\begin{cases}\n-1 &amp; \\text{\u5982\u679c } \\mathbf{x} \\text{ \u5728\u7269\u4f53\u5185\u90e8} \\\n0 &amp; \\text{\u5982\u679c } \\mathbf{x} \\text{ \u5728\u8868\u9762\u4e0a} \\\n+1 &amp; \\text{\u5982\u679c } \\mathbf{x} \\text{ \u5728\u7269\u4f53\u5916\u90e8}\n\\end{cases}$$\n<strong>SDF\u7684\u6570\u5b66\u6027\u8d28</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u68af\u5ea6\u6027\u8d28</strong>\uff1a\n   - $|\\nabla f| = 1$ \u51e0\u4e4e\u5904\u5904\u6210\u7acb\uff08\u9664\u4e86\u4e2d\u8f74\u4e0a\uff09\n   - \u6cd5\u5411\u91cf\uff1a$\\mathbf{n} = \\nabla f$\n   - \u68af\u5ea6\u6307\u5411\u8fdc\u79bb\u8868\u9762\u7684\u65b9\u5411</p>\n</li>\n<li>\n<p><strong>\u6700\u8fd1\u70b9\u6620\u5c04</strong>\uff1a\n$$\\mathbf{p}_{\\text{closest}}(\\mathbf{x}) = \\mathbf{x} - f(\\mathbf{x})\\nabla f(\\mathbf{x})$$\n\u8fd9\u4e2a\u6620\u5c04\u5728\u4e2d\u8f74\uff08medial axis\uff09\u4e0a\u4e0d\u8fde\u7eed</p>\n</li>\n<li>\n<p><strong>\u66f2\u7387\u4e0eHessian\u7684\u5173\u7cfb</strong>\uff1a\n   \u5728\u8868\u9762\u4e0a\uff0c\u4e3b\u66f2\u7387 $\\kappa_1, \\kappa_2$ \u662fHessian\u77e9\u9635 $\\mathbf{H}_f$ \u7684\u7279\u5f81\u503c</p>\n</li>\n<li>\n<p><strong>\u6c34\u5e73\u96c6\u6027\u8d28</strong>\uff1a\n   - \u8868\u9762\uff1a${\\mathbf{x} : f(\\mathbf{x}) = 0}$\n   - \u504f\u79fb\u8868\u9762\uff1a${\\mathbf{x} : f(\\mathbf{x}) = d}$</p>\n</li>\n</ol>\n<p><strong>Eikonal\u65b9\u7a0b</strong>\uff1a</p>\n<p>SDF\u6ee1\u8db3\u504f\u5fae\u5206\u65b9\u7a0b\uff1a\n$$|\\nabla f| = 1$$\n\u8fd9\u662f\u4e00\u4e2aHamilton-Jacobi\u65b9\u7a0b\uff0c\u53ef\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u6c42\u89e3\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5feb\u901f\u884c\u8fdb\u6cd5\uff08FMM\uff09</strong>\uff1a\n   - \u57fa\u4e8eDijkstra\u7b97\u6cd5\u7684\u601d\u60f3\n   - \u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(N \\log N)$\n   - \u5355\u5411\u4f20\u64ad\uff0c\u9002\u5408\u5355\u6e90\u95ee\u9898</p>\n</li>\n<li>\n<p><strong>\u5feb\u901f\u626b\u63cf\u6cd5\uff08FSM\uff09</strong>\uff1a\n   - \u4f7f\u7528Gauss-Seidel\u8fed\u4ee3\n   - \u591a\u6b21\u626b\u63cf\u76f4\u5230\u6536\u655b\n   - \u7b80\u5355\u5b9e\u73b0\uff0c\u6613\u4e8e\u5e76\u884c\u5316</p>\n</li>\n<li>\n<p><strong>\u5e76\u884c\u7b97\u6cd5</strong>\uff1a\n   - GPU\u4e0a\u7684\u5e76\u884c\u626b\u63cf\n   - \u5206\u5757\u5e76\u884cFMM</p>\n</li>\n</ol>\n<p><strong>\u57fa\u672c\u51e0\u4f55\u4f53\u7684\u89e3\u6790SDF</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u7403\u4f53</strong>\uff08\u534a\u5f84$r$\uff0c\u4e2d\u5fc3$\\mathbf{c}$\uff09\uff1a\n$$f(\\mathbf{x}) = |\\mathbf{x} - \\mathbf{c}| - r$$</p>\n</li>\n<li>\n<p><strong>\u7acb\u65b9\u4f53</strong>\uff08\u534a\u8fb9\u957f$\\mathbf{b}$\uff09\uff1a\n$$f(\\mathbf{x}) = |\\max(\\mathbf{0}, |\\mathbf{x}| - \\mathbf{b})|_\\infty + \\min(\\max(|x|-b_x, |y|-b_y, |z|-b_z), 0)$$</p>\n</li>\n<li>\n<p><strong>\u5706\u73af\u4f53</strong>\uff08\u5927\u534a\u5f84$R$\uff0c\u5c0f\u534a\u5f84$r$\uff09\uff1a\n$$f(\\mathbf{x}) = \\sqrt{(R - \\sqrt{x^2 + y^2})^2 + z^2} - r$$</p>\n</li>\n<li>\n<p><strong>\u5706\u67f1\u4f53</strong>\uff08\u534a\u5f84$r$\uff0c\u9ad8\u5ea6$h$\uff09\uff1a\n$$f(\\mathbf{x}) = \\max(\\sqrt{x^2 + y^2} - r, |z| - h/2)$$</p>\n</li>\n<li>\n<p><strong>\u5706\u9525</strong>\uff08\u5e95\u534a\u5f84$r$\uff0c\u9ad8\u5ea6$h$\uff09\uff1a\n$$f(\\mathbf{x}) = \\max(\\sqrt{x^2 + y^2} - r(1 - z/h), z)$$</p>\n</li>\n<li>\n<p><strong>\u516b\u9762\u4f53</strong>\uff08\u534a\u5f84$r$\uff09\uff1a\n$$f(\\mathbf{x}) = (|x| + |y| + |z| - r) / \\sqrt{3}$$\n<strong>SDF\u7684\u53d8\u6362\u64cd\u4f5c</strong>\uff1a</p>\n</li>\n<li>\n<p><strong>\u521a\u4f53\u53d8\u6362</strong>\uff1a\n   - \u5e73\u79fb\uff1a$f_T(\\mathbf{x}) = f(\\mathbf{x} - \\mathbf{t})$\n   - \u65cb\u8f6c\uff1a$f_R(\\mathbf{x}) = f(\\mathbf{R}^{-1}\\mathbf{x})$\n   - \u7ec4\u5408\uff1a$f_{TR}(\\mathbf{x}) = f(\\mathbf{R}^{-1}(\\mathbf{x} - \\mathbf{t}))$</p>\n</li>\n<li>\n<p><strong>\u975e\u5747\u5300\u7f29\u653e</strong>\uff08\u7834\u574f\u8ddd\u79bb\u573a\u6027\u8d28\uff09\uff1a\n$$f_S(\\mathbf{x}) \\approx \\min(s_x, s_y, s_z) \\cdot f(\\mathbf{x}/\\mathbf{s})$$</p>\n</li>\n<li>\n<p><strong>\u5bf9\u79f0\u64cd\u4f5c</strong>\uff1a\n   - \u955c\u50cf\uff1a$f_{\\text{mirror}}(\\mathbf{x}) = f(|x|, y, z)$\n   - \u91cd\u590d\uff1a$f_{\\text{repeat}}(\\mathbf{x}) = f(\\text{mod}(\\mathbf{x}, \\mathbf{p}) - \\mathbf{p}/2)$</p>\n</li>\n<li>\n<p><strong>\u626d\u66f2\u53d8\u6362</strong>\uff1a\n   - \u5f2f\u66f2\uff1a\u5e94\u7528\u975e\u7ebf\u6027\u7a7a\u95f4\u53d8\u6362\n   - \u626d\u8f6c\uff1a$\\mathbf{x}' = (x\\cos(\\theta z) - y\\sin(\\theta z), x\\sin(\\theta z) + y\\cos(\\theta z), z)$</p>\n</li>\n</ol>\n<p><strong>SDF\u7684\u7ec4\u5408\u8fd0\u7b97</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u6807\u51c6\u5e03\u5c14\u8fd0\u7b97</strong>\uff08\u7834\u574f\u8ddd\u79bb\u573a\u6027\u8d28\uff09\uff1a\n   - \u5e76\u96c6\uff1a$f_{A \\cup B} = \\min(f_A, f_B)$\n   - \u4ea4\u96c6\uff1a$f_{A \\cap B} = \\max(f_A, f_B)$\n   - \u5dee\u96c6\uff1a$f_{A - B} = \\max(f_A, -f_B)$</p>\n</li>\n<li>\n<p><strong>\u6539\u8fdb\u7684\u8fd0\u7b97</strong>\uff08\u90e8\u5206\u4fdd\u6301\u8ddd\u79bb\u573a\u6027\u8d28\uff09\uff1a\n   - Quilez\u7684\u5e73\u6ed1\u6700\u5c0f\uff1a\n$$\\text{smin}(a, b, k) = \\min(a, b) - h(k)$$\n\u5176\u4e2d $h(k) = k^2 / 4$ \u5f53 $|a - b| &lt; k$</p>\n</li>\n<li>\n<p><strong>\u7cbe\u786e\u8ddd\u79bb\u573a\u8fd0\u7b97</strong>\uff1a\n   - \u9700\u8981\u8003\u8651\u4e2d\u8f74\u53d8\u5316\n   - \u8ba1\u7b97\u590d\u6742\u5ea6\u9ad8\n   - \u901a\u5e38\u4f7f\u7528\u8fd1\u4f3c\u65b9\u6cd5</p>\n</li>\n</ol>\n<p><strong>\u5149\u7ebf\u884c\u8fdb\uff08Ray Marching\uff09\u7b97\u6cd5</strong>\uff1a</p>\n<pre class=\"codehilite\"><code class=\"language-glsl\">float rayMarch(vec3 ro, vec3 rd, float tMin, float tMax) {\n    float t = tMin;\n    for (int i = 0; i &lt; MAX_STEPS; i++) {\n        vec3 p = ro + t * rd;\n        float d = SDF(p);\n\n        if (d &lt; EPSILON) return t;  // \u547d\u4e2d\n        if (t &gt; tMax) break;        // \u8d85\u51fa\u8303\u56f4\n\n        t += d * STEP_SCALE;        // \u4fdd\u5b88\u6b65\u8fdb\n    }\n    return -1.0;  // \u672a\u547d\u4e2d\n}\n</code></pre>\n\n<p><strong>\u4f18\u5316\u6280\u672f</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u81ea\u9002\u5e94\u6b65\u957f</strong>\uff1a\n   - \u8fd1\u8868\u9762\u65f6\u51cf\u5c0f\u6b65\u957f\n   - \u4f7f\u7528\u68af\u5ea6\u4fe1\u606f\u8c03\u6574</p>\n</li>\n<li>\n<p><strong>\u7a7a\u95f4\u5212\u5206</strong>\uff1a\n   - \u5305\u56f4\u76d2\u5c42\u6b21\u7ed3\u6784\n   - \u516b\u53c9\u6811\u52a0\u901f</p>\n</li>\n<li>\n<p><strong>\u5c4f\u5e55\u7a7a\u95f4\u4f18\u5316</strong>\uff1a\n   - \u65f6\u95f4\u76f8\u5e72\u6027\u5229\u7528\n   - \u5206\u5c42\u5149\u7ebf\u884c\u8fdb</p>\n</li>\n</ol>\n<p><strong>SDF\u7684\u9ad8\u7ea7\u5e94\u7528</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5b9e\u65f6\u6e32\u67d3</strong>\uff1a\n   - \u4f53\u79ef\u6e32\u67d3\u6548\u679c\n   - \u8f6f\u9634\u5f71\u548c\u73af\u5883\u5149\u906e\u853d\n   - \u6b21\u8868\u9762\u6563\u5c04\u8fd1\u4f3c</p>\n</li>\n<li>\n<p><strong>\u7269\u7406\u4eff\u771f</strong>\uff1a\n   - \u78b0\u649e\u68c0\u6d4b\uff1a$d = \\text{SDF}(\\mathbf{p})$\n   - \u63a5\u89e6\u529b\u8ba1\u7b97\uff1a$\\mathbf{f} = -k \\cdot d \\cdot \\nabla\\text{SDF}$\n   - \u6d41\u4f53\u8fb9\u754c\u6761\u4ef6</p>\n</li>\n<li>\n<p><strong>\u5f62\u72b6\u5206\u6790</strong>\uff1a\n   - \u4e2d\u8f74\u63d0\u53d6\n   - \u5f62\u72b6\u63cf\u8ff0\u5b50\n   - \u5bf9\u79f0\u6027\u68c0\u6d4b</p>\n</li>\n<li>\n<p><strong>\u673a\u5668\u5b66\u4e60\u5e94\u7528</strong>\uff1a\n   - <strong>DeepSDF</strong>\uff1a\u795e\u7ecf\u7f51\u7edc\u9690\u5f0f\u8868\u793a\n   - <strong>Neural Implicit Surfaces</strong>\uff1a\u8fde\u7eed\u5f62\u72b6\u8868\u793a\n   - <strong>Occupancy Networks</strong>\uff1a\u5360\u7528\u6982\u7387\u573a</p>\n</li>\n<li>\n<p><strong>\u5f62\u72b6\u64cd\u4f5c</strong>\uff1a\n   - \u5f62\u6001\u5b66\u64cd\u4f5c\uff08\u8150\u8680\u3001\u81a8\u80c0\uff09\n   - \u5f62\u72b6\u63d2\u503c\uff1a$f_t = (1-t)f_0 + tf_1$\n   - \u5f62\u72b6\u4f18\u5316</p>\n</li>\n</ol>\n<p><strong>\u6570\u503c\u65b9\u6cd5\u4e0e\u5b9e\u73b0</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u79bb\u6563\u5316\u5b58\u50a8</strong>\uff1a\n   - \u89c4\u5219\u7f51\u683c\uff1a\u7b80\u5355\u4f46\u5185\u5b58\u5bc6\u96c6\n   - \u81ea\u9002\u5e94\u7f51\u683c\uff1a\u516b\u53c9\u6811\u3001KD\u6811\n   - \u7a00\u758f\u8868\u793a\uff1a\u4ec5\u5b58\u50a8\u7a84\u5e26</p>\n</li>\n<li>\n<p><strong>\u63d2\u503c\u65b9\u6cd5</strong>\uff1a\n   - \u4e09\u7ebf\u6027\u63d2\u503c\uff1a$C^0$ \u8fde\u7eed\n   - \u4e09\u6b21\u63d2\u503c\uff1a$C^1$ \u8fde\u7eed\n   - WENO\u65b9\u6848\uff1a\u9ad8\u9636\u7cbe\u5ea6</p>\n</li>\n<li>\n<p><strong>\u68af\u5ea6\u8ba1\u7b97</strong>\uff1a\n   - \u6709\u9650\u5dee\u5206\uff1a$(f(x+h) - f(x-h))/(2h)$\n   - \u89e3\u6790\u68af\u5ea6\uff1a\u5bf9\u4e8e\u5df2\u77e5\u51fd\u6570\n   - \u81ea\u52a8\u5fae\u5206\uff1a\u5bf9\u4e8e\u590d\u6742\u7ec4\u5408</p>\n</li>\n</ol>\n<p><strong>\u5e38\u89c1\u95ee\u9898\u4e0e\u89e3\u51b3\u65b9\u6848</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>C\u00b9\u4e0d\u8fde\u7eed\u6027</strong>\uff1a\n   - \u5728\u5e03\u5c14\u8fd0\u7b97\u8fb9\u754c\n   - \u4f7f\u7528\u5e73\u6ed1\u8fd0\u7b97\u7f13\u89e3</p>\n</li>\n<li>\n<p><strong>\u6570\u503c\u8bef\u5dee\u7d2f\u79ef</strong>\uff1a\n   - \u591a\u6b21\u53d8\u6362\u540e\u7684\u8bef\u5dee\n   - \u5b9a\u671f\u91cd\u65b0\u521d\u59cb\u5316</p>\n</li>\n<li>\n<p><strong>\u4e2d\u8f74\u5947\u5f02\u6027</strong>\uff1a\n   - \u68af\u5ea6\u4e0d\u5b58\u5728\n   - \u4f7f\u7528\u6b63\u5219\u5316\u65b9\u6cd5</p>\n</li>\n</ol>\n<h3 id=\"615\">6.1.5 \u70b9\u4e91\u4e0e\u4f53\u7d20\u8868\u793a</h3>\n<p><strong>\u70b9\u4e91\u8868\u793a</strong>\uff1a</p>\n<ul>\n<li>\u65e0\u8fde\u63a5\u4fe1\u606f\u76843D\u70b9\u96c6\u5408 ${\\mathbf{p}_i}_{i=1}^N$</li>\n<li>\u5e38\u7528\u4e8e3D\u626b\u63cf\u548c\u6fc0\u5149\u96f7\u8fbe\u6570\u636e</li>\n<li>\u6bcf\u4e2a\u70b9\u53ef\u9644\u52a0\u5c5e\u6027\uff1a\u6cd5\u5411\u91cf\u3001\u989c\u8272\u3001\u7f6e\u4fe1\u5ea6\u7b49</li>\n<li>\u8868\u9762\u91cd\u5efa\u65b9\u6cd5\uff1a\u6cca\u677e\u91cd\u5efa\u3001\u79fb\u52a8\u6700\u5c0f\u4e8c\u4e58\uff08MLS\uff09\u3001Ball Pivoting</li>\n</ul>\n<p><strong>\u70b9\u4e91\u5904\u7406\u6280\u672f</strong>\uff1a</p>\n<ul>\n<li>\u964d\u91c7\u6837\uff1a\u4f53\u7d20\u7f51\u683c\u6ee4\u6ce2\u3001\u968f\u673a\u91c7\u6837\u3001FPS\uff08\u6700\u8fdc\u70b9\u91c7\u6837\uff09</li>\n<li>\u6cd5\u5411\u91cf\u4f30\u8ba1\uff1aPCA\u5206\u6790\u5c40\u90e8\u90bb\u57df\u3001\u4e00\u81f4\u6027\u4f20\u64ad</li>\n<li>\u7279\u5f81\u63d0\u53d6\uff1aFPFH\u30013D-SIFT\u3001ISS\u5173\u952e\u70b9</li>\n<li>\u914d\u51c6\uff1aICP\uff08\u8fed\u4ee3\u6700\u8fd1\u70b9\uff09\u3001RANSAC\u3001\u7279\u5f81\u5339\u914d</li>\n</ul>\n<p><strong>\u79fb\u52a8\u6700\u5c0f\u4e8c\u4e58\uff08MLS\uff09\u8868\u9762</strong>\uff1a\n\u5bf9\u4e8e\u67e5\u8be2\u70b9 $\\mathbf{x}$\uff0c\u62df\u5408\u5c40\u90e8\u53c2\u8003\u5e73\u9762\uff1a\n$$\\min_{\\mathbf{n}, d} \\sum_{i} w_i(\\mathbf{x})[\\mathbf{n} \\cdot \\mathbf{p}_i - d]^2$$\n\u5176\u4e2d\u6743\u91cd\u51fd\u6570 $w_i(\\mathbf{x}) = \\exp(-|\\mathbf{x} - \\mathbf{p}_i|^2/h^2)$</p>\n<p><strong>\u4f53\u7d20\u8868\u793a</strong>\uff1a</p>\n<ul>\n<li>3D\u7f51\u683c\u4e2d\u7684\u5360\u7528\u4fe1\u606f</li>\n<li>\u89c4\u5219\u7f51\u683c\uff1a\u7b80\u5355\u4f46\u5185\u5b58\u5bc6\u96c6</li>\n<li>\u5c42\u6b21\u7ed3\u6784\uff1a\u516b\u53c9\u6811\uff08Octree\uff09\u8868\u793a</li>\n<li>\u7a00\u758f\u4f53\u7d20\u516b\u53c9\u6811\uff08SVO\uff09\u7528\u4e8e\u5927\u89c4\u6a21\u573a\u666f</li>\n<li>\u9002\u5408\u4f53\u79ef\u6e32\u67d3\u548c\u7269\u7406\u4eff\u771f</li>\n</ul>\n<p><strong>\u516b\u53c9\u6811\u7ed3\u6784</strong>\uff1a</p>\n<ul>\n<li>\u9012\u5f52\u7a7a\u95f4\u5212\u5206\uff1a\u6bcf\u4e2a\u8282\u70b9\u67098\u4e2a\u5b50\u8282\u70b9</li>\n<li>\u81ea\u9002\u5e94\u5206\u8fa8\u7387\uff1a\u7ec6\u8282\u533a\u57df\u6df1\u5ea6\u66f4\u5927</li>\n<li>\u9ad8\u6548\u7684\u7a7a\u95f4\u67e5\u8be2\uff1a$O(\\log N)$</li>\n<li>\u652f\u6301out-of-core\u5904\u7406</li>\n</ul>\n<p><strong>\u4f53\u7d20\u5316\u7b97\u6cd5</strong>\uff1a</p>\n<ol>\n<li><strong>\u4fdd\u5b88\u5149\u6805\u5316</strong>\uff1a\u786e\u4fdd\u4e0d\u4e22\u5931\u8584\u7ed3\u6784</li>\n<li><strong>\u6df1\u5ea6\u5265\u79bb</strong>\uff1a\u5904\u7406\u975e\u6d41\u5f62\u548c\u81ea\u76f8\u4ea4</li>\n<li><strong>GPU\u5e76\u884c\u5316</strong>\uff1a\u4f7f\u7528\u539f\u5b50\u64cd\u4f5c</li>\n<li><strong>\u5c42\u6b21\u751f\u6210</strong>\uff1a\u81ea\u5e95\u5411\u4e0a\u6784\u5efa\u516b\u53c9\u6811</li>\n</ol>\n<p><strong>\u6df7\u5408\u8868\u793a</strong>\uff1a</p>\n<ul>\n<li>\u70b9\u4e91 + \u5c40\u90e8\u66f2\u9762\uff1aSurfels\uff08surface elements\uff09</li>\n<li>\u4f53\u7d20 + SDF\uff1aTSDF\uff08Truncated SDF\uff09\u7528\u4e8e3D\u91cd\u5efa</li>\n<li>\u516b\u53c9\u6811 + \u70b9\u4e91\uff1a\u7528\u4e8e\u5927\u89c4\u6a21\u573a\u666f\u7684LOD\u7cfb\u7edf</li>\n</ul>\n<p><strong>\u73b0\u4ee3\u5e94\u7528</strong>\uff1a</p>\n<ul>\n<li>SLAM\u7cfb\u7edf\uff1a\u5b9e\u65f63D\u5730\u56fe\u6784\u5efa</li>\n<li>\u81ea\u52a8\u9a7e\u9a76\uff1aLiDAR\u70b9\u4e91\u5904\u7406</li>\n<li>\u533b\u5b66\u6210\u50cf\uff1a\u4f53\u7d20\u6570\u636e\u53ef\u89c6\u5316</li>\n<li>\u6df1\u5ea6\u5b66\u4e60\uff1aPointNet\u3001VoxelNet\u7b49\u67b6\u6784</li>\n</ul>\n<h3 id=\"616\">6.1.6 \u7f51\u683c\u8868\u793a</h3>\n<p>\u591a\u8fb9\u5f62\u7f51\u683c\uff08\u4e3b\u8981\u662f\u4e09\u89d2\u7f51\u683c\uff09\u662f\u5b9e\u65f6\u56fe\u5f62\u5b66\u7684\u4e3b\u6d41\u8868\u793a\uff1a</p>\n<p><strong>\u57fa\u672c\u5143\u7d20</strong>\uff1a</p>\n<ul>\n<li>\u9876\u70b9\uff08Vertices\uff09\uff1a\u4f4d\u7f6e\u5750\u6807\uff0c\u53ef\u9644\u52a0\u6cd5\u5411\u91cf\u3001UV\u5750\u6807\u3001\u989c\u8272\u7b49</li>\n<li>\u8fb9\uff08Edges\uff09\uff1a\u8fde\u63a5\u4e24\u4e2a\u9876\u70b9</li>\n<li>\u9762\uff08Faces\uff09\uff1a\u7531\u8fb9\u56f4\u6210\u7684\u591a\u8fb9\u5f62\uff0c\u901a\u5e38\u662f\u4e09\u89d2\u5f62\u6216\u56db\u8fb9\u5f62</li>\n<li>\u534a\u8fb9\uff08Half-edges\uff09\uff1a\u6709\u5411\u8fb9\uff0c\u4fbf\u4e8e\u904d\u5386</li>\n</ul>\n<p><strong>\u7f51\u683c\u6570\u636e\u7ed3\u6784</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u9762\u8868\uff08Face List\uff09</strong>\uff1a\n   - \u7b80\u5355\u4f46\u5197\u4f59\uff1a\u6bcf\u4e2a\u9762\u5b58\u50a8\u9876\u70b9\u7d22\u5f15\u5217\u8868\n   - \u9002\u5408\u9759\u6001\u7f51\u683c\u548cGPU\u6e32\u67d3\n   - \u90bb\u63a5\u67e5\u8be2\u6548\u7387\u4f4e</p>\n</li>\n<li>\n<p><strong>\u8fb9\u8868\uff08Edge List\uff09</strong>\uff1a\n   - \u663e\u5f0f\u5b58\u50a8\u8fb9\u4fe1\u606f\n   - \u652f\u6301\u975e\u6d41\u5f62\u7ed3\u6784\n   - \u9700\u8981\u989d\u5916\u7d22\u5f15\u7ef4\u62a4\u62d3\u6251</p>\n</li>\n<li>\n<p><strong>\u534a\u8fb9\u6570\u636e\u7ed3\u6784\uff08Half-Edge\uff09</strong>\uff1a</p>\n</li>\n</ol>\n<pre class=\"codehilite\"><code>struct HalfEdge {\n    Vertex* vertex;      // \u6307\u5411\u7684\u9876\u70b9\n    HalfEdge* twin;      // \u5bf9\u5076\u534a\u8fb9\n    HalfEdge* next;      // \u4e0b\u4e00\u6761\u534a\u8fb9\n    Face* face;          // \u6240\u5c5e\u9762\u7247\n};\n</code></pre>\n\n<ul>\n<li>\u9ad8\u6548\u7684\u5c40\u90e8\u904d\u5386</li>\n<li>\u53ea\u652f\u6301\u6d41\u5f62\u7f51\u683c</li>\n<li>\u5e38\u7528\u4e8e\u7f51\u683c\u7f16\u8f91\u64cd\u4f5c</li>\n</ul>\n<ol start=\"4\">\n<li><strong>\u7ffc\u8fb9\u7ed3\u6784\uff08Winged-Edge\uff09</strong>\uff1a\n   - \u6bcf\u6761\u8fb9\u5b58\u50a8\u56db\u4e2a\u76f8\u90bb\u5143\u7d20\n   - \u5bf9\u79f0\u6027\u597d\u4f46\u8bbf\u95ee\u590d\u6742</li>\n</ol>\n<p><strong>\u6b27\u62c9\u516c\u5f0f</strong>\uff1a\u5bf9\u4e8e\u8fde\u901a\u7684\u591a\u9762\u4f53\u7f51\u683c\uff1a\n$$V - E + F = 2(1 - g)$$\n\u5176\u4e2d $V$ \u662f\u9876\u70b9\u6570\uff0c$E$ \u662f\u8fb9\u6570\uff0c$F$ \u662f\u9762\u6570\uff0c$g$ \u662f\u4e8f\u683c\uff08genus\uff09\u3002</p>\n<p><strong>\u7f51\u683c\u7684\u6027\u8d28</strong>\uff1a</p>\n<ul>\n<li><strong>\u6d41\u5f62\u6027</strong>\uff1a\u6bcf\u6761\u8fb9\u6700\u591a\u88ab\u4e24\u4e2a\u9762\u5171\u4eab</li>\n<li><strong>\u5b9a\u5411\u6027</strong>\uff1a\u9762\u7247\u6cd5\u5411\u91cf\u7684\u4e00\u81f4\u6027</li>\n<li><strong>\u6c34\u5bc6\u6027</strong>\uff1a\u5c01\u95ed\u4e14\u65e0\u5b54\u6d1e</li>\n<li><strong>\u6b63\u5219\u6027</strong>\uff1a\u9876\u70b9\u5ea6\u6570\u63a5\u8fd16\uff08\u4e09\u89d2\u7f51\u683c\uff09</li>\n</ul>\n<p><strong>\u7f51\u683c\u8d28\u91cf\u5ea6\u91cf</strong>\uff1a</p>\n<ul>\n<li>\u4e09\u89d2\u5f62\u8d28\u91cf\uff1a\u957f\u5bbd\u6bd4\u3001\u6700\u5c0f\u89d2\u5ea6</li>\n<li>\u9876\u70b9\u5206\u5e03\uff1a\u5747\u5300\u6027\u3001\u5404\u5411\u540c\u6027</li>\n<li>\u8fb9\u957f\u53d8\u5316\uff1a\u68af\u5ea6\u9650\u5236</li>\n<li>\u4e8c\u9762\u89d2\uff1a\u907f\u514d\u8fc7\u4e8e\u5c16\u9510\u7684\u6298\u53e0</li>\n</ul>\n<p><strong>\u5e38\u89c1\u7f51\u683c\u64cd\u4f5c</strong>\uff1a</p>\n<ul>\n<li><strong>\u8fb9\u7ffb\u8f6c\uff08Edge Flip\uff09</strong>\uff1a\u6539\u53d8\u5bf9\u89d2\u7ebf</li>\n<li><strong>\u8fb9\u6536\u7f29\uff08Edge Collapse\uff09</strong>\uff1a\u5408\u5e76\u9876\u70b9</li>\n<li><strong>\u8fb9\u5206\u88c2\uff08Edge Split\uff09</strong>\uff1a\u6dfb\u52a0\u9876\u70b9</li>\n<li><strong>\u9762\u5206\u88c2\uff08Face Split\uff09</strong>\uff1a\u7ec6\u5206\u4e09\u89d2\u5f62</li>\n</ul>\n<p><strong>\u7f51\u683c\u7684\u7d27\u51d1\u8868\u793a</strong>\uff1a</p>\n<ul>\n<li>\u7d22\u5f15\u7f51\u683c\uff1a\u9876\u70b9\u6570\u7ec4 + \u9762\u7d22\u5f15\u6570\u7ec4</li>\n<li>\u4e09\u89d2\u5f62\u6761\u5e26\uff08Triangle Strips\uff09\uff1a\u5171\u4eab\u8fb9\u7684\u4e09\u89d2\u5f62\u5e8f\u5217</li>\n<li>\u4e09\u89d2\u5f62\u6247\uff08Triangle Fans\uff09\uff1a\u5171\u4eab\u9876\u70b9\u7684\u4e09\u89d2\u5f62\u5e8f\u5217</li>\n<li>\u538b\u7f29\u683c\u5f0f\uff1a\u91cf\u5316\u5750\u6807\u3001\u9884\u6d4b\u7f16\u7801</li>\n</ul>\n<h2 id=\"62\">6.2 \u66f2\u7ebf\u4e0e\u66f2\u9762</h2>\n<h3 id=\"621\">6.2.1 \u53c2\u6570\u66f2\u7ebf\u57fa\u7840</h3>\n<p>\u53c2\u6570\u66f2\u7ebf $\\mathbf{c}(t): [a, b] \\rightarrow \\mathbb{R}^3$ \u7684\u57fa\u672c\u5fae\u5206\u51e0\u4f55\uff1a</p>\n<p><strong>\u5207\u5411\u91cf</strong>\uff1a$\\mathbf{t}(t) = \\frac{d\\mathbf{c}}{dt}$</p>\n<p><strong>\u5f27\u957f\u53c2\u6570\u5316</strong>\uff1a$s(t) = \\int_a^t |\\mathbf{c}'(\\tau)| d\\tau$</p>\n<p><strong>\u66f2\u7387</strong>\uff1a$\\kappa = \\frac{|\\mathbf{t}' \\times \\mathbf{t}|}{|\\mathbf{t}|^3}$</p>\n<p><strong>Frenet-Serret\u6807\u67b6</strong>\uff1a</p>\n<ul>\n<li>\u5207\u5411\u91cf\uff1a$\\mathbf{T} = \\frac{\\mathbf{c}'}{|\\mathbf{c}'|}$</li>\n<li>\u6cd5\u5411\u91cf\uff1a$\\mathbf{N} = \\frac{\\mathbf{T}'}{|\\mathbf{T}'|}$</li>\n<li>\u526f\u6cd5\u5411\u91cf\uff1a$\\mathbf{B} = \\mathbf{T} \\times \\mathbf{N}$</li>\n</ul>\n<p>Frenet-Serret\u516c\u5f0f\uff1a\n$$\\begin{pmatrix} \\mathbf{T}' \\ \\mathbf{N}' \\ \\mathbf{B}' \\end{pmatrix} = \\begin{pmatrix} 0 &amp; \\kappa &amp; 0 \\ -\\kappa &amp; 0 &amp; \\tau \\ 0 &amp; -\\tau &amp; 0 \\end{pmatrix} \\begin{pmatrix} \\mathbf{T} \\ \\mathbf{N} \\ \\mathbf{B} \\end{pmatrix}$$</p>\n<h3 id=\"622\">6.2.2 \u8d1d\u585e\u5c14\u66f2\u7ebf</h3>\n<p>$n$ \u6b21\u8d1d\u585e\u5c14\u66f2\u7ebf\u7531 $n+1$ \u4e2a\u63a7\u5236\u70b9 ${\\mathbf{P}_i}_{i=0}^n$ \u5b9a\u4e49\uff1a\n$$\\mathbf{B}(t) = \\sum_{i=0}^n B_i^n(t) \\mathbf{P}_i$$\n\u5176\u4e2d $B_i^n(t) = \\binom{n}{i}t^i(1-t)^{n-i}$ \u662fBernstein\u57fa\u51fd\u6570\u3002</p>\n<p><strong>\u6027\u8d28</strong>\uff1a</p>\n<ul>\n<li>\u7aef\u70b9\u63d2\u503c\uff1a$\\mathbf{B}(0) = \\mathbf{P}_0$\uff0c$\\mathbf{B}(1) = \\mathbf{P}_n$</li>\n<li>\u51f8\u5305\u6027\u8d28\uff1a\u66f2\u7ebf\u5b8c\u5168\u4f4d\u4e8e\u63a7\u5236\u70b9\u7684\u51f8\u5305\u5185</li>\n<li>\u4eff\u5c04\u4e0d\u53d8\u6027</li>\n<li>\u53d8\u5dee\u51cf\u5c11\u6027\u8d28</li>\n</ul>\n<p><strong>de Casteljau\u7b97\u6cd5</strong>\uff1a\u9012\u5f52\u8ba1\u7b97 $\\mathbf{B}(t)$\uff1a\n$$\\mathbf{P}_i^{(k)}(t) = (1-t)\\mathbf{P}_i^{(k-1)} + t\\mathbf{P}_{i+1}^{(k-1)}$$\n<strong>\u5bfc\u6570</strong>\uff1a\n$$\\mathbf{B}'(t) = n\\sum_{i=0}^{n-1} B_i^{n-1}(t)(\\mathbf{P}_{i+1} - \\mathbf{P}_i)$$</p>\n<h3 id=\"623-b\">6.2.3 B\u6837\u6761\u66f2\u7ebf</h3>\n<p>B\u6837\u6761\u901a\u8fc7\u5c40\u90e8\u57fa\u51fd\u6570\u5b9e\u73b0\u5c40\u90e8\u63a7\u5236\uff1a\n$$\\mathbf{C}(t) = \\sum_{i=0}^{n} N_{i,p}(t) \\mathbf{P}_i$$\n\u5176\u4e2d $N_{i,p}(t)$ \u662f $p$ \u6b21B\u6837\u6761\u57fa\u51fd\u6570\uff0c\u7531Cox-de Boor\u9012\u5f52\u5b9a\u4e49\uff1a\n$$N_{i,0}(t) = \\begin{cases} 1 &amp; t_i \\leq t &lt; t_{i+1} \\ 0 &amp; \\text{\u5426\u5219} \\end{cases}$$</p>\n<p>$$N_{i,p}(t) = \\frac{t - t_i}{t_{i+p} - t_i}N_{i,p-1}(t) + \\frac{t_{i+p+1} - t}{t_{i+p+1} - t_{i+1}}N_{i+1,p-1}(t)$$\n<strong>\u8282\u70b9\u5411\u91cf</strong>\uff1a${t_0, t_1, ..., t_{m}}$\uff0c\u5176\u4e2d $m = n + p + 1$</p>\n<p><strong>\u6027\u8d28</strong>\uff1a</p>\n<ul>\n<li>\u5c40\u90e8\u652f\u6491\uff1a$N_{i,p}(t) = 0$ \u5f53 $t \\notin [t_i, t_{i+p+1})$</li>\n<li>$C^{p-1}$ \u8fde\u7eed\u6027\uff08\u7b80\u5355\u8282\u70b9\u60c5\u51b5\uff09</li>\n<li>\u5206\u6bb5\u591a\u9879\u5f0f</li>\n</ul>\n<h3 id=\"624-nurbsb\">6.2.4 NURBS\uff08\u975e\u5747\u5300\u6709\u7406B\u6837\u6761\uff09</h3>\n<p>NURBS\u901a\u8fc7\u5f15\u5165\u6743\u91cd\u548c\u6709\u7406\u5f62\u5f0f\u6269\u5c55B\u6837\u6761\uff1a\n$$\\mathbf{C}(t) = \\frac{\\sum_{i=0}^{n} w_i N_{i,p}(t) \\mathbf{P}_i}{\\sum_{i=0}^{n} w_i N_{i,p}(t)}$$\n<strong>\u4f18\u52bf</strong>\uff1a</p>\n<ul>\n<li>\u7cbe\u786e\u8868\u793a\u4e8c\u6b21\u66f2\u7ebf\uff08\u5706\u3001\u692d\u5706\u3001\u629b\u7269\u7ebf\uff09</li>\n<li>\u6295\u5f71\u4e0d\u53d8\u6027</li>\n<li>\u7edf\u4e00\u7684\u6570\u5b66\u6846\u67b6</li>\n</ul>\n<h3 id=\"625\">6.2.5 \u53c2\u6570\u66f2\u9762</h3>\n<p>\u53cc\u53c2\u6570\u66f2\u9762 $\\mathbf{S}(u,v): D \\subset \\mathbb{R}^2 \\rightarrow \\mathbb{R}^3$</p>\n<p><strong>\u7b2c\u4e00\u57fa\u672c\u5f62\u5f0f</strong>\uff1a\u5ea6\u91cf\u66f2\u9762\u4e0a\u7684\u8ddd\u79bb\n$$I = E du^2 + 2F du dv + G dv^2$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$E = \\mathbf{S}_u \\cdot \\mathbf{S}_u$</li>\n<li>$F = \\mathbf{S}_u \\cdot \\mathbf{S}_v$</li>\n<li>$G = \\mathbf{S}_v \\cdot \\mathbf{S}_v$</li>\n</ul>\n<p><strong>\u6cd5\u5411\u91cf</strong>\uff1a\n$$\\mathbf{n} = \\frac{\\mathbf{S}_u \\times \\mathbf{S}_v}{|\\mathbf{S}_u \\times \\mathbf{S}_v|}$$\n<strong>\u7b2c\u4e8c\u57fa\u672c\u5f62\u5f0f</strong>\uff1a\u63cf\u8ff0\u66f2\u9762\u7684\u5f2f\u66f2\n$$II = L du^2 + 2M du dv + N dv^2$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$L = \\mathbf{S}_{uu} \\cdot \\mathbf{n}$</li>\n<li>$M = \\mathbf{S}_{uv} \\cdot \\mathbf{n}$</li>\n<li>$N = \\mathbf{S}_{vv} \\cdot \\mathbf{n}$</li>\n</ul>\n<p><strong>\u4e3b\u66f2\u7387</strong>\uff1aWeingarten\u77e9\u9635\u7684\u7279\u5f81\u503c\n$$\\mathbf{W} = \\begin{pmatrix} L &amp; M \\ M &amp; N \\end{pmatrix} \\begin{pmatrix} E &amp; F \\ F &amp; G \\end{pmatrix}^{-1}$$\n<strong>\u9ad8\u65af\u66f2\u7387</strong>\uff1a$K = \\kappa_1 \\kappa_2 = \\frac{LN - M^2}{EG - F^2}$</p>\n<p><strong>\u5e73\u5747\u66f2\u7387</strong>\uff1a$H = \\frac{\\kappa_1 + \\kappa_2}{2} = \\frac{EN - 2FM + GL}{2(EG - F^2)}$</p>\n<h3 id=\"626\">6.2.6 \u7ec6\u5206\u66f2\u9762</h3>\n<p>\u7ec6\u5206\u65b9\u6848\u901a\u8fc7\u9012\u5f52\u7ec6\u5316\u7f51\u683c\u751f\u6210\u5149\u6ed1\u66f2\u9762\u3002</p>\n<p><strong>Loop\u7ec6\u5206</strong>\uff08\u4e09\u89d2\u7f51\u683c\uff09\uff1a</p>\n<ul>\n<li>\n<p>\u65b0\u9876\u70b9\u4f4d\u7f6e\uff08\u8fb9\u4e2d\u70b9\uff09\uff1a\n$$\\mathbf{v}_{\\text{new}} = \\frac{3}{8}(\\mathbf{v}_1 + \\mathbf{v}_2) + \\frac{1}{8}(\\mathbf{v}_3 + \\mathbf{v}_4)$$</p>\n</li>\n<li>\n<p>\u65e7\u9876\u70b9\u66f4\u65b0\uff1a\n$$\\mathbf{v}_{\\text{updated}} = (1 - n\\beta)\\mathbf{v}_{\\text{old}} + \\beta\\sum_{i=1}^n \\mathbf{v}_i$$\n\u5176\u4e2d $\\beta = \\frac{1}{n}(\\frac{5}{8} - (\\frac{3}{8} + \\frac{1}{4}\\cos\\frac{2\\pi}{n})^2)$</p>\n</li>\n</ul>\n<p><strong>Catmull-Clark\u7ec6\u5206</strong>\uff08\u56db\u8fb9\u5f62\u7f51\u683c\uff09\uff1a</p>\n<ul>\n<li>\u9762\u70b9\uff1a\u9762\u5185\u9876\u70b9\u7684\u5e73\u5747</li>\n<li>\u8fb9\u70b9\uff1a\u76f8\u90bb\u4e24\u4e2a\u9876\u70b9\u548c\u4e24\u4e2a\u9762\u70b9\u7684\u5e73\u5747</li>\n<li>\u9876\u70b9\u66f4\u65b0\uff1a\u57fa\u4e8e\u4ef7\u6570\u7684\u52a0\u6743\u5e73\u5747</li>\n</ul>\n<p>\u6781\u9650\u66f2\u9762\u5728\u6b63\u5219\u9876\u70b9\u5904\u4e3a $C^2$ \u8fde\u7eed\uff0c\u5728\u975e\u6b63\u5219\u9876\u70b9\u5904\u4e3a $C^1$ \u8fde\u7eed\u3002</p>\n<h2 id=\"63\">6.3 \u7f51\u683c\u5904\u7406\u4e0e\u9634\u5f71\u56fe</h2>\n<h3 id=\"631\">6.3.1 \u7f51\u683c\u7b80\u5316</h3>\n<p>\u7f51\u683c\u7b80\u5316\u65e8\u5728\u51cf\u5c11\u591a\u8fb9\u5f62\u6570\u91cf\u540c\u65f6\u4fdd\u6301\u89c6\u89c9\u8d28\u91cf\u3002</p>\n<p><strong>\u8fb9\u6536\u7f29\uff08Edge Collapse\uff09</strong>\uff1a\n\u5c06\u8fb9 $(v_i, v_j)$ \u6536\u7f29\u5230\u65b0\u9876\u70b9 $\\bar{v}$\u3002\u4f7f\u7528\u4e8c\u6b21\u8bef\u5dee\u5ea6\u91cf\uff08QEM\uff09\uff1a</p>\n<p>\u6bcf\u4e2a\u9876\u70b9\u5173\u8054\u8bef\u5dee\u4e8c\u6b21\u578b\uff1a\n$$Q_v = \\sum_{p \\in \\text{planes}(v)} K_p$$\n\u5176\u4e2d $K_p = \\mathbf{n}_p\\mathbf{n}_p^T$ \u5bf9\u4e8e\u5e73\u9762 $\\mathbf{n}_p^T\\mathbf{x} + d = 0$\u3002</p>\n<p>\u8fb9\u6536\u7f29\u4ee3\u4ef7\uff1a\n$$\\text{cost}(v_i, v_j) = \\min_{\\bar{v}} \\bar{v}^T(Q_i + Q_j)\\bar{v}$$\n\u6700\u4f18\u4f4d\u7f6e\u901a\u8fc7\u6c42\u89e3\u7ebf\u6027\u7cfb\u7edf\u83b7\u5f97\uff1a\n$$\\bar{v} = -(Q_i + Q_j)^{-1}\\mathbf{b}$$\n<strong>\u9876\u70b9\u805a\u7c7b</strong>\uff1a\n\u5c06\u7a7a\u95f4\u5212\u5206\u4e3a\u7f51\u683c\uff0c\u6bcf\u4e2a\u5355\u5143\u5185\u7684\u9876\u70b9\u5408\u5e76\u4e3a\u4e00\u4e2a\u4ee3\u8868\u9876\u70b9\u3002</p>\n<h3 id=\"632\">6.3.2 \u7f51\u683c\u53c2\u6570\u5316</h3>\n<p>\u5c063D\u66f2\u9762\u6620\u5c04\u52302D\u53c2\u6570\u57df $\\phi: M \\rightarrow \\mathbb{R}^2$\u3002</p>\n<p><strong>\u8c03\u548c\u6620\u5c04\uff08Harmonic Mapping\uff09</strong>\uff1a\n\u6700\u5c0f\u5316Dirichlet\u80fd\u91cf\uff1a\n$$E_D = \\frac{1}{2}\\int_M |\\nabla \\phi|^2 dA$$\n\u79bb\u6563\u5316\u540e\u5f97\u5230\u7ebf\u6027\u7cfb\u7edf\uff1a\n$$\\sum_{j \\in N(i)} w_{ij}(u_j - u_i) = 0$$\n\u6743\u91cd\u9009\u62e9\uff1a</p>\n<ul>\n<li>\u5747\u5300\u6743\u91cd\uff1a$w_{ij} = 1$</li>\n<li>\u4f59\u5207\u6743\u91cd\uff1a$w_{ij} = \\cot\\alpha_{ij} + \\cot\\beta_{ij}$</li>\n<li>\u5e73\u5747\u503c\u5750\u6807\uff1a\u8003\u8651\u89d2\u5ea6\u548c\u8ddd\u79bb</li>\n</ul>\n<p><strong>\u4fdd\u89d2\u53c2\u6570\u5316\uff08Conformal Parameterization\uff09</strong>\uff1a\n\u6700\u5c0f\u5316\u89d2\u5ea6\u7578\u53d8\uff0c\u4f7f\u7528\u590d\u6570\u8868\u793a\u548cCauchy-Riemann\u65b9\u7a0b\u3002</p>\n<p><strong>LSCM\uff08\u6700\u5c0f\u4e8c\u4e58\u4fdd\u89d2\u6620\u5c04\uff09</strong>\uff1a\n$$\\min_{\\phi} \\sum_{T} A_T ||\\nabla \\phi - R_{90\u00b0}\\nabla \\phi||^2$$</p>\n<h3 id=\"633\">6.3.3 \u7f51\u683c\u5e73\u6ed1</h3>\n<p><strong>\u62c9\u666e\u62c9\u65af\u5e73\u6ed1</strong>\uff1a\n$$\\mathbf{v}_i^{new} = \\mathbf{v}_i + \\lambda \\mathbf{L}(\\mathbf{v}_i)$$\n\u5176\u4e2d\u79bb\u6563\u62c9\u666e\u62c9\u65af\u7b97\u5b50\uff1a\n$$\\mathbf{L}(\\mathbf{v}_i) = \\frac{1}{|N(i)|}\\sum_{j \\in N(i)} (\\mathbf{v}_j - \\mathbf{v}_i)$$\n<strong>\u53cc\u8fb9\u6ee4\u6ce2\u6269\u5c55</strong>\uff1a\n$$\\mathbf{v}_i^{new} = \\mathbf{v}_i + \\lambda \\sum_{j \\in N(i)} w_s(||\\mathbf{v}_j - \\mathbf{v}_i||) w_n(\\mathbf{n}_i \\cdot \\mathbf{n}_j) (\\mathbf{v}_j - \\mathbf{v}_i)$$</p>\n<h3 id=\"634\">6.3.4 \u7f51\u683c\u4fee\u590d</h3>\n<p><strong>\u5b54\u6d1e\u586b\u5145</strong>\uff1a</p>\n<ol>\n<li>\u68c0\u6d4b\u8fb9\u754c\u73af</li>\n<li>\u4e09\u89d2\u5316\u8fb9\u754c\u591a\u8fb9\u5f62\uff08\u6700\u5c0f\u89d2\u5ea6\u3001\u6700\u5c0f\u9762\u79ef\uff09</li>\n<li>\u7ec6\u5206\u548c\u5e73\u6ed1\u65b0\u589e\u4e09\u89d2\u5f62</li>\n</ol>\n<p><strong>\u81ea\u76f8\u4ea4\u68c0\u6d4b\u4e0e\u4fee\u590d</strong>\uff1a</p>\n<ul>\n<li>\u4f7f\u7528\u7a7a\u95f4\u5212\u5206\u7ed3\u6784\u52a0\u901f\u76f8\u4ea4\u6d4b\u8bd5</li>\n<li>\u5c40\u90e8\u91cd\u65b0\u7f51\u683c\u5316\u89e3\u51b3\u76f8\u4ea4</li>\n</ul>\n<h3 id=\"635-shadow-mapping\">6.3.5 \u9634\u5f71\u56fe\uff08Shadow Mapping\uff09</h3>\n<p>\u9634\u5f71\u56fe\u662f\u5b9e\u65f6\u6e32\u67d3\u4e2d\u751f\u6210\u9634\u5f71\u7684\u6807\u51c6\u6280\u672f\u3002</p>\n<p><strong>\u57fa\u672c\u7b97\u6cd5</strong>\uff1a</p>\n<ol>\n<li>\u4ece\u5149\u6e90\u89c6\u89d2\u6e32\u67d3\u573a\u666f\uff0c\u5b58\u50a8\u6df1\u5ea6</li>\n<li>\u4ece\u76f8\u673a\u89c6\u89d2\u6e32\u67d3\uff0c\u6d4b\u8bd5\u6bcf\u4e2a\u7247\u5143\u662f\u5426\u5728\u9634\u5f71\u4e2d</li>\n</ol>\n<p><strong>\u6df1\u5ea6\u6bd4\u8f83</strong>\uff1a\n\u5bf9\u4e8e\u4e16\u754c\u7a7a\u95f4\u70b9 $\\mathbf{p}$\uff1a</p>\n<ol>\n<li>\u53d8\u6362\u5230\u5149\u6e90\u7a7a\u95f4\uff1a$\\mathbf{p}_{light} = \\mathbf{M}_{light}\\mathbf{p}$</li>\n<li>\u91c7\u6837\u9634\u5f71\u56fe\uff1a$z_{stored} = \\text{ShadowMap}(p_{light}.xy)$</li>\n<li>\u6bd4\u8f83\u6df1\u5ea6\uff1a$\\text{inShadow} = (p_{light}.z &gt; z_{stored} + \\text{bias})$</li>\n</ol>\n<p><strong>\u6df1\u5ea6\u504f\u79fb\uff08Bias\uff09\u95ee\u9898</strong>\uff1a</p>\n<ul>\n<li>\u6052\u5b9a\u504f\u79fb\uff1a$\\text{bias} = \\epsilon$</li>\n<li>\u659c\u7387\u504f\u79fb\uff1a$\\text{bias} = \\epsilon \\cdot \\tan(\\theta)$</li>\n<li>\u6cd5\u7ebf\u504f\u79fb\uff1a\u6cbf\u6cd5\u7ebf\u65b9\u5411\u504f\u79fb\u91c7\u6837\u70b9</li>\n</ul>\n<h3 id=\"636-csm\">6.3.6 \u7ea7\u8054\u9634\u5f71\u56fe\uff08CSM\uff09</h3>\n<p>\u5c06\u89c6\u9525\u4f53\u5206\u5272\u4e3a\u591a\u4e2a\u5b50\u533a\u57df\uff0c\u6bcf\u4e2a\u4f7f\u7528\u72ec\u7acb\u7684\u9634\u5f71\u56fe\u3002</p>\n<p><strong>\u5206\u5272\u7b56\u7565</strong>\uff1a</p>\n<ul>\n<li>\u5747\u5300\u5206\u5272\uff1a$z_i = z_{near} + i \\cdot \\frac{z_{far} - z_{near}}{N}$</li>\n<li>\u5bf9\u6570\u5206\u5272\uff1a$z_i = z_{near} \\cdot (z_{far}/z_{near})^{i/N}$</li>\n<li>\u5b9e\u7528\u5206\u5272\uff1a\u4e24\u8005\u7684\u6df7\u5408</li>\n</ul>\n<p><strong>\u5c42\u7ea7\u9009\u62e9</strong>\uff1a</p>\n<pre class=\"codehilite\"><code class=\"language-glsl\">float depth = length(viewPos);\nint cascade = 0;\nfor (int i = 0; i &lt; NUM_CASCADES - 1; i++) {\n    if (depth &gt; cascadeSplits[i]) cascade = i + 1;\n}\n</code></pre>\n\n<h3 id=\"637\">6.3.7 \u8f6f\u9634\u5f71\u6280\u672f</h3>\n<p><strong>PCF\uff08Percentage Closer Filtering\uff09</strong>\uff1a\n$$\\text{shadow} = \\frac{1}{N}\\sum_{i=1}^N \\text{ShadowTest}(\\mathbf{p} + \\delta_i)$$\n<strong>PCSS\uff08Percentage Closer Soft Shadows\uff09</strong>\uff1a</p>\n<ol>\n<li>\u963b\u6321\u7269\u641c\u7d22\uff1a\u4f30\u8ba1\u5e73\u5747\u963b\u6321\u7269\u6df1\u5ea6</li>\n<li>\u534a\u5f71\u4f30\u8ba1\uff1a$w_{penumbra} = (d_{receiver} - d_{blocker}) \\cdot w_{light} / d_{blocker}$</li>\n<li>PCF\u8fc7\u6ee4\uff1a\u4f7f\u7528\u4f30\u8ba1\u7684\u534a\u5f71\u5927\u5c0f</li>\n</ol>\n<p><strong>\u65b9\u5dee\u9634\u5f71\u56fe\uff08VSM\uff09</strong>\uff1a\n\u5b58\u50a8\u6df1\u5ea6\u548c\u6df1\u5ea6\u5e73\u65b9\uff0c\u4f7f\u7528Chebyshev\u4e0d\u7b49\u5f0f\u4f30\u8ba1\u9634\u5f71\u6982\u7387\uff1a\n$$P(z \\geq t) \\leq \\frac{\\sigma^2}{\\sigma^2 + (t - \\mu)^2}$$</p>\n<h3 id=\"638\">6.3.8 \u5149\u7ebf\u8ffd\u8e2a\u9634\u5f71</h3>\n<p><strong>\u786c\u9634\u5f71</strong>\uff1a\n\u53d1\u5c04\u9634\u5f71\u5149\u7ebf\u4ece\u7740\u8272\u70b9\u5230\u5149\u6e90\uff1a\n$$\\text{visible} = \\begin{cases} 1 &amp; \\text{\u65e0\u906e\u6321} \\ 0 &amp; \\text{\u6709\u906e\u6321} \\end{cases}$$\n<strong>\u8f6f\u9634\u5f71</strong>\uff1a\n\u5bf9\u9762\u5149\u6e90\u91c7\u6837\u591a\u6761\u5149\u7ebf\uff1a\n$$L = \\frac{1}{N}\\sum_{i=1}^N V(\\mathbf{p}, \\mathbf{x}_i) \\cdot L_e(\\mathbf{x}_i) \\cdot G(\\mathbf{p}, \\mathbf{x}_i)$$\n\u5176\u4e2d $V$ \u662f\u53ef\u89c1\u6027\u51fd\u6570\uff0c$G$ \u662f\u51e0\u4f55\u9879\u3002</p>\n<h3 id=\"639-ao\">6.3.9 \u73af\u5883\u5149\u906e\u853d\uff08AO\uff09</h3>\n<p><strong>\u5c4f\u5e55\u7a7a\u95f4\u73af\u5883\u5149\u906e\u853d\uff08SSAO\uff09</strong>\uff1a\n$$AO(\\mathbf{p}) = \\frac{1}{N}\\sum_{i=1}^N \\text{visibility}(\\mathbf{p}, \\mathbf{p} + \\mathbf{s}_i)$$\n\u91c7\u6837\u70b9\u5728\u534a\u7403\u5185\u968f\u673a\u5206\u5e03\uff0c\u4f7f\u7528\u6df1\u5ea6\u7f13\u51b2\u5224\u65ad\u906e\u6321\u3002</p>\n<p><strong>\u9884\u8ba1\u7b97AO</strong>\uff1a</p>\n<ul>\n<li>\u6bcf\u9876\u70b9\u5b58\u50a8\u906e\u853d\u503c</li>\n<li>\u4f7f\u7528\u5149\u7ebf\u6295\u5c04\u8ba1\u7b97</li>\n<li>\u8003\u8651\u6cd5\u7ebf\u52a0\u6743\uff1a$AO = \\frac{1}{\\pi}\\int_{\\Omega} V(\\omega) \\cdot (\\mathbf{n} \\cdot \\omega)^+ d\\omega$</li>\n</ul>\n<h2 id=\"_1\">\u672c\u7ae0\u5c0f\u7ed3</h2>\n<p>\u672c\u7ae0\u7cfb\u7edf\u4ecb\u7ecd\u4e86\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\u7684\u51e0\u4f55\u8868\u793a\u65b9\u6cd5\uff1a</p>\n<p><strong>\u57fa\u672c\u51e0\u4f55\u8868\u793a</strong>\uff1a</p>\n<ul>\n<li>\u9690\u5f0f\u8868\u793a\uff1a$f(\\mathbf{x}) = 0$\uff0c\u4fbf\u4e8e\u5185\u5916\u5224\u65ad\u548c\u5e03\u5c14\u8fd0\u7b97</li>\n<li>\u663e\u5f0f\u8868\u793a\uff1a\u53c2\u6570\u5316\u5f62\u5f0f\uff0c\u4fbf\u4e8e\u91c7\u6837\u548c\u7eb9\u7406\u6620\u5c04</li>\n<li>\u7b26\u53f7\u8ddd\u79bb\u573a\uff08SDF\uff09\uff1a\u7279\u6b8a\u7684\u9690\u5f0f\u8868\u793a\uff0c\u68af\u5ea6\u4e3a\u5355\u4f4d\u5411\u91cf</li>\n<li>CSG\uff1a\u901a\u8fc7\u5e03\u5c14\u8fd0\u7b97\u6784\u5efa\u590d\u6742\u51e0\u4f55</li>\n</ul>\n<p><strong>\u66f2\u7ebf\u4e0e\u66f2\u9762\u7406\u8bba</strong>\uff1a</p>\n<ul>\n<li>\u8d1d\u585e\u5c14\u66f2\u7ebf\uff1a$\\mathbf{B}(t) = \\sum_{i=0}^n B_i^n(t) \\mathbf{P}_i$</li>\n<li>B\u6837\u6761\uff1a\u5c40\u90e8\u63a7\u5236\uff0c$C^{p-1}$ \u8fde\u7eed\u6027</li>\n<li>NURBS\uff1a\u6709\u7406\u5f62\u5f0f\uff0c\u7cbe\u786e\u8868\u793a\u4e8c\u6b21\u66f2\u7ebf</li>\n<li>\u5fae\u5206\u51e0\u4f55\uff1a\u7b2c\u4e00/\u7b2c\u4e8c\u57fa\u672c\u5f62\u5f0f\uff0c\u9ad8\u65af\u66f2\u7387 $K$\uff0c\u5e73\u5747\u66f2\u7387 $H$</li>\n<li>\u7ec6\u5206\u66f2\u9762\uff1aLoop\uff08\u4e09\u89d2\u7f51\u683c\uff09\u3001Catmull-Clark\uff08\u56db\u8fb9\u5f62\u7f51\u683c\uff09</li>\n</ul>\n<p><strong>\u7f51\u683c\u5904\u7406\u4e0e\u9634\u5f71\u6280\u672f</strong>\uff1a</p>\n<ul>\n<li>\u7f51\u683c\u7b80\u5316\uff1aQEM\u8fb9\u6536\u7f29\u7b97\u6cd5</li>\n<li>\u7f51\u683c\u53c2\u6570\u5316\uff1a\u8c03\u548c\u6620\u5c04\u3001LSCM</li>\n<li>\u9634\u5f71\u56fe\uff1a\u6df1\u5ea6\u6bd4\u8f83 + \u504f\u79fb\u5904\u7406</li>\n<li>\u7ea7\u8054\u9634\u5f71\u56fe\uff1a\u591a\u5206\u8fa8\u7387\u89e3\u51b3\u900f\u89c6\u8d70\u6837</li>\n<li>\u8f6f\u9634\u5f71\uff1aPCF\u3001PCSS\u3001VSM</li>\n<li>\u73af\u5883\u5149\u906e\u853d\uff1aSSAO\u3001\u9884\u8ba1\u7b97AO</li>\n</ul>\n<h2 id=\"_2\">\u7ec3\u4e60\u9898</h2>\n<h3 id=\"_3\">\u57fa\u7840\u9898</h3>\n<p><strong>\u7ec3\u4e60 6.1</strong>\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u692d\u7403\u7684\u9690\u5f0f\u65b9\u7a0b $\\frac{x^2}{a^2} + \\frac{y^2}{b^2} + \\frac{z^2}{c^2} = 1$\uff0c\u63a8\u5bfc\u5176\u5728\u70b9 $(x_0, y_0, z_0)$ \u5904\u7684\u6cd5\u5411\u91cf\u3002</p>\n<p><em>\u63d0\u793a</em>\uff1a\u6cd5\u5411\u91cf\u662f\u68af\u5ea6\u65b9\u5411 $\\nabla f$\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u5bf9\u9690\u5f0f\u51fd\u6570 $f(x,y,z) = \\frac{x^2}{a^2} + \\frac{y^2}{b^2} + \\frac{z^2}{c^2} - 1$ \u6c42\u68af\u5ea6\uff1a\n$$\\nabla f = \\left(\\frac{2x}{a^2}, \\frac{2y}{b^2}, \\frac{2z}{c^2}\\right)$$\n\u5728\u70b9 $(x_0, y_0, z_0)$ \u5904\u7684\u5355\u4f4d\u6cd5\u5411\u91cf\uff1a\n$$\\mathbf{n} = \\frac{1}{\\sqrt{\\frac{4x_0^2}{a^4} + \\frac{4y_0^2}{b^4} + \\frac{4z_0^2}{c^4}}} \\left(\\frac{2x_0}{a^2}, \\frac{2y_0}{b^2}, \\frac{2z_0}{c^2}\\right)$$</p>\n</details>\n<p><strong>\u7ec3\u4e60 6.2</strong>\uff1a\u8bc1\u660e\u4e09\u6b21\u8d1d\u585e\u5c14\u66f2\u7ebf\u7684\u4e2d\u70b9 $\\mathbf{B}(0.5)$ \u53ef\u4ee5\u8868\u793a\u4e3a\uff1a\n$$\\mathbf{B}(0.5) = \\frac{1}{8}(\\mathbf{P}_0 + 3\\mathbf{P}_1 + 3\\mathbf{P}_2 + \\mathbf{P}_3)$$\n<em>\u63d0\u793a</em>\uff1a\u4ee3\u5165 $t = 0.5$ \u5230\u8d1d\u585e\u5c14\u66f2\u7ebf\u516c\u5f0f\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u4e09\u6b21\u8d1d\u585e\u5c14\u66f2\u7ebf\uff1a\n$$\\mathbf{B}(t) = (1-t)^3\\mathbf{P}_0 + 3t(1-t)^2\\mathbf{P}_1 + 3t^2(1-t)\\mathbf{P}_2 + t^3\\mathbf{P}_3$$\n\u4ee3\u5165 $t = 0.5$\uff1a</p>\n<ul>\n<li>$(1-0.5)^3 = 0.125 = \\frac{1}{8}$</li>\n<li>$3 \\cdot 0.5 \\cdot (0.5)^2 = 3 \\cdot 0.5 \\cdot 0.25 = 0.375 = \\frac{3}{8}$</li>\n<li>$3 \\cdot (0.5)^2 \\cdot 0.5 = 3 \\cdot 0.25 \\cdot 0.5 = 0.375 = \\frac{3}{8}$</li>\n<li>$(0.5)^3 = 0.125 = \\frac{1}{8}$</li>\n</ul>\n<p>\u56e0\u6b64\uff1a\n$$\\mathbf{B}(0.5) = \\frac{1}{8}\\mathbf{P}_0 + \\frac{3}{8}\\mathbf{P}_1 + \\frac{3}{8}\\mathbf{P}_2 + \\frac{1}{8}\\mathbf{P}_3 = \\frac{1}{8}(\\mathbf{P}_0 + 3\\mathbf{P}_1 + 3\\mathbf{P}_2 + \\mathbf{P}_3)$$</p>\n</details>\n<p><strong>\u7ec3\u4e60 6.3</strong>\uff1a\u5bf9\u4e8e\u4e00\u4e2a\u4e09\u89d2\u5f62\u7f51\u683c\uff0c\u5df2\u77e5\u9876\u70b9\u6570 $V = 100$\uff0c\u9762\u6570 $F = 196$\uff0c\u4f7f\u7528\u6b27\u62c9\u516c\u5f0f\u8ba1\u7b97\u8fb9\u6570 $E$\u3002\u5047\u8bbe\u7f51\u683c\u662f\u5355\u8fde\u901a\u7684\uff08genus = 0\uff09\u3002</p>\n<p><em>\u63d0\u793a</em>\uff1a\u6b27\u62c9\u516c\u5f0f $V - E + F = 2(1 - g)$\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u5bf9\u4e8e\u5355\u8fde\u901a\u7f51\u683c\uff08$g = 0$\uff09\uff1a\n$$V - E + F = 2(1 - 0) = 2$$\n\u4ee3\u5165\u5df2\u77e5\u503c\uff1a\n$$100 - E + 196 = 2$$\n$$296 - E = 2$$\n$$E = 294$$\n\u9a8c\u8bc1\uff1a\u5bf9\u4e8e\u4e09\u89d2\u7f51\u683c\uff0c\u6bcf\u4e2a\u9762\u67093\u6761\u8fb9\uff0c\u6bcf\u6761\u8fb9\u88ab2\u4e2a\u9762\u5171\u4eab\uff0c\u6240\u4ee5 $E = \\frac{3F}{2} = \\frac{3 \\times 196}{2} = 294$ \u2713</p>\n</details>\n<p><strong>\u7ec3\u4e60 6.4</strong>\uff1a\u7ed9\u5b9a\u53c2\u6570\u66f2\u9762 $\\mathbf{S}(u,v) = (u\\cos v, u\\sin v, u^2)$\uff0c\u8ba1\u7b97\u5728\u70b9 $(u,v) = (1, 0)$ \u5904\u7684\u6cd5\u5411\u91cf\u3002</p>\n<p><em>\u63d0\u793a</em>\uff1a\u8ba1\u7b97 $\\mathbf{S}_u \\times \\mathbf{S}_v$\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u9996\u5148\u8ba1\u7b97\u504f\u5bfc\u6570\uff1a\n$$\\mathbf{S}_u = (\\cos v, \\sin v, 2u)$$\n$$\\mathbf{S}_v = (-u\\sin v, u\\cos v, 0)$$\n\u5728 $(u,v) = (1,0)$ \u5904\uff1a\n$$\\mathbf{S}_u(1,0) = (1, 0, 2)$$\n$$\\mathbf{S}_v(1,0) = (0, 1, 0)$$\n\u53c9\u79ef\uff1a\n$$\\mathbf{n} = \\mathbf{S}_u \\times \\mathbf{S}_v = \\begin{vmatrix} \\mathbf{i} &amp; \\mathbf{j} &amp; \\mathbf{k} \\ 1 &amp; 0 &amp; 2 \\ 0 &amp; 1 &amp; 0 \\end{vmatrix} = (-2, 0, 1)$$\n\u5355\u4f4d\u6cd5\u5411\u91cf\uff1a\n$$\\hat{\\mathbf{n}} = \\frac{(-2, 0, 1)}{\\sqrt{4 + 0 + 1}} = \\frac{1}{\\sqrt{5}}(-2, 0, 1)$$</p>\n</details>\n<h3 id=\"_4\">\u6311\u6218\u9898</h3>\n<p><strong>\u7ec3\u4e60 6.5</strong>\uff1a\u8bc1\u660e\u5bf9\u4e8e\u7b26\u53f7\u8ddd\u79bb\u573a\uff08SDF\uff09\uff0c\u5982\u679c $f$ \u662f\u5230\u66f2\u9762 $S$ \u7684\u7b26\u53f7\u8ddd\u79bb\u51fd\u6570\uff0c\u5219 $|\\nabla f| = 1$ \u51e0\u4e4e\u5904\u5904\u6210\u7acb\u3002</p>\n<p><em>\u63d0\u793a</em>\uff1a\u8003\u8651\u6700\u8fd1\u70b9\u6295\u5f71\u548c\u8ddd\u79bb\u51fd\u6570\u7684\u5b9a\u4e49\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u8bbe $\\mathbf{x}$ \u662f\u7a7a\u95f4\u4e2d\u4e00\u70b9\uff0c$\\mathbf{p}$ \u662f $\\mathbf{x}$ \u5728\u66f2\u9762 $S$ \u4e0a\u7684\u6700\u8fd1\u70b9\u3002</p>\n<p>\u5b9a\u4e49\uff1a$f(\\mathbf{x}) = \\text{sign}(\\mathbf{x}) \\cdot |\\mathbf{x} - \\mathbf{p}|$</p>\n<p>\u5bf9\u4e8e\u66f2\u9762\u5916\u7684\u70b9\uff08$f &gt; 0$\uff09\uff0c\u6cbf\u4efb\u610f\u65b9\u5411 $\\mathbf{v}$ \u7684\u65b9\u5411\u5bfc\u6570\uff1a\n$$\\frac{\\partial f}{\\partial \\mathbf{v}} = \\lim_{h \\to 0} \\frac{f(\\mathbf{x} + h\\mathbf{v}) - f(\\mathbf{x})}{h}$$\n\u7531\u4e8e $\\mathbf{p}$ \u662f\u6700\u8fd1\u70b9\uff0c\u5f53 $h$ \u8db3\u591f\u5c0f\u65f6\uff0c$\\mathbf{x} + h\\mathbf{v}$ \u7684\u6700\u8fd1\u70b9\u4ecd\u662f $\\mathbf{p}$\uff08\u9664\u975e $\\mathbf{x}$ \u5728\u4e2d\u8f74\u4e0a\uff09\u3002</p>\n<p>\u56e0\u6b64\uff1a\n$$f(\\mathbf{x} + h\\mathbf{v}) \\approx |\\mathbf{x} + h\\mathbf{v} - \\mathbf{p}|$$\n\u4f7f\u7528\u6cf0\u52d2\u5c55\u5f00\uff1a\n$$|\\mathbf{x} + h\\mathbf{v} - \\mathbf{p}| = |\\mathbf{x} - \\mathbf{p}| + h\\frac{(\\mathbf{x} - \\mathbf{p}) \\cdot \\mathbf{v}}{|\\mathbf{x} - \\mathbf{p}|} + O(h^2)$$\n\u6240\u4ee5\uff1a\n$$\\frac{\\partial f}{\\partial \\mathbf{v}} = \\frac{(\\mathbf{x} - \\mathbf{p}) \\cdot \\mathbf{v}}{|\\mathbf{x} - \\mathbf{p}|}$$\n\u68af\u5ea6\u4e3a\uff1a\n$$\\nabla f = \\frac{\\mathbf{x} - \\mathbf{p}}{|\\mathbf{x} - \\mathbf{p}|}$$\n\u56e0\u6b64 $|\\nabla f| = 1$\u3002</p>\n<p>\u6ce8\u610f\uff1a\u5728\u4e2d\u8f74\uff08medial axis\uff09\u4e0a\uff0c\u6700\u8fd1\u70b9\u4e0d\u552f\u4e00\uff0c\u68af\u5ea6\u4e0d\u5b58\u5728\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e60 6.6</strong>\uff1a\u63a8\u5bfcLoop\u7ec6\u5206\u4e2d $\\beta$ \u503c\u7684\u9009\u62e9\uff0c\u4f7f\u5f97\u7ec6\u5206\u66f2\u9762\u5728\u6b63\u5219\u9876\u70b9\u5904\u8fbe\u5230 $C^2$ \u8fde\u7eed\u6027\u3002</p>\n<p><em>\u63d0\u793a</em>\uff1a\u5206\u6790\u7ec6\u5206\u77e9\u9635\u7684\u7279\u5f81\u503c\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u5bf9\u4e8e\u4ef7\u6570\u4e3a $n$ \u7684\u9876\u70b9\uff0cLoop\u7ec6\u5206\u7684\u66f4\u65b0\u89c4\u5219\uff1a\n$$\\mathbf{v}_{\\text{new}} = (1 - n\\beta)\\mathbf{v}_{\\text{old}} + \\beta\\sum_{i=1}^n \\mathbf{v}_i$$\n\u7ec6\u5206\u77e9\u9635 $\\mathbf{S}$ \u7684\u7279\u5f81\u503c\u51b3\u5b9a\u4e86\u66f2\u9762\u7684\u8fde\u7eed\u6027\u3002</p>\n<p>\u5bf9\u4e8e $C^2$ \u8fde\u7eed\u6027\uff0c\u9700\u8981\uff1a</p>\n<ol>\n<li>\u6700\u5927\u7279\u5f81\u503c $\\lambda_0 = 1$\uff08\u4fdd\u6301\u4eff\u5c04\u4e0d\u53d8\u6027\uff09</li>\n<li>\u6b21\u5927\u7279\u5f81\u503c $\\lambda_1 = \\lambda_2 &lt; 1$\uff08\u6536\u655b\u6027\uff09</li>\n<li>$\\lambda_1/\\lambda_0 &gt; \\lambda_3/\\lambda_1$\uff08$C^2$ \u6761\u4ef6\uff09</li>\n</ol>\n<p>\u901a\u8fc7\u5085\u91cc\u53f6\u5206\u6790\uff0c\u7279\u5f81\u503c\u4e3a\uff1a\n$$\\lambda_k = \\frac{1}{8}(5 - 3\\cos\\frac{2\\pi k}{n}) + \\beta(1 - \\cos\\frac{2\\pi k}{n})$$\n\u8981\u4f7f $\\lambda_1 = \\lambda_2$\uff0c\u9700\u8981\u65cb\u8f6c\u5bf9\u79f0\u6027\u3002</p>\n<p>\u6700\u4f18\u7684 $\\beta$ \u503c\uff08Warren's choice\uff09\uff1a\n$$\\beta = \\frac{1}{n}\\left(\\frac{5}{8} - \\left(\\frac{3}{8} + \\frac{1}{4}\\cos\\frac{2\\pi}{n}\\right)^2\\right)$$\n\u8fd9\u4fdd\u8bc1\u4e86\uff1a</p>\n<ul>\n<li>$n = 3$\uff1a$\\beta = 3/16$</li>\n<li>$n = 6$\uff1a$\\beta = 1/16$\uff08\u6b63\u5219\u9876\u70b9\uff09</li>\n<li>\u5927 $n$\uff1a$\\beta \\approx 3/(8n)$</li>\n</ul>\n</details>\n<p><strong>\u7ec3\u4e60 6.7</strong>\uff1a\u8bbe\u8ba1\u4e00\u4e2a\u7b97\u6cd5\uff0c\u5c06\u4efb\u610f\u591a\u8fb9\u5f62\u7f51\u683c\u8f6c\u6362\u4e3a\u7b26\u53f7\u8ddd\u79bb\u573a\u8868\u793a\u3002\u8ba8\u8bba\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u548c\u7cbe\u5ea6\u6743\u8861\u3002</p>\n<p><em>\u63d0\u793a</em>\uff1a\u8003\u8651\u5feb\u901f\u884c\u8fdb\u6cd5\uff08FMM\uff09\u6216\u5feb\u901f\u626b\u63cf\u6cd5\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p><strong>\u7b97\u6cd5\u8bbe\u8ba1</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u521d\u59cb\u5316</strong>\uff1a\n   - \u5728\u89c4\u5219\u7f51\u683c\u4e0a\u91c7\u6837\n   - \u6807\u8bb0\u7f51\u683c\u70b9\u7684\u5185\u5916\u5173\u7cfb\uff08\u5c04\u7ebf\u6cd5\uff09\n   - \u8ba1\u7b97\u5230\u6700\u8fd1\u4e09\u89d2\u5f62\u7684\u8ddd\u79bb</p>\n</li>\n<li>\n<p><strong>\u7cbe\u786e\u8ddd\u79bb\u8ba1\u7b97</strong>\uff08\u8fb9\u754c\u9644\u8fd1\uff09\uff1a\n   - \u5bf9\u6bcf\u4e2a\u7f51\u683c\u70b9\uff0c\u627e\u6700\u8fd1\u7684\u4e09\u89d2\u5f62\n   - \u8ba1\u7b97\u70b9\u5230\u4e09\u89d2\u5f62\u7684\u8ddd\u79bb\uff08\u8003\u8651\u9876\u70b9\u3001\u8fb9\u3001\u9762\uff09\n   - \u4f7f\u7528\u7a7a\u95f4\u5212\u5206\u52a0\u901f\uff08KD-tree\u6216BVH\uff09</p>\n</li>\n<li>\n<p><strong>\u5feb\u901f\u884c\u8fdb\u6cd5</strong>\uff08\u8fdc\u79bb\u8fb9\u754c\uff09\uff1a\n   - \u4ece\u5df2\u77e5\u8ddd\u79bb\u7684\u70b9\u5f00\u59cb\u4f20\u64ad\n   - \u6c42\u89e3Eikonal\u65b9\u7a0b\uff1a$|\\nabla f| = 1$\n   - \u4f7f\u7528\u5806\u7ef4\u62a4\u6ce2\u524d</p>\n</li>\n<li>\n<p><strong>\u7b26\u53f7\u786e\u5b9a</strong>\uff1a\n   - \u5947\u5076\u89c4\u5219\u6216\u7f20\u7ed5\u6570\n   - \u6cd5\u5411\u91cf\u4e00\u81f4\u6027\u68c0\u67e5</p>\n</li>\n</ol>\n<p><strong>\u65f6\u95f4\u590d\u6742\u5ea6</strong>\uff1a</p>\n<ul>\n<li>\u521d\u59cb\u5316\uff1a$O(N \\log M)$\uff0c$N$ \u662f\u7f51\u683c\u70b9\u6570\uff0c$M$ \u662f\u4e09\u89d2\u5f62\u6570</li>\n<li>FMM\u4f20\u64ad\uff1a$O(N \\log N)$</li>\n<li>\u603b\u4f53\uff1a$O(N \\log N + N \\log M)$</li>\n</ul>\n<p><strong>\u7cbe\u5ea6\u6743\u8861</strong>\uff1a</p>\n<ul>\n<li>\u7f51\u683c\u5206\u8fa8\u7387 vs. \u5185\u5b58\u6d88\u8017</li>\n<li>\u7a84\u5e26\u5bbd\u5ea6 vs. \u8ba1\u7b97\u65f6\u95f4</li>\n<li>\u63d2\u503c\u9636\u6570 vs. \u5e73\u6ed1\u5ea6</li>\n</ul>\n<p><strong>\u4f18\u5316\u7b56\u7565</strong>\uff1a</p>\n<ul>\n<li>\u81ea\u9002\u5e94\u7f51\u683c\u7ec6\u5316</li>\n<li>GPU\u5e76\u884c\u5316\uff08\u7279\u522b\u9002\u5408\u5feb\u901f\u626b\u63cf\u6cd5\uff09</li>\n<li>\u5c42\u6b21\u5316\u8868\u793a\uff08\u7a00\u758f\u4f53\u7d20\u516b\u53c9\u6811\uff09</li>\n</ul>\n</details>\n<p><strong>\u7ec3\u4e60 6.8</strong>\uff1a\u5206\u6790PCSS\uff08Percentage Closer Soft Shadows\uff09\u7b97\u6cd5\u4e2d\uff0c\u5149\u6e90\u5927\u5c0f\u3001\u906e\u6321\u7269\u8ddd\u79bb\u548c\u63a5\u6536\u5668\u8ddd\u79bb\u5982\u4f55\u5f71\u54cd\u534a\u5f71\u5927\u5c0f\u3002\u63a8\u5bfc\u534a\u5f71\u4f30\u8ba1\u516c\u5f0f\u3002</p>\n<p><em>\u63d0\u793a</em>\uff1a\u4f7f\u7528\u76f8\u4f3c\u4e09\u89d2\u5f62\u539f\u7406\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p><strong>\u51e0\u4f55\u5206\u6790</strong>\uff1a</p>\n<p>\u8bbe\u7f6e\uff1a</p>\n<ul>\n<li>\u5149\u6e90\u5bbd\u5ea6\uff1a$w_{light}$</li>\n<li>\u906e\u6321\u7269\u5230\u5149\u6e90\u8ddd\u79bb\uff1a$d_{blocker}$</li>\n<li>\u63a5\u6536\u5668\u5230\u5149\u6e90\u8ddd\u79bb\uff1a$d_{receiver}$</li>\n<li>\u906e\u6321\u7269\u5230\u63a5\u6536\u5668\u8ddd\u79bb\uff1a$d_{receiver} - d_{blocker}$</li>\n</ul>\n<p><strong>\u534a\u5f71\u5927\u5c0f\u63a8\u5bfc</strong>\uff1a</p>\n<p>\u4f7f\u7528\u76f8\u4f3c\u4e09\u89d2\u5f62\uff1a\n$$\\frac{w_{penumbra}}{d_{receiver} - d_{blocker}} = \\frac{w_{light}}{d_{blocker}}$$\n\u89e3\u5f97\uff1a\n$$w_{penumbra} = \\frac{(d_{receiver} - d_{blocker}) \\cdot w_{light}}{d_{blocker}}$$</p>\n<p><strong>\u5f71\u54cd\u56e0\u7d20\u5206\u6790</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5149\u6e90\u5927\u5c0f</strong> $w_{light}$\uff1a\n   - \u7ebf\u6027\u5173\u7cfb\uff1a\u5149\u6e90\u8d8a\u5927\uff0c\u534a\u5f71\u8d8a\u5bbd\n   - \u70b9\u5149\u6e90\uff08$w_{light} \\to 0$\uff09\uff1a\u786c\u9634\u5f71</p>\n</li>\n<li>\n<p><strong>\u906e\u6321\u7269\u8ddd\u79bb</strong> $d_{blocker}$\uff1a\n   - \u53cd\u6bd4\u5173\u7cfb\uff1a\u906e\u6321\u7269\u8d8a\u8fd1\u5149\u6e90\uff0c\u534a\u5f71\u8d8a\u5927\n   - \u6781\u9650\u60c5\u51b5\uff1a$d_{blocker} \\to 0$\uff0c$w_{penumbra} \\to \\infty$</p>\n</li>\n<li>\n<p><strong>\u63a5\u6536\u5668\u8ddd\u79bb</strong> $d_{receiver}$\uff1a\n   - \u6b63\u76f8\u5173\uff1a\u63a5\u6536\u5668\u8d8a\u8fdc\uff0c\u534a\u5f71\u8d8a\u5927\n   - \u76f8\u5bf9\u8ddd\u79bb $(d_{receiver} - d_{blocker})$ \u662f\u5173\u952e</p>\n</li>\n</ol>\n<p><strong>PCSS\u7b97\u6cd5\u6b65\u9aa4</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u641c\u7d22\u906e\u6321\u7269</strong>\uff1a\n   <code>glsl\n   float searchRadius = lightSize * (receiverDepth - nearPlane) / receiverDepth;\n   float avgBlockerDepth = findAverageBlockerDepth(shadowCoord, searchRadius);</code></p>\n</li>\n<li>\n<p><strong>\u4f30\u8ba1\u534a\u5f71</strong>\uff1a\n   <code>glsl\n   float penumbraWidth = (receiverDepth - avgBlockerDepth) * lightSize / avgBlockerDepth;</code></p>\n</li>\n<li>\n<p><strong>PCF\u8fc7\u6ee4</strong>\uff1a\n   <code>glsl\n   float shadow = PCF(shadowCoord, penumbraWidth);</code></p>\n</li>\n</ol>\n<p><strong>\u8bef\u5dee\u6765\u6e90</strong>\uff1a</p>\n<ul>\n<li>\u5355\u4e00\u5e73\u5747\u906e\u6321\u7269\u6df1\u5ea6\u7684\u8fd1\u4f3c</li>\n<li>\u79bb\u6563\u91c7\u6837\u5bfc\u81f4\u7684\u566a\u58f0</li>\n<li>\u900f\u89c6\u6295\u5f71\u7684\u975e\u7ebf\u6027</li>\n</ul>\n</details>\n<h2 id=\"_5\">\u5e38\u89c1\u9677\u9631\u4e0e\u9519\u8bef</h2>\n<ol>\n<li>\n<p><strong>\u7b26\u53f7\u8ddd\u79bb\u573a\u7684\u68af\u5ea6\u5047\u8bbe</strong>\n   - \u9519\u8bef\uff1a\u8ba4\u4e3aSDF\u7684\u68af\u5ea6\u5904\u5904\u4e3a1\n   - \u6b63\u786e\uff1a\u5728\u4e2d\u8f74\uff08medial axis\uff09\u4e0a\u68af\u5ea6\u4e0d\u8fde\u7eed</p>\n</li>\n<li>\n<p><strong>\u8d1d\u585e\u5c14\u66f2\u7ebf\u7684\u53c2\u6570\u5316</strong>\n   - \u9519\u8bef\uff1a\u5047\u8bbe\u53c2\u6570 $t$ \u5bf9\u5e94\u5f27\u957f\n   - \u6b63\u786e\uff1a\u8d1d\u585e\u5c14\u66f2\u7ebf\u901a\u5e38\u4e0d\u662f\u5f27\u957f\u53c2\u6570\u5316\u7684</p>\n</li>\n<li>\n<p><strong>\u7f51\u683c\u7b80\u5316\u7684\u62d3\u6251\u4fdd\u6301</strong>\n   - \u9519\u8bef\uff1a\u8fb9\u6536\u7f29\u53ef\u80fd\u6539\u53d8\u62d3\u6251\uff08\u521b\u5efa\u975e\u6d41\u5f62\u7ed3\u6784\uff09\n   - \u6b63\u786e\uff1a\u9700\u8981\u68c0\u67e5\u6536\u7f29\u64cd\u4f5c\u7684\u6709\u6548\u6027</p>\n</li>\n<li>\n<p><strong>\u9634\u5f71\u56fe\u7684\u6df1\u5ea6\u7cbe\u5ea6</strong>\n   - \u9519\u8bef\uff1a\u5ffd\u7565\u6df1\u5ea6\u7f13\u51b2\u7684\u6709\u9650\u7cbe\u5ea6\n   - \u6b63\u786e\uff1a\u4f7f\u7528\u9002\u5f53\u7684\u504f\u79fb\u548c\u9ad8\u7cbe\u5ea6\u6df1\u5ea6\u683c\u5f0f</p>\n</li>\n<li>\n<p><strong>\u7ec6\u5206\u66f2\u9762\u7684\u8fb9\u754c\u5904\u7406</strong>\n   - \u9519\u8bef\uff1a\u5bf9\u8fb9\u754c\u9876\u70b9\u4f7f\u7528\u5185\u90e8\u89c4\u5219\n   - \u6b63\u786e\uff1a\u8fb9\u754c\u9700\u8981\u7279\u6b8a\u7684\u7ec6\u5206\u89c4\u5219</p>\n</li>\n<li>\n<p><strong>NURBS\u6743\u91cd\u7684\u5f71\u54cd</strong>\n   - \u9519\u8bef\uff1a\u8ba4\u4e3a\u6743\u91cd\u53ea\u662f\u7b80\u5355\u7684\u7f29\u653e\n   - \u6b63\u786e\uff1a\u6743\u91cd\u5f71\u54cd\u66f2\u7ebf\u7684\u53c2\u6570\u5316\u901f\u5ea6</p>\n</li>\n<li>\n<p><strong>CSG\u8fd0\u7b97\u7684\u6570\u503c\u7a33\u5b9a\u6027</strong>\n   - \u9519\u8bef\uff1a\u76f4\u63a5\u4f7f\u7528 min/max \u8fdb\u884c\u5e03\u5c14\u8fd0\u7b97\n   - \u6b63\u786e\uff1a\u5728\u8fb9\u754c\u9644\u8fd1\u9700\u8981\u7279\u6b8a\u5904\u7406</p>\n</li>\n<li>\n<p><strong>\u73af\u5883\u5149\u906e\u853d\u7684\u6cd5\u7ebf\u504f\u79fb</strong>\n   - \u9519\u8bef\uff1a\u4e0d\u8003\u8651\u81ea\u906e\u6321\u95ee\u9898\n   - \u6b63\u786e\uff1a\u6cbf\u6cd5\u7ebf\u504f\u79fb\u91c7\u6837\u8d77\u70b9</p>\n</li>\n</ol>\n<h2 id=\"_6\">\u6700\u4f73\u5b9e\u8df5\u68c0\u67e5\u6e05\u5355</h2>\n<h3 id=\"_7\">\u51e0\u4f55\u8868\u793a\u9009\u62e9</h3>\n<ul>\n<li>[ ] \u6839\u636e\u5e94\u7528\u9700\u6c42\u9009\u62e9\u5408\u9002\u7684\u8868\u793a\uff08\u9690\u5f0f/\u663e\u5f0f\uff09</li>\n<li>[ ] \u8003\u8651\u5185\u5b58\u5360\u7528\u548c\u67e5\u8be2\u6548\u7387\u7684\u5e73\u8861</li>\n<li>[ ] \u8bc4\u4f30\u4fee\u6539\u64cd\u4f5c\u7684\u9891\u7387\u548c\u590d\u6742\u5ea6</li>\n<li>[ ] \u786e\u4fdd\u8868\u793a\u652f\u6301\u6240\u9700\u7684\u67e5\u8be2\u64cd\u4f5c</li>\n</ul>\n<h3 id=\"_8\">\u66f2\u7ebf\u66f2\u9762\u8bbe\u8ba1</h3>\n<ul>\n<li>[ ] \u9009\u62e9\u9002\u5f53\u7684\u8fde\u7eed\u6027\u8981\u6c42\uff08$C^0$/$C^1$/$C^2$\uff09</li>\n<li>[ ] \u9a8c\u8bc1\u63a7\u5236\u70b9\u6570\u91cf\u4e0e\u66f2\u7ebf\u590d\u6742\u5ea6\u7684\u5339\u914d</li>\n<li>[ ] \u68c0\u67e5\u53c2\u6570\u57df\u7684\u6709\u6548\u8303\u56f4</li>\n<li>[ ] \u8003\u8651\u6570\u503c\u7cbe\u5ea6\u548c\u7a33\u5b9a\u6027</li>\n</ul>\n<h3 id=\"_9\">\u7f51\u683c\u5904\u7406</h3>\n<ul>\n<li>[ ] \u4fdd\u6301\u7f51\u683c\u7684\u6d41\u5f62\u6027\u8d28</li>\n<li>[ ] \u9a8c\u8bc1\u6b27\u62c9\u7279\u5f81\u6570\u7684\u4e00\u81f4\u6027</li>\n<li>[ ] \u4f7f\u7528\u534a\u8fb9\u7ed3\u6784\u8fdb\u884c\u62d3\u6251\u64cd\u4f5c</li>\n<li>[ ] \u5b9e\u73b0\u9c81\u68d2\u7684\u76f8\u4ea4\u6d4b\u8bd5</li>\n</ul>\n<h3 id=\"_10\">\u9634\u5f71\u5b9e\u73b0</h3>\n<ul>\n<li>[ ] \u9009\u62e9\u5408\u9002\u7684\u9634\u5f71\u56fe\u5206\u8fa8\u7387</li>\n<li>[ ] \u6b63\u786e\u8bbe\u7f6e\u6df1\u5ea6\u504f\u79fb\u53c2\u6570</li>\n<li>[ ] \u5b9e\u73b0\u9634\u5f71\u56fe\u7684\u8fc7\u6ee4\uff08PCF\u7b49\uff09</li>\n<li>[ ] \u8003\u8651\u7ea7\u8054\u9634\u5f71\u56fe\u7684\u5fc5\u8981\u6027</li>\n</ul>\n<h3 id=\"_11\">\u6027\u80fd\u4f18\u5316</h3>\n<ul>\n<li>[ ] \u4f7f\u7528\u7a7a\u95f4\u6570\u636e\u7ed3\u6784\u52a0\u901f\u67e5\u8be2</li>\n<li>[ ] \u5b9e\u73b0\u7ec6\u8282\u5c42\u6b21\uff08LOD\uff09\u7cfb\u7edf</li>\n<li>[ ] \u5229\u7528GPU\u5e76\u884c\u8ba1\u7b97</li>\n<li>[ ] \u7f13\u5b58\u91cd\u590d\u8ba1\u7b97\u7684\u7ed3\u679c</li>\n</ul>\n<h3 id=\"_12\">\u6570\u503c\u7a33\u5b9a\u6027</h3>\n<ul>\n<li>[ ] \u907f\u514d\u9664\u96f6\u548c\u63a5\u8fd1\u5947\u5f02\u7684\u60c5\u51b5</li>\n<li>[ ] \u4f7f\u7528\u7a33\u5b9a\u7684\u7b97\u6cd5\uff08\u5982QR\u5206\u89e3\u4ee3\u66ff\u6cd5\u7ebf\u65b9\u7a0b\uff09</li>\n<li>[ ] \u9009\u62e9\u5408\u9002\u7684\u6d6e\u70b9\u7cbe\u5ea6</li>\n<li>[ ] \u5b9e\u73b0\u5bb9\u9519\u673a\u5236</li>\n</ul>"
  },
  "../chapter2.md": {
    "hash": "d4380751fa2c4041660cf8d0c09b75d3",
    "content": "<h1 id=\"2\">\u7b2c2\u7ae0\uff1a\u51e0\u4f55\u53d8\u6362</h1>\n<p>\u51e0\u4f55\u53d8\u6362\u662f\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u7684\u6838\u5fc3\u57fa\u7840\u4e4b\u4e00\uff0c\u5b83\u51b3\u5b9a\u4e86\u6211\u4eec\u5982\u4f55\u5728\u4e8c\u7ef4\u548c\u4e09\u7ef4\u7a7a\u95f4\u4e2d\u79fb\u52a8\u3001\u65cb\u8f6c\u3001\u7f29\u653e\u7269\u4f53\uff0c\u4ee5\u53ca\u5982\u4f55\u5c06\u4e09\u7ef4\u4e16\u754c\u6295\u5f71\u5230\u4e8c\u7ef4\u5c4f\u5e55\u4e0a\u3002\u672c\u7ae0\u5c06\u6df1\u5165\u63a2\u8ba8\u53d8\u6362\u7684\u6570\u5b66\u539f\u7406\u3001\u5b9e\u73b0\u7ec6\u8282\u548c\u4f18\u5316\u6280\u5de7\uff0c\u4e3a\u540e\u7eed\u7684\u6e32\u67d3\u7ba1\u7ebf\u5b66\u4e60\u6253\u4e0b\u575a\u5b9e\u57fa\u7840\u3002</p>\n<h2 id=\"21\">2.1 \u4e8c\u7ef4\u4e0e\u4e09\u7ef4\u53d8\u6362</h2>\n<h3 id=\"211\">2.1.1 \u9f50\u6b21\u5750\u6807\u7cfb</h3>\n<p>\u5728\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u9f50\u6b21\u5750\u6807\uff08Homogeneous Coordinates\uff09\u6765\u7edf\u4e00\u8868\u793a\u70b9\u548c\u5411\u91cf\uff0c\u5e76\u4f7f\u5f97\u4eff\u5c04\u53d8\u6362\u53ef\u4ee5\u7528\u77e9\u9635\u4e58\u6cd5\u6765\u8868\u793a\u3002\u9f50\u6b21\u5750\u6807\u662f\u6295\u5f71\u51e0\u4f55\u7684\u6838\u5fc3\u6982\u5ff5\uff0c\u5b83\u4f18\u96c5\u5730\u89e3\u51b3\u4e86\u5e73\u79fb\u53d8\u6362\u65e0\u6cd5\u7528\u77e9\u9635\u4e58\u6cd5\u8868\u793a\u7684\u95ee\u9898\u3002</p>\n<h4 id=\"_1\">\u4ece\u6b27\u51e0\u91cc\u5f97\u5750\u6807\u5230\u9f50\u6b21\u5750\u6807</h4>\n<p>\u5bf9\u4e8e\u4e8c\u7ef4\u7a7a\u95f4\uff1a</p>\n<ul>\n<li>\u70b9\uff1a$(x, y) \\rightarrow (x, y, 1)$ \u6216\u66f4\u4e00\u822c\u5730 $(wx, wy, w)$\uff0c\u5176\u4e2d $w \\neq 0$</li>\n<li>\u5411\u91cf\uff1a$(x, y) \\rightarrow (x, y, 0)$</li>\n</ul>\n<p>\u5bf9\u4e8e\u4e09\u7ef4\u7a7a\u95f4\uff1a</p>\n<ul>\n<li>\u70b9\uff1a$(x, y, z) \\rightarrow (x, y, z, 1)$ \u6216\u66f4\u4e00\u822c\u5730 $(wx, wy, wz, w)$\uff0c\u5176\u4e2d $w \\neq 0$</li>\n<li>\u5411\u91cf\uff1a$(x, y, z) \\rightarrow (x, y, z, 0)$</li>\n</ul>\n<h4 id=\"_2\">\u9f50\u6b21\u5750\u6807\u7684\u5173\u952e\u6027\u8d28</h4>\n<ol>\n<li>\n<p><strong>\u7b49\u4ef7\u6027</strong>\uff1a$(x, y, z, w)$ \u548c $(kx, ky, kz, kw)$ \u8868\u793a\u540c\u4e00\u4e2a\u70b9\uff08$k \\neq 0$\uff09\n   - \u8fd9\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7b49\u4ef7\u7c7b\uff0c\u6240\u6709\u6ee1\u8db3\u6bd4\u4f8b\u5173\u7cfb\u7684\u5750\u6807\u8868\u793a\u540c\u4e00\u70b9\n   - \u89c4\u8303\u5316\u5f62\u5f0f\uff1a\u5f53 $w \\neq 0$ \u65f6\uff0c\u53ef\u4ee5\u89c4\u8303\u5316\u4e3a $(x/w, y/w, z/w, 1)$</p>\n</li>\n<li>\n<p><strong>\u7b1b\u5361\u5c14\u5750\u6807\u6062\u590d</strong>\uff1a\n   - \u5f53 $w \\neq 0$ \u65f6\uff1a$(x, y, z, w) \\rightarrow (x/w, y/w, z/w)$\n   - \u5f53 $w = 0$ \u65f6\uff1a\u8868\u793a\u65e0\u7a77\u8fdc\u5904\u7684\u70b9\u6216\u65b9\u5411\u5411\u91cf</p>\n</li>\n<li>\n<p><strong>\u4ee3\u6570\u5c01\u95ed\u6027</strong>\uff1a\n   - \u4e24\u6761\u5e73\u884c\u7ebf\u5728\u6295\u5f71\u7a7a\u95f4\u4e2d\u76f8\u4ea4\u4e8e\u65e0\u7a77\u8fdc\u70b9\n   - \u4f7f\u5f97\u67d0\u4e9b\u51e0\u4f55\u5b9a\u7406\uff08\u5982\u5bf9\u5076\u539f\u7406\uff09\u66f4\u52a0\u7edf\u4e00\u548c\u4f18\u96c5</p>\n</li>\n</ol>\n<h4 id=\"_3\">\u9f50\u6b21\u5750\u6807\u7684\u51e0\u4f55\u89e3\u91ca</h4>\n<p>\u9f50\u6b21\u5750\u6807\u672c\u8d28\u4e0a\u662f\u5c06 $n$ \u7ef4\u7a7a\u95f4\u5d4c\u5165\u5230 $n+1$ \u7ef4\u6295\u5f71\u7a7a\u95f4\u4e2d\uff1a</p>\n<ol>\n<li>\n<p><strong>\u6295\u5f71\u6a21\u578b</strong>\uff1a\n   - \u60f3\u8c61\u4e09\u7ef4\u7a7a\u95f4\u4e2d\u901a\u8fc7\u539f\u70b9\u7684\u6240\u6709\u76f4\u7ebf\n   - \u6bcf\u6761\u76f4\u7ebf\uff08\u9664\u539f\u70b9\u5916\uff09\u4ee3\u8868\u4e8c\u7ef4\u5e73\u9762\u4e0a\u7684\u4e00\u4e2a\u70b9\n   - \u76f4\u7ebf\u4e0e $w=1$ \u5e73\u9762\u7684\u4ea4\u70b9\u5c31\u662f\u5bf9\u5e94\u7684\u7b1b\u5361\u5c14\u5750\u6807</p>\n</li>\n<li>\n<p><strong>\u65e0\u7a77\u8fdc\u5143\u7d20</strong>\uff1a\n   - $w=0$ \u7684\u8d85\u5e73\u9762\u5305\u542b\u6240\u6709\u65e0\u7a77\u8fdc\u70b9\n   - \u5e73\u884c\u7ebf\u5728\u6b64\u5e73\u9762\u4e0a\u76f8\u4ea4\uff0c\u5b9e\u73b0\u4e86\u6295\u5f71\u51e0\u4f55\u7684\u5b8c\u5907\u6027\n   - \u4f8b\u5982\uff1a$(1, 0, 0)$ \u8868\u793a $x$ \u8f74\u65b9\u5411\u7684\u65e0\u7a77\u8fdc\u70b9</p>\n</li>\n<li>\n<p><strong>\u5bf9\u5076\u6027</strong>\uff1a\n   - \u70b9\u548c\u7ebf\u5728\u6295\u5f71\u5e73\u9762\u4e0a\u5177\u6709\u5bf9\u5076\u5173\u7cfb\n   - \u7ebf\u7684\u65b9\u7a0b $ax + by + c = 0$ \u53ef\u8868\u793a\u4e3a $[a, b, c]$\n   - \u70b9 $(x, y, 1)$ \u5728\u7ebf $[a, b, c]$ \u4e0a\u5f53\u4e14\u4ec5\u5f53 $ax + by + c = 0$</p>\n</li>\n</ol>\n<h4 id=\"_4\">\u4e3a\u4ec0\u4e48\u533a\u5206\u70b9\u548c\u5411\u91cf</h4>\n<p>\u8fd9\u79cd\u533a\u5206\u4e0d\u4ec5\u662f\u6570\u5b66\u4e0a\u7684\u4f18\u96c5\uff0c\u66f4\u5177\u6709\u6df1\u523b\u7684\u51e0\u4f55\u610f\u4e49\uff1a</p>\n<ol>\n<li>\n<p><strong>\u4eff\u5c04\u7ec4\u5408</strong>\uff1a\n   - \u70b9\u7684\u4eff\u5c04\u7ec4\u5408\uff1a$\\sum_i \\alpha_i \\mathbf{p}_i$\uff0c\u5f53 $\\sum_i \\alpha_i = 1$ \u65f6\u7ed3\u679c\u662f\u70b9\n   - \u5411\u91cf\u7684\u7ebf\u6027\u7ec4\u5408\uff1a$\\sum_i \\beta_i \\mathbf{v}_i$ \u603b\u662f\u5411\u91cf\n   - \u8fd9\u4fdd\u8bc1\u4e86\u51e0\u4f55\u8fd0\u7b97\u7684\u7c7b\u578b\u5b89\u5168\u6027</p>\n</li>\n<li>\n<p><strong>\u53d8\u6362\u884c\u4e3a</strong>\uff1a\n   - \u5e73\u79fb\u5bf9\u70b9\u6709\u6548\uff1a$\\mathbf{p}' = \\mathbf{p} + \\mathbf{t}$\n   - \u5e73\u79fb\u5bf9\u5411\u91cf\u65e0\u6548\uff1a$\\mathbf{v}' = \\mathbf{v}$\uff08\u65b9\u5411\u4e0d\u56e0\u4f4d\u7f6e\u6539\u53d8\uff09\n   - \u65cb\u8f6c\u548c\u7f29\u653e\u5bf9\u4e24\u8005\u90fd\u6709\u6548</p>\n</li>\n<li>\n<p><strong>\u7269\u7406\u610f\u4e49</strong>\uff1a\n   - \u70b9\u8868\u793a\u4f4d\u7f6e\uff08position\uff09\n   - \u5411\u91cf\u8868\u793a\u4f4d\u79fb\uff08displacement\uff09\u6216\u65b9\u5411\uff08direction\uff09\n   - \u4e24\u70b9\u4e4b\u5dee\u81ea\u7136\u4ea7\u751f\u5411\u91cf\uff1a$\\mathbf{v} = \\mathbf{p}_2 - \\mathbf{p}_1$</p>\n</li>\n</ol>\n<h4 id=\"_5\">\u9f50\u6b21\u5750\u6807\u7684\u8fd0\u7b97\u89c4\u5219</h4>\n<ol>\n<li>\n<p><strong>\u52a0\u6cd5\u8fd0\u7b97</strong>\uff1a\n   - $(x_1, y_1, w_1) + (x_2, y_2, w_2) = (x_1 + x_2, y_1 + y_2, w_1 + w_2)$\n   - \u6ce8\u610f\uff1a\u53ea\u6709\u5f53 $w_1 + w_2 \\neq 0$ \u65f6\u7ed3\u679c\u624d\u6709\u610f\u4e49</p>\n</li>\n<li>\n<p><strong>\u6570\u4e58\u8fd0\u7b97</strong>\uff1a\n   - $k(x, y, w) = (kx, ky, kw)$\n   - \u4fdd\u6301\u70b9\u7684\u4f4d\u7f6e\u4e0d\u53d8\uff08\u7b49\u4ef7\u7c7b\u76f8\u540c\uff09</p>\n</li>\n<li>\n<p><strong>\u70b9\u7684\u91cd\u5fc3\u5750\u6807</strong>\uff1a\n   - \u4e09\u89d2\u5f62\u9876\u70b9 $\\mathbf{p}_1, \\mathbf{p}_2, \\mathbf{p}_3$ \u7684\u91cd\u5fc3\u5750\u6807\n   - $\\mathbf{p} = \\alpha\\mathbf{p}_1 + \\beta\\mathbf{p}_2 + \\gamma\\mathbf{p}_3$\uff0c\u5176\u4e2d $\\alpha + \\beta + \\gamma = 1$\n   - \u9f50\u6b21\u5750\u6807\u81ea\u52a8\u4fdd\u8bc1\u4e86 $w$ \u5206\u91cf\u7684\u6b63\u786e\u6027</p>\n</li>\n</ol>\n<h4 id=\"_6\">\u5b9e\u9645\u5e94\u7528\u4e2d\u7684\u8003\u8651</h4>\n<ol>\n<li>\n<p><strong>\u6570\u503c\u7cbe\u5ea6</strong>\uff1a\n   - \u907f\u514d $w$ \u63a5\u8fd1 0 \u7684\u60c5\u51b5\uff08\u9664\u6cd5\u4e0d\u7a33\u5b9a\uff09\n   - \u5b9a\u671f\u89c4\u8303\u5316\u9f50\u6b21\u5750\u6807\uff08\u5c06 $w$ \u8bbe\u4e3a 1\uff09\n   - \u4f7f\u7528 <code>glm::perspective</code> \u7b49\u5e93\u51fd\u6570\u65f6\u6ce8\u610f\u7cbe\u5ea6\u8bbe\u7f6e</p>\n</li>\n<li>\n<p><strong>GPU\u5b9e\u73b0</strong>\uff1a\n   - \u9876\u70b9\u7740\u8272\u5668\u8f93\u51fa <code>gl_Position</code> \u662f\u56db\u7ef4\u9f50\u6b21\u5750\u6807\n   - \u786c\u4ef6\u81ea\u52a8\u6267\u884c\u900f\u89c6\u9664\u6cd5\uff08perspective divide\uff09\n   - \u88c1\u526a\u5728\u9f50\u6b21\u7a7a\u95f4\u8fdb\u884c\uff08\u6548\u7387\u66f4\u9ad8\uff09</p>\n</li>\n<li>\n<p><strong>\u8c03\u8bd5\u6280\u5de7</strong>\uff1a\n   - \u68c0\u67e5 $w$ \u5206\u91cf\u662f\u5426\u7b26\u5408\u9884\u671f\uff08\u70b9\u4e3a1\uff0c\u5411\u91cf\u4e3a0\uff09\n   - \u9a8c\u8bc1\u53d8\u6362\u540e\u7684 $w$ \u503c\uff08\u900f\u89c6\u6295\u5f71\u4f1a\u6539\u53d8 $w$\uff09\n   - \u4f7f\u7528\u53ef\u89c6\u5316\u5de5\u5177\u89c2\u5bdf\u9f50\u6b21\u7a7a\u95f4\u7684\u53d8\u6362</p>\n</li>\n</ol>\n<h3 id=\"212\">2.1.2 \u57fa\u672c\u4e8c\u7ef4\u53d8\u6362</h3>\n<p>\u4e8c\u7ef4\u53d8\u6362\u6784\u6210\u4e86\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u7684\u57fa\u7840\uff0c\u5b83\u4eec\u53ef\u4ee5\u7ec4\u5408\u4ea7\u751f\u590d\u6742\u7684\u6548\u679c\u3002\u6bcf\u79cd\u53d8\u6362\u90fd\u6709\u5176\u72ec\u7279\u7684\u51e0\u4f55\u610f\u4e49\u548c\u4ee3\u6570\u6027\u8d28\u3002</p>\n<h4 id=\"translation\">\u5e73\u79fb\u53d8\u6362\uff08Translation\uff09</h4>\n<p>\u5e73\u79fb\u5c06\u6240\u6709\u70b9\u6cbf\u7740\u6307\u5b9a\u65b9\u5411\u79fb\u52a8\u76f8\u540c\u7684\u8ddd\u79bb\uff1a</p>\n<p>$$\\mathbf{T}(t_x, t_y) = \\begin{bmatrix}\n1 &amp; 0 &amp; t_x \\\n0 &amp; 1 &amp; t_y \\\n0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n<strong>\u6570\u5b66\u6027\u8d28</strong>\uff1a</p>\n<ul>\n<li>\u5e73\u79fb\u7fa4\u6784\u6210\u963f\u8d1d\u5c14\u7fa4\uff08\u4ea4\u6362\u7fa4\uff09</li>\n<li>\u9006\u53d8\u6362\uff1a$\\mathbf{T}^{-1}(t_x, t_y) = \\mathbf{T}(-t_x, -t_y)$</li>\n<li>\u590d\u5408\uff1a$\\mathbf{T}(t_1)\\mathbf{T}(t_2) = \\mathbf{T}(t_1 + t_2)$</li>\n<li>\u4e0e\u5411\u91cf\u7684\u5173\u7cfb\uff1a\u5e73\u79fb\u5411\u91cf $\\mathbf{t} = (t_x, t_y, 0)$</li>\n</ul>\n<p><strong>\u51e0\u4f55\u610f\u4e49</strong>\uff1a</p>\n<ul>\n<li>\u4fdd\u6301\u6240\u6709\u51e0\u4f55\u6027\u8d28\uff08\u8ddd\u79bb\u3001\u89d2\u5ea6\u3001\u9762\u79ef\uff09</li>\n<li>\u7b49\u8ddd\u53d8\u6362\uff08isometry\uff09\u7684\u4e00\u79cd</li>\n<li>\u4e0d\u6539\u53d8\u56fe\u5f62\u7684\u65b9\u5411\u6027\uff08orientation\uff09</li>\n</ul>\n<p><strong>\u5b9e\u73b0\u7ec6\u8282</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>\u70b9\u7684\u5e73\u79fb\uff1a[x', y', 1]^T = T(tx, ty) \u00d7 [x, y, 1]^T = [x+tx, y+ty, 1]^T\n\u5411\u91cf\u4e0d\u53d8\uff1a[x', y', 0]^T = T(tx, ty) \u00d7 [x, y, 0]^T = [x, y, 0]^T\n</code></pre>\n\n<h4 id=\"rotation\">\u65cb\u8f6c\u53d8\u6362\uff08Rotation\uff09</h4>\n<p>\u7ed5\u539f\u70b9\u9006\u65f6\u9488\u65cb\u8f6c $\\theta$ \u89d2\u5ea6\u7684\u53d8\u6362\u77e9\u9635\uff1a\n$$\\mathbf{R}(\\theta) = \\begin{bmatrix}\n\\cos\\theta &amp; -\\sin\\theta &amp; 0 \\\n\\sin\\theta &amp; \\cos\\theta &amp; 0 \\\n0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n<strong>\u63a8\u5bfc\u8fc7\u7a0b</strong>\uff1a\n\u8003\u8651\u5355\u4f4d\u5706\u4e0a\u7684\u70b9 $(r\\cos\\phi, r\\sin\\phi)$ \u65cb\u8f6c $\\theta$ \u540e\uff1a\n$$\\begin{align}\nx' &amp;= r\\cos(\\phi + \\theta) = r\\cos\\phi\\cos\\theta - r\\sin\\phi\\sin\\theta \\\ny' &amp;= r\\sin(\\phi + \\theta) = r\\cos\\phi\\sin\\theta + r\\sin\\phi\\cos\\theta\n\\end{align}$$\n\u8fd9\u7ed9\u51fa\u4e86\u65cb\u8f6c\u77e9\u9635\u7684\u5f62\u5f0f\u3002</p>\n<p><strong>\u91cd\u8981\u6027\u8d28</strong>\uff1a</p>\n<ol>\n<li><strong>\u6b63\u4ea4\u6027</strong>\uff1a$\\mathbf{R}^T\\mathbf{R} = \\mathbf{I}$\uff0c\u5373 $\\mathbf{R}^{-1} = \\mathbf{R}^T$</li>\n<li><strong>\u884c\u5217\u5f0f</strong>\uff1a$\\det(\\mathbf{R}) = \\cos^2\\theta + \\sin^2\\theta = 1$\uff08\u4fdd\u6301\u9762\u79ef\u548c\u65b9\u5411\uff09</li>\n<li><strong>\u7279\u5f81\u503c</strong>\uff1a$\\lambda = e^{i\\theta}, e^{-i\\theta}, 1$\uff08\u590d\u7279\u5f81\u503c\u4f53\u73b0\u65cb\u8f6c\u672c\u8d28\uff09</li>\n<li><strong>\u7fa4\u6027\u8d28</strong>\uff1a\n   - $\\mathbf{R}(\\alpha)\\mathbf{R}(\\beta) = \\mathbf{R}(\\alpha + \\beta)$\n   - $\\mathbf{R}(\\theta)^n = \\mathbf{R}(n\\theta)$\n   - $\\mathbf{R}(0) = \\mathbf{I}$\uff08\u5355\u4f4d\u5143\uff09</li>\n</ol>\n<p><strong>\u4e0e\u590d\u6570\u7684\u8054\u7cfb</strong>\uff1a\n\u4e8c\u7ef4\u65cb\u8f6c\u53ef\u7528\u590d\u6570\u4e58\u6cd5\u8868\u793a\uff1a\n$$z' = e^{i\\theta}z = (\\cos\\theta + i\\sin\\theta)(x + iy)$$\n\u8fd9\u63ed\u793a\u4e86\u65cb\u8f6c\u7684\u6df1\u5c42\u6570\u5b66\u7ed3\u6784\u3002</p>\n<p><strong>\u5c0f\u89d2\u5ea6\u8fd1\u4f3c</strong>\uff1a\n\u5f53 $\\theta$ \u5f88\u5c0f\u65f6\uff1a\n$$\\mathbf{R}(\\theta) \\approx \\begin{bmatrix}\n1 &amp; -\\theta &amp; 0 \\\n\\theta &amp; 1 &amp; 0 \\\n0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n\u8fd9\u5728\u589e\u91cf\u65cb\u8f6c\u8ba1\u7b97\u4e2d\u5f88\u6709\u7528\u3002</p>\n<h4 id=\"scaling\">\u7f29\u653e\u53d8\u6362\uff08Scaling\uff09</h4>\n<p>\u7f29\u653e\u53d8\u6362\u6539\u53d8\u7269\u4f53\u7684\u5927\u5c0f\uff1a\n$$\\mathbf{S}(s_x, s_y) = \\begin{bmatrix}\ns_x &amp; 0 &amp; 0 \\\n0 &amp; s_y &amp; 0 \\\n0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n<strong>\u5206\u7c7b\u4e0e\u6027\u8d28</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5747\u5300\u7f29\u653e</strong>\uff08$s_x = s_y = s$\uff09\uff1a\n   - \u4fdd\u6301\u5f62\u72b6\u548c\u89d2\u5ea6\n   - \u76f8\u4f3c\u53d8\u6362\u7684\u4e00\u90e8\u5206\n   - \u9762\u79ef\u53d8\u5316\uff1a$s^2$ \u500d</p>\n</li>\n<li>\n<p><strong>\u975e\u5747\u5300\u7f29\u653e</strong>\uff08$s_x \\neq s_y$\uff09\uff1a\n   - \u6539\u53d8\u957f\u5bbd\u6bd4\n   - \u4e0d\u4fdd\u6301\u89d2\u5ea6\uff08\u9664\u4e86\u4e0e\u5750\u6807\u8f74\u5e73\u884c\u7684\u89d2\uff09\n   - \u692d\u5706\u53d8\u6362\u7684\u57fa\u7840</p>\n</li>\n<li>\n<p><strong>\u53cd\u5c04\u7f29\u653e</strong>\uff08$s_x &lt; 0$ \u6216 $s_y &lt; 0$\uff09\uff1a\n   - \u6539\u53d8\u65b9\u5411\u6027\uff08orientation\uff09\n   - $\\det(\\mathbf{S}) &lt; 0$ \u65f6\u53d1\u751f\u955c\u50cf\n   - \u7ec4\u5408\u4f7f\u7528\u53ef\u4ea7\u751f\u5404\u79cd\u5bf9\u79f0</p>\n</li>\n</ol>\n<p><strong>\u7279\u5f81\u5206\u89e3</strong>\uff1a\n\u7f29\u653e\u77e9\u9635\u662f\u5bf9\u89d2\u77e9\u9635\uff0c\u5176\u7279\u5f81\u5411\u91cf\u662f\u5750\u6807\u8f74\u65b9\u5411\uff1a</p>\n<ul>\n<li>\u7279\u5f81\u503c\uff1a$\\lambda_1 = s_x, \\lambda_2 = s_y, \\lambda_3 = 1$</li>\n<li>\u7279\u5f81\u5411\u91cf\uff1a$(1,0,0)^T, (0,1,0)^T, (0,0,1)^T$</li>\n</ul>\n<p><strong>\u7f29\u653e\u4e2d\u5fc3</strong>\uff1a\n\u7ed5\u4efb\u610f\u70b9 $(c_x, c_y)$ \u7f29\u653e\uff1a\n$$\\mathbf{S}_c = \\mathbf{T}(c_x, c_y) \\mathbf{S}(s_x, s_y) \\mathbf{T}(-c_x, -c_y)$$\n\u5c55\u5f00\u540e\uff1a\n$$\\mathbf{S}_c = \\begin{bmatrix}\ns_x &amp; 0 &amp; c_x(1-s_x) \\\n0 &amp; s_y &amp; c_y(1-s_y) \\\n0 &amp; 0 &amp; 1\n\\end{bmatrix}$$</p>\n<h4 id=\"shearing\">\u9519\u5207\u53d8\u6362\uff08Shearing\uff09</h4>\n<p>\u9519\u5207\u53d8\u6362\u4f7f\u7269\u4f53\u53d1\u751f\u503e\u659c\uff1a</p>\n<p><strong>\u6c34\u5e73\u9519\u5207</strong>\uff1a\n$$\\mathbf{H}_x(s) = \\begin{bmatrix}\n1 &amp; s &amp; 0 \\\n0 &amp; 1 &amp; 0 \\\n0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n<strong>\u5782\u76f4\u9519\u5207</strong>\uff1a\n$$\\mathbf{H}_y(s) = \\begin{bmatrix}\n1 &amp; 0 &amp; 0 \\\ns &amp; 1 &amp; 0 \\\n0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n<strong>\u51e0\u4f55\u89e3\u91ca</strong>\uff1a</p>\n<ul>\n<li>$\\mathbf{H}_x(s)$\uff1a\u6bcf\u4e2a\u70b9\u7684 $x$ \u5750\u6807\u589e\u52a0 $sy$\uff0c$y$ \u5750\u6807\u4e0d\u53d8</li>\n<li>\u5782\u76f4\u7ebf\u4fdd\u6301\u5782\u76f4\uff0c\u6c34\u5e73\u7ebf\u503e\u659c\u89d2\u5ea6 $\\arctan(s)$</li>\n<li>\u77e9\u5f62\u53d8\u6210\u5e73\u884c\u56db\u8fb9\u5f62</li>\n</ul>\n<p><strong>\u91cd\u8981\u6027\u8d28</strong>\uff1a</p>\n<ol>\n<li><strong>\u9762\u79ef\u5b88\u6052</strong>\uff1a$\\det(\\mathbf{H}) = 1$</li>\n<li><strong>\u53ef\u9006\u6027</strong>\uff1a$\\mathbf{H}_x^{-1}(s) = \\mathbf{H}_x(-s)$</li>\n<li>\n<p><strong>\u590d\u5408\u9519\u5207</strong>\uff1a\n$$\\mathbf{H}_x(s_1)\\mathbf{H}_x(s_2) = \\mathbf{H}_x(s_1 + s_2)$$</p>\n</li>\n<li>\n<p><strong>\u4e0e\u65cb\u8f6c\u7684\u5173\u7cfb</strong>\uff1a\n   \u4efb\u610f\u65cb\u8f6c\u53ef\u5206\u89e3\u4e3a\u4e09\u6b21\u9519\u5207\uff1a\n$$\\mathbf{R}(\\theta) = \\mathbf{H}_x(-\\tan\\frac{\\theta}{2})\\mathbf{H}_y(\\sin\\theta)\\mathbf{H}_x(-\\tan\\frac{\\theta}{2})$$\n<strong>\u5e94\u7528\u573a\u666f</strong>\uff1a</p>\n</li>\n</ol>\n<ul>\n<li>\u659c\u4f53\u6587\u5b57\u6e32\u67d3</li>\n<li>\u56fe\u50cf\u503e\u659c\u6821\u6b63</li>\n<li>\u4eff\u5c04\u7eb9\u7406\u6620\u5c04</li>\n</ul>\n<h4 id=\"reflection\">\u53cd\u5c04\u53d8\u6362\uff08Reflection\uff09</h4>\n<p>\u53cd\u5c04\u4ea7\u751f\u955c\u50cf\u6548\u679c\uff1a</p>\n<p><strong>\u57fa\u672c\u53cd\u5c04</strong>\uff1a</p>\n<ul>\n<li>\u5173\u4e8e $x$ \u8f74\uff1a$\\mathbf{F}_x = \\text{diag}(1, -1, 1)$</li>\n<li>\u5173\u4e8e $y$ \u8f74\uff1a$\\mathbf{F}_y = \\text{diag}(-1, 1, 1)$</li>\n<li>\u5173\u4e8e\u539f\u70b9\uff1a$\\mathbf{F}_o = \\text{diag}(-1, -1, 1)$</li>\n</ul>\n<p><strong>\u5173\u4e8e\u4efb\u610f\u76f4\u7ebf\u7684\u53cd\u5c04</strong>\uff1a\n\u5bf9\u4e8e\u76f4\u7ebf $\\mathbf{n} \\cdot \\mathbf{p} = d$\uff08$\\mathbf{n}$ \u662f\u5355\u4f4d\u6cd5\u5411\u91cf\uff09\uff1a\n$$\\mathbf{F} = \\mathbf{I} - 2\\mathbf{n}\\mathbf{n}^T$$\n\u5bf9\u4e8e\u76f4\u7ebf $ax + by + c = 0$\uff1a</p>\n<ol>\n<li>\u5f52\u4e00\u5316\uff1a$\\mathbf{n} = \\frac{1}{\\sqrt{a^2 + b^2}}(a, b)$</li>\n<li>\n<p>\u6784\u9020\u53cd\u5c04\u77e9\u9635\uff1a\n$$\\mathbf{F} = \\begin{bmatrix}\n1-2n_x^2 &amp; -2n_xn_y &amp; -2cn_x/\\sqrt{a^2+b^2} \\\n-2n_xn_y &amp; 1-2n_y^2 &amp; -2cn_y/\\sqrt{a^2+b^2} \\\n0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n<strong>\u6027\u8d28</strong>\uff1a</p>\n</li>\n<li>\n<p><strong>\u5bf9\u5408\u6027</strong>\uff1a$\\mathbf{F}^2 = \\mathbf{I}$\uff08\u53cd\u5c04\u4e24\u6b21\u56de\u5230\u539f\u4f4d\uff09</p>\n</li>\n<li><strong>\u884c\u5217\u5f0f</strong>\uff1a$\\det(\\mathbf{F}) = -1$\uff08\u6539\u53d8\u65b9\u5411\u6027\uff09</li>\n<li><strong>\u7279\u5f81\u503c</strong>\uff1a$\\lambda = 1, -1, 1$\n   - \u7279\u5f81\u503c1\u5bf9\u5e94\u53cd\u5c04\u8f74\u4e0a\u7684\u4e0d\u52a8\u70b9\n   - \u7279\u5f81\u503c-1\u5bf9\u5e94\u5782\u76f4\u4e8e\u53cd\u5c04\u8f74\u7684\u65b9\u5411</li>\n</ol>\n<p><strong>\u7ec4\u5408\u53cd\u5c04</strong>\uff1a</p>\n<ul>\n<li>\u4e24\u4e2a\u53cd\u5c04\u7684\u590d\u5408\u662f\u65cb\u8f6c</li>\n<li>\u4e09\u4e2a\u53cd\u5c04\u7684\u590d\u5408\u53ef\u80fd\u662f\u53cd\u5c04\u6216\u6ed1\u79fb\u53cd\u5c04</li>\n<li>\u8fd9\u6784\u6210\u4e86\u4e8c\u7ef4\u7b49\u8ddd\u53d8\u6362\u7fa4\u7684\u751f\u6210\u5143</li>\n</ul>\n<h4 id=\"_7\">\u53d8\u6362\u7684\u5206\u7c7b\u4e0e\u5c42\u6b21</h4>\n<p><strong>\u4fdd\u6301\u6027\u8d28\u7684\u5c42\u6b21\u7ed3\u6784</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u6b27\u51e0\u91cc\u5f97\u53d8\u6362</strong>\uff08\u521a\u4f53\u53d8\u6362\uff09\uff1a\n   - \u4fdd\u6301\uff1a\u8ddd\u79bb\u3001\u89d2\u5ea6\u3001\u9762\u79ef\u3001\u65b9\u5411\u6027\n   - \u5305\u542b\uff1a\u5e73\u79fb\u3001\u65cb\u8f6c</p>\n</li>\n<li>\n<p><strong>\u76f8\u4f3c\u53d8\u6362</strong>\uff1a\n   - \u4fdd\u6301\uff1a\u89d2\u5ea6\u3001\u5f62\u72b6\u6bd4\u4f8b\n   - \u5305\u542b\uff1a\u6b27\u51e0\u91cc\u5f97\u53d8\u6362 + \u5747\u5300\u7f29\u653e</p>\n</li>\n<li>\n<p><strong>\u4eff\u5c04\u53d8\u6362</strong>\uff1a\n   - \u4fdd\u6301\uff1a\u5e73\u884c\u6027\u3001\u9762\u79ef\u6bd4\n   - \u5305\u542b\uff1a\u76f8\u4f3c\u53d8\u6362 + \u9519\u5207 + \u975e\u5747\u5300\u7f29\u653e</p>\n</li>\n<li>\n<p><strong>\u6295\u5f71\u53d8\u6362</strong>\uff1a\n   - \u4fdd\u6301\uff1a\u76f4\u7ebf\u6027\u3001\u4ea4\u6bd4\n   - \u6700\u4e00\u822c\u7684\u7ebf\u6027\u53d8\u6362</p>\n</li>\n</ol>\n<h3 id=\"213\">2.1.3 \u57fa\u672c\u4e09\u7ef4\u53d8\u6362</h3>\n<p>\u4e09\u7ef4\u53d8\u6362\u5c06\u4e8c\u7ef4\u6982\u5ff5\u6269\u5c55\u5230\u4e09\u7ef4\u7a7a\u95f4\uff0c\u4f46\u5f15\u5165\u4e86\u66f4\u591a\u7684\u590d\u6742\u6027\uff0c\u7279\u522b\u662f\u5728\u65cb\u8f6c\u8868\u793a\u548c\u7ec4\u5408\u65b9\u9762\u3002</p>\n<h4 id=\"_8\">\u4e09\u7ef4\u5e73\u79fb</h4>\n<p>\u4e09\u7ef4\u5e73\u79fb\u6269\u5c55\u4e86\u4e8c\u7ef4\u60c5\u51b5\uff1a\n$$\\mathbf{T}(t_x, t_y, t_z) = \\begin{bmatrix}\n1 &amp; 0 &amp; 0 &amp; t_x \\\n0 &amp; 1 &amp; 0 &amp; t_y \\\n0 &amp; 0 &amp; 1 &amp; t_z \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n<strong>\u6570\u5b66\u6027\u8d28</strong>\uff1a</p>\n<ul>\n<li>\u6784\u6210\u4e09\u7ef4\u963f\u8d1d\u5c14\u7fa4\uff1a$\\mathbf{T}(\\mathbf{a})\\mathbf{T}(\\mathbf{b}) = \\mathbf{T}(\\mathbf{a}+\\mathbf{b})$</li>\n<li>\u9006\u53d8\u6362\uff1a$\\mathbf{T}^{-1}(t_x, t_y, t_z) = \\mathbf{T}(-t_x, -t_y, -t_z)$</li>\n<li>\u4e0e\u65cb\u8f6c\u7684\u4ea4\u6362\u6027\uff1a$\\mathbf{T}\\mathbf{R} \\neq \\mathbf{R}\\mathbf{T}$\uff08\u4e00\u822c\u60c5\u51b5\uff09</li>\n</ul>\n<p><strong>\u5e94\u7528\u573a\u666f</strong>\uff1a</p>\n<ul>\n<li>\u7269\u4f53\u4e16\u754c\u5b9a\u4f4d</li>\n<li>\u76f8\u673a\u8fd0\u52a8\uff08\u4e0e\u89c6\u56fe\u77e9\u9635\u76f8\u5173\uff09</li>\n<li>\u7c92\u5b50\u7cfb\u7edf\u7684\u4f4d\u7f6e\u66f4\u65b0</li>\n<li>\u9aa8\u9abc\u52a8\u753b\u7684\u5173\u8282\u504f\u79fb</li>\n</ul>\n<h4 id=\"_9\">\u4e09\u7ef4\u7f29\u653e</h4>\n<p>\u4e09\u7ef4\u7f29\u653e\u5f71\u54cd\u7269\u4f53\u7684\u4f53\u79ef\u548c\u6bd4\u4f8b\uff1a\n$$\\mathbf{S}(s_x, s_y, s_z) = \\begin{bmatrix}\ns_x &amp; 0 &amp; 0 &amp; 0 \\\n0 &amp; s_y &amp; 0 &amp; 0 \\\n0 &amp; 0 &amp; s_z &amp; 0 \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n<strong>\u51e0\u4f55\u610f\u4e49</strong>\uff1a</p>\n<ol>\n<li><strong>\u4f53\u79ef\u53d8\u5316</strong>\uff1a$V' = |s_x \\cdot s_y \\cdot s_z| \\cdot V$</li>\n<li><strong>\u8868\u9762\u79ef\u53d8\u5316</strong>\uff1a\u53d6\u51b3\u4e8e\u5177\u4f53\u5f62\u72b6\uff0c\u5982\u7403\u4f53\uff1a$A' = (s_xs_y + s_ys_z + s_zs_x)/3 \\cdot A$</li>\n<li><strong>\u6cd5\u5411\u91cf\u53d8\u6362</strong>\uff1a\u9700\u8981\u4f7f\u7528\u9006\u8f6c\u7f6e\u77e9\u9635</li>\n</ol>\n<p><strong>\u7279\u6b8a\u7f29\u653e\u7c7b\u578b</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5747\u5300\u7f29\u653e</strong>\uff08$s_x = s_y = s_z = s$\uff09\uff1a\n   - \u4fdd\u6301\u5f62\u72b6\u548c\u89d2\u5ea6\n   - \u7528\u4e8eLOD\uff08Level of Detail\uff09\u7cfb\u7edf\n   - \u900f\u89c6\u6295\u5f71\u4e2d\u7684\u6df1\u5ea6\u7f29\u653e</p>\n</li>\n<li>\n<p><strong>\u5e73\u9762\u7f29\u653e</strong>\uff08\u5982 $s_z = 0$\uff09\uff1a\n   - \u5c06\u4e09\u7ef4\u7269\u4f53\u6295\u5f71\u5230\u5e73\u9762\n   - \u9634\u5f71\u751f\u6210\u7684\u57fa\u7840\n   - \u6ce8\u610f\uff1a\u4ea7\u751f\u5947\u5f02\u77e9\u9635</p>\n</li>\n<li>\n<p><strong>\u5404\u5411\u5f02\u6027\u7f29\u653e</strong>\uff1a\n   - \u6a21\u62df\u7269\u7406\u53d8\u5f62\uff08\u6324\u538b\u3001\u62c9\u4f38\uff09\n   - \u692d\u7403\u4f53\u751f\u6210\n   - \u7eb9\u7406\u7a7a\u95f4\u53d8\u6362</p>\n</li>\n</ol>\n<p><strong>\u7f29\u653e\u4e2d\u5fc3\u7684\u9009\u62e9</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>\u7ed5\u70b9P\u7f29\u653e = T(P) \u00d7 S(sx,sy,sz) \u00d7 T(-P)\n\u5e38\u89c1\u4e2d\u5fc3\uff1a\u7269\u4f53\u4e2d\u5fc3\u3001\u5305\u56f4\u76d2\u4e2d\u5fc3\u3001\u8d28\u5fc3\n</code></pre>\n\n<h4 id=\"_10\">\u4e09\u7ef4\u65cb\u8f6c</h4>\n<p>\u4e09\u7ef4\u65cb\u8f6c\u662f\u6700\u590d\u6742\u7684\u57fa\u672c\u53d8\u6362\uff0c\u6709\u591a\u79cd\u8868\u793a\u65b9\u6cd5\u3002</p>\n<p><strong>\u57fa\u672c\u8f74\u65cb\u8f6c</strong></p>\n<p>\u7ed5 x \u8f74\u65cb\u8f6c\uff08\u4fef\u4ef0 Pitch\uff09\uff1a\n$$\\mathbf{R}_x(\\theta) = \\begin{bmatrix}\n1 &amp; 0 &amp; 0 &amp; 0 \\\n0 &amp; \\cos\\theta &amp; -\\sin\\theta &amp; 0 \\\n0 &amp; \\sin\\theta &amp; \\cos\\theta &amp; 0 \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n\u7ed5 y \u8f74\u65cb\u8f6c\uff08\u504f\u822a Yaw\uff09\uff1a\n$$\\mathbf{R}_y(\\theta) = \\begin{bmatrix}\n\\cos\\theta &amp; 0 &amp; \\sin\\theta &amp; 0 \\\n0 &amp; 1 &amp; 0 &amp; 0 \\\n-\\sin\\theta &amp; 0 &amp; \\cos\\theta &amp; 0 \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n\u7ed5 z \u8f74\u65cb\u8f6c\uff08\u6eda\u8f6c Roll\uff09\uff1a\n$$\\mathbf{R}_z(\\theta) = \\begin{bmatrix}\n\\cos\\theta &amp; -\\sin\\theta &amp; 0 &amp; 0 \\\n\\sin\\theta &amp; \\cos\\theta &amp; 0 &amp; 0 \\\n0 &amp; 0 &amp; 1 &amp; 0 \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n<strong>\u8bb0\u5fc6\u89c4\u5219</strong>\uff1a</p>\n<ol>\n<li>\u65cb\u8f6c\u8f74\u5bf9\u5e94\u7684\u884c\u5217\u4fdd\u6301\u5355\u4f4d\u5411\u91cf\u5f62\u5f0f</li>\n<li>\u5176\u4ed62\u00d72\u5b50\u77e9\u9635\u662f\u4e8c\u7ef4\u65cb\u8f6c\u77e9\u9635</li>\n<li>$\\mathbf{R}_y$ \u7684\u7b26\u53f7\u76f8\u53cd\uff08\u4fdd\u6301\u53f3\u624b\u7cfb\uff09</li>\n</ol>\n<p><strong>\u65cb\u8f6c\u77e9\u9635\u7684\u6027\u8d28</strong>\uff1a</p>\n<ol>\n<li><strong>\u6b63\u4ea4\u6027</strong>\uff1a$\\mathbf{R}^T\\mathbf{R} = \\mathbf{I}$</li>\n<li><strong>\u884c\u5217\u5f0f</strong>\uff1a$\\det(\\mathbf{R}) = 1$\uff08\u4fdd\u6301\u624b\u6027\uff09</li>\n<li><strong>\u7279\u5f81\u503c</strong>\uff1a$\\lambda = 1, e^{i\\theta}, e^{-i\\theta}$\n   - \u5b9e\u7279\u5f81\u503c1\u5bf9\u5e94\u65cb\u8f6c\u8f74\n   - \u590d\u7279\u5f81\u503c\u5bf9\u63cf\u8ff0\u65cb\u8f6c\u89d2\u5ea6</li>\n<li><strong>\u7fa4\u7ed3\u6784</strong>\uff1aSO(3)\u7279\u6b8a\u6b63\u4ea4\u7fa4\n   - \u5c01\u95ed\u6027\uff1a\u65cb\u8f6c\u7684\u590d\u5408\u4ecd\u662f\u65cb\u8f6c\n   - \u975e\u4ea4\u6362\uff1a$\\mathbf{R}_1\\mathbf{R}_2 \\neq \\mathbf{R}_2\\mathbf{R}_1$</li>\n</ol>\n<p><strong>\u6b27\u62c9\u89d2\u8868\u793a</strong></p>\n<p>\u4efb\u610f\u65cb\u8f6c\u53ef\u5206\u89e3\u4e3a\u4e09\u6b21\u57fa\u672c\u65cb\u8f6c\uff1a</p>\n<ol>\n<li>\n<p><strong>ZYX\u987a\u5e8f</strong>\uff08\u504f\u822a-\u4fef\u4ef0-\u6eda\u8f6c\uff09\uff1a\n$$\\mathbf{R} = \\mathbf{R}_z(\\psi)\\mathbf{R}_y(\\theta)\\mathbf{R}_x(\\phi)$$</p>\n</li>\n<li>\n<p><strong>XYZ\u987a\u5e8f</strong>\uff08\u6eda\u8f6c-\u4fef\u4ef0-\u504f\u822a\uff09\uff1a\n$$\\mathbf{R} = \\mathbf{R}_x(\\phi)\\mathbf{R}_y(\\theta)\\mathbf{R}_z(\\psi)$$\n<strong>\u4e07\u5411\u9501\uff08Gimbal Lock\uff09\u95ee\u9898</strong>\uff1a</p>\n</li>\n</ol>\n<ul>\n<li>\u5f53\u4e2d\u95f4\u65cb\u8f6c\u89d2\u4e3a \u00b190\u00b0 \u65f6\u53d1\u751f</li>\n<li>\u7b2c\u4e00\u548c\u7b2c\u4e09\u6b21\u65cb\u8f6c\u8f74\u5bf9\u9f50</li>\n<li>\u5931\u53bb\u4e00\u4e2a\u65cb\u8f6c\u81ea\u7531\u5ea6</li>\n<li>\u5bfc\u81f4\u52a8\u753b\u4e0d\u8fde\u7eed</li>\n</ul>\n<p><strong>\u89e3\u51b3\u65b9\u6848</strong>\uff1a</p>\n<ol>\n<li>\u9650\u5236\u65cb\u8f6c\u8303\u56f4</li>\n<li>\u4f7f\u7528\u56db\u5143\u6570</li>\n<li>\u8f74\u89d2\u8868\u793a</li>\n<li>\u65cb\u8f6c\u77e9\u9635\u76f4\u63a5\u63d2\u503c</li>\n</ol>\n<h4 id=\"_11\">\u4e09\u7ef4\u53cd\u5c04</h4>\n<p>\u4e09\u7ef4\u53cd\u5c04\u6269\u5c55\u4e86\u4e8c\u7ef4\u60c5\u51b5\uff1a</p>\n<p><strong>\u57fa\u672c\u5e73\u9762\u53cd\u5c04</strong>\uff1a</p>\n<ul>\n<li>XY\u5e73\u9762\uff08z=0\uff09\uff1a$\\mathbf{F}_{xy} = \\text{diag}(1, 1, -1, 1)$</li>\n<li>YZ\u5e73\u9762\uff08x=0\uff09\uff1a$\\mathbf{F}_{yz} = \\text{diag}(-1, 1, 1, 1)$</li>\n<li>XZ\u5e73\u9762\uff08y=0\uff09\uff1a$\\mathbf{F}_{xz} = \\text{diag}(1, -1, 1, 1)$</li>\n</ul>\n<p><strong>\u4efb\u610f\u5e73\u9762\u53cd\u5c04</strong>\uff1a\n\u5bf9\u4e8e\u5e73\u9762 $\\mathbf{n} \\cdot \\mathbf{p} = d$\uff08$\\mathbf{n}$ \u662f\u5355\u4f4d\u6cd5\u5411\u91cf\uff09\uff1a\n$$\\mathbf{F} = \\mathbf{I} - 2\\mathbf{n}\\mathbf{n}^T$$\n\u5c55\u5f00\u4e3a4\u00d74\u77e9\u9635\uff1a\n$$\\mathbf{F} = \\begin{bmatrix}\n1-2n_x^2 &amp; -2n_xn_y &amp; -2n_xn_z &amp; -2dn_x \\\n-2n_yn_x &amp; 1-2n_y^2 &amp; -2n_yn_z &amp; -2dn_y \\\n-2n_zn_x &amp; -2n_zn_y &amp; 1-2n_z^2 &amp; -2dn_z \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n<strong>\u5e94\u7528</strong>\uff1a</p>\n<ul>\n<li>\u955c\u9762\u6548\u679c</li>\n<li>\u5bf9\u79f0\u5efa\u6a21</li>\n<li>\u9634\u5f71\u751f\u6210\uff08\u5e73\u9762\u6295\u5f71\uff09</li>\n</ul>\n<h4 id=\"_12\">\u4e09\u7ef4\u9519\u5207</h4>\n<p>\u4e09\u7ef4\u9519\u5207\u6bd4\u4e8c\u7ef4\u590d\u6742\uff0c\u6709\u591a\u79cd\u5f62\u5f0f\uff1a</p>\n<p><strong>XY\u9519\u5207</strong>\uff08\u6cbfz\u53d8\u5316\uff09\uff1a\n$$\\mathbf{H}_{xy}(h_x, h_y) = \\begin{bmatrix}\n1 &amp; 0 &amp; h_x &amp; 0 \\\n0 &amp; 1 &amp; h_y &amp; 0 \\\n0 &amp; 0 &amp; 1 &amp; 0 \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n<strong>\u4e00\u822c\u9519\u5207\u77e9\u9635</strong>\uff1a\n$$\\mathbf{H} = \\begin{bmatrix}\n1 &amp; h_{xy} &amp; h_{xz} &amp; 0 \\\nh_{yx} &amp; 1 &amp; h_{yz} &amp; 0 \\\nh_{zx} &amp; h_{zy} &amp; 1 &amp; 0 \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n<strong>\u6027\u8d28</strong>\uff1a</p>\n<ul>\n<li>\u4fdd\u6301\u4f53\u79ef\uff1a$\\det(\\mathbf{H}) = 1$</li>\n<li>\u5e73\u884c\u5e73\u9762\u4fdd\u6301\u5e73\u884c</li>\n<li>\u53ef\u5206\u89e3\u4e3a\u57fa\u672c\u9519\u5207\u7684\u7ec4\u5408</li>\n</ul>\n<h4 id=\"_13\">\u53d8\u6362\u7684\u7ec4\u5408\u4e0e\u4f18\u5316</h4>\n<p><strong>\u7ec4\u5408\u987a\u5e8f\u7684\u91cd\u8981\u6027</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>\u5c40\u90e8\u5230\u4e16\u754c\uff1aScale \u2192 Rotate \u2192 Translate\n\u4e16\u754c\u5230\u5c40\u90e8\uff1aTranslate^(-1) \u2192 Rotate^(-1) \u2192 Scale^(-1)\n</code></pre>\n\n<p><strong>\u5e38\u89c1\u7ec4\u5408\u6a21\u5f0f</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>TRS\u53d8\u6362</strong>\uff1a$\\mathbf{M} = \\mathbf{T}\\mathbf{R}\\mathbf{S}$\n   - \u6700\u5e38\u7528\u7684\u7ec4\u5408\u987a\u5e8f\n   - \u4fbf\u4e8e\u72ec\u7acb\u63a7\u5236\u5404\u5206\u91cf\n   - \u9002\u5408\u5173\u952e\u5e27\u52a8\u753b</p>\n</li>\n<li>\n<p><strong>\u67a2\u8f74\u70b9\u53d8\u6362</strong>\uff1a\n$$\\mathbf{M} = \\mathbf{T}_{\\text{pos}}\\mathbf{T}_{\\text{pivot}}\\mathbf{R}\\mathbf{S}\\mathbf{T}_{-\\text{pivot}}$$</p>\n</li>\n</ol>\n<ul>\n<li>\u652f\u6301\u4efb\u610f\u70b9\u4e3a\u4e2d\u5fc3\u7684\u53d8\u6362</li>\n<li>\u7528\u4e8e3D\u8f6f\u4ef6\u7684\u53d8\u6362\u5de5\u5177</li>\n</ul>\n<ol start=\"3\">\n<li><strong>\u5c42\u6b21\u53d8\u6362</strong>\uff1a\n$$\\mathbf{M}_{\\text{child}} = \\mathbf{M}_{\\text{parent}} \\mathbf{M}_{\\text{local}}$$</li>\n</ol>\n<ul>\n<li>\u573a\u666f\u56fe\u7ed3\u6784</li>\n<li>\u9aa8\u9abc\u52a8\u753b\u7cfb\u7edf</li>\n<li>\u76f8\u5bf9\u5750\u6807\u7cfb</li>\n</ul>\n<p><strong>\u6027\u80fd\u4f18\u5316\u8003\u8651</strong>\uff1a</p>\n<ol>\n<li>\n<p><strong>\u77e9\u9635\u7f13\u5b58</strong>\uff1a\n   - \u9884\u8ba1\u7b97\u9759\u6001\u53d8\u6362\n   - \u7f13\u5b58\u4e2d\u95f4\u7ed3\u679c\n   - \u907f\u514d\u91cd\u590d\u8ba1\u7b97</p>\n</li>\n<li>\n<p><strong>SIMD\u4f18\u5316</strong>\uff1a\n   - 4\u00d74\u77e9\u9635\u9002\u5408SSE/AVX\n   - \u6279\u91cf\u9876\u70b9\u53d8\u6362\n   - \u5e76\u884c\u77e9\u9635\u4e58\u6cd5</p>\n</li>\n<li>\n<p><strong>\u7cbe\u5ea6\u7ef4\u62a4</strong>\uff1a\n   - \u5b9a\u671f\u6b63\u4ea4\u5316\u65cb\u8f6c\u90e8\u5206\n   - \u4f7f\u7528\u53cc\u7cbe\u5ea6\u5173\u952e\u8ba1\u7b97\n   - \u907f\u514d\u6781\u5c0f\u7f29\u653e\u503c</p>\n</li>\n</ol>\n<h3 id=\"214-rodrigues-rotation-formula\">2.1.4 \u4efb\u610f\u8f74\u65cb\u8f6c\uff08Rodrigues' Rotation Formula\uff09</h3>\n<p>\u7ed5\u4efb\u610f\u5355\u4f4d\u5411\u91cf $\\mathbf{n} = (n_x, n_y, n_z)$ \u65cb\u8f6c $\\theta$ \u89d2\u5ea6\u662f\u4e09\u7ef4\u56fe\u5f62\u5b66\u7684\u6838\u5fc3\u64cd\u4f5c\u3002Rodrigues\u516c\u5f0f\u63d0\u4f9b\u4e86\u4f18\u96c5\u7684\u89e3\u51b3\u65b9\u6848\uff1a\n$$\\mathbf{R}(\\mathbf{n}, \\theta) = \\cos\\theta \\mathbf{I} + (1-\\cos\\theta)\\mathbf{n}\\mathbf{n}^T + \\sin\\theta \\mathbf{N}$$\n\u5176\u4e2d $\\mathbf{N}$ \u662f $\\mathbf{n}$ \u7684\u53cd\u5bf9\u79f0\u77e9\u9635\uff08\u53c9\u79ef\u77e9\u9635\uff09\uff1a\n$$\\mathbf{N} = \\begin{bmatrix}\n0 &amp; -n_z &amp; n_y \\\nn_z &amp; 0 &amp; -n_x \\\n-n_y &amp; n_x &amp; 0\n\\end{bmatrix}$$</p>\n<h4 id=\"_14\">\u51e0\u4f55\u63a8\u5bfc\u4e0e\u76f4\u89c9</h4>\n<p><strong>\u6838\u5fc3\u601d\u60f3</strong>\uff1a\u5c06\u4efb\u610f\u5411\u91cf\u5206\u89e3\u4e3a\u5e73\u884c\u548c\u5782\u76f4\u4e8e\u65cb\u8f6c\u8f74\u7684\u5206\u91cf\uff0c\u5206\u522b\u5904\u7406\u3002</p>\n<p>\u5bf9\u4e8e\u5411\u91cf $\\mathbf{v}$\uff1a</p>\n<ol>\n<li>\n<p><strong>\u5e73\u884c\u5206\u91cf</strong>\uff1a$\\mathbf{v}_\\parallel = (\\mathbf{n} \\cdot \\mathbf{v})\\mathbf{n}$\n   - \u6cbf\u65cb\u8f6c\u8f74\u7684\u6295\u5f71\n   - \u65cb\u8f6c\u65f6\u4fdd\u6301\u4e0d\u53d8</p>\n</li>\n<li>\n<p><strong>\u5782\u76f4\u5206\u91cf</strong>\uff1a$\\mathbf{v}_\\perp = \\mathbf{v} - \\mathbf{v}_\\parallel$\n   - \u5728\u5782\u76f4\u4e8e\u8f74\u7684\u5e73\u9762\u5185\n   - \u8fdb\u884c\u4e8c\u7ef4\u65cb\u8f6c</p>\n</li>\n<li>\n<p><strong>\u6b63\u4ea4\u57fa\u6784\u5efa</strong>\uff1a\n   - $\\mathbf{e}_1 = \\mathbf{v}_\\perp / ||\\mathbf{v}_\\perp||$\n   - $\\mathbf{e}_2 = \\mathbf{n} \\times \\mathbf{e}_1$\n   - \u5728 $(\\mathbf{e}_1, \\mathbf{e}_2)$ \u5e73\u9762\u5185\u65cb\u8f6c</p>\n</li>\n</ol>\n<p>\u65cb\u8f6c\u540e\u7684\u5411\u91cf\uff1a\n$$\\mathbf{v}' = \\mathbf{v}_\\parallel + \\cos\\theta \\mathbf{v}_\\perp + \\sin\\theta (\\mathbf{n} \\times \\mathbf{v}_\\perp)$$\n\u6ce8\u610f\uff1a$\\mathbf{n} \\times \\mathbf{v}_\\perp = \\mathbf{n} \\times \\mathbf{v}$\uff08\u56e0\u4e3a $\\mathbf{n} \\times \\mathbf{v}_\\parallel = \\mathbf{0}$\uff09</p>\n<h4 id=\"_15\">\u77e9\u9635\u5f62\u5f0f\u5c55\u5f00</h4>\n<p>\u5c06\u5411\u91cf\u5f62\u5f0f\u8f6c\u6362\u4e3a\u77e9\u9635\u5f62\u5f0f\uff0c\u6211\u4eec\u5f97\u5230\uff1a\n$$\\mathbf{R}(\\mathbf{n}, \\theta) = \\begin{bmatrix}\nc + n_x^2(1-c) &amp; n_xn_y(1-c) - n_zs &amp; n_xn_z(1-c) + n_ys \\\nn_yn_x(1-c) + n_zs &amp; c + n_y^2(1-c) &amp; n_yn_z(1-c) - n_xs \\\nn_zn_x(1-c) - n_ys &amp; n_zn_y(1-c) + n_xs &amp; c + n_z^2(1-c)\n\\end{bmatrix}$$\n\u5176\u4e2d $c = \\cos\\theta$\uff0c$s = \\sin\\theta$\u3002</p>\n<p><strong>\u9a8c\u8bc1\u77e9\u9635\u6027\u8d28</strong>\uff1a</p>\n<ol>\n<li><strong>\u6b63\u4ea4\u6027</strong>\uff1a$\\mathbf{R}^T\\mathbf{R} = \\mathbf{I}$</li>\n<li><strong>\u884c\u5217\u5f0f</strong>\uff1a$\\det(\\mathbf{R}) = 1$\uff08\u4fdd\u6301\u53f3\u624b\u7cfb\uff09</li>\n<li><strong>\u7279\u5f81\u503c</strong>\uff1a$\\lambda_1 = 1$\uff08\u5bf9\u5e94\u65cb\u8f6c\u8f74\uff09\uff0c$\\lambda_{2,3} = e^{\\pm i\\theta}$</li>\n<li><strong>\u8ff9</strong>\uff1a$\\text{tr}(\\mathbf{R}) = 1 + 2\\cos\\theta$\uff08\u7528\u4e8e\u63d0\u53d6\u65cb\u8f6c\u89d2\uff09</li>\n</ol>\n<h4 id=\"_16\">\u7279\u6b8a\u89d2\u5ea6\u7684\u7b80\u5316</h4>\n<ol>\n<li>\n<p><strong>$\\theta = 0$</strong>\uff1a$\\mathbf{R} = \\mathbf{I}$\uff08\u6052\u7b49\u53d8\u6362\uff09</p>\n</li>\n<li>\n<p><strong>$\\theta = 90\u00b0$</strong>\uff1a\n$$\\mathbf{R}(\\mathbf{n}, 90\u00b0) = \\mathbf{n}\\mathbf{n}^T + \\mathbf{N}$$\n\u7eaf\u53c9\u79ef\u5f62\u5f0f\uff0c\u8ba1\u7b97\u7b80\u5316</p>\n</li>\n<li>\n<p><strong>$\\theta = 180\u00b0$</strong>\uff1a\n$$\\mathbf{R}(\\mathbf{n}, 180\u00b0) = 2\\mathbf{n}\\mathbf{n}^T - \\mathbf{I}$$\n\u5173\u4e8e\u8f74\u7684\u53cd\u5c04\u7ec4\u5408</p>\n</li>\n<li>\n<p><strong>\u5c0f\u89d2\u5ea6\u8fd1\u4f3c</strong>\uff08$\\theta \\ll 1$\uff09\uff1a\n$$\\mathbf{R}(\\mathbf{n}, \\theta) \\approx \\mathbf{I} + \\theta\\mathbf{N}$$\n\u7ebf\u6027\u5316\u65cb\u8f6c\uff0c\u7528\u4e8e\u5fae\u5206\u8fd0\u52a8</p>\n</li>\n</ol>\n<h4 id=\"_17\">\u4e0e\u5176\u4ed6\u8868\u793a\u7684\u8f6c\u6362</h4>\n<p><strong>1. \u8f74\u89d2\u5230\u65cb\u8f6c\u77e9\u9635</strong>\uff1a\n\u4f7f\u7528 Rodrigues \u516c\u5f0f\u76f4\u63a5\u8ba1\u7b97\u3002</p>\n<p><strong>2. \u65cb\u8f6c\u77e9\u9635\u5230\u8f74\u89d2</strong>\uff1a\n- \u65cb\u8f6c\u89d2\uff1a$\\theta = \\arccos\\left(\\frac{\\text{tr}(\\mathbf{R}) - 1}{2}\\right)$\n- \u65cb\u8f6c\u8f74\uff1a\u4ece $\\mathbf{R} - \\mathbf{R}^T$ \u63d0\u53d6\uff08\u53cd\u5bf9\u79f0\u90e8\u5206\uff09\n- \u7279\u6b8a\u60c5\u51b5\uff1a$\\theta = 0$ \u6216 $\\theta = 180\u00b0$ \u9700\u8981\u7279\u6b8a\u5904\u7406</p>\n<p><strong>3. \u56db\u5143\u6570\u8868\u793a</strong>\uff1a\n$$q = \\left[\\cos\\frac{\\theta}{2}, \\sin\\frac{\\theta}{2}\\mathbf{n}\\right]$$\n\u56db\u5143\u6570\u5230\u65cb\u8f6c\u77e9\u9635\uff1a\n$$\\mathbf{R} = \\mathbf{I} + 2s\\mathbf{Q} + 2\\mathbf{Q}^2$$\n\u5176\u4e2d $q = [s, \\mathbf{v}]$\uff0c$\\mathbf{Q}$ \u662f $\\mathbf{v}$ \u7684\u53c9\u79ef\u77e9\u9635\u3002</p>\n<p><strong>4. \u6307\u6570\u6620\u5c04</strong>\uff1a\n$$\\mathbf{R} = \\exp(\\theta\\mathbf{N}) = \\sum_{k=0}^{\\infty} \\frac{(\\theta\\mathbf{N})^k}{k!}$$\n\u5229\u7528 $\\mathbf{N}^3 = -\\mathbf{N}$ \u7684\u6027\u8d28\uff0c\u53ef\u5f97\u5230 Rodrigues \u516c\u5f0f\u3002</p>\n<h4 id=\"_18\">\u6570\u503c\u7a33\u5b9a\u6027\u8003\u8651</h4>\n<p><strong>1. \u63a5\u8fd1 0\u00b0 \u7684\u60c5\u51b5</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>if (theta &lt; epsilon):\n    return I + theta * N  // \u7ebf\u6027\u8fd1\u4f3c\n</code></pre>\n\n<p><strong>2. \u63a5\u8fd1 180\u00b0 \u7684\u60c5\u51b5</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>if (theta &gt; pi - epsilon):\n    // \u4f7f\u7528\u5bf9\u79f0\u77e9\u9635\u5f62\u5f0f\n    // \u4ece\u6700\u5927\u5bf9\u89d2\u5143\u7d20\u63d0\u53d6\u8f74\n</code></pre>\n\n<p><strong>3. \u5f52\u4e00\u5316\u4fdd\u8bc1</strong>\uff1a\n- \u8f93\u5165\u8f74\u5fc5\u987b\u662f\u5355\u4f4d\u5411\u91cf\n- \u5b9a\u671f\u91cd\u65b0\u5f52\u4e00\u5316\u4ee5\u6d88\u9664\u6570\u503c\u8bef\u5dee</p>\n<h4 id=\"_19\">\u8ba1\u7b97\u4f18\u5316\u6280\u5de7</h4>\n<p><strong>1. \u51cf\u5c11\u4e09\u89d2\u51fd\u6570\u8c03\u7528</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>c = cos(theta)\ns = sin(theta)\nt = 1 - c\n</code></pre>\n\n<p><strong>2. \u5229\u7528\u5bf9\u79f0\u6027</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>// \u53ea\u8ba1\u7b97\u4e0a\u4e09\u89d2\uff0c\u7136\u540e\u590d\u5236\nR[0][1] = t*n.x*n.y - s*n.z\nR[1][0] = t*n.x*n.y + s*n.z\n</code></pre>\n\n<p><strong>3. SIMD \u5411\u91cf\u5316</strong>\uff1a\n- \u540c\u65f6\u8ba1\u7b97\u591a\u4e2a\u5411\u91cf\u7684\u65cb\u8f6c\n- \u4f7f\u7528\u5411\u91cf\u6307\u4ee4\u96c6\uff08SSE/AVX\uff09</p>\n<p><strong>4. \u9884\u8ba1\u7b97\u5e38\u7528\u65cb\u8f6c</strong>\uff1a\n- 90\u00b0\u3001180\u00b0 \u7b49\u7279\u6b8a\u89d2\u5ea6\n- \u5e38\u7528\u8f74\uff08\u5750\u6807\u8f74\uff09\u7684\u65cb\u8f6c</p>\n<h4 id=\"_20\">\u5e94\u7528\u573a\u666f</h4>\n<ol>\n<li>\n<p><strong>\u76f8\u673a\u63a7\u5236</strong>\uff1a\n   - Arcball \u65cb\u8f6c\uff1a\u9f20\u6807\u62d6\u52a8\u6620\u5c04\u5230\u7403\u9762\u65cb\u8f6c\n   - FPS\u76f8\u673a\uff1a\u504f\u822a\u548c\u4fef\u4ef0\u7684\u7ec4\u5408</p>\n</li>\n<li>\n<p><strong>\u7269\u4f53\u5b9a\u5411</strong>\uff1a\n   - Look-at \u7ea6\u675f\uff1a\u8ba1\u7b97\u4f7f\u7269\u4f53\u671d\u5411\u76ee\u6807\u7684\u65cb\u8f6c\n   - \u5bf9\u9f50\u5230\u8868\u9762\uff1a\u6cd5\u5411\u91cf\u5b9a\u4e49\u65cb\u8f6c\u8f74</p>\n</li>\n<li>\n<p><strong>\u52a8\u753b\u63d2\u503c</strong>\uff1a\n   - \u8f74\u89d2\u8868\u793a\u4fbf\u4e8e\u7ebf\u6027\u63d2\u503c\uff08\u6ce8\u610f\u5f52\u4e00\u5316\uff09\n   - \u4e0e\u56db\u5143\u6570 SLERP \u7684\u8f6c\u6362</p>\n</li>\n<li>\n<p><strong>\u7269\u7406\u6a21\u62df</strong>\uff1a\n   - \u89d2\u901f\u5ea6\u79ef\u5206\uff1a$\\mathbf{R}(t+dt) = \\mathbf{R}(\\boldsymbol{\\omega}, ||\\boldsymbol{\\omega}||dt) \\cdot \\mathbf{R}(t)$\n   - \u7ea6\u675f\u6c42\u89e3\uff1a\u65cb\u8f6c\u8f74often\u4f5c\u4e3a\u7ea6\u675f\u6761\u4ef6</p>\n</li>\n</ol>\n<h4 id=\"_21\">\u51e0\u4f55\u610f\u4e49\u7684\u6df1\u5165\u7406\u89e3</h4>\n<p><strong>\u65cb\u8f6c\u7684\u674e\u7fa4\u7ed3\u6784</strong>\uff1a</p>\n<ul>\n<li>SO(3) \u662f\u7279\u6b8a\u6b63\u4ea4\u7fa4</li>\n<li>\u65cb\u8f6c\u7684\u7ec4\u5408\u4ecd\u662f\u65cb\u8f6c</li>\n<li>\u6307\u6570\u6620\u5c04\u8fde\u63a5\u674e\u4ee3\u6570 so(3) \u548c\u674e\u7fa4 SO(3)</li>\n</ul>\n<p><strong>\u65cb\u8f6c\u7684\u4e0d\u53d8\u91cf</strong>\uff1a</p>\n<ul>\n<li>\u4fdd\u6301\u5411\u91cf\u957f\u5ea6</li>\n<li>\u4fdd\u6301\u5411\u91cf\u5939\u89d2</li>\n<li>\u4fdd\u6301\u4e09\u91cd\u79ef\uff08\u4f53\u79ef\u548c\u624b\u6027\uff09</li>\n<li>\u4fdd\u6301\u70b9\u5230\u65cb\u8f6c\u8f74\u7684\u8ddd\u79bb</li>\n</ul>\n<p><strong>\u87ba\u65cb\u8fd0\u52a8</strong>\uff1a\n\u7ed3\u5408\u65cb\u8f6c\u548c\u6cbf\u8f74\u5e73\u79fb\uff1a\n$$\\mathbf{T} = \\begin{bmatrix}\n\\mathbf{R}(\\mathbf{n}, \\theta) &amp; \\mathbf{t}\\mathbf{n} \\\n\\mathbf{0}^T &amp; 1\n\\end{bmatrix}$$\n\u5f62\u6210\u87ba\u65cb\u7ebf\u8f68\u8ff9\uff0c\u5e7f\u6cdb\u5e94\u7528\u4e8e\uff1a</p>\n<ul>\n<li>\u87ba\u4e1d\u8fd0\u52a8</li>\n<li>DNA\u53cc\u87ba\u65cb\u5efa\u6a21</li>\n<li>\u7c92\u5b50\u8f68\u8ff9</li>\n</ul>\n<h3 id=\"215\">2.1.5 \u53d8\u6362\u7684\u5206\u89e3\u4e0e\u7ec4\u5408</h3>\n<p>\u7406\u89e3\u5982\u4f55\u5206\u89e3\u548c\u7ec4\u5408\u53d8\u6362\u662f\u638c\u63e1\u8ba1\u7b97\u673a\u56fe\u5f62\u5b66\u7684\u5173\u952e\u3002\u6bcf\u4e2a\u590d\u6742\u53d8\u6362\u90fd\u53ef\u4ee5\u5206\u89e3\u4e3a\u57fa\u672c\u53d8\u6362\u7684\u7ec4\u5408\uff0c\u800c\u6b63\u786e\u7684\u7ec4\u5408\u987a\u5e8f\u51b3\u5b9a\u4e86\u6700\u7ec8\u6548\u679c\u3002</p>\n<h4 id=\"_22\">\u4eff\u5c04\u53d8\u6362\u7684\u4e00\u822c\u5f62\u5f0f</h4>\n<p>\u4efb\u610f\u4eff\u5c04\u53d8\u6362\u53ef\u8868\u793a\u4e3a\uff1a\n$$\\mathbf{A} = \\begin{bmatrix}\n\\mathbf{M}_{3\\times3} &amp; \\mathbf{t} \\\n\\mathbf{0}^T &amp; 1\n\\end{bmatrix}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$\\mathbf{M}_{3\\times3}$\uff1a\u7ebf\u6027\u53d8\u6362\u90e8\u5206\uff08\u65cb\u8f6c\u3001\u7f29\u653e\u3001\u9519\u5207\uff09</li>\n<li>$\\mathbf{t}$\uff1a\u5e73\u79fb\u5411\u91cf</li>\n<li>\u6700\u540e\u4e00\u884c\u4fdd\u8bc1\u77e9\u9635\u53ef\u9006\u6027</li>\n</ul>\n<h4 id=\"_23\">\u53d8\u6362\u5206\u89e3\u7406\u8bba</h4>\n<p><strong>1. \u6781\u5206\u89e3\uff08Polar Decomposition\uff09</strong>\uff1a\n$$\\mathbf{M} = \\mathbf{R} \\cdot \\mathbf{S}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$\\mathbf{R}$\uff1a\u6b63\u4ea4\u77e9\u9635\uff08\u65cb\u8f6c\uff09</li>\n<li>$\\mathbf{S}$\uff1a\u5bf9\u79f0\u6b63\u5b9a\u77e9\u9635\uff08\u7f29\u653e\u548c\u9519\u5207\uff09</li>\n</ul>\n<p>\u8ba1\u7b97\u65b9\u6cd5\uff1a\n$$\\mathbf{S} = \\sqrt{\\mathbf{M}^T\\mathbf{M}}, \\quad \\mathbf{R} = \\mathbf{M}\\mathbf{S}^{-1}$$</p>\n<p><strong>2. \u5947\u5f02\u503c\u5206\u89e3\uff08SVD\uff09</strong>\uff1a\n$$\\mathbf{M} = \\mathbf{U} \\boldsymbol{\\Sigma} \\mathbf{V}^T$$\n\u51e0\u4f55\u610f\u4e49\uff1a</p>\n<ul>\n<li>$\\mathbf{V}^T$\uff1a\u7b2c\u4e00\u6b21\u65cb\u8f6c\uff08\u5bf9\u9f50\u5230\u4e3b\u8f74\uff09</li>\n<li>$\\boldsymbol{\\Sigma}$\uff1a\u6cbf\u4e3b\u8f74\u7f29\u653e</li>\n<li>$\\mathbf{U}$\uff1a\u7b2c\u4e8c\u6b21\u65cb\u8f6c\uff08\u5230\u6700\u7ec8\u65b9\u5411\uff09</li>\n</ul>\n<p><strong>3. QR \u5206\u89e3</strong>\uff1a\n$$\\mathbf{M} = \\mathbf{Q} \\cdot \\mathbf{R}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$\\mathbf{Q}$\uff1a\u6b63\u4ea4\u77e9\u9635\uff08\u65cb\u8f6c\uff09</li>\n<li>$\\mathbf{R}$\uff1a\u4e0a\u4e09\u89d2\u77e9\u9635\uff08\u7f29\u653e\u548c\u9519\u5207\uff09</li>\n</ul>\n<p>\u4f7f\u7528 Gram-Schmidt \u6b63\u4ea4\u5316\u8ba1\u7b97\u3002</p>\n<h4 id=\"_24\">\u53d8\u6362\u7684\u5206\u7c7b\u4e0e\u5c42\u6b21</h4>\n<p>\u53d8\u6362\u6309\u7167\u4fdd\u6301\u7684\u51e0\u4f55\u6027\u8d28\u5f62\u6210\u4e25\u683c\u7684\u5c42\u6b21\u7ed3\u6784\uff1a</p>\n<ol>\n<li><strong>\u521a\u4f53\u53d8\u6362\uff08Rigid/Euclidean Transform\uff09</strong></li>\n</ol>\n<p>\u5b9a\u4e49\uff1a\u4fdd\u6301\u8ddd\u79bb\u548c\u89d2\u5ea6\u7684\u53d8\u6362</p>\n<ul>\n<li>\u7ec4\u6210\uff1a\u65cb\u8f6c + \u5e73\u79fb</li>\n<li>\u6807\u51c6\u5f62\u5f0f\uff1a$\\mathbf{M} = \\begin{bmatrix} \\mathbf{R} &amp; \\mathbf{t} \\ \\mathbf{0}^T &amp; 1 \\end{bmatrix}$</li>\n<li>\u81ea\u7531\u5ea6\uff1a6\uff083\u4e2a\u5e73\u79fb + 3\u4e2a\u65cb\u8f6c\uff09</li>\n<li>\u4e0d\u53d8\u91cf\uff1a</li>\n<li>\u70b9\u95f4\u8ddd\u79bb\uff1a$||\\mathbf{p}_1' - \\mathbf{p}_2'|| = ||\\mathbf{p}_1 - \\mathbf{p}_2||$</li>\n<li>\u5411\u91cf\u5939\u89d2\uff1a$\\mathbf{v}_1' \\cdot \\mathbf{v}_2' = \\mathbf{v}_1 \\cdot \\mathbf{v}_2$</li>\n<li>\u4f53\u79ef\u548c\u624b\u6027</li>\n</ul>\n<p>\u5e94\u7528\uff1a\u7269\u4f53\u59ff\u6001\u3001\u76f8\u673a\u8fd0\u52a8\u3001\u521a\u4f53\u52a8\u529b\u5b66</p>\n<ol start=\"2\">\n<li><strong>\u76f8\u4f3c\u53d8\u6362\uff08Similarity Transform\uff09</strong></li>\n</ol>\n<p>\u5b9a\u4e49\uff1a\u4fdd\u6301\u89d2\u5ea6\u548c\u5f62\u72b6\u6bd4\u4f8b\u7684\u53d8\u6362</p>\n<ul>\n<li>\u7ec4\u6210\uff1a\u5747\u5300\u7f29\u653e + \u65cb\u8f6c + \u5e73\u79fb</li>\n<li>\u6807\u51c6\u5f62\u5f0f\uff1a$\\mathbf{M} = \\begin{bmatrix} s\\mathbf{R} &amp; \\mathbf{t} \\ \\mathbf{0}^T &amp; 1 \\end{bmatrix}$</li>\n<li>\u81ea\u7531\u5ea6\uff1a7\uff081\u4e2a\u7f29\u653e\u56e0\u5b50\uff09</li>\n<li>\u4e0d\u53d8\u91cf\uff1a</li>\n<li>\u89d2\u5ea6\uff1a$\\angle(\\mathbf{v}_1', \\mathbf{v}_2') = \\angle(\\mathbf{v}_1, \\mathbf{v}_2)$</li>\n<li>\u8ddd\u79bb\u6bd4\uff1a$\\frac{||\\mathbf{p}_1' - \\mathbf{p}_2'||}{||\\mathbf{p}_3' - \\mathbf{p}_4'||} = \\frac{||\\mathbf{p}_1 - \\mathbf{p}_2||}{||\\mathbf{p}_3 - \\mathbf{p}_4||}$</li>\n</ul>\n<p>\u5e94\u7528\uff1aLOD\u7cfb\u7edf\u3001UI\u7f29\u653e\u3001\u5730\u56fe\u6295\u5f71</p>\n<ol start=\"3\">\n<li><strong>\u4eff\u5c04\u53d8\u6362\uff08Affine Transform\uff09</strong></li>\n</ol>\n<p>\u5b9a\u4e49\uff1a\u4fdd\u6301\u5e73\u884c\u6027\u548c\u76f4\u7ebf\u6027\u7684\u53d8\u6362</p>\n<ul>\n<li>\u7ec4\u6210\uff1a\u7f29\u653e + \u9519\u5207 + \u65cb\u8f6c + \u5e73\u79fb</li>\n<li>\u4e00\u822c\u5f62\u5f0f\uff1a$\\mathbf{M} = \\begin{bmatrix} \\mathbf{A} &amp; \\mathbf{t} \\ \\mathbf{0}^T &amp; 1 \\end{bmatrix}$\uff0c$\\det(\\mathbf{A}) \\neq 0$</li>\n<li>\u81ea\u7531\u5ea6\uff1a12</li>\n<li>\u4e0d\u53d8\u91cf\uff1a</li>\n<li>\u5e73\u884c\u7ebf\u4fdd\u6301\u5e73\u884c</li>\n<li>\u4e2d\u70b9\u4fdd\u6301\u4e2d\u70b9</li>\n<li>\u9762\u79ef\u6bd4\uff1a$\\frac{\\text{Area}(\\triangle A'B'C')}{\\text{Area}(\\triangle ABC)} = |\\det(\\mathbf{A})|$</li>\n<li>\u91cd\u5fc3\u5750\u6807</li>\n</ul>\n<p>\u5e94\u7528\uff1a\u7eb9\u7406\u6620\u5c04\u3001\u56fe\u50cf\u6821\u6b63\u3001\u5f62\u53d8\u52a8\u753b</p>\n<ol start=\"4\">\n<li><strong>\u6295\u5f71\u53d8\u6362\uff08Projective Transform\uff09</strong></li>\n</ol>\n<p>\u5b9a\u4e49\uff1a\u6700\u4e00\u822c\u7684\u7ebf\u6027\u53d8\u6362</p>\n<ul>\n<li>\u4e00\u822c\u5f62\u5f0f\uff1a$\\mathbf{P} = \\begin{bmatrix} \\mathbf{A} &amp; \\mathbf{t} \\ \\mathbf{v}^T &amp; s \\end{bmatrix}$</li>\n<li>\u81ea\u7531\u5ea6\uff1a15\uff08$4\\times4$ \u77e9\u9635\u51cf\u53bb\u9f50\u6b21\u7f29\u653e\uff09</li>\n<li>\u4e0d\u53d8\u91cf\uff1a</li>\n<li>\u76f4\u7ebf\u6620\u5c04\u4e3a\u76f4\u7ebf</li>\n<li>\u4ea4\u6bd4\uff08Cross-ratio\uff09\uff1a$\\frac{AC \\cdot BD}{AD \\cdot BC}$</li>\n<li>\u5171\u7ebf\u6027\u548c\u5171\u70b9\u6027</li>\n</ul>\n<p>\u5e94\u7528\uff1a\u900f\u89c6\u6295\u5f71\u3001\u56fe\u50cf\u7ea0\u6b63\u3001\u589e\u5f3a\u73b0\u5b9e</p>\n<p><strong>\u53d8\u6362\u7fa4\u7684\u5305\u542b\u5173\u7cfb</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>\u521a\u4f53 \u2282 \u76f8\u4f3c \u2282 \u4eff\u5c04 \u2282 \u6295\u5f71\n</code></pre>\n\n<p>\u6bcf\u4e00\u7ea7\u90fd\u662f\u4e0a\u4e00\u7ea7\u7684\u7279\u6b8a\u60c5\u51b5\u3002</p>\n<h4 id=\"_25\">\u53d8\u6362\u987a\u5e8f\u7684\u6df1\u523b\u5f71\u54cd</h4>\n<p>\u53d8\u6362\u7684\u4e0d\u4ea4\u6362\u6027\u662f\u56fe\u5f62\u5b66\u4e2d\u6700\u5bb9\u6613\u72af\u9519\u7684\u5730\u65b9\u4e4b\u4e00\u3002\u8ba9\u6211\u4eec\u901a\u8fc7\u5177\u4f53\u4f8b\u5b50\u6df1\u5165\u7406\u89e3\uff1a</p>\n<p><strong>\u793a\u4f8b1\uff1a\u5e73\u79fb\u4e0e\u65cb\u8f6c\u7684\u987a\u5e8f</strong></p>\n<p>\u5148\u5e73\u79fb\u540e\u65cb\u8f6c\uff1a\n$$\\mathbf{M}_1 = \\mathbf{R} \\cdot \\mathbf{T} = \\begin{bmatrix}\n\\mathbf{R}_{3\\times3} &amp; \\mathbf{R}_{3\\times3}\\mathbf{t} \\\n\\mathbf{0}^T &amp; 1\n\\end{bmatrix}$$\n\u5148\u65cb\u8f6c\u540e\u5e73\u79fb\uff1a\n$$\\mathbf{M}_2 = \\mathbf{T} \\cdot \\mathbf{R} = \\begin{bmatrix}\n\\mathbf{R}_{3\\times3} &amp; \\mathbf{t} \\\n\\mathbf{0}^T &amp; 1\n\\end{bmatrix}$$\n<strong>\u51e0\u4f55\u89e3\u91ca</strong>\uff1a</p>\n<ul>\n<li>$\\mathbf{M}_1$\uff1a\u7269\u4f53\u5148\u79fb\u5230\u65b0\u4f4d\u7f6e\uff0c\u7136\u540e\u7ed5\u539f\u70b9\u65cb\u8f6c\uff08\u516c\u8f6c\uff09</li>\n<li>$\\mathbf{M}_2$\uff1a\u7269\u4f53\u5148\u7ed5\u81ea\u8eab\u4e2d\u5fc3\u65cb\u8f6c\uff0c\u7136\u540e\u5e73\u79fb\uff08\u81ea\u8f6c\uff09</li>\n</ul>\n<p><strong>\u793a\u4f8b2\uff1a\u7f29\u653e\u4e0e\u65cb\u8f6c\u7684\u987a\u5e8f</strong></p>\n<p>\u8003\u8651\u975e\u5747\u5300\u7f29\u653e $\\mathbf{S}(2, 1, 1)$ \u548c\u65cb\u8f6c $\\mathbf{R}_z(45\u00b0)$\uff1a</p>\n<ul>\n<li>$\\mathbf{R} \\cdot \\mathbf{S}$\uff1a\u5148\u7f29\u653e\uff08\u53d8\u6210\u692d\u5706\uff09\uff0c\u540e\u65cb\u8f6c\uff08\u692d\u5706\u65cb\u8f6c\uff09</li>\n<li>$\\mathbf{S} \\cdot \\mathbf{R}$\uff1a\u5148\u65cb\u8f6c\uff08\u6b63\u5706\u65cb\u8f6c\uff09\uff0c\u540e\u7f29\u653e\uff08\u6cbf\u65b0\u8f74\u7f29\u653e\uff09</li>\n</ul>\n<p>\u7ed3\u679c\u5b8c\u5168\u4e0d\u540c\uff01</p>\n<p><strong>\u4ea4\u6362\u6761\u4ef6</strong>\uff1a\n\u4e24\u4e2a\u53d8\u6362 $\\mathbf{A}$ \u548c $\\mathbf{B}$ \u53ef\u4ea4\u6362\u5f53\u4e14\u4ec5\u5f53\uff1a</p>\n<ol>\n<li>\u90fd\u662f\u5e73\u79fb\uff1a$\\mathbf{T}_1 \\mathbf{T}_2 = \\mathbf{T}_2 \\mathbf{T}_1$</li>\n<li>\u90fd\u662f\u7ed5\u540c\u4e00\u8f74\u7684\u65cb\u8f6c</li>\n<li>\u90fd\u662f\u5747\u5300\u7f29\u653e</li>\n<li>\u4e00\u4e2a\u662f\u6052\u7b49\u53d8\u6362</li>\n</ol>\n<p><strong>\u5b9e\u7528\u6307\u5357</strong>\uff1a</p>\n<pre class=\"codehilite\"><code>\u5c40\u90e8\u5230\u4e16\u754c\uff1aScale \u2192 Rotate \u2192 Translate\n\u4e16\u754c\u5230\u5c40\u90e8\uff1aTranslate^(-1) \u2192 Rotate^(-1) \u2192 Scale^(-1)\n</code></pre>\n\n<h4 id=\"_26\">\u590d\u5408\u53d8\u6362\u7684\u6784\u9020\u6280\u5de7</h4>\n<ol>\n<li><strong>\u7ed5\u4efb\u610f\u70b9\u65cb\u8f6c</strong></li>\n</ol>\n<p>\u7ed5\u70b9 $\\mathbf{c}$ \u65cb\u8f6c $\\theta$ \u89d2\u5ea6\uff1a\n$$\\mathbf{M} = \\mathbf{T}(\\mathbf{c}) \\cdot \\mathbf{R}(\\theta) \\cdot \\mathbf{T}(-\\mathbf{c})$$\n\u5c55\u5f00\u540e\uff1a\n$$\\mathbf{M} = \\begin{bmatrix}\n\\mathbf{R} &amp; \\mathbf{c} - \\mathbf{R}\\mathbf{c} \\\n\\mathbf{0}^T &amp; 1\n\\end{bmatrix}$$\n\u8fd9\u63ed\u793a\u4e86\u201c\u79fb\u52a8\u5230\u539f\u70b9-\u53d8\u6362-\u79fb\u56de\u201d\u6a21\u5f0f\u7684\u666e\u904d\u6027\u3002</p>\n<ol start=\"2\">\n<li><strong>\u7ed5\u4efb\u610f\u8f74\u7f29\u653e</strong></li>\n</ol>\n<p>\u7ed9\u5b9a\u8f74\u65b9\u5411 $\\mathbf{u}$ \u548c\u7f29\u653e\u56e0\u5b50 $s$\uff1a</p>\n<ol>\n<li>\u6784\u9020\u65cb\u8f6c\u77e9\u9635 $\\mathbf{R}$ \u4f7f $\\mathbf{u}$ \u5bf9\u9f50\u5230\u67d0\u5750\u6807\u8f74</li>\n<li>\u6cbf\u8be5\u8f74\u7f29\u653e\uff1a$\\mathbf{S} = \\text{diag}(s, 1, 1)$</li>\n<li>\u65cb\u8f6c\u56de\u53bb\uff1a$\\mathbf{M} = \\mathbf{R}^T \\mathbf{S} \\mathbf{R}$</li>\n</ol>\n<p>\u76f4\u63a5\u516c\u5f0f\uff1a\n$$\\mathbf{M} = \\mathbf{I} + (s-1)\\mathbf{u}\\mathbf{u}^T$$</p>\n<ol start=\"3\">\n<li><strong>\u955c\u50cf\u4e0e\u65cb\u8f6c\u7684\u7ec4\u5408</strong></li>\n</ol>\n<p>\u6ed1\u79fb\u53cd\u5c04\uff08Glide Reflection\uff09\uff1a\n$$\\mathbf{G} = \\mathbf{T}(\\mathbf{d}) \\cdot \\mathbf{F}$$\n\u5176\u4e2d $\\mathbf{d}$ \u5e73\u884c\u4e8e\u53cd\u5c04\u9762\u3002</p>\n<p>\u4e24\u4e2a\u53cd\u5c04\u7684\u590d\u5408\u4ea7\u751f\u65cb\u8f6c\uff1a\n$$\\mathbf{F}_1 \\cdot \\mathbf{F}_2 = \\mathbf{R}(2\\theta)$$\n\u5176\u4e2d $\\theta$ \u662f\u4e24\u4e2a\u53cd\u5c04\u9762\u7684\u5939\u89d2\u3002</p>\n<ol start=\"4\">\n<li><strong>\u87ba\u65cb\u53d8\u6362</strong></li>\n</ol>\n<p>\u7ed5\u8f74 $\\mathbf{n}$ \u65cb\u8f6c $\\theta$ \u540c\u65f6\u6cbf\u8f74\u5e73\u79fb $d$\uff1a\n$$\\mathbf{H} = \\begin{bmatrix}\n\\mathbf{R}(\\mathbf{n}, \\theta) &amp; d\\mathbf{n} \\\n\\mathbf{0}^T &amp; 1\n\\end{bmatrix}$$\n\u5e94\u7528\uff1aDNA\u53cc\u87ba\u65cb\u3001\u87ba\u4e1d\u8fd0\u52a8\u3001\u5f39\u7c27\u5f62\u53d8\u3002</p>\n<h4 id=\"_27\">\u53d8\u6362\u7684\u63d2\u503c\u6280\u672f</h4>\n<p>\u5728\u52a8\u753b\u548c\u8fc7\u6e21\u6548\u679c\u4e2d\uff0c\u6211\u4eec\u7ecf\u5e38\u9700\u8981\u5728\u4e24\u4e2a\u53d8\u6362\u4e4b\u95f4\u5e73\u6ed1\u63d2\u503c\u3002\u76f4\u63a5\u63d2\u503c\u77e9\u9635\u5143\u7d20\u901a\u5e38\u4f1a\u4ea7\u751f\u9519\u8bef\u7ed3\u679c\u3002</p>\n<ol>\n<li><strong>\u5e73\u79fb\u63d2\u503c</strong></li>\n</ol>\n<p>\u6700\u7b80\u5355\u7684\u60c5\u51b5\uff0c\u76f4\u63a5\u7ebf\u6027\u63d2\u503c\uff1a\n$$\\mathbf{t}(\\alpha) = (1-\\alpha)\\mathbf{t}_0 + \\alpha\\mathbf{t}_1$$\n\u5bf9\u4e8e\u66f2\u7ebf\u8def\u5f84\uff0c\u53ef\u4f7f\u7528\uff1a</p>\n<ul>\n<li>Bezier \u66f2\u7ebf</li>\n<li>Catmull-Rom \u6837\u6761</li>\n<li>Hermite \u63d2\u503c</li>\n</ul>\n<ol start=\"2\">\n<li><strong>\u65cb\u8f6c\u63d2\u503c</strong></li>\n</ol>\n<p><strong>\u9519\u8bef\u65b9\u6cd5</strong>\uff1a\u76f4\u63a5\u63d2\u503c\u65cb\u8f6c\u77e9\u9635</p>\n<ul>\n<li>\u7ed3\u679c\u4e0d\u518d\u662f\u65cb\u8f6c\u77e9\u9635\uff08\u4e0d\u6b63\u4ea4\uff09</li>\n<li>\u4ea7\u751f\u7f29\u653e\u548c\u9519\u5207\u6548\u679c</li>\n</ul>\n<p><strong>\u6b63\u786e\u65b9\u6cd5</strong>\uff1a</p>\n<p>a) <strong>\u56db\u5143\u6570 SLERP</strong>\uff08\u7403\u9762\u7ebf\u6027\u63d2\u503c\uff09\uff1a\n$$q(t) = \\frac{\\sin((1-t)\\theta)}{\\sin\\theta}q_0 + \\frac{\\sin(t\\theta)}{\\sin\\theta}q_1$$\n\u5176\u4e2d $\\cos\\theta = q_0 \\cdot q_1$</p>\n<p>b) <strong>\u6307\u6570\u6620\u5c04\u63d2\u503c</strong>\uff1a\n$$\\mathbf{R}(t) = \\mathbf{R}_0 \\exp(t \\log(\\mathbf{R}_0^{-1}\\mathbf{R}_1))$$\nc) <strong>\u8f74\u89d2\u63d2\u503c</strong>\uff1a</p>\n<ul>\n<li>\u63d0\u53d6\u8f74\u548c\u89d2\u5ea6</li>\n<li>\u5206\u522b\u63d2\u503c\uff08\u6ce8\u610f\u8f74\u7684\u5f52\u4e00\u5316\uff09</li>\n</ul>\n<ol start=\"3\">\n<li><strong>\u7f29\u653e\u63d2\u503c</strong></li>\n</ol>\n<p>\u4e3a\u907f\u514d\u8d1f\u503c\u548c\u4fdd\u6301\u5e73\u6ed1\u6027\uff1a\n$$s(t) = s_0^{1-t} \\cdot s_1^t = \\exp((1-t)\\log s_0 + t\\log s_1)$$\n\u5bf9\u4e8e\u5404\u5411\u5f02\u6027\u7f29\u653e\uff0c\u5bf9\u6bcf\u4e2a\u5206\u91cf\u72ec\u7acb\u5904\u7406\u3002</p>\n<ol start=\"4\">\n<li><strong>\u5b8c\u6574\u53d8\u6362\u63d2\u503c</strong></li>\n</ol>\n<p>\u5bf9\u4e8e\u4e00\u822c\u7684 TRS \u53d8\u6362\uff1a</p>\n<ol>\n<li>\u5206\u89e3\u4e24\u4e2a\u53d8\u6362\u4e3a T\u3001R\u3001S \u5206\u91cf</li>\n<li>\u5206\u522b\u63d2\u503c\u5404\u5206\u91cf</li>\n<li>\u91cd\u65b0\u7ec4\u5408</li>\n</ol>\n<pre class=\"codehilite\"><code>M(t) = T(t) \u00d7 R(t) \u00d7 S(t)\n</code></pre>\n\n<ol start=\"5\">\n<li><strong>\u9ad8\u7ea7\u63d2\u503c\u6280\u672f</strong></li>\n</ol>\n<p><strong>\u53cc\u56db\u5143\u6570\uff08Dual Quaternion\uff09</strong>\uff1a</p>\n<ul>\n<li>\u540c\u65f6\u8868\u793a\u65cb\u8f6c\u548c\u5e73\u79fb</li>\n<li>\u5b9e\u73b0\u87ba\u65cb\u63d2\u503c</li>\n<li>\u907f\u514d\u201c\u7cd6\u679c\u7eb8\u6548\u5e94\u201d</li>\n</ul>\n<p><strong>\u77e9\u9635\u5bf9\u6570\u63d2\u503c</strong>\uff1a\n$$\\mathbf{M}(t) = \\exp(t \\log(\\mathbf{M}_0^{-1}\\mathbf{M}_1)) \\mathbf{M}_0$$\n\u9002\u7528\u4e8e\u4efb\u610f\u53ef\u9006\u53d8\u6362\u3002</p>\n<h2 id=\"22\">2.2 \u6a21\u578b\u3001\u89c6\u56fe\u3001\u6295\u5f71\u53d8\u6362</h2>\n<p>\u56fe\u5f62\u6e32\u67d3\u7ba1\u7ebf\u7684\u6838\u5fc3\u662f\u5c06\u4e09\u7ef4\u4e16\u754c\u6295\u5f71\u5230\u4e8c\u7ef4\u5c4f\u5e55\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u901a\u8fc7\u4e00\u7cfb\u5217\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u53d8\u6362\u5b8c\u6210\uff0c\u6bcf\u4e2a\u53d8\u6362\u90fd\u6709\u5176\u7279\u5b9a\u7684\u76ee\u7684\u548c\u6570\u5b66\u57fa\u7840\u3002</p>\n<h3 id=\"221\">2.2.1 \u5750\u6807\u7cfb\u7edf\u4e0e\u53d8\u6362\u7ba1\u7ebf</h3>\n<p>\u56fe\u5f62\u6e32\u67d3\u7ba1\u7ebf\u4e2d\u7684\u5750\u6807\u7cfb\u7edf\uff1a</p>\n<ol>\n<li>\n<p><strong>\u6a21\u578b\u7a7a\u95f4\uff08Model Space\uff09</strong>\n   - \u5b9a\u4e49\uff1a\u7269\u4f53\u7684\u5c40\u90e8\u5750\u6807\u7cfb\uff0c\u901a\u5e38\u4ee5\u7269\u4f53\u4e2d\u5fc3\u6216\u5173\u952e\u70b9\u4e3a\u539f\u70b9\n   - \u7528\u9014\uff1a\u5efa\u6a21\u3001\u52a8\u753b\u9aa8\u9abc\u7ed1\u5b9a\n   - \u7279\u70b9\uff1a\u6bcf\u4e2a\u7269\u4f53\u6709\u72ec\u7acb\u7684\u6a21\u578b\u7a7a\u95f4</p>\n</li>\n<li>\n<p><strong>\u4e16\u754c\u7a7a\u95f4\uff08World Space\uff09</strong>\n   - \u5b9a\u4e49\uff1a\u573a\u666f\u7684\u5168\u5c40\u5750\u6807\u7cfb\uff0c\u6240\u6709\u7269\u4f53\u7684\u7edf\u4e00\u53c2\u8003\u7cfb\n   - \u7528\u9014\uff1a\u7269\u4f53\u5b9a\u4f4d\u3001\u5149\u7167\u8ba1\u7b97\u3001\u7269\u7406\u6a21\u62df\n   - \u5750\u6807\u7cfb\u9009\u62e9\uff1a\u901a\u5e38 Y-up\uff08OpenGL\uff09\u6216 Z-up\uff08\u67d0\u4e9bCAD\u7cfb\u7edf\uff09</p>\n</li>\n<li>\n<p><strong>\u89c6\u56fe\u7a7a\u95f4\uff08View/Camera Space\uff09</strong>\n   - \u5b9a\u4e49\uff1a\u4ee5\u76f8\u673a\u4e3a\u539f\u70b9\uff0c-Z \u4e3a\u89c6\u7ebf\u65b9\u5411\u7684\u5750\u6807\u7cfb\n   - \u7528\u9014\uff1a\u89c6\u9525\u4f53\u88c1\u526a\u3001\u6df1\u5ea6\u6392\u5e8f\n   - \u7ea6\u5b9a\uff1a\u53f3\u624b\u7cfb\uff08OpenGL\uff09\u6216\u5de6\u624b\u7cfb\uff08DirectX\uff09</p>\n</li>\n<li>\n<p><strong>\u88c1\u526a\u7a7a\u95f4\uff08Clip Space\uff09</strong>\n   - \u5b9a\u4e49\uff1a\u6295\u5f71\u53d8\u6362\u540e\u7684\u9f50\u6b21\u5750\u6807\u7cfb\n   - \u8303\u56f4\uff1a\u672a\u8fdb\u884c\u900f\u89c6\u9664\u6cd5\uff0c$w$ \u5206\u91cf\u5305\u542b\u6df1\u5ea6\u4fe1\u606f\n   - \u7528\u9014\uff1a\u89c6\u9525\u4f53\u88c1\u526a\u3001\u900f\u89c6\u63d2\u503c</p>\n</li>\n<li>\n<p><strong>NDC\u7a7a\u95f4\uff08Normalized Device Coordinates\uff09</strong>\n   - \u5b9a\u4e49\uff1a\u900f\u89c6\u9664\u6cd5\u540e\u7684\u5f52\u4e00\u5316\u5750\u6807\n   - \u8303\u56f4\uff1a$[-1,1]^3$\uff08OpenGL\uff09\u6216 $[-1,1]^2 \\times [0,1]$\uff08DirectX\uff09\n   - \u7279\u70b9\uff1a\u4e0e\u8bbe\u5907\u65e0\u5173\u7684\u6807\u51c6\u5316\u5750\u6807</p>\n</li>\n<li>\n<p><strong>\u5c4f\u5e55\u7a7a\u95f4\uff08Screen Space\uff09</strong>\n   - \u5b9a\u4e49\uff1a\u6700\u7ec8\u7684\u50cf\u7d20\u5750\u6807\n   - \u8303\u56f4\uff1a$[0,W] \\times [0,H] \\times [0,1]$\n   - \u7528\u9014\uff1a\u5149\u6805\u5316\u3001\u7247\u5143\u7740\u8272</p>\n</li>\n</ol>\n<p><strong>\u5b8c\u6574\u7684\u53d8\u6362\u7ba1\u7ebf</strong>\uff1a\n$$\\text{\u9876\u70b9} \\xrightarrow{\\mathbf{M}} \\text{\u4e16\u754c} \\xrightarrow{\\mathbf{V}} \\text{\u89c6\u56fe} \\xrightarrow{\\mathbf{P}} \\text{\u88c1\u526a} \\xrightarrow{\\text{\u00f7w}} \\text{NDC} \\xrightarrow{\\mathbf{VP}} \\text{\u5c4f\u5e55}$$\n<strong>\u5750\u6807\u7cfb\u7684\u624b\u6027\uff08Handedness\uff09</strong>\uff1a</p>\n<ul>\n<li>\u53f3\u624b\u7cfb\uff1a\u62c7\u6307=X\uff0c\u98df\u6307=Y\uff0c\u4e2d\u6307=Z\uff08OpenGL\u9ed8\u8ba4\uff09</li>\n<li>\u5de6\u624b\u7cfb\uff1aZ\u8f74\u65b9\u5411\u76f8\u53cd\uff08DirectX\u9ed8\u8ba4\uff09</li>\n<li>\u8f6c\u6362\uff1a\u901a\u8fc7\u7f29\u653e $\\mathbf{S}(1,1,-1)$ \u5b9e\u73b0</li>\n</ul>\n<h3 id=\"222-model-transform\">2.2.2 \u6a21\u578b\u53d8\u6362\uff08Model Transform\uff09</h3>\n<p>\u6a21\u578b\u53d8\u6362\u5c06\u7269\u4f53\u4ece\u6a21\u578b\u7a7a\u95f4\u53d8\u6362\u5230\u4e16\u754c\u7a7a\u95f4\uff1a\n$$\\mathbf{M}_{\\text{model}} = \\mathbf{T}_{\\text{world}} \\cdot \\mathbf{R}_{\\text{world}} \\cdot \\mathbf{S}_{\\text{local}}$$\n<strong>\u6a21\u578b\u53d8\u6362\u7684\u7ec4\u6210</strong>\uff1a</p>\n<ol>\n<li><strong>\u5c40\u90e8\u7f29\u653e</strong>\uff1a\u8c03\u6574\u7269\u4f53\u5927\u5c0f</li>\n<li><strong>\u5c40\u90e8\u65cb\u8f6c</strong>\uff1a\u8bbe\u7f6e\u7269\u4f53\u671d\u5411</li>\n<li><strong>\u4e16\u754c\u5e73\u79fb</strong>\uff1a\u653e\u7f6e\u7269\u4f53\u4f4d\u7f6e</li>\n</ol>\n<p><strong>\u5c42\u6b21\u5316\u53d8\u6362\uff08Hierarchical Transforms\uff09</strong>\uff1a\n\u573a\u666f\u56fe\u4e2d\u7684\u7236\u5b50\u5173\u7cfb\uff1a\n$$\\mathbf{M}_{\\text{child}} = \\mathbf{M}_{\\text{parent}} \\cdot \\mathbf{M}_{\\text{local}}$$\n\u4f8b\u5982\uff0c\u673a\u68b0\u81c2\u7684\u53d8\u6362\u94fe\uff1a</p>\n<ul>\n<li>\u57fa\u5ea7 \u2192 \u4e0a\u81c2 \u2192 \u524d\u81c2 \u2192 \u624b\u638c \u2192 \u624b\u6307</li>\n</ul>\n<p><strong>\u5b9e\u4f8b\u5316\u6e32\u67d3\uff08Instanced Rendering\uff09</strong>\uff1a\n\u5bf9\u4e8e\u5927\u91cf\u76f8\u540c\u6a21\u578b\uff08\u5982\u68ee\u6797\u4e2d\u7684\u6811\u6728\uff09\uff1a</p>\n<pre class=\"codehilite\"><code>\u57fa\u7840\u6a21\u578b\u77e9\u9635 + \u6bcf\u5b9e\u4f8b\u53d8\u6362\u6570\u636e = \u6700\u7ec8\u53d8\u6362\n</code></pre>\n\n<p>\u4f18\u5316\u6280\u5de7\uff1a</p>\n<ul>\n<li>GPU\u5b9e\u4f8b\u5316\uff1a\u4f7f\u7528\u5b9e\u4f8b\u7f13\u51b2\u533a\u5b58\u50a8\u6bcf\u4e2a\u5b9e\u4f8b\u7684\u53d8\u6362</li>\n<li>LOD\uff08\u7ec6\u8282\u5c42\u6b21\uff09\uff1a\u6839\u636e\u8ddd\u79bb\u9009\u62e9\u4e0d\u540c\u7cbe\u5ea6\u7684\u6a21\u578b</li>\n<li>\u89c6\u9525\u4f53\u5254\u9664\uff1a\u53ea\u53d8\u6362\u53ef\u89c1\u7269\u4f53</li>\n</ul>\n<p><strong>\u9aa8\u9abc\u52a8\u753b\u7684\u6a21\u578b\u53d8\u6362</strong>\uff1a\n\u9876\u70b9\u6700\u7ec8\u4f4d\u7f6e\u7531\u591a\u4e2a\u9aa8\u9abc\u5f71\u54cd\uff1a\n$$\\mathbf{v}' = \\sum_{i} w_i \\mathbf{M}_{\\text{bone},i} \\mathbf{M}_{\\text{bind},i}^{-1} \\mathbf{v}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$w_i$\uff1a\u9aa8\u9abc\u6743\u91cd</li>\n<li>$\\mathbf{M}_{\\text{bone},i}$\uff1a\u9aa8\u9abc\u5f53\u524d\u53d8\u6362</li>\n<li>$\\mathbf{M}_{\\text{bind},i}^{-1}$\uff1a\u7ed1\u5b9a\u59ff\u6001\u7684\u9006\u53d8\u6362</li>\n</ul>\n<h3 id=\"223-view-transform\">2.2.3 \u89c6\u56fe\u53d8\u6362\uff08View Transform\uff09</h3>\n<p>\u89c6\u56fe\u53d8\u6362\u5c06\u4e16\u754c\u7a7a\u95f4\u53d8\u6362\u5230\u76f8\u673a\u7a7a\u95f4\uff0c\u662f\u5b9e\u73b0\u201c\u7b2c\u4e00\u4eba\u79f0\u89c6\u89d2\u201d\u7684\u5173\u952e\u3002\u5b83\u7684\u672c\u8d28\u662f\u5c06\u76f8\u673a\u653e\u7f6e\u5728\u539f\u70b9\uff0c\u671d\u5411-Z\u8f74\uff0c\u540c\u65f6\u5c06\u6574\u4e2a\u4e16\u754c\u505a\u76f8\u5e94\u53d8\u6362\u3002</p>\n<h4 id=\"look-at\">Look-At \u53d8\u6362</h4>\n<p>\u7ed9\u5b9a\u76f8\u673a\u53c2\u6570\uff1a</p>\n<ul>\n<li>\u4f4d\u7f6e\uff1a$\\mathbf{e}$ (eye position)</li>\n<li>\u89c2\u5bdf\u76ee\u6807\uff1a$\\mathbf{c}$ (center/target)</li>\n<li>\u4e0a\u65b9\u5411\uff1a$\\mathbf{t}$ (up direction)</li>\n</ul>\n<p><strong>\u6b65\u9aa41\uff1a\u6784\u5efa\u76f8\u673a\u5750\u6807\u7cfb</strong></p>\n<p>\u4f7f\u7528\u53f3\u624b\u5750\u6807\u7cfb\uff08OpenGL\u7ea6\u5b9a\uff09\uff1a\n$$\\begin{align}\n\\mathbf{g} &amp;= \\mathbf{c} - \\mathbf{e} \\quad \\text{(\u89c2\u5bdf\u65b9\u5411)} \\\n\\mathbf{w} &amp;= -\\frac{\\mathbf{g}}{||\\mathbf{g}||} \\quad \\text{(\u76f8\u673a-Z\u8f74\uff0c\u6307\u5411\u540e\u65b9)} \\\n\\mathbf{u} &amp;= \\frac{\\mathbf{t} \\times \\mathbf{w}}{||\\mathbf{t} \\times \\mathbf{w}||} \\quad \\text{(\u76f8\u673aX\u8f74\uff0c\u6307\u5411\u53f3\u65b9)} \\\n\\mathbf{v} &amp;= \\mathbf{w} \\times \\mathbf{u} \\quad \\text{(\u76f8\u673aY\u8f74\uff0c\u6307\u5411\u4e0a\u65b9)}\n\\end{align}$$\n\u6ce8\u610f\uff1a$\\mathbf{t}$ \u4e0d\u9700\u8981\u4e0e $\\mathbf{g}$ \u5782\u76f4\uff0c\u53ea\u9700\u4e0d\u5e73\u884c\u3002</p>\n<p><strong>\u6b65\u9aa42\uff1a\u6784\u9020\u89c6\u56fe\u77e9\u9635</strong></p>\n<p>\u89c6\u56fe\u53d8\u6362\u5206\u4e24\u6b65\uff1a</p>\n<ol>\n<li>\u5e73\u79fb\u76f8\u673a\u5230\u539f\u70b9\uff1a$\\mathbf{T}(-\\mathbf{e})$</li>\n<li>\u65cb\u8f6c\u5bf9\u9f50\u5750\u6807\u8f74\uff1a$\\mathbf{R}$</li>\n</ol>\n<p>\u65cb\u8f6c\u77e9\u9635\u5c06\u76f8\u673a\u5750\u6807\u8f74\u5bf9\u9f50\u5230\u4e16\u754c\u5750\u6807\u8f74\uff1a\n$$\\mathbf{R} = \\begin{bmatrix}\n\\mathbf{u}^T \\\n\\mathbf{v}^T \\\n\\mathbf{w}^T\n\\end{bmatrix}$$\n\u8fd9\u662f\u6b63\u4ea4\u77e9\u9635\uff0c\u56e0\u4e3a $(\\mathbf{u}, \\mathbf{v}, \\mathbf{w})$ \u662f\u6807\u51c6\u6b63\u4ea4\u57fa\u3002</p>\n<p>\u6700\u7ec8\u89c6\u56fe\u77e9\u9635\uff1a\n$$\\mathbf{V} = \\mathbf{R} \\cdot \\mathbf{T}(-\\mathbf{e}) = \\begin{bmatrix}\n\\mathbf{u}^T &amp; -\\mathbf{u} \\cdot \\mathbf{e} \\\n\\mathbf{v}^T &amp; -\\mathbf{v} \\cdot \\mathbf{e} \\\n\\mathbf{w}^T &amp; -\\mathbf{w} \\cdot \\mathbf{e} \\\n0 &amp; 1\n\\end{bmatrix}$$</p>\n<h4 id=\"_28\">\u76f8\u673a\u63a7\u5236\u6a21\u5f0f</h4>\n<ol>\n<li><strong>FPS\uff08\u7b2c\u4e00\u4eba\u79f0\u5c04\u51fb\uff09\u76f8\u673a</strong></li>\n</ol>\n<p>\u4f7f\u7528\u6b27\u62c9\u89d2\uff08yaw, pitch, roll\uff09\uff1a</p>\n<pre class=\"codehilite\"><code>yaw: \u6c34\u5e73\u65cb\u8f6c\uff08\u7ed5Y\u8f74\uff09\npitch: \u4fef\u4ef0\uff08\u7ed5X\u8f74\uff09\nroll: \u6eda\u8f6c\uff08\u7ed5Z\u8f74\uff0c\u901a\u5e38\u4e3a0\uff09\n</code></pre>\n\n<p>\u524d\u5411\u91cf\u8ba1\u7b97\uff1a\n$$\\mathbf{forward} = \\begin{bmatrix}\n\\sin(yaw) \\cdot \\cos(pitch) \\\n\\sin(pitch) \\\n\\cos(yaw) \\cdot \\cos(pitch)\n\\end{bmatrix}$$</p>\n<ol start=\"2\">\n<li><strong>\u8f68\u9053\u76f8\u673a\uff08Orbit Camera\uff09</strong></li>\n</ol>\n<p>\u7ed5\u76ee\u6807\u70b9\u65cb\u8f6c\uff0c\u4f7f\u7528\u7403\u5750\u6807\uff1a</p>\n<ul>\n<li>\u8ddd\u79bb\uff1a$r$</li>\n<li>\u65b9\u4f4d\u89d2\uff1a$\\theta$ (azimuth)</li>\n<li>\u4fef\u4ef0\u89d2\uff1a$\\phi$ (elevation)</li>\n</ul>\n<p>\u76f8\u673a\u4f4d\u7f6e\uff1a\n$$\\mathbf{e} = \\mathbf{c} + r\\begin{bmatrix}\n\\sin\\theta \\cos\\phi \\\n\\sin\\phi \\\n\\cos\\theta \\cos\\phi\n\\end{bmatrix}$$</p>\n<ol start=\"3\">\n<li><strong>Arcball \u76f8\u673a</strong></li>\n</ol>\n<p>\u5c06\u9f20\u6807\u79fb\u52a8\u6620\u5c04\u5230\u7403\u9762\u65cb\u8f6c\uff1a</p>\n<ol>\n<li>\u5c06\u5c4f\u5e55\u5750\u6807\u6620\u5c04\u5230\u865a\u62df\u7403\u9762</li>\n<li>\u8ba1\u7b97\u4e24\u70b9\u95f4\u7684\u65cb\u8f6c</li>\n<li>\u66f4\u65b0\u76f8\u673a\u65b9\u5411</li>\n</ol>\n<h4 id=\"_29\">\u89c6\u56fe\u77e9\u9635\u7684\u4f18\u5316</h4>\n<ol>\n<li><strong>\u907f\u514d\u91cd\u590d\u8ba1\u7b97</strong></li>\n</ol>\n<pre class=\"codehilite\"><code>// \u7f13\u5b58\u89c6\u56fe\u77e9\u9635\nif (camera.hasChanged()) {\n    viewMatrix = computeViewMatrix();\n    camera.clearChangeFlag();\n}\n</code></pre>\n\n<ol start=\"2\">\n<li><strong>\u589e\u91cf\u66f4\u65b0</strong></li>\n</ol>\n<p>\u5bf9\u4e8e\u5c0f\u5e45\u5ea6\u79fb\u52a8\uff1a\n$$\\mathbf{V}_{new} = \\mathbf{T}(\\Delta\\mathbf{p}) \\cdot \\mathbf{V}_{old}$$\n\u5bf9\u4e8e\u5c0f\u5e45\u5ea6\u65cb\u8f6c\uff1a\n$$\\mathbf{V}_{new} = \\mathbf{V}_{old} \\cdot \\mathbf{R}(\\Delta\\theta)$$</p>\n<ol start=\"3\">\n<li><strong>\u53cc\u7cbe\u5ea6\u8ba1\u7b97</strong></li>\n</ol>\n<p>\u5bf9\u4e8e\u5927\u573a\u666f\uff0c\u76f8\u673a\u8fdc\u79bb\u539f\u70b9\u65f6\uff1a</p>\n<pre class=\"codehilite\"><code>// \u4f7f\u7528\u53cc\u7cbe\u5ea6\u8ba1\u7b97\u89c6\u56fe\u77e9\u9635\n// \u5355\u7cbe\u5ea6\u4f20\u9012\u7ed9GPU\n</code></pre>\n\n<h4 id=\"_30\">\u7279\u6b8a\u60c5\u51b5\u5904\u7406</h4>\n<ol>\n<li><strong>\u5782\u76f4\u89c2\u5bdf\u95ee\u9898</strong></li>\n</ol>\n<p>\u5f53 $\\mathbf{g}$ \u4e0e $\\mathbf{t}$ \u5e73\u884c\u65f6\uff1a</p>\n<pre class=\"codehilite\"><code>if (|g \u00d7 t| &lt; epsilon) {\n    // \u4f7f\u7528\u5907\u7528up\u5411\u91cf\n    t = (|g.y| &lt; 0.9) ? vec3(0,1,0) : vec3(1,0,0);\n}\n</code></pre>\n\n<ol start=\"2\">\n<li><strong>\u65cb\u8f6c\u5947\u5f02\u6027</strong></li>\n</ol>\n<p>\u907f\u514d\u4e07\u5411\u9501\uff1a</p>\n<pre class=\"codehilite\"><code>pitch = clamp(pitch, -89\u00b0, 89\u00b0);\n</code></pre>\n\n<h4 id=\"_31\">\u591a\u89c6\u56fe\u6e32\u67d3</h4>\n<ol>\n<li><strong>\u7acb\u4f53\u89c6\u89c9\uff08Stereoscopic\uff09</strong></li>\n</ol>\n<p>\u5de6\u53f3\u773c\u5206\u79bb\uff1a\n$$\\mathbf{V}_{left} = \\mathbf{T}(-IPD/2, 0, 0) \\cdot \\mathbf{V}$$\n$$\\mathbf{V}_{right} = \\mathbf{T}(IPD/2, 0, 0) \\cdot \\mathbf{V}$$\n\u5176\u4e2d IPD \u662f\u77b3\u8ddd\uff08\u7ea6 6.5cm\uff09\u3002</p>\n<ol start=\"2\">\n<li><strong>\u7acb\u65b9\u4f53\u8d34\u56fe\uff08Cubemap\uff09\u6e32\u67d3</strong></li>\n</ol>\n<p>\u4ece\u4e2d\u5fc3\u70b9\u6e32\u67d36\u4e2a\u65b9\u5411\uff1a</p>\n<pre class=\"codehilite\"><code>+X: (1,0,0), up=(0,1,0)\n-X: (-1,0,0), up=(0,1,0)\n+Y: (0,1,0), up=(0,0,-1)\n-Y: (0,-1,0), up=(0,0,1)\n+Z: (0,0,1), up=(0,1,0)\n-Z: (0,0,-1), up=(0,1,0)\n</code></pre>\n\n<h4 id=\"_32\">\u6027\u80fd\u8003\u8651</h4>\n<ol>\n<li><strong>\u89c6\u9525\u4f53\u5254\u9664</strong>\uff1a\u5728\u89c6\u56fe\u7a7a\u95f4\u6267\u884c\u66f4\u9ad8\u6548</li>\n<li><strong>LOD \u9009\u62e9</strong>\uff1a\u57fa\u4e8e\u89c6\u56fe\u7a7a\u95f4\u8ddd\u79bb</li>\n<li><strong>\u906e\u6321\u5254\u9664</strong>\uff1a\u5229\u7528\u89c6\u56fe\u7a7a\u95f4\u7684Z\u5e8f</li>\n</ol>\n<h3 id=\"224-projection-transform\">2.2.4 \u6295\u5f71\u53d8\u6362\uff08Projection Transform\uff09</h3>\n<p>\u6295\u5f71\u53d8\u6362\u662f\u56fe\u5f62\u7ba1\u7ebf\u4e2d\u6700\u5173\u952e\u7684\u6b65\u9aa4\u4e4b\u4e00\uff0c\u5b83\u51b3\u5b9a\u4e86\u6211\u4eec\u5982\u4f55\u5c06\u4e09\u7ef4\u4e16\u754c\u201c\u62cd\u5e73\u201d\u5230\u4e8c\u7ef4\u5e73\u9762\u3002\u4e0d\u540c\u7684\u6295\u5f71\u65b9\u5f0f\u4ea7\u751f\u4e0d\u540c\u7684\u89c6\u89c9\u6548\u679c\u548c\u5e94\u7528\u573a\u666f\u3002</p>\n<h4 id=\"perspective-projection\">\u900f\u89c6\u6295\u5f71\uff08Perspective Projection\uff09</h4>\n<p>\u900f\u89c6\u6295\u5f71\u6a21\u62df\u4eba\u773c\u548c\u76f8\u673a\u7684\u6210\u50cf\u539f\u7406\uff0c\u4ea7\u751f\u201c\u8fd1\u5927\u8fdc\u5c0f\u201d\u7684\u6548\u679c\u3002</p>\n<p><strong>\u51e0\u4f55\u539f\u7406</strong></p>\n<p>\u57fa\u4e8e\u5c0f\u5b54\u6210\u50cf\u6a21\u578b\uff1a</p>\n<ul>\n<li>\u70b9 $(x, y, z)$ \u6295\u5f71\u5230\u8fd1\u5e73\u9762 $z = n$ \u4e0a</li>\n<li>\u4f7f\u7528\u76f8\u4f3c\u4e09\u89d2\u5f62\uff1a$x' = \\frac{nx}{z}$, $y' = \\frac{ny}{z}$</li>\n</ul>\n<p><strong>\u89c6\u9525\u4f53\u53c2\u6570</strong></p>\n<ol>\n<li>\n<p><strong>\u57fa\u4e8e\u89c6\u573a\u89d2\uff08\u5e38\u7528\uff09</strong>\uff1a\n   - \u5782\u76f4\u89c6\u573a\u89d2\uff1a$\\text{fov}_y$\n   - \u5bbd\u9ad8\u6bd4\uff1a$\\text{aspect} = \\frac{w}{h}$\n   - \u8fd1/\u8fdc\u5e73\u9762\uff1a$n, f$</p>\n</li>\n<li>\n<p><strong>\u57fa\u4e8e\u8fb9\u754c\uff08\u7075\u6d3b\uff09</strong>\uff1a\n   - \u8fd1\u5e73\u9762\u8fb9\u754c\uff1a$[l, r] \\times [b, t]$\n   - \u8fd1/\u8fdc\u5e73\u9762\uff1a$n, f$</p>\n</li>\n</ol>\n<p><strong>\u900f\u89c6\u6295\u5f71\u77e9\u9635\u63a8\u5bfc</strong></p>\n<p>\u6b65\u9aa41\uff1a\u5c06\u89c6\u9525\u4f53\u538b\u7f29\u6210\u7acb\u65b9\u4f53</p>\n<ul>\n<li>\u4fdd\u6301\u8fd1\u5e73\u9762\u4e0d\u53d8</li>\n<li>\u8fdc\u5e73\u9762\u4e2d\u5fc3\u4e0d\u53d8</li>\n<li>\u8fb9\u7f18\u6309\u900f\u89c6\u5173\u7cfb\u7f29\u653e</li>\n</ul>\n<p>\u6b65\u9aa42\uff1a\u5e94\u7528\u6b63\u4ea4\u6295\u5f71</p>\n<p>\u6700\u7ec8\u77e9\u9635\uff08OpenGL\u7ea6\u5b9a\uff09\uff1a\n$$\\mathbf{P}_{\\text{persp}} = \\begin{bmatrix}\n\\frac{1}{\\text{aspect} \\cdot \\tan(\\text{fov}_y/2)} &amp; 0 &amp; 0 &amp; 0 \\\n0 &amp; \\frac{1}{\\tan(\\text{fov}_y/2)} &amp; 0 &amp; 0 \\\n0 &amp; 0 &amp; \\frac{f+n}{n-f} &amp; \\frac{2fn}{n-f} \\\n0 &amp; 0 &amp; -1 &amp; 0\n\\end{bmatrix}$$\n<strong>\u900f\u89c6\u9664\u6cd5\u7684\u610f\u4e49</strong></p>\n<p>\u6295\u5f71\u540e\u7684\u9f50\u6b21\u5750\u6807\uff1a$(x', y', z', w')$</p>\n<ul>\n<li>$w' = -z$\uff08\u5b58\u50a8\u539f\u59cb\u6df1\u5ea6\u4fe1\u606f\uff09</li>\n<li>\u900f\u89c6\u9664\u6cd5\uff1a$(x'/w', y'/w', z'/w')$</li>\n<li>\u5b9e\u73b0\u201c\u9664\u4ee5z\u201d\u7684\u6548\u679c</li>\n</ul>\n<p><strong>\u975e\u7ebf\u6027\u6df1\u5ea6\u6620\u5c04</strong></p>\n<p>NDC \u6df1\u5ea6\u503c\uff1a\n$$z_{NDC} = \\frac{f+n}{f-n} + \\frac{2fn}{(f-n)z}$$\n\u7279\u70b9\uff1a</p>\n<ul>\n<li>\u8fd1\u5e73\u9762\u9644\u8fd1\u7cbe\u5ea6\u9ad8</li>\n<li>\u8fdc\u5e73\u9762\u9644\u8fd1\u7cbe\u5ea6\u4f4e</li>\n<li>\u53ef\u80fd\u5bfc\u81f4 Z-fighting</li>\n</ul>\n<h4 id=\"orthographic-projection\">\u6b63\u4ea4\u6295\u5f71\uff08Orthographic Projection\uff09</h4>\n<p>\u6b63\u4ea4\u6295\u5f71\u4fdd\u6301\u5e73\u884c\u7ebf\u5e73\u884c\uff0c\u6ca1\u6709\u900f\u89c6\u6548\u679c\u3002</p>\n<p><strong>\u51e0\u4f55\u610f\u4e49</strong></p>\n<ul>\n<li>\u5e73\u884c\u6295\u5f71\u7ebf</li>\n<li>\u4fdd\u6301\u5c3a\u5bf8\u6bd4\u4f8b</li>\n<li>\u65e0\u201c\u8fd1\u5927\u8fdc\u5c0f\u201d</li>\n</ul>\n<p><strong>\u6b63\u4ea4\u6295\u5f71\u77e9\u9635</strong></p>\n<p>\u7ed9\u5b9a\u89c6\u666f\u4f53 $[l,r] \\times [b,t] \\times [n,f]$\uff1a\n$$\\mathbf{P}_{\\text{ortho}} = \\begin{bmatrix}\n\\frac{2}{r-l} &amp; 0 &amp; 0 &amp; -\\frac{r+l}{r-l} \\\n0 &amp; \\frac{2}{t-b} &amp; 0 &amp; -\\frac{t+b}{t-b} \\\n0 &amp; 0 &amp; \\frac{2}{n-f} &amp; -\\frac{n+f}{n-f} \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n\u8fd9\u5b9e\u9645\u4e0a\u662f\uff1a</p>\n<ol>\n<li>\u5e73\u79fb\u5230\u539f\u70b9\uff1a$\\mathbf{T}(-\\frac{r+l}{2}, -\\frac{t+b}{2}, -\\frac{n+f}{2})$</li>\n<li>\u7f29\u653e\u5230 $[-1,1]^3$\uff1a$\\mathbf{S}(\\frac{2}{r-l}, \\frac{2}{t-b}, \\frac{2}{n-f})$</li>\n</ol>\n<h4 id=\"_33\">\u6df1\u5ea6\u7cbe\u5ea6\u4f18\u5316</h4>\n<ol>\n<li><strong>\u53cd\u5411 Z\uff08Reverse-Z\uff09</strong></li>\n</ol>\n<p>\u4f20\u7edf\u65b9\u6cd5\u7684\u95ee\u9898\uff1a</p>\n<ul>\n<li>\u6d6e\u70b9\u6570\u5728 0 \u9644\u8fd1\u7cbe\u5ea6\u6700\u9ad8</li>\n<li>\u4f46 NDC \u6df1\u5ea6\u5728\u8fd1\u5e73\u9762\u662f 0\uff08\u6d6a\u8d39\u7cbe\u5ea6\uff09</li>\n</ul>\n<p>\u89e3\u51b3\u65b9\u6848\uff1a</p>\n<pre class=\"codehilite\"><code>\u8fd1\u5e73\u9762\u6620\u5c04\u5230 1\n\u8fdc\u5e73\u9762\u6620\u5c04\u5230 0\n\u6df1\u5ea6\u6d4b\u8bd5\u6539\u4e3a GREATER\n</code></pre>\n\n<p>\u4fee\u6539\u540e\u7684\u6295\u5f71\u77e9\u9635\uff1a\n$$P_{33} = \\frac{n}{n-f}, \\quad P_{34} = \\frac{fn}{n-f}$$</p>\n<ol start=\"2\">\n<li><strong>\u5bf9\u6570\u6df1\u5ea6\uff08Logarithmic Depth\uff09</strong></li>\n</ol>\n<p>\u5728\u7247\u5143\u7740\u8272\u5668\u4e2d\uff1a</p>\n<pre class=\"codehilite\"><code class=\"language-glsl\">gl_FragDepth = log(C * w + 1) / log(C * f + 1);\n</code></pre>\n\n<p>\u5176\u4e2d C \u662f\u8c03\u8282\u53c2\u6570\uff08\u5982 1.0\uff09\u3002</p>\n<ol start=\"3\">\n<li><strong>\u7ea7\u8054\u9634\u5f71\u8d34\u56fe\uff08CSM\uff09</strong></li>\n</ol>\n<p>\u5c06\u89c6\u9525\u4f53\u5206\u5272\u6210\u591a\u4e2a\u533a\u95f4\uff1a</p>\n<pre class=\"codehilite\"><code>\u8fd1\u666f\uff1a[0.1, 10] - \u9ad8\u7cbe\u5ea6\n\u4e2d\u666f\uff1a[10, 100] - \u4e2d\u7cbe\u5ea6\n\u8fdc\u666f\uff1a[100, 1000] - \u4f4e\u7cbe\u5ea6\n</code></pre>\n\n<h4 id=\"_34\">\u7279\u6b8a\u6295\u5f71\u6280\u672f</h4>\n<ol>\n<li><strong>\u659c\u6295\u5f71\uff08Oblique Projection\uff09</strong></li>\n</ol>\n<p>\u7528\u4e8e\u6c34\u9762\u53cd\u5c04\u7b49\u6548\u679c\uff1a\n$$\\mathbf{P}_{oblique} = \\mathbf{P} \\cdot \\begin{bmatrix}\n1 &amp; 0 &amp; 0 &amp; 0 \\\n0 &amp; 1 &amp; 0 &amp; 0 \\\n0 &amp; 0 &amp; 1 &amp; 1 \\\n0 &amp; 0 &amp; 0 &amp; 0\n\\end{bmatrix} \\cdot \\begin{bmatrix}\n1 &amp; 0 &amp; a &amp; 0 \\\n0 &amp; 1 &amp; b &amp; 0 \\\n0 &amp; 0 &amp; 1 &amp; 0 \\\n0 &amp; 0 &amp; c &amp; 1\n\\end{bmatrix}$$</p>\n<ol start=\"2\">\n<li><strong>\u975e\u5bf9\u79f0\u6295\u5f71</strong></li>\n</ol>\n<p>VR/AR \u4e2d\u7684\u5e94\u7528\uff1a</p>\n<pre class=\"codehilite\"><code>left = -0.5 * IPD - 0.5 * w\nright = 0.5 * IPD + 0.5 * w\n</code></pre>\n\n<ol start=\"3\">\n<li><strong>\u65e0\u9650\u8fdc\u5e73\u9762</strong></li>\n</ol>\n<p>\u8bbe\u7f6e $f \\to \\infty$\uff1a\n$$P_{33} = -1, \\quad P_{34} = -2n$$\n\u9002\u7528\u4e8e\u5f00\u653e\u4e16\u754c\u573a\u666f\u3002</p>\n<h4 id=\"_35\">\u6295\u5f71\u77e9\u9635\u7684\u9009\u62e9</h4>\n<p><strong>\u900f\u89c6\u6295\u5f71\u9002\u7528\u4e8e</strong>\uff1a</p>\n<ul>\n<li>\u6e38\u620f\u548c\u865a\u62df\u73b0\u5b9e</li>\n<li>\u7535\u5f71\u548c\u52a8\u753b</li>\n<li>\u4efb\u4f55\u9700\u8981\u771f\u5b9e\u611f\u7684\u573a\u666f</li>\n</ul>\n<p><strong>\u6b63\u4ea4\u6295\u5f71\u9002\u7528\u4e8e</strong>\uff1a</p>\n<ul>\n<li>CAD \u548c\u5de5\u7a0b\u5236\u56fe</li>\n<li>\u5efa\u7b51\u8bbe\u8ba1</li>\n<li>2D \u6e38\u620f\u548c UI</li>\n<li>\u9634\u5f71\u8d34\u56fe\u751f\u6210</li>\n</ul>\n<h4 id=\"_36\">\u6295\u5f71\u540e\u7684\u5904\u7406</h4>\n<ol>\n<li><strong>\u9f50\u6b21\u88c1\u526a</strong></li>\n</ol>\n<p>\u5728\u88c1\u526a\u7a7a\u95f4\u6267\u884c\uff1a</p>\n<pre class=\"codehilite\"><code>-w \u2264 x \u2264 w\n-w \u2264 y \u2264 w\n0 \u2264 z \u2264 w (D3D)\n-w \u2264 z \u2264 w (OpenGL)\n</code></pre>\n\n<ol start=\"2\">\n<li><strong>\u900f\u89c6\u6b63\u786e\u63d2\u503c</strong></li>\n</ol>\n<p>\u5c4f\u5e55\u7a7a\u95f4\u5c5e\u6027\u63d2\u503c\uff1a\n$$attr = \\frac{\\frac{attr_0}{w_0}\\lambda_0 + \\frac{attr_1}{w_1}\\lambda_1 + \\frac{attr_2}{w_2}\\lambda_2}{\\frac{1}{w_0}\\lambda_0 + \\frac{1}{w_1}\\lambda_1 + \\frac{1}{w_2}\\lambda_2}$$\n\u5176\u4e2d $\\lambda_i$ \u662f\u91cd\u5fc3\u5750\u6807\u3002</p>\n<h3 id=\"225-viewport-transform\">2.2.5 \u89c6\u53e3\u53d8\u6362\uff08Viewport Transform\uff09</h3>\n<p>\u89c6\u53e3\u53d8\u6362\u662f\u6e32\u67d3\u7ba1\u7ebf\u7684\u6700\u540e\u4e00\u4e2a\u51e0\u4f55\u53d8\u6362\uff0c\u5b83\u5c06\u6807\u51c6\u5316\u8bbe\u5907\u5750\u6807\uff08NDC\uff09\u6620\u5c04\u5230\u5c4f\u5e55\u50cf\u7d20\u5750\u6807\u3002</p>\n<h4 id=\"_37\">\u57fa\u672c\u89c6\u53e3\u53d8\u6362</h4>\n<p>\u5c06 NDC \u5750\u6807 $[-1,1]^3$ \u6620\u5c04\u5230\u5c4f\u5e55\u5750\u6807 $[0,w] \\times [0,h] \\times [0,1]$\uff1a\n$$\\mathbf{M}_{\\text{viewport}} = \\begin{bmatrix}\n\\frac{w}{2} &amp; 0 &amp; 0 &amp; \\frac{w}{2} \\\n0 &amp; \\frac{h}{2} &amp; 0 &amp; \\frac{h}{2} \\\n0 &amp; 0 &amp; \\frac{1}{2} &amp; \\frac{1}{2} \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n\u6ce8\u610f\uff1a</p>\n<ul>\n<li>OpenGL \u5750\u6807\u539f\u70b9\u5728\u5de6\u4e0b\u89d2</li>\n<li>DirectX \u5750\u6807\u539f\u70b9\u5728\u5de6\u4e0a\u89d2\uff08\u9700\u8981\u7ffb\u8f6c Y \u8f74\uff09</li>\n<li>\u6df1\u5ea6\u8303\u56f4\uff1aOpenGL $[-1,1] \\to [0,1]$\uff0cDirectX $[0,1] \\to [0,1]$</li>\n</ul>\n<h4 id=\"_38\">\u81ea\u5b9a\u4e49\u89c6\u53e3</h4>\n<p>\u5bf9\u4e8e\u90e8\u5206\u5c4f\u5e55\u6e32\u67d3\uff08\u5982\u5206\u5c4f\u3001\u5c0f\u5730\u56fe\uff09\uff1a\n$$\\mathbf{M}_{\\text{custom}} = \\begin{bmatrix}\n\\frac{w_{vp}}{2} &amp; 0 &amp; 0 &amp; x_{vp} + \\frac{w_{vp}}{2} \\\n0 &amp; \\frac{h_{vp}}{2} &amp; 0 &amp; y_{vp} + \\frac{h_{vp}}{2} \\\n0 &amp; 0 &amp; \\frac{f_{vp}-n_{vp}}{2} &amp; \\frac{f_{vp}+n_{vp}}{2} \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n\u5176\u4e2d\uff1a</p>\n<ul>\n<li>$(x_{vp}, y_{vp})$\uff1a\u89c6\u53e3\u5de6\u4e0b\u89d2\u4f4d\u7f6e</li>\n<li>$(w_{vp}, h_{vp})$\uff1a\u89c6\u53e3\u5c3a\u5bf8</li>\n<li>$[n_{vp}, f_{vp}]$\uff1a\u6df1\u5ea6\u8303\u56f4\uff08\u901a\u5e38 $[0,1]$\uff09</li>\n</ul>\n<h4 id=\"_39\">\u50cf\u7d20\u4e2d\u5fc3\u4e0e\u91c7\u6837</h4>\n<p><strong>\u50cf\u7d20\u4e2d\u5fc3\u504f\u79fb</strong></p>\n<p>Direct3D \u7ea6\u5b9a\uff1a\u50cf\u7d20\u4e2d\u5fc3\u5728 $(0.5, 0.5)$</p>\n<pre class=\"codehilite\"><code>pixel_center = floor(ndc_coord * viewport_size) + 0.5\n</code></pre>\n\n<p>OpenGL \u7ea6\u5b9a\uff1a\u53ef\u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e5f\u662f $(0.5, 0.5)$</p>\n<p><strong>\u591a\u91cd\u91c7\u6837\u8003\u8651</strong></p>\n<p>MSAA \u65f6\u7684\u5b50\u50cf\u7d20\u4f4d\u7f6e\uff1a</p>\n<pre class=\"codehilite\"><code>2x2 pattern:\n(0.25, 0.25), (0.75, 0.25)\n(0.25, 0.75), (0.75, 0.75)\n</code></pre>\n\n<h4 id=\"dpi\">\u9ad8 DPI \u663e\u793a\u5668\u5904\u7406</h4>\n<p><strong>\u8bbe\u5907\u50cf\u7d20\u6bd4\uff08Device Pixel Ratio\uff09</strong></p>\n<pre class=\"codehilite\"><code>\u903b\u8f91\u50cf\u7d20 vs \u7269\u7406\u50cf\u7d20\nRetina: 2x\u6216 3x\n</code></pre>\n\n<p>\u9700\u8981\u8c03\u6574\u89c6\u53e3\u53d8\u6362\uff1a</p>\n<pre class=\"codehilite\"><code>w_physical = w_logical * devicePixelRatio\nh_physical = h_logical * devicePixelRatio\n</code></pre>\n\n<h4 id=\"_40\">\u7279\u6b8a\u89c6\u53e3\u6280\u672f</h4>\n<ol>\n<li><strong>\u88c1\u526a\u89c6\u53e3\uff08Scissor Test\uff09</strong></li>\n</ol>\n<p>\u9650\u5236\u6e32\u67d3\u533a\u57df\uff1a</p>\n<pre class=\"codehilite\"><code>glScissor(x, y, width, height);\nglEnable(GL_SCISSOR_TEST);\n</code></pre>\n\n<p>\u5e94\u7528\uff1a\u5206\u5c4f\u6e32\u67d3\u3001UI \u88c1\u526a\u3001\u6027\u80fd\u4f18\u5316</p>\n<ol start=\"2\">\n<li><strong>\u5206\u5c4f\u6e32\u67d3</strong></li>\n</ol>\n<p>\u5de6\u53f3\u5206\u5c4f\uff1a</p>\n<pre class=\"codehilite\"><code>// \u5de6\u534a\u5c4f\nglViewport(0, 0, width/2, height);\nrenderPlayer1();\n\n// \u53f3\u534a\u5c4f\nglViewport(width/2, 0, width/2, height);\nrenderPlayer2();\n</code></pre>\n\n<ol start=\"3\">\n<li><strong>\u753b\u4e2d\u753b\uff08Picture-in-Picture\uff09</strong></li>\n</ol>\n<p>\u4e3b\u89c6\u56fe + \u5c0f\u5730\u56fe\uff1a</p>\n<pre class=\"codehilite\"><code>// \u4e3b\u89c6\u56fe\nglViewport(0, 0, width, height);\nrenderMainView();\n\n// \u5c0f\u5730\u56fe\nglViewport(width-200, height-150, 200, 150);\nrenderMinimap();\n</code></pre>\n\n<h4 id=\"_41\">\u5206\u8fa8\u7387\u72ec\u7acb\u6e32\u67d3</h4>\n<p><strong>\u52a8\u6001\u5206\u8fa8\u7387\u8c03\u6574</strong></p>\n<p>\u6839\u636e\u6027\u80fd\u8c03\u6574\u6e32\u67d3\u5206\u8fa8\u7387\uff1a</p>\n<pre class=\"codehilite\"><code>render_width = screen_width * resolution_scale;\nrender_height = screen_height * resolution_scale;\n\n// \u6e32\u67d3\u5230\u8f83\u5c0f\u7684 framebuffer\n// \u7136\u540e\u4e0a\u91c7\u6837\u5230\u5c4f\u5e55\n</code></pre>\n\n<p><strong>\u8d85\u91c7\u6837\u4e0e\u6b20\u91c7\u6837</strong></p>\n<ul>\n<li>\u8d85\u91c7\u6837\uff08SSAA\uff09\uff1a<code>resolution_scale &gt; 1.0</code></li>\n<li>\u6b20\u91c7\u6837\uff1a<code>resolution_scale &lt; 1.0</code>\uff08\u63d0\u9ad8\u6027\u80fd\uff09</li>\n</ul>\n<h4 id=\"_42\">\u5750\u6807\u7cfb\u7edf\u603b\u7ed3</h4>\n<p>\u5b8c\u6574\u7684\u53d8\u6362\u94fe\uff1a</p>\n<pre class=\"codehilite\"><code>\u6a21\u578b\u7a7a\u95f4 \u2192 \u4e16\u754c\u7a7a\u95f4 \u2192 \u89c6\u56fe\u7a7a\u95f4 \u2192 \u88c1\u526a\u7a7a\u95f4 \u2192 NDC \u2192 \u5c4f\u5e55\u7a7a\u95f4\n   (M)        (V)        (P)      (\u00f7w)     (VP)\n</code></pre>\n\n<p><strong>\u9006\u53d8\u6362</strong>\uff08\u5c4f\u5e55\u5230\u4e16\u754c\uff09\uff1a</p>\n<ol>\n<li>\u5c4f\u5e55\u5230 NDC\uff1a$\\mathbf{M}_{\\text{viewport}}^{-1}$</li>\n<li>NDC \u5230\u88c1\u526a\u7a7a\u95f4\uff1a\u4e58\u4ee5 $w$</li>\n<li>\u88c1\u526a\u5230\u89c6\u56fe\uff1a$\\mathbf{P}^{-1}$</li>\n<li>\u89c6\u56fe\u5230\u4e16\u754c\uff1a$\\mathbf{V}^{-1}$</li>\n<li>\u4e16\u754c\u5230\u6a21\u578b\uff1a$\\mathbf{M}^{-1}$</li>\n</ol>\n<p>\u5e38\u7528\u4e8e\uff1a</p>\n<ul>\n<li>\u9f20\u6807\u62fe\u53d6\uff08Mouse Picking\uff09</li>\n<li>\u5c04\u7ebf\u6295\u5c04</li>\n<li>\u5c4f\u5e55\u7a7a\u95f4\u7279\u6548</li>\n</ul>\n<h2 id=\"23\">2.3 \u53d8\u6362\u77e9\u9635\u7684\u7ec4\u5408\u4e0e\u4f18\u5316</h2>\n<h3 id=\"231\">2.3.1 \u77e9\u9635\u7ec4\u5408\u7684\u6570\u5b66\u6027\u8d28</h3>\n<p><strong>\u7ed3\u5408\u5f8b</strong>\uff1a$(AB)C = A(BC)$</p>\n<ul>\n<li>\u5141\u8bb8\u9884\u8ba1\u7b97\u53d8\u6362\u5e8f\u5217</li>\n<li>\u51cf\u5c11\u5b9e\u65f6\u8ba1\u7b97\u91cf</li>\n</ul>\n<p><strong>\u4e0d\u6ee1\u8db3\u4ea4\u6362\u5f8b</strong>\uff1a$AB \\neq BA$\uff08\u4e00\u822c\u60c5\u51b5\uff09</p>\n<ul>\n<li>\u53d8\u6362\u987a\u5e8f\u81f3\u5173\u91cd\u8981</li>\n<li>\u5e38\u89c1\u9519\u8bef\uff1a\u5148\u65cb\u8f6c\u540e\u5e73\u79fb vs \u5148\u5e73\u79fb\u540e\u65cb\u8f6c</li>\n</ul>\n<p><strong>\u9006\u53d8\u6362</strong>\uff1a</p>\n<ul>\n<li>\u5e73\u79fb\u7684\u9006\uff1a$\\mathbf{T}^{-1}(t_x, t_y, t_z) = \\mathbf{T}(-t_x, -t_y, -t_z)$</li>\n<li>\u65cb\u8f6c\u7684\u9006\uff1a$\\mathbf{R}^{-1} = \\mathbf{R}^T$\uff08\u6b63\u4ea4\u77e9\u9635\u6027\u8d28\uff09</li>\n<li>\u7f29\u653e\u7684\u9006\uff1a$\\mathbf{S}^{-1}(s_x, s_y, s_z) = \\mathbf{S}(1/s_x, 1/s_y, 1/s_z)$</li>\n<li>\u7ec4\u5408\u7684\u9006\uff1a$(AB)^{-1} = B^{-1}A^{-1}$</li>\n</ul>\n<h3 id=\"232\">2.3.2 \u53d8\u6362\u77e9\u9635\u7684\u4f18\u5316\u6280\u5de7</h3>\n<ol>\n<li><strong>\u77e9\u9635\u9884\u8ba1\u7b97</strong></li>\n</ol>\n<pre class=\"codehilite\"><code>MVP = Projection \u00d7 View \u00d7 Model  // \u9884\u8ba1\u7b97\uff0c\u6bcf\u4e2a\u7269\u4f53\u53ea\u7b97\u4e00\u6b21\n</code></pre>\n\n<ol start=\"2\">\n<li>\n<p><strong>\u77e9\u9635\u5206\u89e3\u5b58\u50a8</strong>\n- \u5b58\u50a8\u4f4d\u7f6e\u3001\u65cb\u8f6c\uff08\u56db\u5143\u6570\uff09\u3001\u7f29\u653e\u5206\u91cf\n- \u4ec5\u5728\u9700\u8981\u65f6\u6784\u5efa\u5b8c\u6574\u77e9\u9635\n- \u8282\u7701\u5185\u5b58\uff0c\u63d0\u9ad8\u7f13\u5b58\u6548\u7387</p>\n</li>\n<li>\n<p><strong>\u7279\u6b8a\u77e9\u9635\u7684\u5feb\u901f\u8ba1\u7b97</strong>\n- \u5229\u7528\u6b63\u4ea4\u77e9\u9635\u6027\u8d28\uff1a$\\mathbf{R}^{-1} = \\mathbf{R}^T$\n- \u5bf9\u89d2\u77e9\u9635\u4e58\u6cd5\u4f18\u5316\n- \u7a00\u758f\u77e9\u9635\u8868\u793a</p>\n</li>\n<li>\n<p><strong>SIMD\u4f18\u5316</strong>\n- \u4f7f\u7528 SSE/AVX \u6307\u4ee4\u96c6\n- \u77e9\u9635-\u5411\u91cf\u4e58\u6cd5\u7684\u5e76\u884c\u5316\n- \u6279\u91cf\u53d8\u6362\u5904\u7406</p>\n</li>\n</ol>\n<h3 id=\"233\">2.3.3 \u6cd5\u5411\u91cf\u53d8\u6362</h3>\n<p>\u6cd5\u5411\u91cf\u7684\u53d8\u6362\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\u6a21\u578b\u77e9\u9635\uff0c\u9700\u8981\u4f7f\u7528\u9006\u8f6c\u7f6e\u77e9\u9635\uff1a</p>\n<p>\u8bbe\u6a21\u578b\u53d8\u6362\u77e9\u9635\u4e3a $\\mathbf{M}$\uff0c\u6cd5\u5411\u91cf\u53d8\u6362\u77e9\u9635\u4e3a\uff1a\n$$\\mathbf{G} = (\\mathbf{M}^{-1})^T$$\n\u63a8\u5bfc\uff1a\u4fdd\u6301\u6cd5\u5411\u91cf\u4e0e\u5207\u5411\u91cf\u5782\u76f4</p>\n<ul>\n<li>\u539f\u59cb\uff1a$\\mathbf{n} \\cdot \\mathbf{t} = 0$</li>\n<li>\u53d8\u6362\u540e\uff1a$\\mathbf{n}' \\cdot \\mathbf{t}' = 0$</li>\n<li>\u5176\u4e2d $\\mathbf{t}' = \\mathbf{M}\\mathbf{t}$</li>\n</ul>\n<p>\u5bf9\u4e8e\u4ec5\u5305\u542b\u65cb\u8f6c\u7684\u53d8\u6362\uff0c$\\mathbf{G} = \\mathbf{M}$\uff08\u56e0\u4e3a $\\mathbf{R}^{-1} = \\mathbf{R}^T$\uff09</p>\n<h3 id=\"234\">2.3.4 \u7cbe\u5ea6\u95ee\u9898\u4e0e\u6570\u503c\u7a33\u5b9a\u6027</h3>\n<p><strong>\u6d6e\u70b9\u7cbe\u5ea6\u635f\u5931</strong></p>\n<ul>\n<li>\u8fde\u7eed\u53d8\u6362\u7d2f\u79ef\u8bef\u5dee</li>\n<li>\u8fdc\u79bb\u539f\u70b9\u7684\u5927\u5750\u6807\u503c</li>\n<li>\u89e3\u51b3\uff1a\u5b9a\u671f\u6b63\u4ea4\u5316\u3001\u53cc\u7cbe\u5ea6\u5173\u952e\u8ba1\u7b97</li>\n</ul>\n<p><strong>\u6df1\u5ea6\u7cbe\u5ea6\uff08Z-fighting\uff09</strong></p>\n<ul>\n<li>\u8fd1\u8fdc\u5e73\u9762\u6bd4\u4f8b\u8fc7\u5927</li>\n<li>\u89e3\u51b3\uff1a\u5bf9\u6570\u6df1\u5ea6\u7f13\u51b2\u3001\u53cd\u5411Z</li>\n</ul>\n<p><strong>\u77e9\u9635\u6b63\u4ea4\u5316</strong>\n\u4f7f\u7528 Gram-Schmidt \u8fc7\u7a0b\u4fdd\u6301\u65cb\u8f6c\u77e9\u9635\u7684\u6b63\u4ea4\u6027\uff1a</p>\n<pre class=\"codehilite\"><code>\u91cd\u65b0\u6b63\u4ea4\u5316\u65cb\u8f6c\u77e9\u9635\u7684\u524d\u4e09\u5217\n</code></pre>\n\n<h3 id=\"235\">2.3.5 \u53d8\u6362\u7f13\u5b58\u4e0e\u5c42\u6b21\u7ed3\u6784</h3>\n<p><strong>\u573a\u666f\u56fe\u4f18\u5316</strong></p>\n<ul>\n<li>\u7236\u5b50\u5173\u7cfb\u7684\u53d8\u6362\u7ee7\u627f</li>\n<li>\u810f\u6807\u8bb0\uff08Dirty Flag\uff09\u673a\u5236</li>\n<li>\u60f0\u6027\u6c42\u503c\uff08Lazy Evaluation\uff09</li>\n</ul>\n<p><strong>\u5b9e\u4f8b\u5316\u6e32\u67d3</strong></p>\n<ul>\n<li>\u57fa\u7840\u6a21\u578b\u77e9\u9635 + \u5b9e\u4f8b\u504f\u79fb</li>\n<li>GPU\u5b9e\u4f8b\u5316\u7f13\u51b2\u533a</li>\n<li>\u51cf\u5c11 Draw Call</li>\n</ul>\n<h2 id=\"_43\">\u672c\u7ae0\u5c0f\u7ed3</h2>\n<h3 id=\"_44\">\u6838\u5fc3\u6982\u5ff5</h3>\n<ol>\n<li><strong>\u9f50\u6b21\u5750\u6807</strong>\uff1a\u7edf\u4e00\u70b9\u548c\u5411\u91cf\u8868\u793a\uff0c\u4f7f\u4eff\u5c04\u53d8\u6362\u53ef\u7528\u77e9\u9635\u4e58\u6cd5\u8868\u793a</li>\n<li><strong>\u57fa\u672c\u53d8\u6362</strong>\uff1a\u5e73\u79fb\u3001\u65cb\u8f6c\u3001\u7f29\u653e\u3001\u9519\u5207</li>\n<li><strong>\u53d8\u6362\u7ba1\u7ebf</strong>\uff1a\u6a21\u578b\u2192\u4e16\u754c\u2192\u89c6\u56fe\u2192\u88c1\u526a\u2192NDC\u2192\u5c4f\u5e55</li>\n<li><strong>\u6295\u5f71\u7c7b\u578b</strong>\uff1a\u900f\u89c6\u6295\u5f71\uff08\u771f\u5b9e\u611f\uff09vs \u6b63\u4ea4\u6295\u5f71\uff08\u5de5\u7a0b\u56fe\uff09</li>\n<li><strong>\u4f18\u5316\u6280\u5de7</strong>\uff1a\u9884\u8ba1\u7b97\u3001SIMD\u3001\u5b9e\u4f8b\u5316</li>\n</ol>\n<h3 id=\"_45\">\u5173\u952e\u516c\u5f0f</h3>\n<ul>\n<li>Rodrigues\u65cb\u8f6c\u516c\u5f0f\uff1a$\\mathbf{R}(\\mathbf{n}, \\theta) = \\cos\\theta \\mathbf{I} + (1-\\cos\\theta)\\mathbf{n}\\mathbf{n}^T + \\sin\\theta \\mathbf{N}$</li>\n<li>\u89c6\u56fe\u77e9\u9635\uff1a\u57fa\u4e8e\u76f8\u673a\u4f4d\u7f6e\u548c\u671d\u5411\u6784\u5efa</li>\n<li>\u900f\u89c6\u6295\u5f71\uff1a$w' = -z$\uff0c\u4ea7\u751f\u900f\u89c6\u9664\u6cd5</li>\n<li>\u6cd5\u5411\u91cf\u53d8\u6362\uff1a$\\mathbf{G} = (\\mathbf{M}^{-1})^T$</li>\n</ul>\n<h3 id=\"_46\">\u6027\u80fd\u8003\u8651</h3>\n<ul>\n<li>\u77e9\u9635\u4e58\u6cd5\u987a\u5e8f\u5f71\u54cd\u8ba1\u7b97\u91cf</li>\n<li>\u9884\u8ba1\u7b97\u9759\u6001\u53d8\u6362</li>\n<li>\u5229\u7528\u7279\u6b8a\u77e9\u9635\u6027\u8d28\uff08\u6b63\u4ea4\u3001\u5bf9\u79f0\u7b49\uff09</li>\n<li>\u6279\u91cf\u5904\u7406\u548cGPU\u5e76\u884c\u5316</li>\n</ul>\n<h2 id=\"_47\">\u7ec3\u4e60\u9898</h2>\n<h3 id=\"_48\">\u57fa\u7840\u9898</h3>\n<p><strong>\u7ec3\u4e60 2.1</strong> \u8bc1\u660e\u4e8c\u7ef4\u65cb\u8f6c\u77e9\u9635 $\\mathbf{R}(\\theta)$ \u662f\u6b63\u4ea4\u77e9\u9635\uff0c\u5373 $\\mathbf{R}^T\\mathbf{R} = \\mathbf{I}$\u3002</p>\n<p><em>Hint</em>: \u8ba1\u7b97 $\\mathbf{R}^T(\\theta)\\mathbf{R}(\\theta)$ \u5e76\u5229\u7528\u4e09\u89d2\u6052\u7b49\u5f0f\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>$$\\mathbf{R}^T(\\theta)\\mathbf{R}(\\theta) = \\begin{bmatrix}\n\\cos\\theta &amp; \\sin\\theta \\\n-\\sin\\theta &amp; \\cos\\theta\n\\end{bmatrix}\n\\begin{bmatrix}\n\\cos\\theta &amp; -\\sin\\theta \\\n\\sin\\theta &amp; \\cos\\theta\n\\end{bmatrix}$$</p>\n<p>$$= \\begin{bmatrix}\n\\cos^2\\theta + \\sin^2\\theta &amp; 0 \\\n0 &amp; \\cos^2\\theta + \\sin^2\\theta\n\\end{bmatrix} = \\begin{bmatrix}\n1 &amp; 0 \\\n0 &amp; 1\n\\end{bmatrix} = \\mathbf{I}$$</p>\n</details>\n<p><strong>\u7ec3\u4e60 2.2</strong> \u7ed9\u5b9a\u70b9 $P = (2, 3, 1)$\uff0c\u5148\u7ed5\u539f\u70b9\u65cb\u8f6c $45\u00b0$\uff0c\u518d\u5e73\u79fb $(1, -1, 0)$\u3002\u5199\u51fa\u7ec4\u5408\u53d8\u6362\u77e9\u9635\u5e76\u8ba1\u7b97\u53d8\u6362\u540e\u7684\u70b9\u5750\u6807\u3002</p>\n<p><em>Hint</em>: \u6ce8\u610f\u53d8\u6362\u987a\u5e8f\uff0c\u5148\u65cb\u8f6c\u540e\u5e73\u79fb\u610f\u5473\u7740 $\\mathbf{T} \\cdot \\mathbf{R}$\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u7ec4\u5408\u53d8\u6362\u77e9\u9635\uff1a\n$$\\mathbf{M} = \\mathbf{T}(1,-1,0) \\cdot \\mathbf{R}_z(45\u00b0) = \\begin{bmatrix}\n\\frac{\\sqrt{2}}{2} &amp; -\\frac{\\sqrt{2}}{2} &amp; 0 &amp; 1 \\\n\\frac{\\sqrt{2}}{2} &amp; \\frac{\\sqrt{2}}{2} &amp; 0 &amp; -1 \\\n0 &amp; 0 &amp; 1 &amp; 0 \\\n0 &amp; 0 &amp; 0 &amp; 1\n\\end{bmatrix}$$\n\u53d8\u6362\u540e\u7684\u70b9\uff1a\n$$P' = \\mathbf{M} \\cdot [2, 3, 1, 1]^T = [-\\frac{\\sqrt{2}}{2} + 1, \\frac{5\\sqrt{2}}{2} - 1, 1, 1]^T$$</p>\n</details>\n<p><strong>\u7ec3\u4e60 2.3</strong> \u63a8\u5bfc\u900f\u89c6\u6295\u5f71\u540e\uff0c\u4e3a\u4ec0\u4e48\u9700\u8981\u8fdb\u884c\u900f\u89c6\u9664\u6cd5\uff08\u9664\u4ee5 $w$ \u5206\u91cf\uff09\uff1f</p>\n<p><em>Hint</em>: \u8003\u8651\u76f8\u4f3c\u4e09\u89d2\u5f62\u539f\u7406\u548c\u9f50\u6b21\u5750\u6807\u7684\u610f\u4e49\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u900f\u89c6\u6295\u5f71\u6a21\u62df\u4e86\u5c0f\u5b54\u6210\u50cf\u539f\u7406\u3002\u5bf9\u4e8e\u70b9 $(x, y, z)$\uff0c\u6295\u5f71\u5230\u8fd1\u5e73\u9762 $z = n$ \u4e0a\u7684\u5750\u6807\u5e94\u8be5\u662f\uff1a\n$$x' = \\frac{nx}{z}, \\quad y' = \\frac{ny}{z}$$\n\u900f\u89c6\u6295\u5f71\u77e9\u9635\u5c06 $z$ \u5b58\u50a8\u5728 $w$ \u5206\u91cf\u4e2d\uff08\u901a\u5e38\u662f $-z$\uff09\uff0c\u6240\u4ee5\u9f50\u6b21\u5750\u6807\u53d8\u4e3a $(x\", y\", z\", -z)$\u3002\n\u900f\u89c6\u9664\u6cd5 $(x\"/w, y\"/w, z\"/w)$ \u6b63\u597d\u5b9e\u73b0\u4e86\u4e0a\u8ff0\u7684\u9664\u4ee5 $z$ \u64cd\u4f5c\uff0c\u5b8c\u6210\u4e86\u900f\u89c6\u6295\u5f71\u3002</p>\n</details>\n<h3 id=\"_49\">\u6311\u6218\u9898</h3>\n<p><strong>\u7ec3\u4e60 2.4</strong> \u8bbe\u8ba1\u4e00\u4e2a\u7b97\u6cd5\uff0c\u5c06\u4efb\u610f $4 \\times 4$ \u4eff\u5c04\u53d8\u6362\u77e9\u9635\u5206\u89e3\u4e3a\u5e73\u79fb\u3001\u65cb\u8f6c\u548c\u7f29\u653e\u7684\u7ec4\u5408\u3002\u5047\u8bbe\u6ca1\u6709\u9519\u5207\u53d8\u6362\u3002</p>\n<p><em>Hint</em>: \u5148\u63d0\u53d6\u5e73\u79fb\u90e8\u5206\uff0c\u7136\u540e\u5bf9 $3 \\times 3$ \u5b50\u77e9\u9635\u8fdb\u884c\u6781\u5206\u89e3\u6216QR\u5206\u89e3\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<ol>\n<li>\u63d0\u53d6\u5e73\u79fb\uff1a$\\mathbf{t} = [M_{14}, M_{24}, M_{34}]^T$</li>\n<li>\u63d0\u53d6 $3 \\times 3$ \u5b50\u77e9\u9635 $\\mathbf{A}$</li>\n<li>\u8ba1\u7b97\u7f29\u653e\uff1a\n   - $s_x = ||\\mathbf{a}_1||$, $s_y = ||\\mathbf{a}_2||$, $s_z = ||\\mathbf{a}_3||$\n   - \u5176\u4e2d $\\mathbf{a}_i$ \u662f $\\mathbf{A}$ \u7684\u7b2c $i$ \u5217</li>\n<li>\u8ba1\u7b97\u65cb\u8f6c\uff1a\n   - $\\mathbf{R} = \\mathbf{A} \\cdot \\text{diag}(1/s_x, 1/s_y, 1/s_z)$\n   - \u5982\u679c $\\det(\\mathbf{R}) &lt; 0$\uff0c\u5219\u6709\u53cd\u5c04\uff0c\u9700\u8981\u8c03\u6574\u4e00\u4e2a\u7f29\u653e\u56e0\u5b50\u7684\u7b26\u53f7</li>\n<li>\u9a8c\u8bc1\uff1a$\\mathbf{M} = \\mathbf{T}(\\mathbf{t}) \\cdot \\mathbf{R} \\cdot \\mathbf{S}(s_x, s_y, s_z)$</li>\n</ol>\n</details>\n<p><strong>\u7ec3\u4e60 2.5</strong> \u8bc1\u660e Rodrigues \u65cb\u8f6c\u516c\u5f0f\uff0c\u5e76\u8bf4\u660e\u5f53 $\\theta = 180\u00b0$ \u65f6\u7684\u7279\u6b8a\u60c5\u51b5\u3002</p>\n<p><em>Hint</em>: \u5c06\u5411\u91cf\u5206\u89e3\u4e3a\u5e73\u884c\u548c\u5782\u76f4\u4e8e\u65cb\u8f6c\u8f74\u7684\u5206\u91cf\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u8bbe\u5411\u91cf $\\mathbf{v}$ \u7ed5\u5355\u4f4d\u8f74 $\\mathbf{n}$ \u65cb\u8f6c $\\theta$ \u5f97\u5230 $\\mathbf{v}'$\u3002</p>\n<p>\u5206\u89e3\uff1a$\\mathbf{v} = \\mathbf{v}_\\parallel + \\mathbf{v}_\\perp$</p>\n<ul>\n<li>$\\mathbf{v}_\\parallel = (\\mathbf{n} \\cdot \\mathbf{v})\\mathbf{n}$</li>\n<li>$\\mathbf{v}_\\perp = \\mathbf{v} - \\mathbf{v}_\\parallel$</li>\n</ul>\n<p>\u65cb\u8f6c\u540e\uff1a</p>\n<ul>\n<li>$\\mathbf{v}'_\\parallel = \\mathbf{v}_\\parallel$\uff08\u4e0d\u53d8\uff09</li>\n<li>$\\mathbf{v}'_\\perp = \\cos\\theta \\mathbf{v}_\\perp + \\sin\\theta (\\mathbf{n} \\times \\mathbf{v}_\\perp)$</li>\n</ul>\n<p>\u5408\u5e76\u5f97\u5230 Rodrigues \u516c\u5f0f\u3002</p>\n<p>\u5f53 $\\theta = 180\u00b0$\uff1a\n$$\\mathbf{R}(\\mathbf{n}, 180\u00b0) = -\\mathbf{I} + 2\\mathbf{n}\\mathbf{n}^T$$\n\u8fd9\u662f\u5173\u4e8e\u8f74 $\\mathbf{n}$ \u7684\u53cd\u5c04\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e60 2.6</strong> \u7ed9\u5b9a\u89c6\u9525\u4f53\u7684\u516d\u4e2a\u5e73\u9762\uff0c\u63a8\u5bfc\u5982\u4f55\u5728\u9f50\u6b21\u88c1\u526a\u7a7a\u95f4\u8fdb\u884c\u89c6\u9525\u4f53\u88c1\u526a\u3002</p>\n<p><em>Hint</em>: \u5728\u88c1\u526a\u7a7a\u95f4\u4e2d\uff0c\u89c6\u9525\u4f53\u53d8\u6210\u4e86 $[-w, w]$ \u7684\u7acb\u65b9\u4f53\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>\u5728\u9f50\u6b21\u88c1\u526a\u7a7a\u95f4\uff0c\u70b9 $(x, y, z, w)$ \u5728\u89c6\u9525\u4f53\u5185\u5f53\u4e14\u4ec5\u5f53\uff1a</p>\n<ul>\n<li>$-w \\leq x \\leq w$\uff08\u5de6\u53f3\u5e73\u9762\uff09</li>\n<li>$-w \\leq y \\leq w$\uff08\u4e0a\u4e0b\u5e73\u9762\uff09</li>\n<li>$0 \\leq z \\leq w$\uff08\u8fd1\u8fdc\u5e73\u9762\uff0c\u5047\u8bbe\u4f7f\u7528 $[0,1]$ \u6df1\u5ea6\u8303\u56f4\uff09</li>\n</ul>\n<p>\u88c1\u526a\u6d4b\u8bd5\uff1a</p>\n<ol>\n<li>\u5982\u679c\u6240\u6709\u9876\u70b9\u90fd\u5728\u67d0\u4e2a\u5e73\u9762\u5916\u4fa7\uff0c\u5219\u5b8c\u5168\u5254\u9664</li>\n<li>\u5982\u679c\u6240\u6709\u9876\u70b9\u90fd\u5728\u5185\u4fa7\uff0c\u5219\u5b8c\u5168\u4fdd\u7559</li>\n<li>\u5426\u5219\u9700\u8981\u88c1\u526a\uff0c\u4f7f\u7528 Sutherland-Hodgman \u7b97\u6cd5</li>\n</ol>\n<p>\u4f18\u5316\uff1a\u4f7f\u7528 6 \u4f4d\u63a9\u7801\u7f16\u7801\u9876\u70b9\u76f8\u5bf9\u4e8e 6 \u4e2a\u5e73\u9762\u7684\u4f4d\u7f6e\u3002</p>\n</details>\n<p><strong>\u7ec3\u4e60 2.7</strong>\uff08\u5f00\u653e\u9898\uff09\u8ba8\u8bba\u5728\u865a\u62df\u73b0\u5b9e\uff08VR\uff09\u6e32\u67d3\u4e2d\uff0c\u5982\u4f55\u4fee\u6539\u6295\u5f71\u77e9\u9635\u4ee5\u9002\u5e94\u53cc\u76ee\u6e32\u67d3\u548c\u955c\u5934\u7578\u53d8\u6821\u6b63\u3002</p>\n<p><em>Hint</em>: \u8003\u8651\u975e\u5bf9\u79f0\u89c6\u9525\u4f53\u548c\u9006\u7578\u53d8\u9884\u5904\u7406\u3002</p>\n<details>\n<summary>\u7b54\u6848</summary>\n<p>VR\u6e32\u67d3\u7684\u7279\u6b8a\u8003\u8651\uff1a</p>\n<ol>\n<li>\n<p><strong>\u975e\u5bf9\u79f0\u6295\u5f71</strong>\uff1a\n   - \u5de6\u53f3\u773c\u7684\u89c6\u9525\u4f53\u4e0d\u662f\u4e2d\u5fc3\u5bf9\u79f0\u7684\n   - \u9700\u8981\u504f\u79fb\u6295\u5f71\u4e2d\u5fc3\uff1a\u4fee\u6539\u6295\u5f71\u77e9\u9635\u7684 $(1,3)$ \u548c $(2,3)$ \u5143\u7d20</p>\n</li>\n<li>\n<p><strong>\u955c\u5934\u7578\u53d8</strong>\uff1a\n   - \u6876\u5f62\u7578\u53d8\uff1a$r' = r(1 + k_1r^2 + k_2r^4)$\n   - \u9884\u7578\u53d8\uff1a\u5728\u6295\u5f71\u540e\u5e94\u7528\u53cd\u5411\u7578\u53d8\n   - \u6216\u4f7f\u7528\u9876\u70b9\u7740\u8272\u5668\u4e2d\u7684\u975e\u7ebf\u6027\u53d8\u6362</p>\n</li>\n<li>\n<p><strong>\u6027\u80fd\u4f18\u5316</strong>\uff1a\n   - \u56fa\u5b9a\u6ce8\u89c6\u70b9\u6e32\u67d3\uff08Foveated Rendering\uff09\n   - \u591a\u5206\u8fa8\u7387\u7740\u8272\uff08Multi-Resolution Shading\uff09\n   - \u5355\u901a\u9053\u7acb\u4f53\u6e32\u67d3\uff08Single Pass Stereo\uff09</p>\n</li>\n<li>\n<p><strong>\u65f6\u95f4\u626d\u66f2</strong>\uff08Timewarp\uff09\uff1a\n   - \u4f7f\u7528\u6700\u65b0\u7684\u5934\u90e8\u59ff\u6001\u66f4\u65b0\u5df2\u6e32\u67d3\u56fe\u50cf\n   - \u9700\u8981\u6df1\u5ea6\u4fe1\u606f\u8fdb\u884c\u91cd\u6295\u5f71</p>\n</li>\n</ol>\n</details>\n<h2 id=\"_50\">\u5e38\u89c1\u9677\u9631\u4e0e\u9519\u8bef</h2>\n<h3 id=\"1\">1. \u53d8\u6362\u987a\u5e8f\u9519\u8bef</h3>\n<pre class=\"codehilite\"><code>\u9519\u8bef\uff1aModel \u00d7 View \u00d7 Projection\n\u6b63\u786e\uff1aProjection \u00d7 View \u00d7 Model\n</code></pre>\n\n<p>\u8bb0\u5fc6\u6280\u5de7\uff1a\u4ece\u53f3\u5230\u5de6\u8bfb\uff0c\"\u5148\u6a21\u578b\u53d8\u6362\uff0c\u518d\u89c6\u56fe\u53d8\u6362\uff0c\u6700\u540e\u6295\u5f71\"</p>\n<h3 id=\"2-vs\">2. \u5217\u4e3b\u5e8f vs \u884c\u4e3b\u5e8f</h3>\n<ul>\n<li>OpenGL\uff1a\u5217\u4e3b\u5e8f\uff0c$\\mathbf{v}' = \\mathbf{M}\\mathbf{v}$</li>\n<li>DirectX\uff1a\u884c\u4e3b\u5e8f\uff0c$\\mathbf{v}' = \\mathbf{v}\\mathbf{M}^T$</li>\n<li>\u6df7\u6dc6\u4f1a\u5bfc\u81f4\u53d8\u6362\u5b8c\u5168\u9519\u8bef</li>\n</ul>\n<h3 id=\"3\">3. \u6cd5\u5411\u91cf\u53d8\u6362\u9519\u8bef</h3>\n<pre class=\"codehilite\"><code>\u9519\u8bef\uff1an' = M \u00d7 n\n\u6b63\u786e\uff1an' = (M^(-1))^T \u00d7 n\n</code></pre>\n\n<p>\u53ea\u6709\u5728\u4ec5\u5305\u542b\u65cb\u8f6c\u548c\u5747\u5300\u7f29\u653e\u65f6\u624d\u80fd\u76f4\u63a5\u4f7f\u7528\u6a21\u578b\u77e9\u9635</p>\n<h3 id=\"4\">4. \u6df1\u5ea6\u7cbe\u5ea6\u95ee\u9898</h3>\n<ul>\n<li>\u8fd1\u8fdc\u5e73\u9762\u6bd4\u4f8b\u4e0d\u5f53\uff08\u5982 0.01 \u5230 10000\uff09</li>\n<li>\u89e3\u51b3\uff1a\u4f7f\u7528\u5bf9\u6570\u6df1\u5ea6\u6216\u53cd\u5411 Z</li>\n</ul>\n<h3 id=\"5-gimbal-lock\">5. \u4e07\u5411\u9501\uff08Gimbal Lock\uff09</h3>\n<ul>\n<li>\u4f7f\u7528\u6b27\u62c9\u89d2\u65f6\u7684\u5947\u5f02\u6027</li>\n<li>\u89e3\u51b3\uff1a\u4f7f\u7528\u56db\u5143\u6570\u6216\u8f74\u89d2\u8868\u793a</li>\n</ul>\n<h3 id=\"6\">6. \u6d6e\u70b9\u7d2f\u79ef\u8bef\u5dee</h3>\n<ul>\n<li>\u8fde\u7eed\u5c0f\u89d2\u5ea6\u65cb\u8f6c\u5bfc\u81f4\u77e9\u9635\u4e0d\u518d\u6b63\u4ea4</li>\n<li>\u89e3\u51b3\uff1a\u5b9a\u671f\u91cd\u65b0\u6b63\u4ea4\u5316</li>\n</ul>\n<h2 id=\"_51\">\u6700\u4f73\u5b9e\u8df5\u68c0\u67e5\u6e05\u5355</h2>\n<h3 id=\"_52\">\u8bbe\u8ba1\u9636\u6bb5</h3>\n<ul>\n<li>[ ] \u9009\u62e9\u5408\u9002\u7684\u5750\u6807\u7cfb\uff08\u5de6\u624b/\u53f3\u624b\uff09</li>\n<li>[ ] \u786e\u5b9a\u53d8\u6362\u987a\u5e8f\u548c\u77e9\u9635\u5b58\u50a8\u683c\u5f0f</li>\n<li>[ ] \u8003\u8651\u6570\u503c\u7cbe\u5ea6\u9700\u6c42</li>\n<li>[ ] \u8bbe\u8ba1\u53d8\u6362\u7f13\u5b58\u7b56\u7565</li>\n</ul>\n<h3 id=\"_53\">\u5b9e\u73b0\u9636\u6bb5</h3>\n<ul>\n<li>[ ] \u4f7f\u7528\u9f50\u6b21\u5750\u6807\u7edf\u4e00\u8868\u793a</li>\n<li>[ ] \u9884\u8ba1\u7b97\u9759\u6001\u53d8\u6362\u77e9\u9635</li>\n<li>[ ] \u6b63\u786e\u5904\u7406\u6cd5\u5411\u91cf\u53d8\u6362</li>\n<li>[ ] \u5b9e\u73b0\u77e9\u9635\u6b63\u4ea4\u5316\u673a\u5236</li>\n<li>[ ] \u5229\u7528SIMD\u6307\u4ee4\u4f18\u5316</li>\n</ul>\n<h3 id=\"_54\">\u4f18\u5316\u9636\u6bb5</h3>\n<ul>\n<li>[ ] \u6700\u5c0f\u5316\u77e9\u9635\u4e58\u6cd5\u6b21\u6570</li>\n<li>[ ] \u4f7f\u7528\u573a\u666f\u56fe\u51cf\u5c11\u91cd\u590d\u8ba1\u7b97</li>\n<li>[ ] \u5b9e\u73b0\u89c6\u9525\u4f53\u88c1\u526a</li>\n<li>[ ] \u8003\u8651GPU\u5b9e\u4f8b\u5316</li>\n<li>[ ] profile\u77e9\u9635\u8fd0\u7b97\u70ed\u70b9</li>\n</ul>\n<h3 id=\"_55\">\u8c03\u8bd5\u9636\u6bb5</h3>\n<ul>\n<li>[ ] \u9a8c\u8bc1\u77e9\u9635\u6b63\u4ea4\u6027</li>\n<li>[ ] \u68c0\u67e5\u53d8\u6362\u987a\u5e8f</li>\n<li>[ ] \u6d4b\u8bd5\u6781\u7aef\u60c5\u51b5\uff08\u5927\u5750\u6807\u503c\u3001\u5c0f\u89d2\u5ea6\uff09</li>\n<li>[ ] \u9a8c\u8bc1\u6295\u5f71\u77e9\u9635\u7684\u8fd1\u8fdc\u5e73\u9762</li>\n<li>[ ] \u68c0\u67e5\u6df1\u5ea6\u7cbe\u5ea6\u95ee\u9898</li>\n</ul>"
  }
}